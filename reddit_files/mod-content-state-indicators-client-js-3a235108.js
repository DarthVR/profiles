SML.di("./faceplate-tooltip-f30979fb.js",import.meta.url,"faceplatetooltipf30979fb");SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./comment-5b02ad76.js",import.meta.url,"comment5b02ad76");SML.di("./distinguished-tags-1c4757ea.js",import.meta.url,"distinguishedtags1c4757ea");SML.di("./overflow-menu-actions-f8d12b95.js",import.meta.url,"overflowmenuactionsf8d12b95");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./expandable-section-header-41e0cfd1.js",import.meta.url,"expandablesectionheader41e0cfd1");SML.di("./links-22118b0c.js",import.meta.url,"links22118b0c");SML.di("./select-controller-4c63b3e8.js",import.meta.url,"selectcontroller4c63b3e8");SML.di("./table-pagination-77cf692d.js",import.meta.url,"tablepagination77cf692d");SML.di("./mod-dropdown-closer-6b014290.js",import.meta.url,"moddropdowncloser6b014290");SML.di("./user-flair-fe275854.js",import.meta.url,"userflairfe275854");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");
SML.dm("modcontentstateindicatorsclientjs3a235108",["shelle48e5956","comment5b02ad76","distinguishedtags1c4757ea","overflowmenuactionsf8d12b95","iconc33661e6","expandablesectionheader41e0cfd1","links22118b0c","faceplatetooltipf30979fb","selectcontroller4c63b3e8","tablepagination77cf692d","moddropdowncloser6b014290","userflairfe275854","agegatestandaloneclientjsb13e879d"],(async(t,e,o,s,n,r,a)=>{let i=class extends(t.C(n.s)){constructor(){super(...arguments),this.status=o.R.Reported,this.handlePostUpdate=({postId:t,action:e,value:n})=>{t===this.thingId&&e===s.a.ignoreReports&&(this.status=n?o.R.Ignored:o.R.Dismissed)},this.handleCommentUpdate=({commentId:t,action:s,value:n})=>{t===this.thingId&&s===e.C.ignoreReports&&(this.status=n?o.R.Ignored:o.R.Dismissed)}}connectedCallback(){super.connectedCallback(),this.subscribe(t.T.PostUpdated,this.handlePostUpdate),this.subscribe(t.T.CommentUpdated,this.handleCommentUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(t.T.PostUpdated,this.handlePostUpdate),this.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdate)}getStyle(){return n.o({"--list-icon-color":this.status===o.R.Reported?"var(--shreddit-color-mods-reported-onBackground)":"var(--color-secondary-onBackground)"})}render(){return this.status===o.R.Reported?n.x`<div class="bg-mods-reported-background hover:bg-mods-reported-background-hover" style="${this.getStyle()}"> <slot></slot> </div>`:n.x`<details class="max-w-fit bg-secondary-background hover:bg-secondary-background-hover" style="${this.getStyle()}"> <summary class="cursor-pointer block list-none" @click="${t=>t.stopPropagation()}"> <slot name="${this.status}"></slot> </summary> <slot></slot> </details>`}};i.styles=[n.a`summary::-webkit-details-marker{display:none}`,t.t],t._([t.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),t._([t.n({type:String})],i.prototype,"status",void 0),i=t._([t.e("reports-summary-wrapper")],i);const d=n.s;let c=class extends d{constructor(){super(...arguments),this.contentId="",this.isSnoozed=!1,this.reportReason="",this.pubsub=new t.P(this),this.onPostUpdateAction=t=>{if(t.postId!==this.contentId)return;const{action:e}=t;switch(e){case s.a.snoozeReporter:this.isSnoozed=!0;break;case s.a.unsnoozeReporter:this.isSnoozed=!1}},this.onCommentUpdateAction=t=>{if(t.commentId!==this.contentId)return;const{action:o}=t;switch(o){case e.C.snoozeReporter:this.isSnoozed=!0;break;case e.C.unsnoozeReporter:this.isSnoozed=!1}}}connectedCallback(){super.connectedCallback(),a.l(this.contentId)?this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction):this.pubsub.subscribe(t.T.CommentUpdated,this.onCommentUpdateAction)}disconnectedCallback(){super.disconnectedCallback(),a.l(this.contentId)?this.pubsub.unsubscribe(t.T.PostUpdated,this.onPostUpdateAction):this.pubsub.unsubscribe(t.T.CommentUpdated,this.onCommentUpdateAction)}renderReportOverflowMenu(){return n.x` <mod-dropdown-closer> <faceplate-dropdown-menu @click="${t=>t.stopPropagation()}" position="bottom-end"> ${t.r({appearance:"plain",size:t.s.ExtraSmall,children:n.ai({size:n.I.ExtraSmall})})} <faceplate-menu slot="menu"> ${r.l({label:this.isSnoozed?"Un-snooze reporter":"Snooze reporter",description:this.isSnoozed?"Receive reports from this user again":"Pause reports from this user for 7 days",leadingIcon:n.aF({size:n.I.Small}),onClick:this.toggleSnooze})} </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer> `}sendTrackingEvent(e,o,s){const n=s?"snoozereports":"unsnoozereports",r=a.l(e)?"post":"comment",i=a.l(e)?e:null,d=a.l(e)?null:e,c=t.b({source:"moderator",action:n,noun:r},{...i&&{post:{id:i}},...d&&{comment:{id:d}},...o&&{action_info:{reason:o}}});t.a(this,c)}showToast({success:e,isSnoozed:o}){const s=e?o?"Reports from these users will be paused":"Reports from these users will be resumed":"Failed to update reports",n=e?t.x.info:t.x.error,r=t.c("faceplate-alert",{level:n,message:s});this.dispatchEvent(r)}async updateReportState(e){try{const{data:o}=await t.B({operation:t.O.UpdateReportState,variables:{input:{itemId:this.contentId,reportText:this.reportReason,isSnoozed:e}}});return o?.updateReport?.ok??!1}catch(t){return!1}}async toggleSnooze(o){const n=!this.isSnoozed;this.sendTrackingEvent(this.contentId,this.reportReason,n);const r=await this.updateReportState(n);r&&(n?a.l(this.contentId)?this.pubsub.publish(t.T.PostUpdated,{postId:this.contentId,action:s.a.snoozeReporter,value:!0}):this.pubsub.publish(t.T.CommentUpdated,{commentId:this.contentId,action:e.C.snoozeReporter,value:!0}):a.l(this.contentId)?this.pubsub.publish(t.T.PostUpdated,{postId:this.contentId,action:s.a.unsnoozeReporter,value:!0}):this.pubsub.publish(t.T.CommentUpdated,{commentId:this.contentId,action:e.C.unsnoozeReporter,value:!0})),this.showToast({success:r,isSnoozed:this.isSnoozed})}render(){const e={"flex items-center m-0 p-0":!0,"bg-secondary-background":this.isSnoozed};return n.x`<li class="${t.U(e)}"> <slot name="${n.l(this.isSnoozed?"snoozed":void 0)}" class="flex-auto block"></slot> ${this.renderReportOverflowMenu()} </li> `}};c.styles=[t.t],t._([t.n({type:String,attribute:"content-id"})],c.prototype,"contentId",void 0),t._([t.n({type:Boolean,attribute:"is-snoozed"})],c.prototype,"isSnoozed",void 0),t._([t.n({type:String,attribute:"report-reason"})],c.prototype,"reportReason",void 0),c=t._([t.e("user-report-summary")],c)}));