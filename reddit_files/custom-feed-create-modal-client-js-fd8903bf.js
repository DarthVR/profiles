SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./utils-57a7018c.js",import.meta.url,"utils57a7018c");SML.di("./faceplate-textarea-input-29f541e5.js",import.meta.url,"faceplatetextareainput29f541e5");SML.di("./expandable-section-header-41e0cfd1.js",import.meta.url,"expandablesectionheader41e0cfd1");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./index-970155ae.js",import.meta.url,"index970155ae");SML.di("./faceplate-form-cff507f5.js",import.meta.url,"faceplateformcff507f5");SML.di("./text-input-9c3f45be.js",import.meta.url,"textinput9c3f45be");SML.di("./community-picker-f331f77f.js",import.meta.url,"communitypickerf331f77f");SML.di("./constants-9e09f052.js",import.meta.url,"constants9e09f052");SML.di("./helpers-4792ac4d.js",import.meta.url,"helpers4792ac4d");
SML.dm("customfeedcreatemodalclientjsfd8903bf",["shelle48e5956","utils57a7018c","faceplatetextareainput29f541e5","expandablesectionheader41e0cfd1","agegatestandaloneclientjsb13e879d","iconc33661e6","index970155ae","faceplateformcff507f5","textinput9c3f45be","communitypickerf331f77f","constants9e09f052","helpers4792ac4d"],(async(e,t,i,s,a,l)=>{const o=e.g(l.s);let r=window.location,n=class extends o{constructor(){super(...arguments),this.visibility=e.gp.Public,this.subredditIds="",this.isCreateMode=!1,this.isCopyMode=!1,this.displayNameInput=e.aq(),this.descriptionInput=e.aq(),this.visibilityInput=e.aq(),this.isPrivate=!1,this.showOnProfile=!1,this._events=new e.E(this),this.handleResponse=this._events.define("faceplate-response",(async t=>{(await t.detail.response.clone().text()).includes("faceplate-alert")||(this.fireCloseDialogEvent(),e.p(e.T.CustomFeedUpdated,{label:this.label,name:this.displayNameInput.value?.value,visibility:this.visibilityInput.value?.value,descriptionMd:this.descriptionInput.value?.value}),e.bH(this,{message:"Custom feed description updated"}))})),this.handleSubmit=this._events.define("faceplate-request",(async t=>{if(this.isCreateMode||this.isCopyMode){t.preventDefault();try{const i=t.detail.request.body,s=i?.get("subredditIds")?.toString().split(",").filter((e=>e.startsWith("t5_")))||[],{data:{createMultireddit:l}}=await e.B({operation:e.O.CustomFeedCreate,variables:{input:{displayName:i?.get("displayName")?.toString()??"",descriptionMd:i?.get("descriptionMd")?.toString()??"",visibility:i?.get("visibility")?.toString()??e.gp.Public,subredditIds:s}}});if(l){const{ok:t,multireddit:i}=l;if(t&&i?.path){e.p(e.T.CustomFeedCreated),this.trackEvent(this.isCopyMode?a.cf(i.path):a.cg(i.path));const t=new URL(r.href);return t.pathname=i.path,void(r.href=t.href)}}throw new Error("error creating custom feed")}catch(t){const i=this.isCopyMode?"Failed to copy custom feed":"Failed to create custom feed";this.dispatchEvent(e.c("faceplate-alert",{level:e.x.error,cause:"uncategorized",message:i}))}}}))}firstUpdated(){this.isPrivate="PRIVATE"===this.visibility,this.showOnProfile="PUBLIC"===this.visibility,this.isCreateMode||this.isCopyMode||this._events.define("faceplate-alert",(e=>{e.detail.message="Failed to save custom feed"}))}willUpdate(t){if(this.hasUpdated){const i=t.has("isPrivate"),s=t.has("showOnProfile");(i||s)&&(this.visibility=i?this.isPrivate?e.gp.Private:e.gp.Public:this.showOnProfile?e.gp.Public:e.gp.Hidden,i&&(this.showOnProfile=this.visibility===e.gp.Public))}}fireCloseDialogEvent(){this.dispatchEvent(new CustomEvent("close-dialog",{composed:!0,bubbles:!0}))}handleCancelClick(){this.fireCloseDialogEvent()}renderForm(){return l.x` <faceplate-form action="/svc/shreddit/custom-feed-update-details/" method="POST" target="custom-feed-description" partial-mode="${e.o.Replace}"> <input type="hidden" name="visibility" ${e.as(this.visibilityInput)} value="${this.visibility}"> <input type="hidden" name="label" value="${this.label}"> <input type="hidden" name="subredditIds" value="${this.subredditIds}"> <div class="flex flex-col gap-sm pt-sm"> <faceplate-text-input appearance="${t.T.SECONDARY}" name="displayName" ${e.as(this.displayNameInput)} required value="${this.displayName}" maxlength="${50}" character-count> <span slot="label">Name</span> </faceplate-text-input> <faceplate-textarea-input appearance="${i.a.SECONDARY}" class="relative w-full" name="descriptionMd" ${e.as(this.descriptionInput)} value="${this.description}" maxlength="${500}" character-count> <span slot="label">Description</span> </faceplate-textarea-input> ${s.l({onClick:()=>this.isPrivate=!this.isPrivate,label:"Make private",attributes:{role:"menuitemcheckbox",className:"group"},size:s.L.Medium,trailingSlot:l.x` <faceplate-switch-input name="" data-testid="private-toggle" ?checked="${this.isPrivate}"> </faceplate-switch-input> `,description:"Only viewable by you"})} ${s.l({onClick:()=>{this.isPrivate||(this.showOnProfile=!this.showOnProfile)},label:"Show on profile",attributes:{role:"menuitemcheckbox"},size:s.L.Medium,trailingSlot:l.x` <faceplate-switch-input name="" data-testid="show-on-profile-toggle" ?checked="${this.showOnProfile}" ?disabled="${this.isPrivate}"> </faceplate-switch-input> `,description:"Display this feed on your profile so others can find it"})} <div class="flex justify-end gap-xs"> ${e.r({appearance:"secondary",size:e.s.Small,children:"Cancel",attributes:{type:"button",onclick:this.handleCancelClick}})} ${e.r({appearance:"primary",size:e.s.Small,children:"Submit",attributes:{type:"submit"}})} </div> </div> </faceplate-form> `}render(){return this.renderForm()}};n.styles=[e.t],e._([e.n({type:String})],n.prototype,"label",void 0),e._([e.n({type:String,attribute:"display-name"})],n.prototype,"displayName",void 0),e._([e.n({type:String})],n.prototype,"description",void 0),e._([e.n({type:String,reflect:!0})],n.prototype,"visibility",void 0),e._([e.n({type:String,attribute:"subreddit-ids"})],n.prototype,"subredditIds",void 0),e._([e.n({type:Boolean,attribute:"create"})],n.prototype,"isCreateMode",void 0),e._([e.n({type:Boolean,attribute:"copy"})],n.prototype,"isCopyMode",void 0),e._([e.d()],n.prototype,"isPrivate",void 0),e._([e.d()],n.prototype,"showOnProfile",void 0),n=e._([e.e("custom-feed-details-form")],n)}));