SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");
SML.dm("loadmoreobserverb5914494",["shelle48e5956","iconc33661e6"],(async(e,r)=>{let s=class extends(e.W(r.s)){connectedCallback(){super.connectedCallback(),this.cursor&&this.enableObserver()}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver()}observerIsIntersectingCallback(){if(this.disableObserver(),!this.cursor)return;const e=document.querySelector(`#partial-more-posts-${this.cursor.replaceAll("=","")}`);e?.load()}render(){return r.x`<slot></slot>`}};e._([e.n({type:String})],s.prototype,"cursor",void 0),s=e._([e.e("shreddit-feed-load-more-observer")],s)}));
SML.dm("shredditfeedpageloadingf5f13520",["shelle48e5956","iconc33661e6"],(async(e,a)=>{let t=class extends(e.g(a.s)){constructor(){super(...arguments),this.showErrorMessage=!1,this.handleFaceplateError=a=>{const t=function(e){return"faceplate-error"===e.type}(a)?a.detail.message:"page load returned no data";this.trackEvent(e.b({source:"feed",action:"failed",noun:"page_load"},{action_info:{reason:t,page_type:this.pageType}})),this.showErrorMessage=!0},this.handleFaceplateLoadStart=e=>{this.showErrorMessage=!1},this.handleRetry=()=>{this.showErrorMessage=!1,this.faceplatePartial?.load()}}get faceplatePartial(){return this.closest("faceplate-partial")}connectedCallback(){super.connectedCallback(),this.faceplatePartial?.addEventListener("faceplate-error",this.handleFaceplateError),this.faceplatePartial?.addEventListener("faceplate-load",this.handleFaceplateError),this.faceplatePartial?.addEventListener("faceplate-load-start",this.handleFaceplateLoadStart)}disconnectedCallback(){super.disconnectedCallback(),this.faceplatePartial?.removeEventListener("faceplate-error",this.handleFaceplateError),this.faceplatePartial?.removeEventListener("faceplate-load",this.handleFaceplateError),this.faceplatePartial?.removeEventListener("faceplate-load-start",this.handleFaceplateLoadStart)}render(){return a.x` ${this.showErrorMessage?this.renderErrorState():this.renderLoadingState()} `}renderLoadingState(){return a.x`<shreddit-loading></shreddit-loading>`}renderErrorState(){return a.x` <div class="flex flex-col items-center justify-center h-[192px] text-center m-md"> <div class="mb-md text-14 font-semibold"> There was an error loading the next page, please try again. </div> ${e.r({appearance:"primary",size:e.s.Large,children:"Retry",attributes:{onclick:this.handleRetry}})} </div> `}};t.styles=[e.t],e._([e.n({type:String,attribute:"page-type"})],t.prototype,"pageType",void 0),e._([e.d()],t.prototype,"showErrorMessage",void 0),t=e._([e.e("shreddit-feed-page-loading")],t)}));
SML.dm("modqueuepdpclientjs243c5481",["shelle48e5956","iconc33661e6"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this.size=1/0,this.target="",this.isBatching=!1}static get styles(){return e.a`:host{display:block}`}render(){return e.x` <slot></slot> `}getCurrentTarget(t=this){return this.target&&t.querySelector(this.target)||t}async batchInsert(e){if(this.isBatching)throw new Error("Cannot call batchInsert while batching is already in progress");const s=this.getCurrentTarget();if(!(s instanceof HTMLElement))throw new TypeError("Target element must be instance of HTMLElement");const i=t.c("faceplate-batch-begin",{size:this.size,count:e.length});if(s.dispatchEvent(i),i.defaultPrevented)return;this.isBatching=!0;const n=()=>{if(e.length){const t=e.slice(0,this.size),i=document.createDocumentFragment();for(let s=0;s<t.length;s++)i.appendChild(e[s]);s.appendChild(i)}e.length>this.size?(e=e.slice(this.size),window.setTimeout(n)):(s.style.willChange="unset",this.isBatching=!1)};s.style.willChange="contents",await n()}};t._([t.n({type:Number})],s.prototype,"size",void 0),t._([t.n({type:String})],s.prototype,"target",void 0),s=t._([t.e("faceplate-batch")],s)}));
SML.dm("agegatestandaloneclientjsb13e879d",["shelle48e5956","iconc33661e6"],(async(e,t)=>{const n=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;if(0===e.childElementCount&&!(e instanceof HTMLSlotElement))return!1;if(e.contains(t))return!0;if(e instanceof HTMLSlotElement&&e.assignedElements().some((e=>n(e,t))))return!0;if(e instanceof Element&&e.shadowRoot&&n(e.shadowRoot,t))return!0;for(const o of e.querySelectorAll("slot"))if(o.assignedElements().some((e=>n(e,t))))return!0;return!1};const o=new WeakMap;function r(e,t=document){let n=o.get(t);n||(n=new Map,o.set(t,n));let r=n.get(e);return r||(r={key:e},n.set(e,r)),r}const i=Symbol("mixins/pagination"),a=function(t){const n=new WeakMap,o=e.ha();return{getContextKey:(e,t)=>r(e,t),appointLeader(e,r){if(n.has(r)){if(n.get(r).isConnected)throw new Error(`Cannot appoint leader for key "${r.key}" in the same context twice.`)}n.set(r,e);const i=o.getRegisteredElements(r);if(i)for(const n of i)t(e,n)},dismissLeader(e,t){const o=n.get(t);o&&o===e&&n.delete(t)},getLeader:e=>n.get(e),registerFollower(e,r){o.register(r,e);const i=n.get(r);i&&t(i,e)},unregisterFollower(e,t){o.unregister(t,e)},getFollowers:e=>o.getRegisteredElements(e)}}(((e,t)=>{t.syncPagination(e)}));const s=new WeakMap;const l=({selected:n,selectedIcon:o,size:r=e.s.Medium,unselectedIcon:i,...a})=>{const{html:s}=t.g();return e.he({...a,attributes:{...a.attributes},size:r,selected:n,leadingIcon:n?o:i,trailingIcon:s`<span class="inline-flex dropdown-icon ${a.children&&"ml-2xs"}"> ${t.Y({size:r===e.s.Small?t.I.Small:t.I.Medium})} </span>`,dropdown:!0})};function c(e){const t={};return(n,o)=>{const r=((e,t)=>t?e+JSON.stringify(t):e)(n,o);return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=new e(n,o)}}const d=c(Intl.NumberFormat),u=c(Intl.RelativeTimeFormat),h=c(Intl.DateTimeFormat);let m="RelativeTimeFormat"in Intl;const p=6e4;function f(e){const t=Math.abs(e.diff);switch(e.unit){case"minutes":return`${t} min. ago`;case"hours":return`${t} hr. ago`;case"days":return t>1?`${t} days ago`:`${t} day ago`;case"months":return`${t} mo. ago`;case"years":return`${t} yr. ago`;default:!function(e){throw new Error("Unexpected object: "+e)}(e.unit)}}const g=()=>e.v.get(e.kc),b=()=>e.v.get(e.ke),v=t=>t.placement===e.b1.FEED,w=t=>t.placement===e.b1.COMMENTS_PAGE||t.placement===e.b1.COMMENT_TREES,_=({post:t,placement:n})=>t&&w(t)&&t.isPdpCombined?e.b1.COMMENTS_PAGE:n||t?.placement,x=({postId:t,adMedia:n,impressionId:o,post:r,clickLocation:i=e.A.UNKNOWN,galleryIndex:a,page_request_id:s,placement:l})=>{const c={post:{id:t,subreddit_id:r?.subredditId,author_id:r?.authorId,promoted:!0},ad_click:{location:i},ad_metadata:{impression_id:o,placement:_({post:r,placement:l})},feed:e.hW(),action_info:{page_request_id:s}};return r&&v(r)&&(c.action_info||(c.action_info={}),c.action_info.position=r.feedIndex,c.screen||(c.screen={}),c.screen={},c.screen.view_type=e.hX(r.viewType)),r?.galleryItems&&(c.gallery={position:a,num_items:r.galleryItems.length}),r?.countryCode&&(c.geo={country_code:r.countryCode}),n&&(c.media={height:Math.round(n?.height),width:Math.round(n?.width)}),e.b(e.kf,c)},C=t=>{const n=t.closest("shreddit-ad-post")||t.closest("shreddit-comments-page-ad")||t.closest("ad-event-tracker")||t.closest("shreddit-sidebar-ad");if(n)return n;{const n=t.getRootNode(),o=n instanceof ShadowRoot?n.host:null;return o?.tagName===e.kg||o?.tagName===e.kh?o:null}};const y="combined";function E(e){return e.assignedNodes({flatten:!0}).filter((e=>!!(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/)))).length>0}function $(e){return void 0===e?e:e.startsWith("selector(")?e.replace(/^selector\(/,"").replace(/\)$/,""):e}function I(e){return{...e,trigger:"object"==typeof e.trigger?S(e.trigger):e.trigger,target:$(e.target),template:$(e.template),triggerElem:$(e.triggerElem)}}function S(e){return"event"in e?e.filters?`event(${e.event}(${JSON.stringify(e.filters)}))`:`event(${e.event})`:"topic"in e?e.filters?`subscribe(${e.topic}(${JSON.stringify(e.filters)}))`:`subscribe(${e.topic})`:""}function M(e){return n=>e(t.x,t.l,n)}const k=M((function(e,t,n){return e`<ac-activate ?once="${(n=I(n)).once}" ?scoped="${n.scoped}" args="${t(n.args?JSON.stringify(n.args):void 0)}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" name="${n.name.toString()}" query-params="${t(n.queryParams?JSON.stringify(n.queryParams):void 0)}" render-mode="${t(n.renderMode)}" route-params="${t(n.routeParams?JSON.stringify(n.routeParams):void 0)}" target="${t(n.target)}" throttle="${t(n.throttle)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}"></ac-activate>`})),T=M((function(e,t,n){return e`<ac-dispatch ?once="${(n=I(n)).once}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" detail="${t(n.detail?JSON.stringify(n.detail):void 0)}" event-name="${n.eventName}" target="${t(n.target)}" throttle="${t(n.throttle)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}"></ac-dispatch>`})),N=M((function(e,t,n){return e`<ac-gql-mutate ?once="${(n=I(n)).once}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" id="${t(n.id)}" operation="${n.operation}" throttle="${t(n.throttle)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}" variables="${t(n.variables?JSON.stringify(n.variables):void 0)}"></ac-gql-mutate>`}));function L(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var o=e[n];if("*"!==o&&"+"!==o&&"?"!==o)if("\\"!==o)if("{"!==o)if("}"!==o)if(":"!==o)if("("!==o)t.push({type:"CHAR",index:n,value:e[n++]});else{var r=1,i="";if("?"===e[s=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--r){s++;break}}else if("("===e[s]&&(r++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));i+=e[s++]}else i+=e[s++]+e[s++];if(r)throw new TypeError("Unbalanced pattern at ".concat(n));if(!i)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:i}),n=s}else{for(var a="",s=n+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:a}),n=s}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),o=t.prefixes,r=void 0===o?"./":o,i="[^".concat(function(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}(t.delimiter||"/#?"),"]+?"),a=[],s=0,l=0,c="",d=function(e){if(l<n.length&&n[l].type===e)return n[l++].value},u=function(e){var t=d(e);if(void 0!==t)return t;var o=n[l],r=o.type,i=o.index;throw new TypeError("Unexpected ".concat(r," at ").concat(i,", expected ").concat(e))},h=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};l<n.length;){var m=d("CHAR"),p=d("NAME"),f=d("PATTERN");if(p||f){var g=m||"";-1===r.indexOf(g)&&(c+=g,g=""),c&&(a.push(c),c=""),a.push({name:p||s++,prefix:g,suffix:"",pattern:f||i,modifier:d("MODIFIER")||""})}else{var b=m||d("ESCAPED_CHAR");if(b)c+=b;else if(c&&(a.push(c),c=""),d("OPEN")){g=h();var v=d("NAME")||"",w=d("PATTERN")||"",_=h();u("CLOSE"),a.push({name:v||(w?s++:""),pattern:v&&!w?i:w,prefix:g,suffix:_,modifier:d("MODIFIER")||""})}else u("END")}}return a}function D(e,t){return function(e,t){void 0===t&&(t={});var n=function(e){return e&&e.sensitive?"":"i"}(t),o=t.encode,r=void 0===o?function(e){return e}:o,i=t.validate,a=void 0===i||i,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),n)}));return function(t){for(var n="",o=0;o<e.length;o++){var i=e[o];if("string"!=typeof i){var l=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,d="*"===i.modifier||"+"===i.modifier;if(Array.isArray(l)){if(!d)throw new TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===l.length){if(c)continue;throw new TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var u=0;u<l.length;u++){var h=r(l[u],i);if(a&&!s[o].test(h))throw new TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(h,'"'));n+=i.prefix+h+i.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var m=d?"an array":"a string";throw new TypeError('Expected "'.concat(i.name,'" to be ').concat(m))}}else{h=r(String(l),i);if(a&&!s[o].test(h))throw new TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(h,'"'));n+=i.prefix+h+i.suffix}}else n+=i}return n}}(L(e,t),t)}const F="subredditName",A=["r","x"],P=A.join("|");const O=t.e(class extends t.i{constructor(){super(...arguments),this.key=t.A}render(e,t){return this.key=e,t}update(e,[n,o]){return n!==this.key&&(t.bN(e),this.key=n),o}});const R={plain:"plain",plainInverted:"plainInverted",error:"destructive",brand:"brand",caution:"plain",success:"success"};const U=e=>!e.hasAttribute("disabled"),z=e=>e.tabIndex=0,B=e=>e.tabIndex=-1,V=e=>0===e.tabIndex&&U(e),H=e=>(z(e),e.focus(),e),j=e=>(B(e),e),q=e=>{for(let t=0;t<e.length;t++){const n=e[t];if(V(n))return[n,t]}return null},G=e=>{for(const t of e)if(U(t))return t;return null},Z=e=>{const t=G(e);return t?H(t):null},W=e=>{const t=(e=>{for(let t=0;t<e.length;t++){const n=e[e.length-1-t];if(U(n))return n}return null})(e);return t?H(t):null},J=Symbol.for("rpl-menu-item");const K={xs:12,sm:16,md:20,lg:24,xl:32,"2xl":48},Q=({path:e,iconName:n,defaultSvgFill:o="currentColor",defaultPathFill:r})=>({className:i,size:a="md",svgFill:s=o,pathFill:l=r}={size:"md",pathFill:r})=>t.x`<svg rpl class="${t.l(i)}" fill="${s}" height="${K[a]}" width="${K[a]}" icon-name="${n}" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"> ${e({pathFill:l})} </svg>`,X=Q({iconName:"caret-right-outline",defaultSvgFill:"currentColor",defaultPathFill:void 0,path:({pathFill:e})=>t.e5`<path d="m7.942 15.442-.884-.884L11.616 10 7.058 5.442l.884-.884 5 5a.624.624 0 0 1 0 .884l-5 5Z" fill="${t.l(e)}"></path>`}),Y=Q({iconName:"caret-left-outline",defaultSvgFill:"currentColor",defaultPathFill:void 0,path:e=>t.e5`<path d="m12.058 15.442-5-5a.624.624 0 0 1 0-.884l5-5 .884.884L8.384 10l4.558 4.558-.884.884Z" fill="${t.l(e.pathFill)}"></path>`}),ee=Q({iconName:"checkmark-fill",defaultSvgFill:"none",defaultPathFill:"currentColor",path:e=>t.e5`<path d="M7.5 15.958a1.102 1.102 0 0 1-.778-.322l-5.429-5.429 1.414-1.414L7.5 13.586 17.793 3.293l1.414 1.414L8.278 15.636a1.101 1.101 0 0 1-.778.322Z" fill="${t.l(e.pathFill)}"></path>`}),te=Q({iconName:"checkbox-fill",defaultSvgFill:"none",defaultPathFill:"currentColor",path:e=>t.e5`<path d="M16.375 2H3.625C3.19419 2.00053 2.78117 2.1719 2.47654 2.47654C2.1719 2.78117 2.00053 3.19419 2 3.625V16.375C2.00053 16.8058 2.1719 17.2188 2.47654 17.5235C2.78117 17.8281 3.19419 17.9995 3.625 18H16.375C16.8058 17.9995 17.2188 17.8281 17.5235 17.5235C17.8281 17.2188 17.9995 16.8058 18 16.375V3.625C17.9995 3.19419 17.8281 2.78117 17.5235 2.47654C17.2188 2.1719 16.8058 2.00053 16.375 2ZM9.03 13.03C8.9605 13.0998 8.87791 13.1552 8.78696 13.1929C8.696 13.2307 8.59849 13.2502 8.5 13.2502C8.40151 13.2502 8.304 13.2307 8.21304 13.1929C8.12209 13.1552 8.0395 13.0998 7.97 13.03L5.97 11.03L7.03 9.97L8.5 11.439L12.97 6.97L14.03 8.03L9.03 13.03Z" fill="${t.l(e.pathFill)}"></path>`}),ne=Q({iconName:"checkbox-outline",defaultSvgFill:"none",defaultPathFill:"currentColor",path:e=>t.e5`<path d="M16.375 18H3.625C3.19419 17.9995 2.78117 17.8281 2.47654 17.5235C2.1719 17.2188 2.00053 16.8058 2 16.375V3.625C2.00053 3.19419 2.1719 2.78117 2.47654 2.47654C2.78117 2.1719 3.19419 2.00053 3.625 2H16.375C16.8058 2.00053 17.2188 2.1719 17.5235 2.47654C17.8281 2.78117 17.9995 3.19419 18 3.625V16.375C17.9995 16.8058 17.8281 17.2188 17.5235 17.5235C17.2188 17.8281 16.8058 17.9995 16.375 18ZM3.625 3.25C3.52554 3.25 3.43016 3.28951 3.35983 3.35983C3.28951 3.43016 3.25 3.52554 3.25 3.625V16.375C3.25 16.4745 3.28951 16.5698 3.35983 16.6402C3.43016 16.7105 3.52554 16.75 3.625 16.75H16.375C16.4745 16.75 16.5698 16.7105 16.6402 16.6402C16.7105 16.5698 16.75 16.4745 16.75 16.375V3.625C16.75 3.52554 16.7105 3.43016 16.6402 3.35983C16.5698 3.28951 16.4745 3.25 16.375 3.25H3.625Z" fill="${t.l(e.pathFill)}"></path>`}),oe=Q({iconName:"radio-button-fill",defaultSvgFill:"none",defaultPathFill:"currentColor",path:e=>t.e5`<path d="M10 19C7.92015 18.998 5.90531 18.2749 4.29873 16.954C2.69215 15.6331 1.59322 13.796 1.18915 11.7558C0.785071 9.7155 1.10085 7.59826 2.08268 5.76471C3.06451 3.93115 4.65166 2.49471 6.57376 1.70008C8.49586 0.905442 10.634 0.801774 12.624 1.40673C14.6139 2.01169 16.3326 3.28785 17.4872 5.01782C18.6418 6.74779 19.1609 8.82455 18.9561 10.8943C18.7513 12.9641 17.8353 14.8989 16.364 16.369C15.5287 17.205 14.5366 17.8677 13.4444 18.3192C12.3523 18.7707 11.1818 19.0021 10 19ZM10 2.254C8.72575 2.25395 7.47113 2.56819 6.34732 3.16888C5.22351 3.76957 4.2652 4.63817 3.55729 5.69773C2.84939 6.75729 2.41374 7.97509 2.28895 9.24324C2.16416 10.5114 2.35408 11.7908 2.84188 12.968C3.32968 14.1452 4.1003 15.1839 5.08547 15.9921C6.07064 16.8004 7.23995 17.3531 8.4898 17.6015C9.73965 17.8498 11.0315 17.786 12.2508 17.4158C13.4701 17.0456 14.5793 16.3803 15.48 15.479C16.5641 14.3956 17.3024 13.015 17.6016 11.5119C17.9007 10.0088 17.7472 8.45067 17.1605 7.0348C16.5738 5.61893 15.5803 4.40892 14.3057 3.55791C13.0311 2.70689 11.5326 2.25311 10 2.254ZM13.536 6.464C12.8367 5.76487 11.9458 5.2888 10.9759 5.09598C10.0061 4.90316 9.0008 5.00225 8.08724 5.38073C7.17369 5.75921 6.39288 6.40007 5.84353 7.22229C5.29418 8.04451 5.00097 9.01115 5.00097 10C5.00097 10.9889 5.29418 11.9555 5.84353 12.7777C6.39288 13.5999 7.17369 14.2408 8.08724 14.6193C9.0008 14.9978 10.0061 15.0968 10.9759 14.904C11.9458 14.7112 12.8367 14.2351 13.536 13.536C14.4725 12.5975 14.9985 11.3258 14.9985 10C14.9985 8.67418 14.4725 7.4025 13.536 6.464Z" fill="${t.l(e.pathFill)}">`}),re=Q({iconName:"radio-button-fill",defaultSvgFill:"none",defaultPathFill:"currentColor",path:e=>t.e5`<path d="M10 19C7.92015 18.998 5.90531 18.2749 4.29873 16.954C2.69215 15.6331 1.59322 13.796 1.18915 11.7558C0.785071 9.7155 1.10085 7.59826 2.08268 5.76471C3.06451 3.93115 4.65166 2.49471 6.57376 1.70008C8.49586 0.905442 10.634 0.801774 12.624 1.40673C14.6139 2.01169 16.3326 3.28785 17.4872 5.01782C18.6418 6.74779 19.1609 8.82455 18.9561 10.8943C18.7513 12.9641 17.8353 14.8989 16.364 16.369C15.5287 17.205 14.5366 17.8677 13.4444 18.3192C12.3523 18.7707 11.1818 19.0021 10 19ZM10 2.254C8.72575 2.25395 7.47113 2.56819 6.34732 3.16888C5.22351 3.76957 4.2652 4.63817 3.55729 5.69773C2.84939 6.75729 2.41374 7.97509 2.28895 9.24324C2.16416 10.5114 2.35408 11.7908 2.84188 12.968C3.32968 14.1452 4.1003 15.1839 5.08547 15.9921C6.07064 16.8004 7.23995 17.3531 8.4898 17.6015C9.73965 17.8498 11.0315 17.786 12.2508 17.4158C13.4701 17.0456 14.5793 16.3803 15.48 15.479C16.5641 14.3956 17.3024 13.015 17.6016 11.5119C17.9007 10.0088 17.7472 8.45067 17.1605 7.0348C16.5738 5.61893 15.5803 4.40892 14.3057 3.55791C13.0311 2.70689 11.5326 2.25311 10 2.254Z" fill="${t.l(e.pathFill)}">`});const ie=function(e){return e},ae=new Map([["image/png",e.km.Png],["image/x-png",e.km.Png],["image/gif",e.km.Gif],["image/jpeg",e.km.Jpeg],["image/webp",e.km.Webp],["video/mp4",e.km.Mp4],["video/quicktime",e.km.Quicktime]]);let se={uploadErrorMessage:()=>"There was an error uploading the file.",uploadToS3ErrorMessage:()=>"Failed to upload file to S3.",genericErrorMessage:()=>"Something went wrong",unsupportedMimetype:e=>`${e} files are not supported.`};function le(e,t){const n=new FormData;return t?.forEach((({header:e,value:t})=>{t&&n.append(e,t)})),n.append("file",e),n}function ce(e){return(new DOMParser).parseFromString(e,"text/xml")}function de(e){window.Sentry?.captureMessage?.(e)}const ue={"3xs":"w-[1rem] h-[1rem]","2xs":"w-[1rem] h-[1rem]",xs:"w-[1.5rem] h-[1.5rem]",sm:"w-[2rem] h-[2rem]",md:"w-[2.5rem] h-[2.5rem]",lg:"w-[3rem] h-[3rem]",xl:"w-[3.5rem] h-[3.5rem]","2xl":"w-[4rem] h-[4rem]","3xl":"w-[5.5rem] h-[5.5rem]"},he={"3xs":"w-[1rem] h-[1rem] min-w-[1rem] min-h-[1rem]","2xs":"w-[1rem] h-[1rem] min-w-[1rem] min-h-[1rem]",xs:"w-[1.5rem] h-[1.5rem] min-w-[1.5rem] min-h-[1.5rem]",sm:"w-[2rem] h-[2rem] min-w-[2rem] min-h-[2rem]",md:"w-[2.5rem] h-[2.5rem] min-w-[2.5rem] min-h-[2.5rem]",lg:"w-[3rem] h-[3rem] min-w-[3rem] min-h-[3rem]",xl:"w-[2.875rem] h-[2.875rem] min-w-[2.875rem] min-h-[2.875rem]","2xl":"w-[3.25rem] h-[3.25rem] min-w-[3.25rem] min-h-[3.25rem]","3xl":"w-[4.5rem] h-[4.5rem] min-w-[4.5rem] min-h-[4.5rem]"},me={"3xs":"outline-offset-[0.125rem]","2xs":"outline-offset-[0.125rem]",xs:"outline-offset-[0.125rem]",sm:"outline-offset-[0.125rem]",md:"outline-offset-[0.125rem]",lg:"outline-offset-[0.1875rem]",xl:"outline-offset-[0.1875rem]","2xl":"outline-offset-[0.1875rem]","3xl":"outline-offset-[.25rem]"},pe={"3xs":"border","2xs":"border",xs:"border",sm:"border",md:"border-md",lg:"border-md",xl:"border-md","2xl":"border-lg","3xl":"border-lg"},fe={"3xs":"outline-1","2xs":"outline-1",xs:"outline-1",sm:"outline-1",md:"outline-2",lg:"outline-2",xl:"outline-2","2xl":"outline-4","3xl":"outline-4"},ge={"3xs":2,"2xs":2,xs:2,sm:4,md:4,lg:4,xl:6,"2xl":6,"3xl":6},be={"3xs":-5.4,"2xs":-5.4,xs:-5.4,sm:-7,md:-7,lg:-7,xl:-8.3,"2xl":-8.3,"3xl":-8.3},ve={"3xs":"-right-[0.0625rem]","2xs":"right-0",xs:"right-[0.05rem]",sm:"right-[0.10rem]",md:"-right-[0.0825rem]",lg:"-right-[0.125rem]",xl:"-right-[0.125rem]","2xl":"-right-[.65rem]","3xl":"-right-[.75rem]"},we={"3xs":"w-[.25rem] h-[.25rem] border","2xs":"w-[.25rem] h-[.25rem] border",xs:"w-[.25rem] h-[.25rem] border",sm:"w-[.375rem] h-[.375rem] border-2",md:"w-[.375rem] h-[.375rem] border-2",lg:"w-[.625rem] h-[.625rem] border-2",xl:"w-[.625rem] h-[.625rem] border-2","2xl":"w-[1rem] h-[1rem] border-2","3xl":"w-[1.25rem] h-[1.25rem] border-2"},_e={"3xs":"rounded-1","2xs":"rounded-1",xs:"rounded-1",sm:"rounded-2",md:"rounded-2",lg:"rounded-2",xl:"rounded-[.75rem]","2xl":"rounded-[.75rem]","3xl":"rounded-4"},xe=({ringColorClassName:e,size:t})=>e?`${e} outline ${fe[t]} ${me[t]}`:"",Ce=({...e})=>{const{html:n,ifDefined:o}=t.g(),{attributes:r,children:i,position:a="relative",size:s,status:l}=e;return n`<span class="inline-flex ${a} ${o(r?.className)} ${e.flip?"-scale-x-100":""}">${i}${$e({status:l,size:s})} </span>`},ye=({children:e,snoovatarSrc:n,avatarBgClassName:o,appearance:r})=>{const{html:i}=t.g();return i` <span style="${o||!n?"":`background: ${"media"===r?"var(--color-avatar-media-gradient)":"var(--color-avatar-gradient)"}`}" class="rounded-full absolute h-full w-full inline-flex justify-center ${o||""}"> ${e??t.A} </span>`},Ee=e=>{const{appearance:n}=e;return"collectible"===n?(({snoovatarSrc:e,snoovatarAlt:n,size:o,attributes:r,status:i,flip:a,lazy:s})=>{const{html:l}=t.g();return Ce({flip:a,size:o,status:i,children:l`${Me()} ${Se({size:o})}${Ie({snoovatarSrc:e,snoovatarAlt:n,size:o,lazy:s})}`,attributes:{...r,className:`${he[o]}`}})})(e):(({attributes:e,ringLayer:n,children:o,snoovatarAlt:r,snoovatarSrc:i,avatarBgClassName:a,size:s,ringColorClassName:l,status:c,appearance:d,flip:u,lazy:h})=>{const{html:m}=t.g(),p="default"===d?"box-border [&>:first-child]:rounded-[inherit] overflow-hidden":"",f=m`<span class="absolute rounded-full inset-0 border border-solid border-neutral-border-weak bg-transparent"></span>`;return Ce({flip:u,size:s,status:c,position:n?"absolute":"relative",attributes:{...e,className:`${xe({ringColorClassName:l,size:s})} fp-avatar-container rounded-full ${he[s]} isolate box-content`},children:m` ${i?t.A:ye({snoovatarSrc:i,appearance:d,avatarBgClassName:a,children:m`<span class="relative rounded-full overflow-hidden ${n?"border border-solid border-neutral-background":""} inline-flex w-full h-full ${p}">${o} ${"default"===d&&n?f:t.A} </span>`})} ${i?ke({snoovatarSrc:i,snoovatarAlt:r,size:s,ringColorClassName:l,avatarBgClassName:a,appearance:d,lazy:h}):t.A}`})})(e)},$e=({status:e,size:n})=>{const{html:o}=t.g();return e?o` <span class="${"online"===e?"bg-online":""} flex absolute bottom-0 rounded-full border-solid border-neutral-background bg-neutral-background ${ve[n]} ${pe[n]} ${we[n]}"> ${"online"===e?"":e} </span> `:""},Ie=({size:e,snoovatarAlt:n,snoovatarSrc:o,lazy:r})=>{const{html:i,svg:a}=t.g(),s=Math.random().toString(16).slice(2);return i`<div class="absolute h-full w-full" style="transform:translateY(${be[e]}%)"> <svg width="100%" height="100%" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="overflow-hidden"> <defs> <clipPath id="${s}"> <path d="M120 0H0V96H22.0602C22.5169 98.2109 23.896 100.155 25.8949 101.309L56          118.691C58.4752 120.12 61.5248 120.12 64 118.691L94.1051 101.309C96.104 100.155 97.4831          98.2109 97.9398 96H120V0Z"/> </clipPath> </defs> ${r?a`<foreignObject clip-path="url(#${s})" width="100%" height="100%"> <img src="${o}" alt="${n}" loading="lazy"> </foreignObject>`:a`<image href="${o}" alt="${n}" clip-path="url(#${s})" height="100%" width="100%">`} </svg> </div>`},Se=({size:e})=>{const{html:n}=t.g();return n`<span class="absolute h-full w-full left-0"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 72 72" fill="none"> <path d="M34 3.4641C35.2376 2.74957 36.7624 2.74957 38 3.4641L63.1769 18C64.4145 18.7145 65.1769 20.035 65.1769 21.4641V50.5359C65.1769 51.965 64.4145 53.2855 63.1769 54L38 68.5359C36.7624 69.2504 35.2376 69.2504 34 68.5359L8.82309 54C7.58548 53.2855 6.82309 51.965 6.82309 50.5359V21.4641C6.82309 20.035 7.58548 18.7145 8.82309 18L34 3.4641Z" stroke="url(#paint0_diamond_26526_186798)" stroke-width="${ge[e]}" stroke-linejoin="round"/> <defs> <radialGradient id="paint0_diamond_26526_186798" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-7.4247 26.0998) rotate(15.9097) scale(50.0682 24082.5)"> <stop stop-color="#1185B5"/> <stop offset="0.29452" stop-color="#D7F7FF"/> <stop offset="0.526042" stop-color="#5EF6D8"/> <stop offset="0.838434" stop-color="#5EF6D8"/> <stop offset="0.867246" stop-color="#1990B9"/> <stop offset="1" stop-color="#3F9FC6"/> </radialGradient> </defs> </svg> </span>`},Me=()=>{const{html:e}=t.g();return e`<div class="absolute h-full w-full" style="transform:scale(${.95})"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 64 64" fill="none"> <path d="M29 1.73205C30.8564 0.660254 33.1436 0.660254 35 1.73205L56.7128 14.2679C58.5692 15.3397 59.7128 17.3205 59.7128 19.4641V44.5359C59.7128 46.6795 58.5692 48.6603 56.7128 49.7321L35 62.2679C33.1436 63.3397 30.8564 63.3397 29 62.2679L7.28719 49.7321C5.43078 48.6603 4.28719 46.6795 4.28719 44.5359V19.4641C4.28719 17.3205 5.43078 15.3397 7.28719 14.2679L29 1.73205Z" fill="url(#paint0_diamond_26026_173944)"/> <path d="M29 1.73205C30.8564 0.660254 33.1436 0.660254 35 1.73205L56.7128 14.2679C58.5692 15.3397 59.7128 17.3205 59.7128 19.4641V44.5359C59.7128 46.6795 58.5692 48.6603 56.7128 49.7321L35 62.2679C33.1436 63.3397 30.8564 63.3397 29 62.2679L7.28719 49.7321C5.43078 48.6603 4.28719 46.6795 4.28719 44.5359V19.4641C4.28719 17.3205 5.43078 15.3397 7.28719 14.2679L29 1.73205Z" fill="url(#paint1_linear_26026_173944)"/> <defs> <radialGradient id="paint0_diamond_26026_173944" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-6.59974 23.1999) rotate(15.9097) scale(44.5051 21406.7)"> <stop stop-color="#1185B5"/> <stop offset="0.29452" stop-color="#D7F7FF"/> <stop offset="0.526042" stop-color="#5EF6D8"/> <stop offset="0.838434" stop-color="#5EF6D8"/> <stop offset="0.867246" stop-color="#1990B9"/> <stop offset="1" stop-color="#3F9FC6"/> </radialGradient> <linearGradient id="paint1_linear_26026_173944" x1="23.5687" y1="22.7061" x2="44.1183" y2="53.4817" gradientUnits="userSpaceOnUse"> <stop stop-color="#004E5F"/> <stop offset="1" stop-color="#727CD8" stop-opacity="0.81"/> </linearGradient> </defs> </svg> </div>`},ke=({size:e,snoovatarAlt:n,snoovatarSrc:o,attributes:r,avatarBgClassName:i,appearance:a,lazy:s})=>{const{html:l,svg:c,createElement:d}=t.g(),u=Math.random().toString(16).slice(2);return d("span",{...r,className:"absolute left-0 right-0 bottom-0 mx-auto inline-flex shrink-0 justify-center box-border h-full w-full"},l`${ye({snoovatarSrc:o,avatarBgClassName:i,appearance:a})} <svg viewBox="0 0 121 122" xmlns="http://www.w3.org/2000/svg" class="overflow-hidden absolute bottom-0 ${ue[e]}"> <defs> <clipPath id="${u}"> <path d="M0 0V79L28.1628 105.5C35.013 115.465 46.4934 122 59.5 122C72.5066 122 83.987 115.465 90.8372 105.5L120.5 79V0H0Z"/> </clipPath> </defs> ${s?c`<foreignObject clip-path="url(#${u})" width="100%" height="100%"> <img src="${o}" alt="${n}" loading="lazy"> </foreignObject>`:c`<image href="${o}" alt="${n}" clip-path="url(#${u})" height="100%" width="100%">`} </svg>`)},Te=({size:e="sm",appearance:n="default",snoovatarAlt:o="User Avatar",ringLayer:r,attributes:i,...a})=>{const{html:s,ifDefined:l}=t.g(),c="icon"===n||"subreddit"===n;return s`<span class="inline-flex items-center justify-center ${ue[e]} ${i?.className}" rpl avatar id="${l(i?.id)}" slot="${l(i?.slot)}"> ${r&&!c?r:""} ${c?(({attributes:e,children:n,size:o,appearance:r,status:i,ringColorClassName:a})=>{const s="icon"===r?"rounded-full":_e[o],{html:l,ifDefined:c}=t.g();return l`<span rpl id="${c(e?.id)}" slot="${c(e?.slot)}" class="inline-block ${s} ${xe({ringColorClassName:a,size:o})} relative [&>:first-child]:h-full [&>:first-child]:w-full [&>:first-child]:mb-0 [&>:first-child]:rounded-[inherit] h-full w-full [&>:first-child]:overflow-hidden [&>:first-child]:max-h-full"> ${n}${$e({status:i,size:o})} </span>`})({size:e,attributes:i,appearance:n,...a}):Ee({attributes:i,snoovatarAlt:o,appearance:n,ringLayer:r,size:e,...a})}</span>`},Ne=Symbol.for("lit-nothing");let Le={videoMinDimensionError:(e,t)=>`Videos must be at least ${e}x${t}`,videoMinRateError:e=>`Videos must have a bitrate of at least ${Math.floor(e)}KB/s`,videoCodecError:()=>"Unsupported video codec",videoIsTooShortError:t=>e.h({one:`Videos must be at least ${t} second`,other:`Videos must be at least ${t} seconds`,count:t}),videoIsTooLongError:t=>e.h({one:`Videos must be shorter than ${t} minute`,other:`Videos must be shorter than ${t} minutes`,count:t}),videoMaxSizeError:e=>`Videos must be ${e}GB or smaller`,videoMimetypeError:()=>"Upload an MP4 or MOV",imageMaxSizeError:e=>`Upload an image less than ${e}MB`,imageMaxSizeErrorKB:e=>`Upload an image less than ${e}KB`,gifMaxSizeError:e=>`Upload a GIF less than ${e}MB`,gifMaxSizeErrorKB:e=>`Upload a GIF less than${e}KB`,imageMaxDimensionError:(e,t)=>`Upload an image smaller than ${e}x${t}`,imageMinDimensionError:(e,t)=>`Upload an image at least ${e}x${t}`,imageOnlyGifsError:()=>"Upload a GIF",imageOnlyStaticImagesError:()=>"Upload a PNG, JPG, WEBP",imageStaticOrGifError:()=>"Upload a PNG, JPG, WEBP, or GIF",or:()=>"or ",imageTypeJoin:e=>`${De(e).reduce(((e,t,n,o)=>`${e}${Fe(n,o)}${Ae(n,o)}${t}`),"")}`,imageInvalidTypeErrorGeneric:()=>"Upload an image",imageInvalidTypeErrorSpecified:e=>`Upload a ${e}`};const De=e=>e.reduce(((e,t)=>{const n=ae.get(t)||t;return e.includes(n)?e:[...e,n]}),[]),Fe=(e,t)=>e>0?t.length>2?", ":" ":"",Ae=(e,t)=>t.length>1&&e===t.length-1?Le.or():"",Pe=["image/jpeg","image/png","image/webp"],Oe=["image/gif"],Re=[...Pe,...Oe],Ue=1024,ze=1048576,Be=20971520,Ve=104857600,He=e=>e.split(",").map((e=>e.trim())),je=e=>{const t="accept"in e?e.accept:void 0,{allowStaticImages:n=!1,allowAnimatedImages:o=!1}="allowStaticImages"in e?e:{};return{accept:t,allowStaticImages:n,allowAnimatedImages:o}};function qe(e){const{accept:t,allowStaticImages:n,allowAnimatedImages:o}=je(e);if(t&&t?.includes("image/*"))return Le.imageInvalidTypeErrorGeneric();if(t){const e=He(t);return Le.imageInvalidTypeErrorSpecified(Le.imageTypeJoin(e))}return o&&!n?Le.imageOnlyGifsError():n&&!o?Le.imageOnlyStaticImagesError():Le.imageStaticOrGifError(t)}function Ge(e){const t=[],{accept:n,allowStaticImages:o,allowAnimatedImages:r}=je(e);return n?He(n):(o&&t.push(...Pe),r&&t.push(...Oe),t)}const Ze="highlight_card_";const We={rootMargin:"0px",threshold:[1]};class Je extends e.bC{constructor(t,n){super(t),this._isInViewport=!1,this._hasBeenImpressed=!1,this._hasBeenConsumed=!1,this._hasPageUnloaded=!1,this.onVisible=e=>{this._isInViewport&&e&&(this._hasPageUnloaded=!1,this._becameVisibleOnScreenTimestamp=Date.now())},this.onHidden=e=>{this._isInViewport&&(e||this._hasPageUnloaded||this.handlePotentialConsume())},this.onBeforeUnloadCallback=()=>{this._hasPageUnloaded=!0,this._isInViewport&&this.handlePotentialConsume()},this.onEnter=()=>{this._isInViewport||(this._isInViewport=!0,this._becameVisibleOnScreenTimestamp=Date.now(),this.handlePotentialImpression())},this.onLeave=()=>{this._isInViewport&&(this.handlePotentialConsume(),this._isInViewport=!1)},t.addController(this),this._config={...n,observerConfig:n.observerConfig??We},this._observerController=new e.ar(this,t,this._config.observerConfig);const o=new e.E(this,(()=>t));o.define("faceplate-enter",this.onEnter),o.define("faceplate-leave",this.onLeave)}hostConnected(){super.hostConnected(),e.aT(this.onVisible,{immediate:!0}),e.aT(this.onHidden,{immediate:!0,shouldBeCalledFirst:!0}),e.aS.subscribe(this.onBeforeUnloadCallback,{shouldBeCalledFirst:!0})}hostDisconnected(){super.hostDisconnected(),e.aU(this.onHidden),e.aU(this.onVisible),e.aS.unsubscribe(this.onBeforeUnloadCallback)}handlePotentialImpression(){this._hasBeenImpressed||(this._hasBeenImpressed=!0,this._config.onView?.())}handlePotentialConsume(){!this._hasBeenConsumed&&this._becameVisibleOnScreenTimestamp&&Date.now()-this._becameVisibleOnScreenTimestamp>this._config.consumeThreshold&&(this._hasBeenConsumed=!0,this._observerController.hostDisconnected(),this._config.onConsume?.())}}const Ke="component-reload";const Qe=(t,n,o)=>e.b({source:"custom_feeds",...t},{customFeed:{id:n},...o?{subreddit:{id:o}}:{}}),Xe=new Set,Ye=t=>{if(!e.l.isAvailable())return;const n=e.l.getItem(t);if(n)try{return JSON.parse(n)}catch{return}},et=(t,n)=>{e.l.isAvailable()&&e.l.setItem(t,JSON.stringify(n))},tt=new Set(["reddit","config","special"]),nt=new Set(["edit","revisions","settings","discussions","pages","create"]),ot=new Set(["config/description","config/sidebar","config/stylesheet","config/submit_text"]);function rt(e,t){const n=Ye(e);return n?n.slice(0,t):[]}const it=Object.entries({16:"icon32",24:"icon48",32:"icon64",40:"icon96",48:"icon96",56:"icon96",88:"icon96"});const at=1e3,st=1e6,lt=1e9,ct=({num:e,divider:t,defaultFixed:n=0,maxDigits:o,removeZeroDecimal:r})=>{const i=e/t;if(!o){const e=i.toFixed(n);return r&&Number(e)%1==0?Math.floor(i).toString():i.toFixed(Math.floor(n))}return i.toString().slice(0,o+1)};const dt=(e,t,n=1)=>{const o=Math.pow(10,n);return(Math.floor(e/(t/o))/o).toFixed(n)};const ut=/(?:\/|-)nftv2_([a-z0-9%]+)_([a-z]+)_([a-z0-9-]{36})(?:-headshot)?\.(?:png|svg)/i;const ht="moderator";function mt(t){return t===e.bZ.Post}const pt=async(e=document,t=5e3,n=100)=>{const o=Date.now(),r=e=>{const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let n=t.nextNode();for(;n;){if(n instanceof Element&&n.shadowRoot){const e=i(n.shadowRoot);if(e)return e}n=t.nextNode()}return null},i=e=>{const t=e.querySelector('textarea[name="message"]');return t instanceof HTMLTextAreaElement?t:r(e)};return new Promise((i=>{const a=()=>{const s=(()=>{const t=e.querySelector("rs-message-composer");return t?.input?t.input:r(e)})();s?i(s):Date.now()-o>t?i(null):setTimeout(a,n)};a()}))};const ft=(e,t)=>{"complete"!==document.readyState?window.addEventListener("load",e,t):e()},gt="preview";return{$:et,A:function(e){return{source:"feed_experience",action:e?"unsubscribe":"subscribe",noun:"subreddit"}},B:function(){return{source:"feed_experience_overflow",noun:"hide",action:"click"}},C:function(){return{source:"feed_experience",action:"impression",noun:"feed_experience"}},D:()=>e.b({source:"global",action:"view",noun:"screen"},{action_info:{page_type:e.w.AchievementDetail}}),E:"click",F:"dismiss",G:"gen_guides",H:"back",I:class{constructor(e,t){this.observedElements=[],this.handleSlotChange=e=>{this.observer.disconnect();const t=e.target;t instanceof HTMLSlotElement&&(this.observedElements=t.assignedElements(),this.observedElements.forEach((e=>this.observer.observe(e))))},this.observer=new IntersectionObserver(this.handleIntersection.bind(this),t),(this.host=e).addController(this)}hostConnected(){this.observedElements.forEach((e=>this.observer.observe(e)))}hostDisconnected(){this.observer.disconnect()}isLoadableFaceplatePartial(t){return t instanceof e.bs&&t.loading===e.I.Programmatic&&!t.isLoading}async handleIntersection(e){e.forEach((e=>{e.isIntersecting&&this.isLoadableFaceplatePartial(e.target)&&e.target.load()}))}},J:(e,t=e.tagName.toLowerCase())=>{const n=e=>(""===e&&(e="generic"),t+":"+e);return{dispatch:(t,o={bubbles:!0,cancelable:!0,composed:!0})=>e.dispatchEvent(new CustomEvent(n(t),o)),eventId:n}},K:async function(t){if(t)try{const n=await e.B({operation:e.O.GetAdBusinessNameById,variables:{postId:t}}),o=n?.data?.postInfoById?.adBusiness?.id;return"string"==typeof o&&o?o:void 0}catch{return}},L:ee,M:function(e,t=0,n=!1){let o=!1,r=null;const i=function(...a){o?n&&(r=[this,a]):(e.apply(this,a),o=!0,setTimeout((()=>{o=!1,r&&(i.apply(r[0],r[1]),r=null)}),t))};return i},N:function*(e,t){if(void 0!==e){let n=0;for(const o of e)yield t(o,n++)}},O:function(e,t){return null!==e.querySelector(`:scope > [slot="${t}"]`)},P:({conversationId:e,position:t,searchQuery:n})=>{const o={conversation_id:e};return t&&(o.query_id=`${t}`),n&&(o.query=n),{search:o}},Q:function(e,t){if(!e)return{color:"",icon:""};const n=function(e){const t=e?.primaryColor,n=e?.mobileKeyColor,o=e?.legacyPrimaryColor;return t||n||o||null}(e)||"",o=function(e,t){if(!t)return e?.icon;for(const[n,o]of it){const r=e?.[o];if(r&&t<=parseInt(n,10))return r}return e?.icon}(e,t),r=e?.legacyIcon?.url;return{color:n,icon:o||r||""}},R:"onboarding",S:"subreddit-posting-eligibility-modal",T:()=>e.b({source:"comment",action:"click",noun:"share"}),U:()=>e.b({source:"comment",action:"click",noun:"share_copy"}),V:Je,W:function(e){if(i in e)return e;class t extends e{constructor(){super(...arguments),this.pages=1,this._pageIndex=1,this._pageNames=void 0}get pageIndex(){return this._pageIndex}set pageIndex(e){if(e===this._pageIndex)return;const t=this._pageIndex;this._pageIndex=e,this.pageIndexChangedCallback(t)}get pageNames(){return this._pageNames}set pageNames(e){e&&(this.pages=e.length),this._pageNames=e}syncLinkedPageables(){if(this._paginationLeaderContext){const e=a.getFollowers(this._paginationLeaderContext);if(!e||!e.size)return;for(const t of e)t.syncPagination(this)}if(this._paginationFollowerContext){const e=a.getLeader(this._paginationFollowerContext);e&&(e.pageIndex=this._pageIndex)}}syncPagination(e){this.pageIndex=e.pageIndex,this.pages=e.pages,this.pageNames=e.pageNames}getPaginationContext(){const e=this.getRootNode();if(e!==this&&(e instanceof Document||e instanceof ShadowRoot))return e}connectedCallback(){super.connectedCallback&&super.connectedCallback();const e=this.getPaginationContext();if(!e)return;const t=this.getAttribute("for");t&&(this._paginationFollowerContext=a.getContextKey(t,e),a.registerFollower(this,this._paginationFollowerContext)),this.id&&!t&&(this._paginationLeaderContext=a.getContextKey(this.id,e),a.appointLeader(this,this._paginationLeaderContext))}disconnectedCallback(){super.connectedCallback&&super.connectedCallback(),this._paginationLeaderContext&&(a.dismissLeader(this,this._paginationLeaderContext),this._paginationLeaderContext=void 0),this._paginationFollowerContext&&(a.unregisterFollower(this,this._paginationFollowerContext),this._paginationFollowerContext=void 0)}nextPage(){this.pageIndex=Math.min(this.pages,this.pageIndex+1)}previousPage(){this.pageIndex=Math.max(1,this.pageIndex-1)}pageIndexChangedCallback(e){this.syncLinkedPageables()}}return t[i]=!0,t},X:"saved-responses__reorder",Y:(e=0)=>new Promise((t=>setTimeout(t,e))),Z:"https://www.google.com/recaptcha/enterprise.js",_:Ne,a:(e,t)=>{const n=e.composedPath(),o=Array.isArray(t)?t.map((e=>e.toUpperCase())):[t.toUpperCase()];for(const e of n)if(o.includes(e.tagName))return!0;return!1},a$:"saved-responses__delete",a0:Ye,a1:"pdp-ama-comment-tab-wrapper",a2:"clear-search-input",a3:(e,t)=>Qe({action:"add",noun:"subreddit"},e,t),a4:(e,t)=>Qe({action:"remove",noun:"subreddit"},e,t),a5:({attributes:n,title:o,titleDataTestId:r,description:i,buttonProps:a,creative:s,creativeSafe:l=!0})=>{const{html:c,createElement:d}=t.g();return d("div",{...n,className:"flex flex-col items-center w-full",rpl:!0,"rpl-empty-state":!0},c`<div class="w-full flex flex-col items-center overflow-hidden box-border ${!l&&"p-md"}"> ${s} </div> <div class="flex flex-col w-full items-center box-border px-md gap-md ${o||i?"pb-md":""}"> ${o||i?c` <div class="max-w-[480px] flex flex-col items-center text-center"> <div class="text-24 font-bold text-neutral-content-strong" data-testid="${t.l(r)}"> ${o} </div> <div class="text-16 text-neutral-content-weak">${i}</div> </div> `:""} ${a?c`<div>${e.r(a)}</div>`:""} </div>`)},a6:(t,{communityId:n,communityName:o})=>t.trackEvent(e.b({source:"community_page",action:"click",noun:"communities_menu",subreddit:{name:o,id:n}})),a7:Ke,a8:class{constructor(t,n){this.isLoading=!1,this.hasReloadError=!1,this.handleReload=async e=>{if(this.reloadUrl){this.isLoading=!0,this.hasReloadError=!1,this.host.requestUpdate();try{await this.getAndReplacePartial(e.detail?.queryParameters)}catch(e){this.hasReloadError=!0}this.isLoading=!1,this.host.requestUpdate()}};const{reloadUrl:o,containerSelector:r,mode:i=e.o.Contents}=n||{};(this.host=t).addController(this),this._partialRequest=new e.aH(this.host),this._reloadUrl=o,this.containerSelector=r||this.host.tagName.toLowerCase(),this._mode=i}get reloadUrl(){return this._reloadUrl}set reloadUrl(e){this._reloadUrl=e}get mode(){return this._mode}set mode(e){this._mode=e}hostConnected(){this.host.addEventListener(Ke,this.handleReload)}hostDisconnected(){this.host.removeEventListener(Ke,this.handleReload)}async getAndReplacePartial(t={}){const n=this.reloadUrl&&Array.from(Object.entries(t)).reduce(((t,[n,o])=>e.cd(t,n,o)),this.reloadUrl),o=await this._partialRequest.request(n),r=await(o?.text());if(!r)throw new Error("Unable to reload content");const i=(new DOMParser).parseFromString(r,"text/html").querySelector(this.containerSelector);if(!i)throw new Error(`Element ${this.containerSelector} not found in reload response`);if(this.mode!==e.o.Contents)e.aQ(i.outerHTML,this.host,this.mode);else{if(!i?.innerHTML)throw new Error("No content to reload");e.aQ(i.innerHTML,this.host,this.mode)}}},a9:function(e){return e?"Settings saved.":"Failed to save settings. Please try again."},aA:j,aB:U,aC:H,aD:Z,aE:e=>{const t=q(e);return t?(j(t[0]),t):null},aF:W,aG:(e,t,n)=>{if(!t)return W(e);const o=((e,t,n)=>{for(let o=1;o<e.length;o++){const r=(t-o+e.length)%e.length,i=e[r];if(r>t&&!n)return null;if(U(i))return i}return U(e[t])?e[t]:null})(e,t[1],n);return o?H(o):null},aH:(e,t,n)=>{if(!t)return Z(e);const o=((e,t,n)=>{for(let o=1;o<e.length;o++){const r=(t+o)%e.length,i=e[r];if(r<t&&!n)return null;if(U(i))return i}return U(e[t])?e[t]:null})(e,t[1],n);return o?H(o):null},aI:e=>J in e,aJ:{MenuItem:"menuitem",Button:"button",Link:"link",Checkbox:"menuitemcheckbox",Radio:"menuitemradio"},aK:E,aL:nt,aM:tt,aN:"config/automoderator",aO:"config/post_removal_message",aP:ot,aQ:50,aR:100,aS:class{hostConnected(){}constructor(e,t){this.host=e,this.config=t,this.mouseIsDown=!1,this._interactionTrigger=null,this.eventUsedMap=new WeakMap,this.handleBlur=e=>{if(this.hasTrigger("focus")||this.hasTrigger("focus-visible")){const t=()=>this.host.finishInteraction(e,"focus");this.config.delayOpenOnFocus?this.delayInteraction(t,this.config.hoverDelayEnd(this.host)):t()}},this.handleClick=e=>{this.eventUsedMap.has(e)||(this.eventUsedMap.set(e,!0),this.hasTrigger("click")&&(this.config.isInteractedWith(this.host)?this.host.finishInteraction(e,"click"):this.host.startInteraction(e,"click")))},this.handleFocus=e=>{const t=this.hasTrigger("focus"),n=this.hasTrigger("focus-visible");if((!(!t&&n&&e.target instanceof HTMLElement)||e.target.matches(":focus-visible"))&&(t||n)&&!this.mouseIsDown){const t=()=>this.host.startInteraction(e,"focus");this.config.delayOpenOnFocus?this.delayInteraction(t,this.config.hoverDelayStart(this.host)):t()}},this.handleMouseEnter=e=>{this.hasTrigger("hover")&&this.delayInteraction((()=>this.host.startInteraction(e,"hover")),this.config.hoverDelayStart(this.host))},this.handleMouseLeave=e=>{this.hasTrigger("hover")&&this.delayInteraction((()=>this.host.finishInteraction(e,"hover")),this.config.hoverDelayEnd(this.host))},this.handleMouseDown=()=>{this.hasTrigger("click")&&(this.mouseIsDown=!0)},this.handleMouseUp=()=>{this.hasTrigger("click")&&(this.mouseIsDown=!1)},this.host.addController(this)}set interactionTrigger(e){this._interactionTrigger=e,this.host.requestUpdate()}get interactionTrigger(){return this._interactionTrigger}delayInteraction(e,t){clearTimeout(this.delayTimeout),this.delayTimeout=window.setTimeout(e,t)}hasTrigger(e){return this.host.trigger.split(" ").includes(e)}},aT:n,aU:e=>!!e&&(e.indexOf("profileIcon_snoo")>-1||e.indexOf("snoovatar/avatars")>-1||e.endsWith("snoovatar_anonymous.svg")),aV:2e3,aW:ut,aX:function(e){return`add-ama-collaborators-modal-${e}`},aY:function(e,t,n){return e?t():null==n?void 0:n()},aZ:"saved-responses__create",a_:"saved-responses__exit-create-view",aa:O,ab:function(){return"button_appearance"===e.dw(e.ki)||e.dw(e.ki)===y},ac:t=>e.b({source:ht,action:"click",noun:mt(t)?"reorder_post_flair_confirm":"reorder_flair_confirm"}),ad:"flair-settings__table-feature-id",ae:{STREAK_EXTENDED:"streak_progressed",TROPHY_UNLOCKED:"achievement_unlocked",TROPHY_PROGRESSED:"achievement_progress"},af:"login",ag:({attributes:n,children:o,selected:r,leadingIcon:i,ariaControls:a,screenReaderContent:s,deleteButtonConfig:l})=>{const{html:c,ifDefined:d}=t.g();return c` <span class="inline-flex relative max-w-full" slot="${d(n?.slot)}"> ${e.he({hideChildrenOverflow:!0,ariaControls:a,attributes:n,selected:r,size:e.s.Small,leadingIcon:i&&Te({children:i,appearance:"icon",size:"2xs"}),children:c`<span class="${r?"inline-block mr-[calc(var(--size-button-sm-h)-var(--rem10)-var(--button-border-width-default))]":""} overflow-hidden text-ellipsis">${o}</span>`,screenReaderContent:s})} ${r?c` <span style="${"transform: translateY(-50%);\nposition: absolute;\nright: 0;\ntop: 50%;\ntransform: translateY(-50%);\ndisplay: inline-flex;\n"}"> ${e.r({...l,appearance:"plain",size:e.s.Small,leadingIcon:t.aR({size:t.I.Small})})} </span>`:void 0} </span> `},ah:function(e){return!!e},ai:"https://chat.reddit.com/",aj:async function(e){const t=URL.createObjectURL(e),{width:n,height:o}=await function(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>{t({width:o.width,height:o.height})},o.onerror=e=>{n(e)},o.src=e}))}(t);return{src:t,type:e.type,size:e.size,width:n,height:o}},ak:function(e,t){const{width:n,height:o,type:r,size:i}=e,{minImageDimension:a,maxImageDimension:s,maxImageFileSize:l=Be,maxGifFileSize:c=Ve}=t,{accept:d,allowStaticImages:u,allowAnimatedImages:h}=je(t),m=Ge(t);if(!(m.includes(r)||m.includes("image/*")&&r.startsWith("image/")))return{valid:!1,error:qe(d?{accept:d}:{allowStaticImages:u,allowAnimatedImages:h}),reason:"INVALID_IMAGE_TYPE_ERROR"};if(a&&(n<a||o<a))return{valid:!1,error:Le.imageMinDimensionError(a,a),reason:"IMAGE_MIN_DIMENSION_ERROR"};if(s&&(n>s||o>s))return{valid:!1,error:Le.imageMaxDimensionError(s,s),reason:"IMAGE_MAX_DIMENSION_ERROR"};if("image/gif"===r&&i>c){return{valid:!1,error:Math.floor(c/ze)<1?Le.gifMaxSizeErrorKB(Math.floor(c/Ue)):Le.gifMaxSizeError(Math.floor(c/ze)),reason:"IMAGE_SIZE_LIMIT_EXCEEDED_ERROR"}}if(r.startsWith("image/")&&"image/gif"!==r&&i>l){return{valid:!1,error:Math.floor(l/ze)<1?Le.imageMaxSizeErrorKB(Math.floor(l/Ue)):Le.imageMaxSizeError(Math.floor(l/ze)),reason:"IMAGE_SIZE_LIMIT_EXCEEDED_ERROR"}}return{valid:!0,error:null}},al:()=>"Comment deleted by user",am:function(){return"Something went wrong"},an:5,ao:()=>"[deleted]",ap:function(n,o){return e.r({attributes:o,appearance:R[n],leadingIcon:t.C()})},aq:class{constructor(t,n){this._batchTimer=0,this._batchDisplay=()=>{if(this._batchTimer=0,!this._batchQueue||!this._batchQueue.length)return;const t=e.kj(this._batchQueue);for(const e of t)this.options.onAlert(e);this._batchQueue.length=0},t.addController(this),this.host=t,this.options=n,n.batchWindow&&n.batchWindow>0&&(this._batchQueue=[])}hostConnected(){e.kk(this.host).then((t=>{t&&(this._reporter=t,e.kl.register(t,this))}))}hostDisconnected(){this._reporter&&(e.kl.unregister(this._reporter,this),this._reporter=void 0),this._batchTimer&&window.clearTimeout(this._batchTimer),this._batchQueue&&(this._batchQueue.length=0)}shouldDisplayAlert(e){if(!this.options.isOnline()&&!e.showWhenOffline)return!1;const t=this.options;if("number"==typeof e.level){if(t.max&&e.level>t.max)return!1;if(t.min&&e.level<t.min)return!1}else if(void 0!==t.min||void 0!==t.max)return!1;return!t.name||t.name===e.name}displayAlert(e){if(this._batchQueue){if(this._batchQueue.push(e),this._batchTimer)return;this._batchTimer=window.setTimeout(this._batchDisplay,this.options.batchWindow)}else this.options.onAlert(e)}},ar:function(e){return e.replace(Ze,"")},as:C,at:function({el:t,outboundUrl:n,clickLocation:o,galleryIndex:r}){const i=C(t),a=i?.placement||("placement"in t?t.placement:void 0),s=i?.id||t?.id||("postId"in t?t?.postId:""),l=i?.impressionId||("impressionId"in t?t?.impressionId:""),c=e.c("observe-ad-click",{postId:s,impressionId:l,outboundUrl:n,galleryIndex:r,clickLocation:o});t.dispatchEvent(c),e.l.isAvailable()&&(e.l.setItem(e.L.LastClickedAdId,s),e.l.setItem(e.L.ImpressionId,l),e.l.setItem(e.L.AdPlacement,a||""))},au:V,av:z,aw:B,ax:G,ay:t=>Object.values(e.cy).includes(t),az:q,b:(n,o)=>o?e.r({shape:"pill",appearance:"plain",size:e.s.Small,attributes:{className:"border-0 [:not(:hover)]:bg-transparent text-12 font-semibold text-secondary-plain",slot:"trigger",...n},hideChildrenOverflow:!0,children:t.x`<slot name="trigger-content"></slot>`,trailingIcon:t.N({size:t.I.Small,attributes:{"aria-hidden":"true",className:"px-[2px]"}})}):l({appearance:"plain",attributes:{className:"border-0 [:not(:hover)]:bg-transparent text-12 font-semibold text-secondary-plain",...n},children:t.x`<slot name="trigger-content"></slot>`,size:e.s.Small}),b$:b,b0:"saved-responses__update-item",b1:"saved-responses__submit",b2:"saved-responses__saved",b3:"saved-responses__open-reorder-modal",b4:"saved_responses__cancel_update",b5:"saved-responses-table__partial_id",b6:"saved_responses__response_delete_modal_id",b7:Y,b8:X,b9:"achievement-progress-toast",bA:function(n,o){if(!n)return;const{html:r}=t.g();return r` <span class="flex items-center justify-center">${Array.isArray(n)?r`${n.map((t=>e.r({...t,appearance:R[o]})))}`:e.r(n)}</span>`},bB:3,bC:async(e,t=pt)=>{const n=await t();n&&(e?(n.value="",n.focus()):setTimeout((()=>{n.focus()}),1e3))},bD:e=>Qe({action:"delete",noun:"custom_feed"},e),bE:function(e){return null!=e},bF:({attributes:e,children:n,trailingSlot:o})=>{const{html:r,createElement:i}=t.g();return i("li",{...e,booleanListItemHeader:!0,className:"flex items-center m-0 pr-md h-2xl min-w-0 text-secondary font-semibold text-12",rpl:!0},r`<span class="grow min-w-0 px-sm truncate">${n}</span> ${o?r`<span class="flex items-center">${o}</span> `:void 0}`)},bG:"onboarded-ad-account",bH:"ad-account-creation-cancel",bI:k,bJ:"emote|",bK:function(t){return t===e.al.ModQueueCompactView},bL:function(e,{displayFull:t,roundDown:n,maxDigits:o,removeZeroDecimal:r}={}){return t?(e=>{const t=e.split(".");return[t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")].concat(t.slice(1)).join(".")})(e.toString()):e>=99999999949?`${ct({num:e,divider:lt,maxDigits:o,removeZeroDecimal:r})}b`:e>=999999949&&e<99999999949?`${ct({num:e,divider:lt,defaultFixed:1,maxDigits:o,removeZeroDecimal:r})}b`:e>=99999949&&e<999999949?`${ct({num:e,divider:st,maxDigits:o,removeZeroDecimal:r})}m`:e>=999949&&e<99999949?`${ct({num:e,divider:st,defaultFixed:1,maxDigits:o,removeZeroDecimal:r})}m`:e>=99949&&e<999949?`${ct({num:e,divider:at,maxDigits:o,removeZeroDecimal:r})}k`:e>=at&&e<99949?n?`${dt(e,at)}k`:`${ct({num:e,divider:at,defaultFixed:1,maxDigits:o,removeZeroDecimal:r})}k`:String(e)},bM:function(){return"vote_component"===e.dw(e.ki)||e.dw(e.ki)===y},bN:e=>!!e&&(e.indexOf("profileIcon_snoo")>-1||e.indexOf("snoovatar/avatars")>-1||e.endsWith("snoovatar_anonymous.svg")),bO:function(e){return!!e&&ut.test(e)},bP:async function(e,t){const n=await window.fetch(t.uploadLeaseUrl,{method:"POST",body:le(e,t.uploadLeaseHeaders)});if(n.ok){const e=function(e){const t=ce(e);return t.querySelector("Location")?.textContent?.trim()}(await n.text());return e||de("Unable to retrieve S3 url for uploaded resource."),e}throw de(`Failed to upload file to S3 with error code: ${function(e){const t=ce(e);return t.querySelector("Code")?.textContent?.trim()}(await n.text())}`),new Error(se.uploadToS3ErrorMessage())},bQ:ae,bR:function(e=!1){return e?"Saved":"Save changes"},bS:()=>e.b({source:"post_detail",action:"click",noun:"load_more_comments"}),bT:t=>e.b({source:ht,action:"click",noun:mt(t)?"post_flair_edit_save":"flair_edit_save"}),bU:t=>e.b({source:ht,action:"click",noun:mt(t)?"create_post_flair_confirm":"create_flair_confirm"}),bV:"flair-settings__flair-copy",bW:"flair-settings__flair-delete",bX:"flair-settings__flair-delete-modal",bY:t=>e.b({source:ht,action:"click",noun:mt(t)?"remove_post_flair_confirm":"remove_flair_confirm"}),bZ:g,b_:(t,n,o)=>{e.c_({name:e.kc}),e.$({name:e.kc,country:n,value:`${t}`,options:{...e.a0,domain:o}})},ba:"request",bb:"reddit-search:open",bc:N,bd:function(e){return`${Ze}${e}`},be:t=>t.trackEvent(e.b({source:"community_page",action:"click",noun:"all_communities"})),bf:t=>t.trackEvent(e.b({source:"community_page",action:"click",noun:"favorites"})),bg:t=>t.trackEvent(e.b({source:"community_search",action:"view",noun:"search_bar"})),bh:t=>t.trackEvent(e.b({source:"community_search",action:"view",noun:"query_prompt"})),bi:t=>t.trackEvent(e.b({source:"community_search",action:"click",noun:"search_bar"})),bj:"wiki-banned-users__unban",bk:"wiki-banned-users__ban",bl:"wiki-banned-users__edit",bm:"wiki-banned-contributors-confirmation-modal",bn:"wiki-banned-contributors-ban-modal",bo:(e,t)=>new CustomEvent("rpl:menu-clicked-item",{bubbles:!0,composed:!0,cancelable:!0,detail:{type:e,item:t}}),bp:({item:e,reason:t})=>new CustomEvent("rpl:menu-close",{bubbles:!0,composed:!0,detail:{item:e,reason:t,itemPath:[e]}}),bq:t=>Object.values(e.e3).includes(t),br:t=>Object.values(e.e4).includes(t),bs:J,bt:te,bu:ne,bv:oe,bw:re,bx:t=>e.b({source:"achievements",action:"click",noun:"card_icon"},{action_info:{page_type:t}}),by:t=>e.b({source:"achievements",action:"click",noun:"profile_showcase"},{action_info:{page_type:t}}),bz:(e,t)=>{const n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return Math.floor(n.top)>=Math.floor(o.top)&&Math.ceil(n.bottom)<=Math.ceil(o.bottom)&&Math.ceil(n.right)<=Math.ceil(o.right)&&Math.floor(n.left)>=Math.floor(o.left)},c:class{constructor(e){this.host=e,this.slotsCache=new Map,this.hasContentsCache=new Map,this.slotTextCache=new Map,this.handleSlotChange=e=>{if(!(e.target instanceof HTMLSlotElement))return;const t=e.target,n=t.hasAttribute("name")?t.name:"default",o=this.hasContentsCache.get(n),r=E(t);this.slotsCache.set(n,t),this.hasContentsCache.set(n,E(t)),this.slotTextCache.delete(n),o!==r&&this.host.requestUpdate()},e.addController(this)}hostConnected(){}getSlot(e){const t=this.slotsCache.get(e);if(void 0!==t)return t;const n=this.host.shadowRoot?.querySelector("default"===e?"slot:not([name])":`slot[name="${e}"]`);return n instanceof HTMLSlotElement?(this.slotsCache.set(e,n),n):null}hasSlotContent(e){return this.hasContentsCache.get(e)??!1}getSlotText(e){const t=this.slotTextCache.get(e);if(void 0!==t)return t;if(!(this.hasContentsCache.get(e)??!1))return this.slotTextCache.set(e,null),null;const n=this.getSlot(e);if(!n)return null;const o=(e=>{const t=e.assignedNodes({flatten:!0}),n=[];for(const e of t)e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/)&&n.push(e.textContent.trim()),e.nodeType===Node.ELEMENT_NODE&&e.textContent?.match(/\S/)&&n.push(e.textContent.trim());return n.length>0?n.join(" "):null})(n);return this.slotTextCache.set(e,o),o}},get c$(){return Le},c0:(t,n,o)=>{e.c_({name:e.ke}),e.$({name:e.ke,country:n,value:`${t}`,options:{...e.a0,domain:o}})},c1:()=>e.v.get(e.kd),c2:(t,n,o)=>{e.c_({name:e.kd}),e.$({name:e.kd,country:n,value:`${t}`,options:{...e.a0,domain:o}})},c3:function({fieldErrors:e,defaultMessage:t}){return e?.[0]?.message??t},c4:e=>!e||e.includes("avatar_default_"),c5:({attributes:e,children:n})=>{const{html:o,createElement:r}=t.g();return r("li",{...e,booleanListItemGroup:!0,className:"list-none",rpl:!0},o`<ul class="p-0"> ${n} </ul>`)},c6:()=>e.b({source:"comment",action:"click",noun:"load_more_comments"}),c7:()=>e.b({source:"post_detail",action:"click",noun:"comment_image"}),c8:"comment-composer-cancel-draft",c9:"comment-edit-success",cA:"comment-deletion-modal",cB:t=>e.b({source:t,action:"click",noun:"follow"}),cC:t=>e.b({source:t,action:"undo",noun:"follow"}),cD:"list-reply-comment-button",cE:t=>e.b({source:t,action:"click",noun:"save"}),cF:t=>e.b({source:t,action:"click",noun:"unsave"}),cG:e=>e??Ne,cH:"view",cI:"auth_modal",cJ:"send",cK:"https://www.reddit.com/redditchat/",cL:"chat-mobile-xpromo",cM:(t,n)=>e.b({source:ht,action:"click",noun:mt(t)?"enable_post_flair":"enable_user_flair"},{action_info:{setting_value:n?"toggle on":"toggle off"}}),cN:(t,n)=>e.b({source:ht,action:"click",noun:mt(t)?"let_users_assign_post_flair":"let_users_assign_flair"},{action_info:{setting_value:n?"toggle on":"toggle off"}}),cO:t=>e.b({source:ht,action:"click",noun:mt(t)?"reorder_post_flair_dialog":"reorder_flair_dialog"}),cP:_,cQ:v,cR:w,cS:"skip",cT:{Total:"#D2DADD",Posts:"#0E8A00",Negative:"#372F8C",Positive:"#008675",Neutral:"#629FFF",Score:"#D93A00",Performance:"#6A5CFF",Comments:"#D93900",Upvotes:"#6A5CFF","Post Upvotes":"#DE019F","Comment Upvotes":"#5BA200","Total Upvotes":"#97AFBC","Total Mentions":"#6A5CFF"},get cU(){return se},cV:ie,cW:function(t){return t===e.al.CardView},cX:"giphy|",cY:function(t){const n={[e.hx.Female]:"Woman",[e.hx.Male]:"Man",[e.hx.NonBinary]:"Non-binary",[e.hx.OptOut]:"I prefer not to say",[e.hx.UserDefined]:"I refer to myself as..."};return t?n[t]:n},cZ:({prefix:e=A[0],...t})=>{const n=D((({withAbout:e,aboutOptional:t}={})=>`/:prefix(${P})/:${F}/${e?":page(about/?)"+(t?"?":""):""}`)({withAbout:!0,aboutOptional:!0}))({...t,prefix:e});return t.omitLeadingSlash?n.substring(1):n},c_:Ge,ca:"reloadPollingDurationMs",cb:()=>e.b({source:"post_detail",action:"click",noun:"collapse_comment"}),cc:()=>e.b({source:"post_detail",action:"click",noun:"expand_comment"}),cd:"/svc/shreddit/edit-comment",ce:function({type:n,iconProps:o}){switch(n){case e.eT.Public:return{label:"Public",description:"Anyone can view, post, and comment to this community",icon:t.bI(o),iconSelected:t.bJ(o)};case e.eT.Restricted:return{label:"Restricted",description:"Anyone can view, but only approved users can contribute",icon:t.b5(o),iconSelected:t.bK(o)};case e.eT.Private:return{label:"Private",description:"Only approved users can view and contribute",icon:t.bv(o),iconSelected:t.aj(o)};case e.eT.EmployeesOnly:return{label:"Employee-only",description:"Only employees can view and contribute",icon:t.ci(o),iconSelected:t.ch(o)};default:return null}},cf:e=>Qe({action:"duplicate",noun:"custom_feed"},e),cg:e=>Qe({action:"create",noun:"custom_feed"},e),ch:(e,t,n)=>{for(const n of t)if(n[0]===e)return(0,n[1])();return null==n?void 0:n()},ci:function(){return document&&document.documentElement.lang?document.documentElement.lang:navigator&&navigator.language?navigator.language:"en-US"},cj:function(e){return new Date(e.replace("+0000","+00:00"))},ck:"wiki-page-settings-done-button",cl:"wiki-page-settings-close-button",cm:"wiki-page-setting-modal-dialog",cn:h,co:function(e,t,n){var o;const r=function(e,t){const n=t.getTime()-e.getTime(),o=Math.round(n/31104e6),r=Math.round(n/2592e6),i=Math.round(n/864e5),a=Math.round(n/36e5),s=n/p;let l="minutes",c=0;return Math.abs(Math.round(s))<60?c=s>-1&&s<1?Math.sign(s)*Math.ceil(Math.abs(s)):Math.round(s):Math.abs(a)<24?(l="hours",c=a):Math.abs(i)<29?(l="days",c=i):Math.abs(r)<11?(l="months",c=r):(l="years",c=o),{unit:l,diff:c}}(new Date,e);try{if(m){return function(e,t,n){return u(t,{localeMatcher:"lookup",numeric:"always",style:n}).format(e.diff,e.unit)}(r,t,null!==(o=null==n?void 0:n.format)&&void 0!==o?o:(null==n?void 0:n.short)?"short":"long")}}catch(e){}return((null==n?void 0:n.short)||"short"===(null==n?void 0:n.format))&&r.diff<0&&t.match(/en.*/)?f(r):h(t,{dateStyle:"short",timeStyle:"short"}).format(e)},cp:function(t){return t===e.al.CompactView},cq:"subreddit_about",cr:"comment-post",cs:"isTranslatable",ct:"targetLanguage",cu:({adjacentElement:t})=>{if(!e.gV(e.gW()))return()=>{};const n=document.createElement("input");return n.setAttribute("type","text"),n.style.position="absolute",n.style.opacity="0",n.style.height="0",n.style.fontSize="16px",t.insertAdjacentElement("afterend",n),n.focus(),()=>n.remove()},cv:2e3,cw:"list-reply-comment",cx:(t="post_detail",n)=>e.b({source:t,action:"click",noun:"downvote_comment"},{action_info:{trigger_type:n}}),cy:(t="post_detail",n)=>e.b({source:t,action:"click",noun:"upvote_comment"},{action_info:{trigger_type:n}}),cz:(t="post_detail",n)=>e.b({source:t,action:"click",noun:"clearvote_comment"},{action_info:{trigger_type:n}}),d:r,d0:Re,d1:F,d2:"hidePostSubmitLink",d3:T,d4:"wiki-revision-note-modal-dialog",d5:"wiki-page-tabs",e:function(e){return Array.from(function*(e){for(let t=1;t<=e;t++)yield t}(e))},f:d,g:function(e,t){const n=e.composedPath();for(const e of n){const n=e.dataset,o=n&&n[t];if(null!=o)return o}return null},h:D,i:({listId:e,seeButtonId:t})=>{const n=document.querySelector(`#${e}`),o=n?.querySelectorAll(".hidden"),r=n?.querySelector(`#${t}`),i=r?.getAttribute("data-see-less-label"),a=r?.getAttribute("data-see-more-label");if((!r||!Xe.has(r))&&n&&r&&o&&i&&a){let e=!0;r.addEventListener("click",(()=>{Array.from(o).forEach((t=>{e?t.classList.remove("hidden"):t.classList.add("hidden")})),r.textContent=e?i:a,e=!e})),Xe.add(r)}},j:function(e=!1){return e?"Saved":"Save"},k:(e,t,n)=>{const o=rt(t,n),r=new Map,i=[e,...o];for(;i.length&&r.size<n;){const e=i.shift();r.has(e.uuid)||r.set(e.uuid,e)}const a=Array.from(r.values());a.length===o.length&&a.every(((e,t)=>e.uuid===o[t].uuid))||et(t,a)},l:Te,m:function(e="#preview"){ft((function(){const t=document.querySelector(e);t?.classList.contains(gt)||t?.classList.add(gt)}))},n:rt,o:(...e)=>e.filter(Boolean).join(" "),p:l,q:()=>{const e=b(),t=g();return"true"===e||void 0===e&&void 0===t?window.matchMedia("(prefers-reduced-motion: reduce)")?.matches:"false"!==t},r:()=>e.b({source:"community_nav",action:"click",noun:"community_recent"}),s:ft,t:function({el:t,clickLocation:n,galleryIndex:o}){try{const r=C(t),i=r?.placement||("placement"in t?t?.placement:void 0),a=r?.postId||("postId"in t?t?.postId:""),s=r?.impressionId||("impressionId"in t?t?.impressionId:""),l=r?r.querySelector(`[click-location=${e.A.MEDIA}]`):t.querySelector(`[click-location=${e.A.MEDIA}]`);let c;l&&(c=l.getBoundingClientRect());const d=e.cX(),u=e.c("track-event",{details:x({postId:a,impressionId:s,post:r,adMedia:c,clickLocation:n,galleryIndex:o||0,page_request_id:d,placement:i})});t.dispatchEvent(u)}catch(e){const t="Sentry"in window?window.Sentry:void 0;t?.captureException&&(e.message&&(e.message=`post/click/ad exception: ${e.message}`),t.captureException(e))}},u:"templateSelector",v:e=>{window.location.href=e||window.location.href},w:function(e){const t=document.querySelector(e);if(!t)return Promise.reject(`lazy script "${e}" cannot be found`);const n=s.get(t);if(n)return n;if(!t.nonce)return Promise.reject('loadLazyScriptWithNonce should only be used to load scripts with "nonce"s');const o=t?.getAttribute("data-src");if(!o)return Promise.reject('loadLazyScriptWithNonce expects a script tag with a "data-src" attribute');const r=document.querySelector(`script[src="${o}"]`);if(r)return Promise.resolve(r);const i=new Promise(((e,n)=>{const r=document.createElement("script");r.nonce=t.nonce,r.onload=function(){e(r)},r.onerror=function(e){n(e?.toString())},r.src=o,r.dataset.lazy="true",document.body.appendChild(r)}));return s.set(t,i),i},x:function(){return{source:"feed_experience",action:"impression",noun:"subreddit"}},y:function(){return{source:"feed_experience",action:"consume",noun:"subreddit"}},z:function(e,t){if(!e?.includes("r/"))return"/";let n=[e,t].filter(Boolean).join("/");return n.startsWith("/")||(n=`/${n}`),n.endsWith("/")||(n=`${n}/`),n}}}));
SML.dm("communitypickerf331f77f",["shelle48e5956","agegatestandaloneclientjsb13e879d"],(async(e,t)=>{const n=e.ha(),o=function(){const e=new WeakMap;let t=!1;return{get isDirty(){return t},getRegistration:(e,t,n)=>({target:e,key:t,value:n}),register({target:n,key:o,value:r}){const s=e.get(n);if(s&&!s.has(o))s.set(o,r);else{if(s)throw new Error(`Cannot register value for key ${o}; something is already registered!`);e.set(n,new Map([[o,r]]))}t=!0},unregister({target:n,key:o,value:r}){const s=e.get(n);s&&s.get(o)===r&&(s.delete(o),t=!0)},getRegisteredElements(n){const o=e.get(n);return t=!1,o},unregisterAll(n){e.delete(n),t=!0}}}(),r=e.h9("FaceplateForm"),s=r.registerAncestorClass,i=r.connectToAncestor,c=Symbol.for("mixins/form-association");function u(e){return!!e&&c in e.constructor}function a(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||c in e.constructor)}const l=new Set(["checkbox","radio"]);function m(e){return a(e)&&l.has(e.type)||u(e)&&"checked"in e}const f=new Set(["radio"]);function p(e){const{count:t,none:n,single:o,many:r}=e;return 0===t&&void 0!==n?n:1===t?o:r}return{C:"community-picker-default",F:c,a:"community-picker-your-communities",b:"community-picker-others",c:i,d:function(t,n=!1){return n||0!==t?e.h({one:`Allows up to ${t} emoji`,other:`Allows up to ${t} emojis`,count:t}):""},e:u,f:function(e){return!!e&&(e instanceof HTMLSelectElement||c in e.constructor&&"options"in e)},g:a,h:function(e){return m(e)&&f.has(e.type)},i:m,j:o,k:n,l:p,m:function(e,n,o=!1,r=""){return p({count:n,none:o?void 0:"",single:e` <faceplate-number number="${n}" pretty></faceplate-number> <span class="${t.cG(r)}"> member </span> `,many:e` <faceplate-number number="${n}" pretty></faceplate-number> <span class="${t.cG(r)}"> members </span> `})},n:function(t,n=!1){return n||0!==t?e.h({one:`${t} question left today.`,other:`${t} questions left today.`,count:t}):""},o:function(t,n=!1){return n||0!==t?e.h({one:`${t} question left this week.`,other:`${t} questions left this week.`,count:t}):""},p:function(t,n=!1){return n||0!==t?e.h({one:`Allows text and up to ${t} emoji`,other:`Allows text and up to ${t} emojis`,count:t}):""},q:"community-picker-your-profile",r:s}}));
SML.dm("constants9e09f052",["shelle48e5956","iconc33661e6","communitypickerf331f77f"],(async(t,e,i)=>{class s{constructor(t,e,i,s,a,n,r,l,o,d){this.valueMissing=t,this.typeMismatch=e,this.patternMismatch=i,this.tooLong=s,this.tooShort=a,this.rangeUnderflow=n,this.rangeOverflow=r,this.stepMismatch=l,this.badInput=o,this.customError=d}}class a{constructor(t){this.submissionValue=null,this.constraintsSuffered={},this.customValidityMessage="",this.validityMessage="",this.validationAnchor=null,this.target=t,this.input=document.createElement("input"),this.input.className="faceplate-internal-input",this.input.tabIndex=-1,this.input.style.opacity="0",this.input.style.width="1px",this.input.style.height="100%",this.input.style.padding="0",this.input.style.border="0",this.input.style.pointerEvents="none",this.input.hidden=!0}_connect(t){t?(this._form=t,i.k.register(t,this.target)):this._form=void 0}_disconnect(){this._form&&(i.k.unregister(this._form,this.target),this._form=void 0)}getFormValue(){return this.submissionValue}setFormValue(t){this.submissionValue=t}get form(){return this._form}isSufferingFromItsConstraints(){for(const t in this.constraintsSuffered)if(this.constraintsSuffered[t])return!0;return!1}setValidity(t,e,i=null){if(t){const e=this.convertFlagsToValidityState(t);for(const i in t)this.constraintsSuffered[i]=e[i]}else this.constraintsSuffered={};const s=!!e&&this.isSufferingFromItsConstraints();if(t&&Object.prototype.hasOwnProperty.call(t,"customError")){const t=this.constraintsSuffered.customError&&e?e:"";this.customValidityMessage=t}else this.validationAnchor=i,this.validityMessage=s&&e?e:"";(this.validationAnchor||this.input).setCustomValidity(this.validationMessage),this.target.setAttribute("faceplate-validity",s?"invalid":"valid")}get willValidate(){return!(this.target.disabled||null===this.submissionValue)}convertFlagsToValidityState(t){return new s(!!t.valueMissing,!!t.typeMismatch,!!t.patternMismatch,!!t.tooLong,!!t.tooShort,!!t.rangeUnderflow,!!t.rangeOverflow,!!t.stepMismatch,!!t.badInput,!!t.customError)}get validity(){const t=this.constraintsSuffered;return this.convertFlagsToValidityState(t)}get validationMessage(){return this.customValidityMessage||this.validityMessage}dispatchInvalidEvent(){const t=new Event("invalid",{bubbles:!0,cancelable:!0});return this.target.dispatchEvent(t),t}checkValidity(){return!this.isSufferingFromItsConstraints()||(this.dispatchInvalidEvent(),!1)}reportValidity(){if(this.isSufferingFromItsConstraints()){if(!this.dispatchInvalidEvent().defaultPrevented){(this.validationAnchor||this.input).reportValidity()}return!1}return!0}}const n=t.ha(),r=new MutationObserver((t=>{for(const e of t){if("attributes"!==e.type||"disabled"!==e.attributeName||!(e.target instanceof HTMLFieldSetElement))continue;const t=n.getRegisteredElements(e.target);if(t)for(const i of t)i.formDisabledCallback&&i.formDisabledCallback(i.disabled||e.target.disabled)}}));function l(t){if(i.F in t)return t;class e extends t{constructor(){super(...arguments),this._internals=new a(this)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),i.c(this).then((t=>{if(!t||!this.isConnected)return;this._internals._connect(t),this.formAssociatedCallback&&this.formAssociatedCallback(t);let e=this;for(;e.parentElement&&(e=e.parentElement,e!==t)&&!(e instanceof HTMLLegendElement);)if(e instanceof HTMLFieldSetElement){this._fieldSet=e;n.getRegisteredElements(e)||r.observe(e,{attributes:!0}),n.register(e,this);break}this.formDisabledCallback&&this.formDisabledCallback(this.disabled)}))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._internals._disconnect(),this.formAssociatedCallback&&this.formAssociatedCallback(null),this._fieldSet&&(n.unregister(this._fieldSet,this),this._fieldSet=void 0)}get value(){return this._internals.getFormValue()}set value(t){this._internals.setFormValue(t),this.syncInputValidity(!1)}get form(){return this._internals.form}get name(){return this.getAttribute("name")||""}get disabled(){return this.hasAttribute("disabled")||!(!this._fieldSet||!this._fieldSet.disabled)}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.formDisabledCallback&&this.formDisabledCallback(t||!(!this._fieldSet||!this._fieldSet.disabled))}get type(){return this.localName}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}setCustomValidity(t){this._internals.setValidity({customError:!!t},t)}syncInputValidity(t=!0){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("input:not(.faceplate-internal-input),textarea");if(!i)return;t&&this.setAttribute("faceplate-dirty","");let s={};if(this._internals.validity.customError){for(const t in i.validity)s[t]=i.validity[t];s.customError=!0}else s=i.validity;this._internals.setValidity(s,i.validationMessage||this._internals.validationMessage)}}return e[i.F]=!0,e}class o extends(l(e.s)){static get styles(){return e.a`:host{display:inline-block;position:relative}:host([aria-disabled=true]){cursor:not-allowed;opacity:.5}:host([faceplate-validity=invalid]){border-color:var(--color-danger-content)}.faceplate-internal-input{position:absolute;left:50%;bottom:0}`}get disabled(){return super.disabled}set disabled(t){super.disabled=t}constructor(){super(),this.ariaDisabled="false",this.addEventListener("focus",this.dispatchFocusin)}dispatchFocusin(){const t=new FocusEvent("focusin",{bubbles:!0});this.dispatchEvent(t)}render(){return e.x` ${this._internals.input} `}formDisabledCallback(t){this.ariaDisabled=t?"true":"false"}formResetCallback(){this.value=this.getAttribute("value"),this.removeAttribute("faceplate-dirty")}}t._([t.n({type:Boolean,reflect:!0})],o.prototype,"disabled",null),t._([t.n({type:String,attribute:"aria-disabled",reflect:!0})],o.prototype,"ariaDisabled",void 0);return{F:class extends o{async firstUpdated(){const t=await i.c(this);t&&this.isConnected&&t.register(this)}},I:o,M:999,T:function(){return o},W:l,i:function(t,e,{className:i,size:s="small",label:a,description:n,leadingContent:r,trailingContent:l,truncateTrailingContent:o,disabled:d=!1,id:c,testId:h}){return t`<div class="flex justify-between gap-[0.5rem] text-secondary py-xs ${d?"opacity-60 pointer-events-none":""} ${i??""}" id="${e(c)}" data-testid="${e(h)}"> <span class="flex items-center gap-xs min-w-0 ${o?"shrink-0 grow":"shrink"}"> ${r?t`<span class="flex shrink-0 items-center justify-center h-xl w-xl"> <span class="text-20 leading-4">${r}</span> </span>`:void 0} <span class="flex flex-col justify-center min-w-0 shrink py-[var(--rem6)]"> <span class="${"small"===s?"text-14":"text-16"} break-normal">${a}</span> <span class="text-12 text-secondary-weak break-normal">${n}</span> </span> </span> <span class="flex items-center ${o?"shrink pl-[8px] min-w-0":"shrink-0"}"> <span class="flex items-center justify-center h-lg ${o?"min-w-0":""}">${l}</span> </span> </div>`}}}));
SML.dm("helpers4792ac4d",["shelle48e5956","iconc33661e6","constants9e09f052"],(async(e,t,i)=>{const r={checkbox:()=>"This checkbox must be on",radio:()=>"This radio must have a selected option"};class o extends i.F{constructor(){super(...arguments),this.required=!1,this.name="",this.initialized=!1,this._events=new e.E(this),this.ariaRole="checkbox",this._checked=!1,this.ellipsis=!1,this._handleClick=this._events.define("click",(e=>{this.disabled||e.defaultPrevented||this.handleInteraction()})),this._handleKeydown=this._events.define("keydown",(e=>{this.disabled||e.defaultPrevented||"Space"===e.code&&(e.stopPropagation(),e.preventDefault(),this.handleInteraction())}))}get checked(){return this._checked}set checked(e){const t=this._checked;e!==t&&(this._internals.setFormValue(e?this.getAttribute("value")||"on":null),this._checked=e,e?this.setAttribute("aria-checked","true"):this.removeAttribute("aria-checked"),this.hasAttribute("required")&&!this.checked?this._internals.setValidity({valueMissing:!0},r[this.ariaRole]()):this._internals.setValidity(),this.requestUpdate("checked",t))}static get styles(){return[super.styles,t.a`:host(:not(faceplate-switch-input)){min-height:var(--size-md)}:host{display:flex;align-items:center;cursor:pointer}label{font:var(--font-14-20-regular);color:var(--color-neutral-content-strong);margin-left:var(--spacer-2xs);cursor:pointer}.icon{border:var(--line-md) solid transparent;height:var(--size-md);font-size:var(--size-md);flex-shrink:0}:host([checked]) .icon,:host([indeterminate]) .icon{display:inline-block;color:var(--color-primary-background)}:host(:hover) .icon{color:var(--color-primary-background-hover)}:host([faceplate-validity=invalid]) .icon{color:var(--color-danger-content);pointer-events:none}:host([aria-disabled=true]) .icon{color:var(--color-neutral-content-disabled);pointer-events:none}:host([ellipsis]) label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([required]) label::after{position:absolute;color:var(--color-danger-content);content:'*'}:host(:focus) .icon{border-color:var(--color-global-focus,transparent);outline:0}:host(:focus){outline:0}:host(:focus:not(:focus-visible)) .icon{border-color:transparent}`]}connectedCallback(){super.connectedCallback(),this.initialized||(this.initialized=!0,this.setAttribute("role",this.ariaRole),this.setAttribute("tabindex","0"))}formDisabledCallback(e){super.formDisabledCallback(e),e?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}render(){return t.x` ${super.render()} <label> <slot></slot> </label> `}handleInteraction(){const e=new InputEvent("input",{bubbles:!0});this.dispatchEvent(e)}}e._([e.n({type:Boolean})],o.prototype,"required",void 0),e._([e.n({type:String})],o.prototype,"name",void 0),e._([e.n({type:Boolean,reflect:!0})],o.prototype,"checked",null),e._([e.n({type:Boolean})],o.prototype,"ellipsis",void 0);const n="siteRule.value",s="categoryOrRule.value";return{C:o,R:class{constructor(e){this.bottomScrollIntoViewIfNeeded=e=>{const t=e?.parentElement;if(t&&e){t.clientHeight-(e.offsetTop+e.clientHeight)<0&&e.scrollIntoView()}},this.getHiddenInputValue=e=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.getAttribute("value")??"",this.setHiddenInputValue=(e,t)=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.setAttribute("value",t)??"",this.getAllHiddenInputValues=()=>Array.from(this.reportFormEl.querySelectorAll("form input[type=hidden]")).reduce(((e,t)=>{const i=t.getAttribute("name");return i?{...e,[i]:t.getAttribute("value")??""}:e}),{}),this.getComputedValueByRef=e=>{if(e===n){const t=this.getHiddenInputValue(s);return this.getHiddenInputValue(e).includes(t)?this.getHiddenInputValue(e):""}return this.getHiddenInputValue(e)},this.checkCondition=e=>{if("object"==typeof e){const{args:t,$type:i}=e;if("computed"===i&&Array.isArray(t)){const i=t.map((e=>"object"==typeof e&&"ref"===e.$type?this.getComputedValueByRef(e.ref):e));return"neq"===e.function?String(i[0])!==String(i[1]):String(i[0])===String(i[1])}if("ref"===i&&e.ref)return this.getHiddenInputValue(e.ref)}return!1},this.getComputedProp=e=>{if("computed"===e.$type&&"conditionalSelect"===e.function&&e.conditions&&e.values){const t=e.conditions;for(const[i,r]of t.entries())if(!0===r||"boolean"!=typeof r&&this.checkCondition(r))return e.values[i]}return e},this.getText=e=>{if(this.isString(e))return e;const t=this.getComputedProp(e);return this.isString(t)?t:""},this.getAction=e=>this.getComputedProp(e),this.getDisabledCondition=e=>!!this.checkCondition(this.getComputedProp(e)),this.getTextDataRef=e=>{const t=e.conditions?.[0];if(t&&"boolean"!=typeof t){const e=t.args;if(Array.isArray(e)&&!this.isString(e[0]))return e[0].ref}return""},this.getDisabledRef=e=>{const t=e.args;if(t&&Array.isArray(t)&&!this.isString(t[0]))return[t[0].ref];const i=e.values;return i?i.map((e=>e.args[0].ref)):void 0},this.isString=e=>"string"==typeof e,this.performAction=e=>{switch(e.actionType){case"formSubmit":return{formSubmit:!0,data:e.args};case"formClose":return{formClose:!0};case"flow":return"SELF_HARM"===this.getHiddenInputValue(e.args[0].ref)?{openCtlFlow:!0}:void 0;case"openTemplatedUrl":const t=e.args,{urlTemplate:i,placeholders:r}=t;if(t&&i&&r){let e="";return r.forEach((r=>{const o=t[r],n=this.getHiddenInputValue(o.ref);n&&(e=i.replaceAll(`%(${r})s`,n))})),{href:e,formClose:!0}}return{formClose:!0};default:const{value:o,key:n}=e.args;return"ref"===o.$type?(this.setHiddenInputValue(n,this.getHiddenInputValue(o.ref)),{key:n,value:this.getHiddenInputValue(o.ref)}):void 0}},this.reportFormEl=e}},S:n,a:s}}));
SML.dm("settingscontroller1c1482ce",["shelle48e5956","iconc33661e6","helpers4792ac4d","agegatestandaloneclientjsb13e879d"],(async(t,e,s,a)=>{let i=class extends s.C{constructor(){super(),this.indeterminate=!1,this.ariaRole="checkbox"}static get styles(){return[super.styles,e.a`:host(:focus-visible) svg{outline:1px auto var(--color-global-focus)}`]}handleInteraction(){this.checked=!this.checked,super.handleInteraction(),this.indeterminate&&(this.indeterminate=!1)}render(){return e.x` ${this.indeterminate?e.cD({attributes:{className:"icon"},size:e.I.Small}):this.checked?e.aX({attributes:{className:"icon"},size:e.I.Small}):e.cE({attributes:{className:"icon"},size:e.I.Small})} ${super.render()} `}};t._([t.n({type:Boolean})],i.prototype,"indeterminate",void 0),i=t._([t.e("faceplate-checkbox-input")],i);let r=t.B;return{S:class{constructor(e,s){this.submitMutation=a.M((async(t,e,s,a,i,n)=>{let o;try{if(o=await r({operation:e,variables:s}),o.errors.length>0||n?.(o))throw"Could not save setting";a?.(o)}catch(e){this.state={...this.state,...t},this.host.requestUpdate(),this.showErrorAlert(),i?.(o,e)}}),250,!0),this.showSuccessAlert=()=>{const e=t.c("faceplate-alert",{level:t.x.success,message:"Changes saved"});this.host.dispatchEvent(e)},this.showErrorAlert=e=>{const s=t.c("faceplate-alert",{level:t.x.error,cause:"uncategorized",message:e??"We had some issues saving your changes. Please try again."});this.host.dispatchEvent(s)},(this.host=e).addController(this),this.state=s}hostConnected(){this.host.removeAttribute("initialState")}async updateSetting(t,e,s,a,i,r,n){this.state={...this.state,...t},this.host.requestUpdate(),await this.submitMutation(e,s,a,i,r,n)}}}}));
SML.dm("userflairfe275854",["iconc33661e6","shelle48e5956"],(async(t,e)=>{const i={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},n=(t,e,n)=>{const{container:o,margin:s,padding:r,position:l,variantFlipOrder:a,positionFlipOrder:p}={container:document.documentElement.getBoundingClientRect(),...i,...n},{left:c,top:h}=e.style;e.style.left="0",e.style.top="0";const u=t.getBoundingClientRect(),d=e.getBoundingClientRect(),m={t:u.top-d.height-s,b:u.bottom+s,r:u.right+s,l:u.left-d.width-s},f={vs:u.left,vm:u.left+u.width/2+-d.width/2,ve:u.left+u.width-d.width,hs:u.top,hm:u.bottom-u.height/2-d.height/2,he:u.bottom-d.height},[g,E="middle"]=l.split("-"),_=p[g],b=a[E],{top:y,left:v,bottom:w,right:S}=o;for(const t of _){const i="t"===t||"b"===t,n=m[t],[o,s]=i?["top","left"]:["left","top"],[l,a]=i?[d.height,d.width]:[d.width,d.height],[p,c]=i?[w,S]:[S,w],[h,u]=i?[y,v]:[v,y];if(!(n<h||n+l+r>p))for(const l of b){const p=f[(i?"v":"h")+l];if(!(p<u||p+a+r>c))return e.style[s]=p-d[s]+"px",e.style[o]=n-d[o]+"px",t+l}}return e.style.left=c,e.style.top=h,null};function o(t,e=50,i={leading:!0,trailing:!0}){i={leading:!0,trailing:!0,...i};let n,o,s,r=null,l=0;const a=function(){l=i.leading?Date.now():0,r=null,s=t.apply(n,o),r||(n=o=null)};return function(...p){const c=Date.now();l||!1!==i.leading||(l=c);const h=e-(c-l);return n=this,o=p,h<=0||h>e?(r&&(clearTimeout(r),r=null),l=c,s=t.apply(n,p),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(a,h)),s}}const s=["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"];class r{set popperTrigger(t){this._popperTrigger=t}get popperTrigger(){if(this._popperTrigger)return this._popperTrigger;let t=this.host.shadowRoot?.querySelector("slot[faceplate-popper-trigger]")?.assignedElements()?.[0]??null;let e=0;const i=t=>t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement||s.includes(t?.getAttribute("role")??"");if(i(t))return t;for(;t&&e<5;){if(t=t?.assignedElements?t?.assignedElements()?.[0]??null:t?.children[0]??null,i(t))return t;e++}return null}get popperContent(){return this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.querySelector("slot")?.assignedElements()?.[0]??null}constructor(e,{containerElement:i=document.documentElement,scrollContainerElement:n=t.cJ().scrollContainerElement(),allowCloseByEvent:s=!0,...r}){this.status="closed",this._containerSize=null,this.containerSizeChanged=t=>{if(!this._containerSize)return!0;const e=this._containerSize;return Object.keys(t).some((i=>e[i]!==t[i]))},this.updateAriaStates=async(t=!1)=>{const e="open"===this.currentState.state,i="tooltip"===this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.getAttribute("role"),n="dialog"===this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.getAttribute("role"),o=this.popperTrigger,s=this.popperContent,r=!this._options.manualTriggerFocus&&!t&&!n&&"function"==typeof o?.focus;i||(t&&(o?.setAttribute("aria-haspopup",n?"dialog":"true"),s?.setAttribute("hidden","")),e?(s?.removeAttribute("hidden"),this.currentState.animationFinished&&await this.currentState.animationFinished,s?.openMenu?.()):(s?.setAttribute("hidden",""),s?.closeMenu?.(),r&&o?.focus()),o?.setAttribute("aria-expanded",`${e}`))},this.referenceInViewport=o((()=>{const{reference:t=null,containerElement:e=document.documentElement}=this._options;if("open"!==this.status)return!1;if(!t)return!1;const i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||e.clientHeight)&&i.right<=(window.innerWidth||e.clientWidth)}),80),this.isOffscreenBottom=o((t=>{const e=t.popper?.getBoundingClientRect(),i=this._options.reference?.getBoundingClientRect();return!!e&&window.innerHeight-(i.bottom+e.height)<16}),80),this.getPosition=t=>{const e=t.position??"bottom";return"open"===this.status?e:this.popper&&this.isOffscreenBottom(t)&&e?.includes("bottom")?e.replace("bottom","top"):t.position},this.reposition=()=>{this.referenceInViewport()?this.updatePopper():this.close()},this.open=async()=>{if(this.popper){if("open"===this.status)return Promise.resolve(null)}else this.initialize();this.popperContent?.removeAttribute("hidden"),this.updateOptions({});const t=this.showElement(this._options.popper,!0);return this.setStatus("open",t),t?.finished??Promise.resolve(null)},this.close=async t=>{if(t&&!this._options.allowCloseByEvent)return Promise.resolve(null);if(t&&(t.preventDefault(),t.stopPropagation()),"open"!==this.status)return Promise.resolve(null);const e=this.hideElement(this._options.popper,!0);return this.setStatus("closed",e),e?.finished??Promise.resolve(null)},this.toggle=async t=>"open"!==this.status?this.open():this.close(t),this.updatePopper=t=>{if(!this.popper)return null;const e=this.actualPosition;let i=null;try{i=this.popper.update(t)}catch(t){return null}const n=a(i);return n!==e&&(this.setActualPosition(n),this.host.requestUpdate()),i},this.setStatus=(t,e)=>{this.status=t,this.statusAnimation=e,this.statusAnimation?.finished.then((()=>{this.updateAriaStates()}))},this.setActualPosition=t=>{this.actualPosition=t},this.handleContainerResize=o((()=>{if("open"!==this.status)return;const t=(this._options.containerElement??document.documentElement).getBoundingClientRect();this.containerSizeChanged(t)&&(this._containerSize=t,this.updatePopper({...this._options,container:t}))}),80),this.getKeyframes=(t,e="show",i)=>{try{return new KeyframeEffect(t,[{visibility:"hidden",opacity:"0"},{visibility:"visible",opacity:"1"}],{fill:"both",direction:"show"===e?"normal":"reverse",duration:i,easing:"ease-in-out"})}catch(i){return()=>{"show"===e?(t.style.visibility="visible",t.style.opacity="1"):(t.style.visibility="hidden",t.style.opacity="0")}}},(this.host=e).addController(this),this._options={...r,containerElement:i,scrollContainerElement:n,allowCloseByEvent:s},this.actualPosition=this._options.position||null}async hostConnected(){await this.host.updateComplete,this.updateAriaStates(!0)}initialize(){this._containerSize=(this._options.containerElement??document.documentElement).getBoundingClientRect(),this.popper=((t,e,i)=>{const o="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...i}:t;return{update(t=o){const{reference:e,popper:i}=Object.assign(o,t);if(!i||!e)throw new Error("Popper- or reference-element missing.");return n(e,i,o)}}})({...this._options,container:this._containerSize}),this.resizeObserver=new ResizeObserver(this.handleContainerResize),this._options.containerElement&&this.resizeObserver.observe(this._options.containerElement);(this._options.scrollContainerElement??window).addEventListener("scroll",this.reposition),this.replaceElement(void 0,this._options.popper)}hostDisconnected(){this._options.containerElement&&this.resizeObserver?.unobserve(this._options.containerElement);(this._options.scrollContainerElement??window).removeEventListener("scroll",this.reposition)}getOptions(){return this._options}updateOptions({...t}){const e={...this._options,...t},i={...e};this.popper&&(this._containerSize=(e.containerElement??document.documentElement).getBoundingClientRect(),i.container=this._containerSize);const n=i.popperElementKey||"popperElement";!i.popper&&n in this.host&&(i.popper=this.host[n]);const o=i.referenceElementKey||"popperReferenceElement";!i.reference&&o in this.host&&(i.reference=this.host[o]),i.popper!==this._options.popper&&this.replaceElement(this._options.popper,i.popper),i.containerElement!==this._options.containerElement&&(this._options.containerElement&&(this.resizeObserver?.unobserve(this._options.containerElement),this._options.containerElement.removeEventListener("faceplate-close",this.close)),i.containerElement&&(this.resizeObserver?.observe(i.containerElement),i.containerElement.addEventListener("faceplate-close",this.close))),this._options=i,this.updatePopper({...this._options,position:this.getPosition(i)})}get currentState(){return{state:this.status,animationFinished:this.statusAnimation?.finished.then((()=>{}))??Promise.resolve()}}showElement(t,e=!0){if(t)return t.style.display="",this.updatePopper(),l(this.getKeyframes(t,"show",e?150:0))}hideElement(t,e="open"===this.status){if(!t)return;if("closed"===this.status)return void(t.style.display="none");const i=l(this.getKeyframes(t,"hide",e?150:0));return i?.finished.catch((()=>{})).then((()=>{"closed"===this.status&&(t.style.display="none"),i?.cancel()})),i}replaceElement(t,e){t&&(this.hideElement(t,!1),t.removeEventListener("faceplate-close",this.close)),e&&("open"===this.status?this.showElement(e,!1):this.hideElement(e,!1),e.addEventListener("faceplate-close",this.close))}}r.defaultPopperContentStyles=t.a`[faceplate-popper-content]{position:fixed;visibility:hidden;opacity:0}`;const l=t=>{if("function"==typeof t)return t();if(!t.target)return;t.target.getAnimations().forEach((t=>t.cancel()));const e=new Animation(t);return e.play(),e},a=t=>{if(!t)return null;const[e,i]=t,n=e?{t:"top",b:"bottom",l:"left",r:"right"}[e]:null,o=i?{s:"start",m:"middle",e:"end"}[i]:null;return n&&o?`${n}-${o}`:null},p="moderator";return{P:r,Q:"pageNumber",U:"user-flair-assign-modal",a:()=>e.b({source:p,action:"click",noun:"assign_flair_dialog"}),b:()=>e.b({source:p,action:"click",noun:"remove_assigned_userflair_confirm"}),c:()=>e.b({source:p,action:"click",noun:"user_search"}),d:()=>e.b({source:p,action:"click",noun:"assigned_flair_edit_dialog"}),e:"user-flair__user-delete",f:()=>e.b({source:p,action:"click",noun:"table_pagination"}),g:"user-flair__user-edit",h:"user-flair__user-delete-modal",i:"pageSize",j:"before",k:"after",l:"query",m:t=>e.b({source:p,action:"click",noun:"username_input"},{action_info:t}),n:()=>e.b({source:p,action:"click",noun:"assigned_flair_edit_save"}),o:()=>e.b({source:p,action:"click",noun:"assign_flair_confirm"}),r:()=>e.b({source:p,action:"click",noun:"remove_assigned_userflair_dialog"})}}));
SML.dm("selectcontroller4c63b3e8",["shelle48e5956","iconc33661e6","userflairfe275854","agegatestandaloneclientjsb13e879d"],(async(e,t,s,i)=>{let n=class extends t.s{constructor(){super(...arguments),this.position="bottom-middle",this.triggerEvent="click",this.disabled=!1,this.manualTriggerFocus=!1,this.containerElement=document.documentElement,this.scrollContainerElement=window,this.onopen=null,this.onclose=null,this.emitter=i.J(this),this._popperController=new s.P(this,{position:this.position,referenceElementKey:"referenceElement",popperElementKey:"_menu",containerElement:this.containerElement,scrollContainerElement:this.scrollContainerElement,manualTriggerFocus:this.manualTriggerFocus}),this._eventUsedMap=new WeakMap,this.updated=e=>{e.has("position")&&this._popperController.updateOptions({position:this.position}),e.has("manualTriggerFocus")&&this._popperController.updateOptions({manualTriggerFocus:this.manualTriggerFocus})},this.handleDocumentClick=e=>{if(!(e.target instanceof Element)||this.hidden)return;const t=e.target.closest('[slot="menu"]'),s=this._eventUsedMap.has(e);null!==t||s||this.close()},this.handleEscape=e=>{"Escape"===e.key&&this.close(e)},this.addListenersWhileOpened=()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("keydown",this.handleEscape)},this.cleanupListenersWhileOpened=()=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleEscape)},this.show=e=>{this.hidden=!1,this.emitter.dispatch("open"),this._menu.style.pointerEvents="auto",this._popperController.currentState.animationFinished.then((()=>{this.addListenersWhileOpened(),this.emitter.dispatch("opened")})),this.onopen?.(e??new Event("faceplate-dropdown-menu-show"))},this.close=(e,t)=>{!0===t?.disableRestoreFocus&&this._popperController.updateOptions({manualTriggerFocus:!0}),this.cleanupListenersWhileOpened(),this.hidden=!0,this.emitter.dispatch("close"),this._menu.style.pointerEvents="none",this._popperController.currentState.animationFinished.then((()=>{this.emitter.dispatch("closed"),this._popperController.updateOptions({manualTriggerFocus:this.manualTriggerFocus})})),this.onclose?.(e??new Event("faceplate-dropdown-menu-open"))},this.toggle=e=>{this.hidden?this.show(e):this.close(e)},this.handleClick=this.disabledHandler((e=>{this._eventUsedMap.set(e,!0),"click"===this.triggerEvent&&(this.hidden?this.show(e):this.close(e))})),this.handleMouseenter=this.disabledHandler((e=>{"hover"===this.triggerEvent&&this.show(e)})),this.handleMouseleave=this.disabledHandler((e=>{"hover"===this.triggerEvent&&this.close(e)})),this.handleFocusOut=this.disabledHandler((e=>{!this.hidden&&e.relatedTarget instanceof HTMLElement&&!o(this,e.relatedTarget)&&this.close(e,{disableRestoreFocus:!0})}))}get referenceElement(){return this.shadowRoot?.querySelector("#trigger")?.assignedElements()[0]??this}static get styles(){return[t.a`:host{--faceplate-dropdown-menu-z-index:1000;display:flex}#menu{border-radius:var(--rem8);box-shadow:0 4px 8px 0 rgba(0,0,0,.1),0 6px 12px 0 rgba(0,0,0,.25);display:inline-flex;justify-content:center;overflow:hidden;width:max-content;z-index:var(--faceplate-dropdown-menu-z-index);outline-offset:-1px}`,s.P.defaultPopperContentStyles]}get hidden(){return"closed"===this._popperController.currentState.state}set hidden(e){!0===e?this._popperController.close():this._popperController.open()}connectedCallback(){super.connectedCallback(),this.classList.add("connected")}firstUpdated(){this._menu&&(this._menu.style.pointerEvents="none")}disconnectedCallback(){super.disconnectedCallback(),this.cleanupListenersWhileOpened()}disabledHandler(e){return t=>{this.disabled||e(t)}}render(){return t.x` <slot id="trigger" aria-describedby="menu" faceplate-popper-trigger aria-controls="menu" @click="${this.handleClick}" @mouseenter="${this.handleMouseenter}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <article id="menu" faceplate-popper-content @focusout="${this.handleFocusOut}"> <slot name="menu"></slot> </article> `}};e._([e.n({type:String})],n.prototype,"position",void 0),e._([e.n({type:String,attribute:"trigger-event"})],n.prototype,"triggerEvent",void 0),e._([e.n({type:Boolean})],n.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"manual-trigger-focus"})],n.prototype,"manualTriggerFocus",void 0),e._([e.y("#menu")],n.prototype,"_menu",void 0),e._([e.y("#trigger")],n.prototype,"_trigger",void 0),n=e._([e.e("faceplate-dropdown-menu")],n);const o=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;if(0===e.childElementCount&&!(e instanceof HTMLSlotElement))return!1;if(e.contains(t))return!0;if(e instanceof HTMLSlotElement&&e.assignedElements().some((e=>o(e,t))))return!0;if(e instanceof Element&&e.shadowRoot&&o(e.shadowRoot,t))return!0;for(const s of e.querySelectorAll("slot"))if(s.assignedElements().some((e=>o(e,t))))return!0;return!1};return{get F(){return n},S:class{constructor(e){this.previousChar="",this.focusedIndex=-1,this.cancelUpdate=!1,this.hasOptionVisualFocus=!1,this.hasSelection=!1,this.searchString="",this.searchTimeoutId=null,this.initializeSelections=()=>{this.options.forEach((e=>{this.makeSelection({selected:e.selected,option:e})}))},this.dispatchChangeEvent=()=>{this.hasSelection=!0,this.host.dispatchEvent(new CustomEvent(`${this.host.nodeName.toLowerCase()}:change`,{composed:!0,bubbles:!0,detail:{target:this.host}}))},this.onBlur=e=>{this.options.includes(e.relatedTarget)||(this.closeDropdownMenu(),this.host.blur())},this.onClick=()=>{(this.host.multiple&&!this.hasOptionVisualFocus||!this.host.multiple)&&this.host.dropdownMenu?.toggle()},this.shouldSelectFocusedOption=()=>{const e=this.host.hasAttribute("autocomplete"),t=!!this.host.readonly;return(e||t)&&!this.hasSelection&&this.hasOptionVisualFocus},this.onMenuClose=()=>{if(this.cancelUpdate||this.shouldSelectFocusedOption()&&this.selectFocusedOption(),this.selectedIndex>=0)this.focusedIndex=this.selectedIndex;else{if(this.host.readonly&&this.cancelUpdate)return;this.visibleOptions[this.focusedIndex]?.visualFocus(!1)}this.hasOptionVisualFocus=!1},this.onMenuOpen=()=>{this.focusedIndex=this.selectedIndex>=0?this.selectedIndex:-1,this.host.readonly&&this.focusedIndex<0&&(this.focusedIndex=0),this.focusedIndex>=0&&this.visuallyFocusOption(this.focusedIndex),this.hasSelection=!1,this.cancelUpdate=!1},this.onFaceplateOptionSelect=e=>{if(e.stopImmediatePropagation(),e.defaultPrevented)return;const t=e,{option:s,selected:i,allowSingleDeselection:n}=t?.detail||{};s&&this.makeSelection({option:s,selected:i,allowSingleDeselection:n})},this.makeSelection=async({selected:e,option:t,allowSingleDeselection:s})=>{this.host.multiple?(t?.dispatchEvent(this.createUpdateEvent(e)),await(t?.updateComplete)):(!s&&e||s)&&(e&&this.singleSelectionCache!==t&&this.singleSelectionCache?.dispatchEvent(this.createUpdateEvent(!1)),t?.selected!==e&&(t?.dispatchEvent(this.createUpdateEvent(e)),await(t?.updateComplete)),e&&(this.singleSelectionCache=t),setTimeout(this.closeDropdownMenu)),this.dispatchChangeEvent(),this.cancelUpdate=!1,this.host.requestUpdate()},this.visuallyFocusNextOption=()=>{this.focusedIndex===this.visibleOptions.length-1&&(this.focusedIndex=-1),this.visuallyFocusOption(++this.focusedIndex),this.hasOptionVisualFocus=!0},this.visuallyFocusPrevOption=()=>{this.focusedIndex<=0&&(this.focusedIndex=this.visibleOptions.length),this.visuallyFocusOption(--this.focusedIndex),this.hasOptionVisualFocus=!0},this.focusNextMatchedOption=e=>{if("number"==typeof this.searchTimeoutId&&window.clearTimeout(this.searchTimeoutId),this.searchTimeoutId=setTimeout((()=>{this.previousChar=this.searchString,this.searchString=""}),500),this.searchString+=e,this.searchString===this.previousChar){let e=this.focusedIndex+1;for(let t=0;t<this.visibleOptions.length;t++){if(e>this.visibleOptions.length-1&&(e=0),this.visibleOptions[e]?.displayText?.toLowerCase().startsWith(this.searchString)){this.visuallyFocusOption(e),this.focusedIndex=e;break}e++}}else{const e=this.visibleOptions.findIndex(((e,t)=>t!==this.focusedIndex&&e.displayText?.toLowerCase().startsWith(this.searchString)));-1!==e&&(this.focusedIndex=e,this.visuallyFocusOption(this.focusedIndex))}this.previousChar=this.searchString},this.selectFocusedOption=()=>{if(this.focusedIndex<0)return;const e=this.visibleOptions[this.focusedIndex];this.makeSelection({selected:!e.selected,option:e})},this.visuallyFocusOption=e=>{this.currentFocusedOption&&this.currentFocusedOption?.visualFocus(!1),this.currentFocusedOption=this.visibleOptions[e],this.currentFocusedOption?.visualFocus(!0),this.currentFocusedOption?.scrollIntoView()},this.openDropdownMenu=()=>{!this.host.disabled&&this.host.dropdownMenu?.hidden&&this.host.dropdownMenu?.show()},this.closeDropdownMenu=()=>{this.host.dropdownMenu?.hidden||this.host.dropdownMenu?.close()},this.handleKeyBindings=e=>{switch(e.key){case"ArrowDown":if(this.host.dropdownMenu?.hidden)return void this.openDropdownMenu();e.altKey||this.visuallyFocusNextOption();break;case"ArrowUp":this.openDropdownMenu(),this.visuallyFocusPrevOption();break;case"Escape":this.cancelUpdate=!0,this.closeDropdownMenu(),e.stopPropagation();break;case"Enter":case"Tab":this.host.dropdownMenu?.hidden||this.selectFocusedOption();break;default:e.key.match("^\\w$")&&(this.openDropdownMenu(),(this.host.multiple||this.host.readonly||this.host.referenceElement instanceof HTMLButtonElement)&&this.focusNextMatchedOption(e.key))}},(this.host=e).addController(this)}async hostConnected(){await this.host.updateComplete,this.resizeObserver=new ResizeObserver((()=>{this.host.style.setProperty("--select-width",`${this.host.getBoundingClientRect().width}px`)})),this.resizeObserver?.observe(this.host),this.host.addEventListener("faceplate-option:select",this.onFaceplateOptionSelect),this.host.addEventListener("keydown",this.handleKeyBindings),this.host.addEventListener("faceplate-dropdown-menu:open",this.onMenuOpen),this.host.addEventListener("faceplate-dropdown-menu:closed",this.onMenuClose),this.host.addEventListener("click",this.onClick),this.host.addEventListener("blur",this.onBlur),this.initializeSelections(),this.host.dropdownMenu&&(this.host.dropdownMenu.triggerEvent=void 0)}hostDisconnected(){this.resizeObserver?.disconnect(),this.host.removeEventListener("keydown",this.handleKeyBindings),this.host.removeEventListener("faceplate-option:select",this.onFaceplateOptionSelect),this.host.removeEventListener("faceplate-dropdown-menu:open",this.onMenuOpen),this.host.removeEventListener("faceplate-dropdown-menu:closed",this.onMenuClose),this.host.removeEventListener("click",this.onClick),this.host.removeEventListener("blur",this.onBlur)}get selectedOptions(){return this.options.filter((e=>e.selected))}get options(){return this.host.options??[]}get selectedIndex(){return this.options.findIndex((e=>e.selected))}get visibleOptions(){return(this.host.options??[]).filter((e=>!e.hasAttribute("hidden")))}get value(){return this.selectedOptions[0]?.value||""}set value(e){if(e===this.value)return;const t=this.options.findIndex((t=>t.value===e));if(-1===t)this.singleSelectionCache?.dispatchEvent(this.createUpdateEvent(!1)),this.singleSelectionCache=null;else{const e=this.options[t];this.makeSelection({selected:t>=0,option:e})}}createUpdateEvent(e){return new CustomEvent("faceplate-option:update",{composed:!0,detail:{selected:e}})}getSelectedOptionsAsStr(){return this.selectedOptions.map((e=>e.displayText)).join(", ").trim()}}}}));
SML.dm("tablepagination77cf692d",["shelle48e5956","iconc33661e6"],(async(e,t)=>{const s=["input","a","faceplate-checkbox-input","faceplate-radio-input","faceplate-switch-input "],i=({collection:e,activeIndex:t})=>{let i=0;for(const o of e){o.tabIndex=i===t?0:-1;for(const e of Array.from(o.children)){const o=e.querySelector(s.join(","));o&&o instanceof HTMLElement&&(o.tabIndex=i===t?0:-1)}i++}};let o=class extends t.s{constructor(){super(...arguments),this.disableAutoFocus=!1,this.ariarole="menu",this.activeIndex=0,this.firstUpdated=()=>{this.prevFocusedElement=document.activeElement,this.hasAttribute("hidden")?this.toggleItemsTabbable(!1):this.openMenu()},this.toggleItemsTabbable=(e=!0,{overrideActiveIndex:t}={})=>{i({collection:this.getFocusableListItems(),activeIndex:t??(e?0:-1)})},this.openMenu=async()=>{const e=this.getFocusableListItems().findIndex((e=>"true"===e.getAttribute("aria-selected")));this.toggleItemsTabbable(!0,{overrideActiveIndex:-1===e?void 0:e}),this.disableAutoFocus||(e>=0&&e!==this.activeIndex&&(this.activeIndex=e),this.getFocusableListItems()[this.activeIndex]?.focus())},this.closeMenu=()=>{this.toggleItemsTabbable(!1)},this.setFocus=e=>{this.getFocusableListItems()[e]?.focus(),this.activeIndex=e},this.onFocusNext=()=>{const e=this.activeIndex===this.getFocusableListItems().length-1?0:this.activeIndex+1;i({collection:this.getFocusableListItems(),activeIndex:e}),this.setFocus(e)},this.onFocusPrev=()=>{const e=0===this.activeIndex?this.getFocusableListItems().length-1:this.activeIndex-1;i({collection:this.getFocusableListItems(),activeIndex:e}),this.setFocus(e)},this.onKeyDown=e=>{switch(e.key){case"Escape":this.prevFocusedElement.focus(),this.onclose&&this.onclose(e);break;case"ArrowDown":case"ArrowRight":this.onFocusNext(),e.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.onFocusPrev(),e.preventDefault()}}}static get styles(){return t.a`:host{background-color:var(--color-neutral-background-strong)}ul{padding:var(--spacing-sm) 0;margin:0}`}getFocusableListItems(){const e="li:not([list-item-group]):not([list-item-header])",t=this.shadowRoot.querySelector("slot"),s=[];for(const i of t.assignedElements({flatten:!0}))i?.matches(e)&&s.push(i),s.push(...Array.from(i.querySelectorAll(e)));return s.map((e=>e.firstElementChild))}render(){return t.x` <ul role="${this.ariarole}" @keydown="${this.onKeyDown}"> <slot></slot> </ul> `}};e._([e.n({type:Boolean,attribute:"disable-auto-focus"})],o.prototype,"disableAutoFocus",void 0),e._([e.n({type:String})],o.prototype,"ariarole",void 0),e._([e.d()],o.prototype,"activeIndex",void 0),o=e._([e.e("faceplate-menu")],o);return{D:1,get F(){return o},T:"table-pagination__paginate-previous",a:25,b:"table-pagination__paginate-next",c:"table-pagination__page-size-updated"}}));
SML.dm("faceplatetablistb81db8b2",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(e,t,a)=>{let s=class extends(a.W(e.aW)){constructor(){super(...arguments),this.pages=0,this.for=void 0,this._events=new e.E(this),this._windowEvents=new e.E(this,(()=>window)),this._locationHashMap=new Map,this._selectedElements=new Set,this._activeSlotRef=e.aq(),this._handleHashChange=this._windowEvents.define("hashchange",(()=>{const e=this._locationHashMap.get(window.location.hash);e&&(this.pageIndex=e)})),this._handleClick=this._events.define("click",(e=>{let t=null;e.target instanceof HTMLAnchorElement&&(t=e.target.getAttribute("href"),t&&"#"!==t[0]&&(t=null)),null!==t&&(e.preventDefault(),e.stopPropagation());const a=e.composedPath();for(let e=0;e<a.length;e++){const s=a[e];if(s instanceof HTMLSpanElement){const e=this.getPageIndexFromSpanWrapper(s);if(t){const e=new URL(window.location.href);e.hash=t,window.history.pushState(null,"",e.href)}if(0!==e){this.pageIndex=e;break}}}})),this._handleKeydown=this._events.define("keydown",(e=>{if("ArrowLeft"===e.key)this.previousPage();else{if("ArrowRight"!==e.key)return;this.nextPage()}e.preventDefault(),e.stopPropagation()}))}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}render(){if(this.pages<1)return t.x``;const{pageNames:s}=this;return t.x` <div class="tablist" role="tablist"> ${a.e(this.pages).map((a=>t.x` <span data-i="${a}" role="tab" aria-selected="${a===this.pageIndex?"true":"false"}"> <slot @slotchange="${this.handleSlotChange}" name="${s?s[a-1]:`page-${a}`}" ${a===this.pageIndex?e.as(this._activeSlotRef):""}></slot> </span> `))} </div> `}updated(e){if(e.has("pageIndex")){this._clearSelectedAttributes();const e=this._activeSlotRef.value;if(!e)return;for(const t of e.assignedElements())this._setSelectedAttribute(t),t.focus()}}_clearSelectedAttributes(){if(this._selectedElements.size){for(const e of this._selectedElements)e.removeAttribute("faceplate-tab-selected");this._selectedElements.clear()}}_setSelectedAttribute(e){this._selectedElements.add(e),e.setAttribute("faceplate-tab-selected","")}handleSlotChange(e){const{hash:t}=window.location,a=e.target;if(!(a.parentElement instanceof HTMLSpanElement))return;const s=a.assignedElements(),n=this.getPageIndexFromSpanWrapper(a.parentElement),i=n===this.pageIndex;if(i&&this._clearSelectedAttributes(),s.length)for(const e of s){if(i&&this._setSelectedAttribute(e),!(e instanceof HTMLAnchorElement))continue;const a=e.getAttribute("href");a&&(this._locationHashMap.set(a,n),a===t&&(this.pageIndex=n))}}getPageIndexFromSpanWrapper(e){return e.dataset.i?parseInt(e.dataset.i,10):0}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};return e._([e.n({type:Number})],s.prototype,"pages",void 0),e._([e.n({type:Number,attribute:"pageindex"})],s.prototype,"pageIndex",null),e._([e.n({type:String})],s.prototype,"for",void 0),e._([e.n({converter:e.a4,attribute:"pagenames"})],s.prototype,"pageNames",null),e._([e.y(".tablist")],s.prototype,"tabList",void 0),s=e._([e.e("faceplate-tablist")],s),{get F(){return s}}}));
SML.dm("faceplatetabgroupa59ee035",["shelle48e5956","faceplatetablistb81db8b2","agegatestandaloneclientjsb13e879d","iconc33661e6"],(async(t,e,i,n)=>{var a;let s=a=class extends e.F{constructor(){super(...arguments),this._setup=!1,this._bbwidth=0,this._fbwidth=0,this._forwardButtonVisible=!0,this._backButtonVisible=!1,this.selectedClasses=["bg-secondary-background-selected","!text-neutral-content-strong","tab-selected"],this.appearance="fill",this.insetHug=!1,this.underline=!1,this._mutationCallback=t=>{for(const e of t)if("attributes"===e.type&&"faceplate-tab-selected"===e.attributeName&&e.target.nodeType===Node.ELEMENT_NODE){e.target.hasAttribute("faceplate-tab-selected")?this._handleTabSelected(e.target):this._handleTabDeselected(e.target)}},this._setupButtons=()=>{this._setup&&(this.backButtonElements[0]?.removeEventListener("click",this._handleBackButtonClick),this.style.removeProperty("--back-button-width"),this.forwardButtonElements[0]?.removeEventListener("click",this._handleForwardButtonClick),this.style.removeProperty("--forward-button-width")),this.backButtonElements[0]instanceof HTMLElement&&(this._backButtonVisible||this.backButton?.removeAttribute("hidden"),this._bbwidth=this.backButton.clientWidth,this._backButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--back-button-width",`${this._bbwidth}px`),this.backButtonElements[0].addEventListener("click",this._handleBackButtonClick)),this.forwardButtonElements[0]instanceof HTMLElement&&(this._forwardButtonVisible||this.forwardButton?.removeAttribute("hidden"),this._fbwidth=this.forwardButton.clientWidth,this._forwardButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--forward-button-width",`${this._fbwidth}px`),this.forwardButtonElements[0].addEventListener("click",this._handleForwardButtonClick))},this._handleContainerScroll=()=>{this._backButtonVisible=0!==Math.floor(this._containerLeft),this._forwardButtonVisible=Math.round(this._containerBaseRight)!==Math.round(this.container?.scrollWidth??0)},this._handleBackButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._leftmostVisibleTab,n=e[i];if(null==n)return;let s=n.right-(this.container?.clientWidth??0);i!==e.length-1&&(s+=(this._fbwidth??0)-a.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:s})},this._handleForwardButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._rightmostVisibleTab,n=e[i];if(null==n)return;let s=n.left;0!==i&&(s-=(this._bbwidth??0)+a.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:s})},this._scrollToSelected=()=>{const t=this._tabs,e=t.findIndex((t=>"true"===t.el.getAttribute("aria-selected"))),i=t[e];if(null==i)return;const n=i.right-i.left,a=(this.container?.clientWidth??0)-(this._bbwidth+this._fbwidth),s=i.left-this._bbwidth-a/2+n/2;this.container?.scroll({behavior:"smooth",left:s})}}connectedCallback(){super.connectedCallback(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this,a.mutationObserverOptions)}disconnectedCallback(){super.disconnectedCallback(),this._mutationObserver.disconnect()}firstUpdated(t){super.firstUpdated(t),this._setupAll()}_setupAll(){this._setup&&this.container&&(this.container.removeEventListener("scroll",this._handleContainerScroll),this._resizeObserver?.unobserve(this.container)),this.container?.addEventListener("scroll",this._handleContainerScroll),this.container?.removeEventListener("resize",this._setupAll),this._setupButtons(),this._resizeObserver||(this._resizeObserver=new ResizeObserver(this._handleContainerScroll)),this.container&&this._resizeObserver?.observe(this.container),this._setup||(this.style.setProperty("--anim-duration","0ms"),this._handleContainerScroll(),requestAnimationFrame((()=>{this.style.removeProperty("--anim-duration")}))),this._setup=!0}_handleTabSelected(t){let e=this.selectedClasses;t.classList.contains("tab-bottom-border")&&t.hasAttribute("rpl")&&(e=e?.filter((t=>"bg-secondary-background-selected"!==t))),t.classList.add(...e??[]),t.tabIndex=0,this._scrollToSelected()}_handleTabDeselected(t){t.tabIndex=-1,t.classList.remove(...this.selectedClasses??[])}get _containerBaseWidth(){return this.container?.clientWidth??0}get _containerBaseLeft(){return this.container?.scrollLeft??0}get _containerLeft(){return 0===this._containerBaseLeft?this._containerBaseLeft:this._containerBaseLeft+(this.backButton?.clientWidth??0)+a.tabSpacing.raw}get _containerBaseRight(){return this._containerBaseLeft+this._containerBaseWidth}get _containerRight(){return this._containerBaseRight===this.container?.scrollWidth?this._containerBaseRight:this._containerBaseRight-((this.forwardButton?.clientWidth??0)+a.tabSpacing.raw)}get _rightmostVisibleTab(){const t=this._tabs;let e=0,i=0;for(let i=t.length-1;i>=0;i--)if(t[i]?.isVisible){e=i;break}if(0===e)for(let i=t.length-1;i>=0;i--)if(t[i]?.partiallyVisible){e=i;break}for(const[e,n]of t.entries()){const a=t[i];n.partiallyVisible&&a&&n.right>a.right&&(i=e)}return i<=e&&e<t.length-1?e+1:t[i]?.isVisible&&i!==t.length-1?i+1:i}get _leftmostVisibleTab(){const t=this._tabs;let e=t.length-1,i=t.length-1;for(let i=0;i<t.length;i++)if(t[i]?.isVisible){e=i;break}if(e===t.length-1)for(let i=0;i<t.length;i++)if(t[i]?.partiallyVisible){e=i;break}for(const[e,n]of t.entries()){const a=t[i];n.partiallyVisible&&a&&n.left<a.left&&(i=e)}return i>=e&&e>0?e-1:t[i]?.isVisible&&0!==i?i-1:i}get _tabs(){const{pageNames:t}=this,e=[];for(const n of i.e(this.pages)){const i=t?t[n-1]:`page-${n}`,a=this.shadowRoot.querySelector(`slot[name="${i}"]`).parentElement,s=a.offsetLeft,r=a.offsetLeft+a.offsetWidth,o=s>this._containerLeft&&s<this._containerRight||r<this._containerRight&&r>this._containerLeft,l=s>this._containerLeft&&r<this._containerRight||s<this._containerLeft&&r>this._containerRight;e.push({el:a,left:s,right:r,isVisible:l,partiallyVisible:o})}return e}render(){const e=super.render();return n.x`<div class="container"> ${e} <div class="${t.U({internalButton:!0,internalForwardButton:!0,hideable:!0,hidden:!this._forwardButtonVisible})}" @resize="${this._setupButtons}"> <slot name="forward-button" @slotchange="${this._setupButtons}"></slot> </div> <div class="${t.U({internalButton:!0,internalBackButton:!0,hideable:!0,hidden:!this._backButtonVisible})}" @resize="${this._setupButtons}"> <slot name="back-button" @slotchange="${this._setupButtons}"></slot> </div> </div>`}};return s.mutationObserverOptions={childList:!0,subtree:!0,attributes:!0,attributeFilter:["faceplate-tab-selected"]},s.tabSpacing={raw:8},s.backButton=()=>t.r({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"back-button"},shape:"pill",size:t.s.Small,leadingIcon:n.aW({size:n.I.Small}),screenReaderContent:"back"}),s.forwardButton=()=>t.r({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"forward-button"},shape:"pill",size:t.s.Small,leadingIcon:n.aa({size:n.I.Small}),screenReaderContent:"forward"}),s.styles=n.a`:host{--plain-background:rgba(255, 255, 255, 0);--anim-duration:300ms;--button-gap:var(--spacer-xs, 8);display:flex;width:fit-content;max-width:100%}@media (prefers-color-scheme:dark){:host{--plain-background:rgba(0, 0, 0, 0)}}@media (prefers-reduced-motion){:host{--anim-duration:0ms}}.hideable{transition:opacity var(--anim-duration,300ms) ease;visibility:visible;opacity:1}.hidden{animation-name:hide-button;animation-duration:var(--anim-duration,300ms);animation-fill-mode:forwards;opacity:0}@keyframes hide-button{from{visiblity:visible}to{visiblity:hidden;z-index:-1}}.container{width:fit-content;max-width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:nowrap;position:relative}.tablist{display:flex;overflow:auto;align-items:center;flex-flow:row nowrap;gap:var(--button-gap);scroll-behavior:smooth;scrollbar-width:none}.tablist::-webkit-scrollbar{display:none}.tablist:focus-visible{outline:0}[role=tab]{display:flex;flex-shrink:0}.internalButton{position:absolute;top:0;bottom:0;display:flex;align-items:center}.internalForwardButton{right:0;padding-left:var(--button-gap);background-image:linear-gradient(to right,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}.internalBackButton{left:0;padding-right:var(--button-gap);background-image:linear-gradient(to left,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}:host([inset]) .container{margin:0 var(--spacer-md)}:host([appearance=fill]){--button-gap:0;width:100%}:host([appearance=fill]) .container,:host([appearance=fill]) .tablist{width:inherit}:host([appearance=fill]) [role=tab]{flex-grow:1}:host([underline]) .container::after{position:absolute;display:block;content:'';border-bottom:solid var(--rem1) var(--color-neutral-border-weak);left:0;right:0;bottom:0}`,t._([t.y(".internalForwardButton")],s.prototype,"forwardButton",void 0),t._([t.y(".internalBackButton")],s.prototype,"backButton",void 0),t._([t.y(".tablist")],s.prototype,"container",void 0),t._([t.j({slot:"forward-button"})],s.prototype,"forwardButtonElements",void 0),t._([t.j({slot:"back-button"})],s.prototype,"backButtonElements",void 0),t._([t.d()],s.prototype,"_forwardButtonVisible",void 0),t._([t.d()],s.prototype,"_backButtonVisible",void 0),t._([t.n({attribute:!1})],s.prototype,"selectedClasses",void 0),t._([t.n({attribute:!0})],s.prototype,"appearance",void 0),t._([t.n({attribute:!0,type:Boolean})],s.prototype,"insetHug",void 0),t._([t.n({attribute:!0,type:Boolean})],s.prototype,"underline",void 0),s=a=t._([t.e("faceplate-tabgroup")],s),{get F(){return s}}}));
SML.dm("chatmobilexpromoclientjs5e1c145c",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(e,t,r)=>{let o=class extends e.hk{constructor(){super(...arguments),this._fullscreenBlurEl=document.createElement("div"),this._appliedBlurFilter=null,this._blurElement=null,this.shouldContentScroll=!1,this.isFooterEmpty=!0,this.render=()=>{const r=t.x`<slot name="closeButton" class="${e.U({floating:this.shouldContentScroll})}"></slot>`,o=t.x`<div id="header" class="${e.U({"with-icon":this._titleGraphic.length>0})}"> <slot name="titleGraphic"></slot> <slot name="title"></slot> </div>`,n=t.x`<slot name="primaryButton" @slotchange="${this.calcFooterChildren}"></slot> <slot name="secondaryButton" @slotchange="${this.calcFooterChildren}"></slot> <slot name="tertiaryButton" @slotchange="${this.calcFooterChildren}"></slot>`;return t.x` ${e.cI(this.modal?"\n  <style>\n    :host {\n      top: 50%;\n      transform: translateY(-50%);\n      position: fixed;\n    }\n  </style>\n":"\n  <style>\n    :host {\n      position: absolute;\n    }\n  </style>\n")} <div id="wrapper" role="${t.l(this.open?"dialog":void 0)}" aria-label="${t.l(this.ariaLabel??void 0)}" aria-labelledby="${t.l(null!=this.ariaLabel?void 0:"header-container")}" aria-modal="${t.l(this.open&&this.modal?"true":void 0)}"> <div id="content"> ${r} <div id="header-container"> ${o} </div> <slot></slot> </div> <div id="footer" class="${e.U({"sticky-footer":this.shouldContentScroll,empty:this.isFooterEmpty})}"> ${n} <slot name="footer" @slotchange="${this.calcFooterChildren}"></slot> </div> </div> `}}static get styles(){return t.a`${e.hk.styles}:host{--content-padding:var(--spacer-md);box-sizing:border-box;max-width:none;border-radius:var(--rem16);padding:0;overflow:hidden}#wrapper{display:flex;flex-direction:column;align-items:center;height:100%;position:relative;font-size:16px;box-sizing:border-box;max-height:inherit;min-height:inherit;overflow:hidden}slot[name=closeButton]{display:inline-flex;position:absolute;position:absolute;top:0;inset-inline-end:0;margin:var(--content-padding)}#header{display:flex;flex-direction:column;gap:var(--spacer-sm);align-items:center;text-align:left;width:100%;box-sizing:border-box}#header.with-icon{text-align:center;padding:0 var(--rem40)}slot[name=title]{font-size:var(--rem18);font-weight:700}slot:not([name]){display:flex;flex-grow:1;width:100%;padding:var(--spacer-xs) 0;font-size:var(--rem14)}#footer{display:flex;flex-direction:column;gap:var(--spacer-sm);width:100%;background:var(--color-ui-modalbackground);padding:var(--spacer-md);box-sizing:border-box}slot[name=tertiaryButton]{display:inline-flex;justify-content:center;font-size:14px}#footer.empty{display:none}@media (min-width:640px){#content{padding:var(--content-padding)}#header,#header.with-icon{flex-direction:row;padding-inline:0 var(--spacer-2xl)}#footer{flex-direction:row-reverse;align-items:center;justify-content:end}slot[name=tertiaryButton]{margin-inline-end:auto}slot[name=title]{text-align:left}}#content{height:100%;max-height:100%;width:100%;overflow:auto;position:relative;--content-padding:var(--spacer-md);padding:var(--content-padding);box-sizing:border-box;flex:1}.overflowing-content{max-height:100%;overflow-y:auto}.sticky-footer{box-shadow:var(--elevation-md)}slot[name=closeButton].floating{box-shadow:var(--elevation-sm);border-radius:999px}`}connectedCallback(){super.connectedCallback(),Object.assign(this._fullscreenBlurEl.style,{position:"fixed",top:"0",bottom:"0",right:"0",left:"0",backdropFilter:n(4)})}disconnectedCallback(){this._fullscreenBlurEl.remove(),e.hl.remove(this),this.resizeObserver?.disconnect()}firstUpdated(){this.resizeObserver=new ResizeObserver((()=>{this.measureShouldContentScroll()})),this.resizeObserver.observe(this.content)}calcFooterChildren(){this.isFooterEmpty=!(this._footerSlot?.length||this._primaryButtonSlot?.length||this._secondaryButtonSlot?.length||this._tertiaryButtonSlot?.length)}measureShouldContentScroll(){this.shouldContentScroll=Boolean(this.content?.scrollHeight&&this.content?.scrollHeight>this.content.offsetHeight)}showModal(t){if(e.hl.add(this),super.showModal(),null!=t?.blur){const e=!0===t.blur?4:Number(t.blur);this._appliedBlurFilter=n(e),t?.blurElement?(this._blurElement=t.blurElement,r=this._blurElement,o=this._appliedBlurFilter,r.style.filter=r.style.filter+" "+o):(Object.assign(this._fullscreenBlurEl.style,{backdropFilter:this._appliedBlurFilter}),document.body.append(this._fullscreenBlurEl))}var r,o}close(){this.open&&(super.close(),e.hl.remove(this),null!=this._blurElement&&null!=this._appliedBlurFilter?(!function(e,t){const r=e.style.filter.split(" ").filter(Boolean).reverse(),o=r.indexOf(t);if(-1===o)return;r.splice(o,1),e.style.filter=r.reverse().join(" ")}(this._blurElement,this._appliedBlurFilter),this._appliedBlurFilter=null,this._blurElement=null):this._fullscreenBlurEl.remove())}};function n(e){return`blur(${e}px)`}e._([e.d()],o.prototype,"shouldContentScroll",void 0),e._([e.j({slot:"titleGraphic"})],o.prototype,"_titleGraphic",void 0),e._([e.y("#content")],o.prototype,"content",void 0),e._([e.y("#footer")],o.prototype,"footer",void 0),e._([e.d()],o.prototype,"isFooterEmpty",void 0),e._([e.aP({slot:"footer",flatten:!0})],o.prototype,"_footerSlot",void 0),e._([e.aP({slot:"primaryButton",flatten:!0})],o.prototype,"_primaryButtonSlot",void 0),e._([e.aP({slot:"secondaryButton",flatten:!0})],o.prototype,"_secondaryButtonSlot",void 0),e._([e.aP({slot:"tertiaryButton",flatten:!0})],o.prototype,"_tertiaryButtonSlot",void 0),o=e._([e.e("faceplate-modal")],o);function i(e){return e?.[0]?.message??"Something went wrong"}const l=e=>({error:e||"There was an error uploading the file."});async function a(t,o){const n=r.bQ.get(t.type);if(!n)throw new Error(`${t.type} files are not supported.`);try{const a=await async function(t){const r=await e.B({operation:e.O.CreateSubredditStructuredStylesUploadLease,variables:{input:t}});if(r.errors?.length)throw new Error(i(r.errors));const o=r.data.createSubredditStructuredStylesUploadLease;if(o?.ok&&o.uploadLease)return{uploadLeaseUrl:o.uploadLease.uploadLeaseUrl,uploadLeaseHeaders:o.uploadLease.uploadLeaseHeaders};throw new Error(i(o?.errors))}({...o,filepath:t.name,mimetype:n}),s=await r.bP(t,a);return s?{url:s}:l()}catch(e){return a=e.message,window.Sentry?.captureMessage?.(`Media file upload failed with error: ${a}`),l(e.message)}var a}return{C:class{async makeGQLRequest(...t){return e.B(...t)}async uploadMedia(...e){return a(...e)}async saveImage({subredditId:e,url:t,fileContent:r,uploadType:o,gqlOperation:n}){if(r)try{const n=await this.uploadMedia(r,{subredditId:e,imagetype:o});if(t=n.url?decodeURIComponent(n.url):t,n.error)return this.handleError(o)}catch(e){return this.handleError(o)}try{await this.makeGQLRequest({operation:n,variables:{input:{subredditId:e,[this.getOperationArg(o)]:t??""}}})}catch(e){return this.handleError(o)}return null}async saveCommunityIcon(t,r,o){return this.saveImage({subredditId:t,url:r,fileContent:o,uploadType:e.hm.CommunityIcon,gqlOperation:e.O.UpdateSubredditIcon})}async saveBanner(t,r,o){return this.saveImage({subredditId:t,url:r,fileContent:o,uploadType:e.hm.BannerBackgroundImage,gqlOperation:e.O.UpdateSubredditBanner})}async saveMobileBanner(t,r,o){return this.saveImage({subredditId:t,url:r,fileContent:o,uploadType:e.hm.MobileBannerImage,gqlOperation:e.O.UpdateSubredditBanner})}handleError(t){switch(t){case e.hm.BannerBackgroundImage:return"Something went wrong while saving the banner.";case e.hm.MobileBannerImage:return"Something went wrong while saving the mobile banner.";case e.hm.CommunityIcon:default:return"Something went wrong saving the avatar."}}getOperationArg(t){switch(t){case e.hm.BannerBackgroundImage:return"bannerBackgroundImage";case e.hm.MobileBannerImage:return"mobileBannerImage";case e.hm.CommunityIcon:default:return"communityIcon"}}},get F(){return o},O:"mod-show-post-level-crowd-control-modal",u:a}}));
SML.dm("faceplatehovercard98735488",["shelle48e5956","iconc33661e6","userflairfe275854","agegatestandaloneclientjsb13e879d","faceplatetooltipf30979fb"],(async(e,t,s,i,o)=>{const n=new WeakSet,r=async(t,{includeShadowRoot:s=!1}={})=>{const i="faceplate-partial",o=Array.from(t.querySelectorAll(i));s&&o.push(...Array.from(t.shadowRoot?.querySelectorAll(i)??[]));return(await Promise.all(o.map((async t=>!t||n.has(t)||t.loading!==e.I.Programmatic?Promise.resolve(!1):(n.add(t),t.load().then((()=>!0))))))).filter(Boolean).length>0},a=e=>t=>(e(t),t);let l=class extends o.FaceplateTooltip{constructor(){super(...arguments),this.mouseEnterDelay=750,this.mouseLeaveDelay=500,this.closeOnTrack=!1,this.disableTouchActivation=!1,this.partialLoading=e.I.Action,this.label="",this.mouseOnly=!1,this.sleepAfterEscape=!1,this.enterTimeout=-1,this.leaveTimeout=-1,this._popperController=new s.P(this,{position:this.position,referenceElementKey:"referenceElement",popperElementKey:"_tooltip"}),this._isHandlingTouch=!1,this.cleanupTimeouts=()=>{this.enterTimeout=this.leaveTimeout=-1},this.triggerEvent="hover",this.emitter=i.J(this),this.handleFocusOut=e=>{const t=e.relatedTarget;this.hidden||this.hasUserInteraction(t)||(this.close(),this.anchorEl&&(this.sleepAfterEscape=!0,this.anchorEl?.focus({preventScroll:!0})))},this.rplHovercardShowHandler=e=>{e.target===this||this.hidden||this.close()},this.onEscape=e=>{"Escape"===e.key&&(this.sleepAfterEscape=!0,this.close(),this.trigger?.focus())},this.mouseOverTrigger=e=>{this.setAttribute("trigger","mouse"),this.handleMouseenter(e)},this.handleClick=e=>{"hover"===this.triggerEvent&&this._isHandlingTouch&&this.disableTouchActivation&&(this.cleanupTimeouts(),this._isHandlingTouch=!1),super.handleClick(e)},this.handleTouchstart=()=>{this._isHandlingTouch=!0},this.handleMouseenter=t=>{if(this.mouseOnly&&"focusin"===t?.type)return;if(this.sleepAfterEscape)return void(this.sleepAfterEscape=!1);if(!this.hidden)return this.cleanupTimeouts();this.emitter.dispatch("entered"),this.partialLoading===e.I.Intent&&this.load();const s=window.setTimeout((()=>{s===this.enterTimeout&&this.hasUserInteraction()&&this.show()}),this.mouseEnterDelay);this.enterTimeout=s,document.addEventListener("keydown",this.onEscape),t?.currentTarget?.addEventListener("mouseleave",this.handleMouseleave,{once:!0})},this.handleMouseleave=()=>{if(this.hidden)return this.cleanupTimeouts();const e=window.setTimeout((()=>{e===this.leaveTimeout&&this.close()}),this.mouseLeaveDelay);this.leaveTimeout=e},this.handleMouseEnterTooltip=()=>{this.cleanupTimeouts()},this.handleMouseLeaveTooltip=()=>{this.handleMouseleave(),document.removeEventListener("keydown",this.onEscape)},this.handleFaceplateTrack=()=>{this.closeOnTrack&&this.close()},this.handleSlotChange=()=>{this.initializeFocusManager(),!this.hidden&&this.focusManager?.focus()},this.initializeFocusManager=()=>{this.content&&(this.focusManager=new e.aF(this,this.content))},this.render=()=>{const e=this._popperController.actualPosition||this.position;return t.x` <slot aria-describedby="faceplate-tooltip" faceplate-popper-trigger @click="${this.handleClick}" @touchstart="${this.handleTouchstart}" @mouseenter="${this.mouseOverTrigger}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <div aria-label="${t.l((this.label||this.ariaLabel)??void 0)}" id="faceplate-tooltip" role="dialog" part="content-container" position="${e}" @keydown="${this.handleKeydown}" @mouseenter="${this.handleMouseEnterTooltip}" @mouseleave="${this.handleMouseLeaveTooltip}" @focusin="${this.handleMouseEnterTooltip}" @focusout="${this.handleMouseLeaveTooltip}" @slotchange="${this.handleSlotChange}" faceplate-popper-content> <slot name="content" @faceplate-track="${this.handleFaceplateTrack}"></slot> </div> `}}get content(){return this.contents[0]??null}get trigger(){return this.anchorEl??this.triggers[0]??null}get anchorEl(){try{if(this.anchor&&"string"==typeof this.anchor){return this.getRootNode().getElementById(this.anchor)}return this.anchor instanceof HTMLElement?this.anchor:null}catch{return null}}get referenceElement(){return this.trigger??this}setupAnchorElListeners(){const{anchorEl:e}=this;e&&(e.addEventListener("click",this.handleClick),e.addEventListener("touchstart",this.handleTouchstart),e.addEventListener("mouseenter",this.mouseOverTrigger),e.addEventListener("mouseleave",this.handleMouseleave),e.addEventListener("focusin",this.handleMouseenter),e.addEventListener("focusout",this.handleMouseleave))}cleanupAnchorElListeners(){const{anchorEl:e}=this;e&&(e.removeEventListener("click",this.handleClick),e.removeEventListener("touchstart",this.handleTouchstart),e.removeEventListener("mouseenter",this.mouseOverTrigger),e.removeEventListener("mouseleave",this.handleMouseleave),e.removeEventListener("focusin",this.handleMouseenter),e.removeEventListener("focusout",this.handleMouseleave))}hasUserInteraction(e){const t=Boolean(this.querySelector(":hover")||this.trigger?.matches(":hover")),s=Boolean(e&&(this.contains(e)||this.trigger?.contains(e))||this.querySelector(":focus")||this.trigger?.matches(":focus"));return t||s}hovercardShowHandler(e){e.target!==this&&this.close()}load(){return r(this).then(a(this._popperController.reposition)).then(a((e=>{this.hidden||e&&(this.focusManager?.refresh(),this.focusManager?.focus())})))}async show(){super.show(),this.partialLoading===e.I.Action&&this.load(),await this._popperController.currentState.animationFinished,this.focusManager?.focus(),this.addEventListener("focusout",this.handleFocusOut),document.addEventListener(this.emitter.eventId("open"),this.hovercardShowHandler),document.addEventListener("rpl-hovercard:show",this.rplHovercardShowHandler),this.cleanupTimeouts()}async close(){const e=super.close();document.removeEventListener(this.emitter.eventId("open"),this.hovercardShowHandler),document.removeEventListener("rpl-hovercard:show",this.rplHovercardShowHandler),this.cleanupTimeouts(),await e,this.removeTrigger()}removeTrigger(){this.removeAttribute("trigger")}handleKeydown(){this.removeTrigger()}connectedCallback(){super.connectedCallback(),this.setupAnchorElListeners()}disconnectedCallback(){this.cleanupAnchorElListeners(),super.disconnectedCallback(),this.cleanupTimeouts()}static get styles(){return[...super.styles,t.a`:host{display:contents}#faceplate-tooltip{display:flex;flex-direction:column;width:fit-content;justify-content:flex-start;align-items:flex-start;box-sizing:border-box;border-radius:1rem;box-shadow:var(--elevation-md);z-index:var(--faceplate-hovercard-z-index,1)}#faceplate-tooltip::after{display:none}`]}};e._([e.n({type:String})],l.prototype,"anchor",void 0),e._([e.j({slot:""})],l.prototype,"triggers",void 0),e._([e.j({slot:"content"})],l.prototype,"contents",void 0),e._([e.n({type:Number,attribute:"enter-delay"})],l.prototype,"mouseEnterDelay",void 0),e._([e.n({type:Number,attribute:"leave-delay"})],l.prototype,"mouseLeaveDelay",void 0),e._([e.n({type:Boolean,attribute:"close-on-track"})],l.prototype,"closeOnTrack",void 0),e._([e.n({type:Boolean,attribute:"disable-touch-activation",reflect:!0})],l.prototype,"disableTouchActivation",void 0),e._([e.n({type:String,attribute:"partial-loading"})],l.prototype,"partialLoading",void 0),e._([e.n({type:String})],l.prototype,"label",void 0),e._([e.n({type:Boolean,attribute:"mouse-only"})],l.prototype,"mouseOnly",void 0),e._([e.d()],l.prototype,"sleepAfterEscape",void 0),l=e._([e.e("faceplate-hovercard")],l);var h=Object.freeze({__proto__:null,get FaceplateHovercard(){return l}});return{get F(){return l},get f(){return h},l:r,s:a}}));
SML.dm("faceplateshimmer9894306d",["shelle48e5956","iconc33661e6"],(async(e,r)=>{var t;!function(e){e.CIRCLE="circle",e.RECTANGLE="rectangle",e.PILL="pill"}(t||(t={}));const i=2500;let s=0,a=null,o=class extends r.s{constructor(){super(...arguments),this.shape=t.RECTANGLE,this.calcDelay=e=>{if(0===e)return 0;let r=0;const t=a?.getAnimations()[0];return t&&(r=t.effect?.getComputedTiming().progress*i),(r+200*e)%i}}static get styles(){return r.a`:host{display:inline-flex}:host([shape=pill]) #loader{border-radius:var(--rem8)}:host([shape=circle]) #loader{border-radius:50%}#loader{background:var(--color-shimmer-background);height:100%;width:100%;position:relative;overflow-x:hidden}#shimmer-object{background:var(--color-shimmer-gradient-overlay);border-radius:.5rem;height:100%;width:200%;position:absolute;top:0;left:0;transform:translateX(-100%)}`}firstUpdated(){this.shimmer(s++)}async shimmer(e){await new Promise((e=>requestAnimationFrame(e)));a||(a=this.shimmerObject);const r={duration:i,delay:-1*this.calcDelay(e),iterations:1/0};this.shimmerObject?.animate([{transform:"translateX(50%)"}],r)}render(){return r.x`<div id="loader"> <span id="shimmer-object"></span> </div> `}};return e._([e.n({type:String})],o.prototype,"shape",void 0),e._([e.y("#shimmer-object")],o.prototype,"shimmerObject",void 0),o=e._([e.e("faceplate-shimmer")],o),{get L(){return t}}}));
SML.dm("faceplatetabpanelb6d69013",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(e,a,t)=>{let s=class extends(t.W(a.s)){constructor(){super(...arguments),this.pages=0,this.for=void 0}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}static get styles(){return a.a`:host{display:block}.page{display:none}.active{display:block}`}render(){if(this.pages<1)return;const{pageNames:s}=this;return a.x` <div aria-roledescription="carousel"> ${t.e(this.pages).map((t=>a.x` <div role="tabpanel" class="${e.U({page:!0,active:t===this.pageIndex})}"> <slot name="${s?s[t-1]:`page-${t}`}"></slot> </div> `))} </div> `}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};return e._([e.n({type:Number})],s.prototype,"pages",void 0),e._([e.n({type:Number,attribute:"pageindex"})],s.prototype,"pageIndex",null),e._([e.n({converter:e.a4,attribute:"pagenames"})],s.prototype,"pageNames",null),e._([e.n({type:String})],s.prototype,"for",void 0),s=e._([e.e("faceplate-tabpanel")],s),{get F(){return s}}}));
SML.dm("modactionscontrollerd935e6bc",["shelle48e5956","chatmobilexpromoclientjs5e1c145c","modremovalreasonformclientjsba8e4d27","awards2379b181","moderation461324fc","distinguishedtags1c4757ea","postFlair51562697","modbulkactionsb972488b","agegatestandaloneclientjsb13e879d","previousactionsclientjs3044bbd0","iconc33661e6","rendersavedresponsetemplatebysubredditidb78cebab","faceplateformcff507f5","communitypickerf331f77f","comment5b02ad76","overflowmenuactionsf8d12b95","links22118b0c","rplfilterchip3ad19f7c","headeractionitemchatclientjsb3335fba","tooltipbaseaa9651a3","utils93db03dd","faceplateselecttextinputbad79e01","tablepagination77cf692d","selectcontroller4c63b3e8","userflairfe275854","constants9e09f052","utils57a7018c","textinput9c3f45be","faceplateoption7a297e33","rplcoachmark4e17786a","rplcoachmarkcard5c5498b1","faceplatetextareainput29f541e5","smartescalationsproviderclientjs1b1b1602","communityonboardingcompletedmodalclientjsf4f5192c","huiuserdrawerclientjs91e856a7","TinyGesture26737d23","expandablesectionheader41e0cfd1"],(async(t,e,s,i,a,o,n,r,h)=>{const l=(e,s,i)=>{const a=i===t.a9.Post;switch(e){case o.M.MarkSpoiler:return s?a?"Post has been marked spoiler.":"Comment has been marked spoiler.":a?"There was an error marking the post spoiler. Please try again.":"There was an error marking the comment spoiler. Please try again.";case o.M.UnmarkSpoiler:return s?a?"Post has been unmarked spoiler.":"Comment has been unmarked spoiler.":"There was an error unmarking the post spoiler. Please try again.";case o.M.MarkNsfw:return s?a?"Post has been marked nsfw.":"Comment has been marked nsfw.":a?"There was an error marking the post nsfw. Please try again.":"There was an error marking the comment nsfw. Please try again.";case o.M.UnmarkNsfw:return s?a?"Post has been unmarked nsfw.":"Comment has been unmarked nsfw.":"There was an error unmarking the post nsfw. Please try again.";case o.M.IgnoreReports:return s?a?"Reports ignored and post approved.":"Reports ignored and comment approved.":a?"There was an error ignoring the post's reports. Please try again.":"There was an error ignoring the comment's reports. Please try again.";case o.M.UnignoreReports:return s?a?"Reports unignored.":"Reports successfully restored.":a?"There was an error unignoring the post's reports. Please try again.":"There was an error unignoring the comment's reports. Please try again.";case o.M.Distinguish:return s?a?"Post is marked as distinguished.":"Comment is marked as distinguished.":a?"There was an error distinguishing the post. Please try again.":"There was an error distinguishing the comment. Please try again.";case o.M.Undistinguish:return s?a?"Post is marked as undistinguished.":"Comment is marked as undistinguished.":a?"There was an error undistinguishing the post. Please try again.":"There was an error undistinguishing the comment. Please try again.";case o.M.Sticky:return s?a?"Post has been stickied.":"Comment has been stickied.":a?"There was an error stickying the post. Please try again.":"There was an error stickying the comment. Please try again.";case o.M.Unsticky:return s?a?"Post has been unstickied.":"Comment has been unstickied.":a?"There was an error unstickying the post. Please try again.":"There was an error unstickying the comment. Please try again.";case o.M.Lock:return s?a?"Post has been locked.":"Comment has been locked.":a?"There was an error locking the post. Please try again.":"There was an error locking the comment. Please try again.";case o.M.Unlock:return s?a?"Post has been unlocked.":"Comment has been unlocked.":a?"There was an error unlocking the post. Please try again.":"There was an error unlocking the comment. Please try again.";case o.M.ApproveContent:if(s)switch(i){case t.a9.Award:return"Award approved.";case t.a9.Comment:return"Comment approved.";case t.a9.Post:return"Post approved.";default:return""}switch(i){case t.a9.Award:return"There was an error approving the award. Please try again.";case t.a9.Comment:return"There was an error approving the comment. Please try again.";case t.a9.Post:return"There was an error approving the post. Please try again.";default:return""}case o.M.ConfirmRemoval:case o.M.RemoveContent:if(s)switch(i){case t.a9.Award:return"Award removed.";case t.a9.Comment:return"Comment removed.";case t.a9.Post:return"Post removed.";default:return""}switch(i){case t.a9.Award:return"There was an error removing the award. Please try again.";case t.a9.Comment:return"There was an error removing the comment. Please try again.";case t.a9.Post:return"There was an error removing the post. Please try again.";default:return""}case o.A.Distinguish:return s?a?"Post is marked as distinguished as admin.":"Comment is marked as distinguished as admin.":a?"There was an error distinguishing the post as admin. Please try again.":"There was an error distinguishing the comment as admin. Please try again.";case o.A.Undistinguish:return s?a?"Post is marked as undistinguished as admin.":"Comment is marked as undistinguished as admin.":a?"There was an error undistinguishing the post as admin. Please try again.":"There was an error undistinguishing the comment as admin. Please try again.";case o.M.RemoveHighlightedPost:return s?"Highlight removed":"There was an error removing the post from community highlights. Please try again.";default:return""}};return{ModActionsController:class{constructor(l,{getThingIdFn:d,focusChatTextareaFn:m}){this.publishEvent=(t,e)=>{a.p(this._getThingId(),t,e)},this.modActionMenuClickEvent=e=>{let s="",i="";switch(this.itemType){case t.a9.Award:s="awardOnContentId",i="award";break;case t.a9.Comment:s="commentId",i="comment";break;case t.a9.Post:default:s="postId",i="post"}return t.b({source:"moderator",action:"click",noun:e},{[s]:this._getThingId(),[i]:{id:this._getThingId()},action_info:{reason:this.modPartialPath}})},this._getHandleReportToggle=e=>async()=>{const s=e===o.M.IgnoreReports,a=s?i.p:i.q,n=s?i.t:i.w;t.a(this._host,this.isPost?a():n());try{const t=[this._getThingId()],i=await(s?this.modBulkActions.modBulkIgnore(t):this.modBulkActions.modBulkUnignore(t));if(!i?.ok)throw new Error("Operation failed");return this.publishEvent(e,s),this.showSuccessToast(e),s}catch{return this.showErrorToast(e),!s}},this._getHandleDistinguishToggle=e=>async()=>{const s=e===o.M.Distinguish,i=s?"distinguish_as_mod":"undistinguish_as_mod";t.a(this._host,this.modActionMenuClickEvent(i));let a=!0;this.publishEvent(e,s);try{const i=await this.updateDistinguishState(s?t.eU.ModDistinguished:t.eU.None);if(!i?.ok)throw new Error("Operation failed");this.showSuccessToast(e)}catch{this.publishEvent(e,!s),this.showErrorToast(e),a=!1}return this._host.requestUpdate(),a?s:!s},this._getHandleStickyToggle=e=>async()=>{const s=e===o.M.Sticky,i=s?"sticky":"unsticky";t.a(this._host,this.modActionMenuClickEvent(i));let a=!0;this.publishEvent(e,s);try{const t=await this.updateStickyState(s);if(!t?.ok)throw new Error("Operation failed");this.showSuccessToast(e)}catch{this.publishEvent(e,!s),this.showErrorToast(e),a=!1}return this._host.requestUpdate(),a?s:!s},this._getHandleLockedToggle=e=>async()=>{const s=e===o.M.Lock,i=s?"lock":"unlock";t.a(this._host,this.modActionMenuClickEvent(i));let a=!0;this.publishEvent(e,s);try{let i;if(this.isPost){const t=[this._getThingId()];i=await(s?this.modBulkActions.modBulkLock(t):this.modBulkActions.modBulkUnlock(t))}else i=await this.updateLockedState(s?t.eV.Locked:t.eV.None);if(!i?.ok)throw new Error("Operation failed");this.showSuccessToast(e)}catch{this.publishEvent(e,!s),this.showErrorToast(e),a=!1}return this._host.requestUpdate(),a?s:!s},this._getHandleMarkNsfwToggle=e=>async()=>{let s=!0;const i=e===o.M.MarkNsfw;if(!this.isPost)return!i;const a=i?"mark_nsfw":"unmark_nsfw";t.a(this._host,this.modActionMenuClickEvent(a));const n=[this._getThingId()],r=await(i?this.modBulkActions.modBulkMarkNSFW(n):this.modBulkActions.modBulkUnmarkNSFW(n));return r?.ok?(this.showSuccessToast(e),this.publishEvent("isPostNsfw",i)):(this.showErrorToast(e),s=!1),this._host.requestUpdate(),s?i:!i},this._getHandleMarkSpoilerToggle=e=>async()=>{let s=!0;const i=e===o.M.MarkSpoiler;if(!this.isPost)return!i;const a=i?"mark_spoiler":"unmark_spoiler";t.a(this._host,this.modActionMenuClickEvent(a));const n=[this._getThingId()],r=await(i?this.modBulkActions.modBulkMarkSpoiler(n):this.modBulkActions.modBulkUnmarkSpoiler(n));return r?.ok?(this.showSuccessToast(e),this.publishEvent("isPostSpoiler",i)):(this.showErrorToast(e),s=!1),this._host.requestUpdate(),s?i:!i},this.handleApproveContentOptimistic=()=>{this.publishEvent(o.M.ApproveContentOptimistic,!0)},this._getHandleModApproval=e=>async()=>{this.handleApproveContentOptimistic(),t.a(this._host,this.modActionMenuClickEvent("approve"));try{const t=await this.modBulkActions.modBulkApprove([this._getThingId()]);return t?.ok?(this.publishEvent(e,!0),this._resetAddRemovalReasonForm(),!0):(this.showErrorToast(e),!1)}catch{return this.showErrorToast(e),!1}},this._getShareToModChat=t=>async t=>(await this._focusChatTextarea(),!0),this._getViewChatThread=t=>async t=>(await this._focusChatTextarea(!0),!0),this.handleRemoveContentOptimistic=()=>{this.publishEvent(o.M.RemoveContentOptimistic,!0)},this.handleRemoveContentAsSpamOptimistic=()=>{this.publishEvent(o.M.RemoveContentAsSpamOptimistic,!0)},this.handleConfirmRemovalOptimistic=()=>{this.publishEvent(o.M.ConfirmRemovalOptimistic,!0)},this._getHandleModRemoval=e=>async()=>{switch(e){case o.M.RemoveContent:this.handleRemoveContentOptimistic();break;case o.M.RemoveContentAsSpam:this.handleRemoveContentAsSpamOptimistic();break;case o.M.ConfirmRemoval:this.handleConfirmRemovalOptimistic()}const s=e===o.M.RemoveContentAsSpam;let i=e===o.M.ConfirmRemoval?"confirm_removal":"remove";e===o.M.RemoveContentAsSpam&&(i="spam"),t.a(this._host,this.modActionMenuClickEvent(i));try{const t=await this.modBulkActions.modBulkRemove([this._getThingId()],s);return t?.ok?(this.publishEvent(e,!0),this.dispatchRequestReload(),!0):(this.showErrorToast(e),!1)}catch{return this.showErrorToast(e),!1}},this._getHandleOpenEditPostFlairModal=()=>async()=>{const e=this._getThingId();if(e){t.a(this._host,this.modActionMenuClickEvent("flair")),await this._activateFeature({name:t.dJ,queryParams:{isLoggedin:!0,selectedIds:e},renderMode:t.o.Contents});const s=document.getElementById(n.g(e));s?.showModal()}},this._getHandleAddToHighlights=()=>async()=>{const e=this._getThingId();e&&await this._activateFeature({name:t.cY,routeParams:{postId:e},renderMode:t.o.Contents})},this._getHandleRemoveFromHighlights=()=>async()=>{const e=this._getThingId();if(e){this.publishEvent(o.M.RemoveHighlightedPost,!1);try{await this.removeHighlightedPost(e),this.showSuccessToast(o.M.RemoveHighlightedPost),t.a(this._host,i.u(e,t.X())),t.p(t.T.ReloadHighlights)}catch(t){this.showErrorToast(o.M.RemoveHighlightedPost),this.publishEvent(o.M.RemoveHighlightedPost,!0)}}},this._resetAddRemovalReasonForm=()=>{this._host.dispatchEvent(new s.A(""))},this.handleIgnoreReports=this._getHandleReportToggle(o.M.IgnoreReports),this.handleUnignoreReports=this._getHandleReportToggle(o.M.UnignoreReports),this.handleDistinguish=this._getHandleDistinguishToggle(o.M.Distinguish),this.handleUndistinguish=this._getHandleDistinguishToggle(o.M.Undistinguish),this.handleSticky=this._getHandleStickyToggle(o.M.Sticky),this.handleUnsticky=this._getHandleStickyToggle(o.M.Unsticky),this.handleUpdateHighlightedPost=this._getHandleAddToHighlights(),this.handleRemoveHighlightedPost=this._getHandleRemoveFromHighlights(),this.handleLock=this._getHandleLockedToggle(o.M.Lock),this.handleUnlock=this._getHandleLockedToggle(o.M.Unlock),this.handleMarkNsfw=this._getHandleMarkNsfwToggle(o.M.MarkNsfw),this.handleUnmarkNsfw=this._getHandleMarkNsfwToggle(o.M.UnmarkNsfw),this.handleMarkSpoiler=this._getHandleMarkSpoilerToggle(o.M.MarkSpoiler),this.handleUnmarkSpoiler=this._getHandleMarkSpoilerToggle(o.M.UnmarkSpoiler),this.handleConfirmRemoval=this._getHandleModRemoval(o.M.ConfirmRemoval),this.handleRemoveContent=this._getHandleModRemoval(o.M.RemoveContent),this.handleRemoveContentAsSpam=this._getHandleModRemoval(o.M.RemoveContentAsSpam),this.handleApproveContent=this._getHandleModApproval(o.M.ApproveContent),this.handleShareToModChat=this._getShareToModChat(o.M.ShareToModChat),this.handleViewChatThread=this._getViewChatThread(o.M.ViewChatThread),this.handleOpenEditPostFlairModal=this._getHandleOpenEditPostFlairModal(),this.handleSnoozeReporter=()=>{},this.handleUnsnoozeReporter=()=>{},this.handleAddRemovalReason=()=>{this._host.dispatchEvent(new s.A(this._getThingId())),t.a(this._host,this.modActionMenuClickEvent("add_removal_reason"))},this.handleAdjustCrowdControl=()=>{this._host.dispatchEvent(t.c(e.O,{postId:this._getThingId()}))},this.handleRemoveContentMenu=()=>this._getHandleModRemoval(o.M.RemoveContent)(),this._activateFeature=async e=>t.k(e),this._getThingId=d,this._host=l,this._focusChatTextarea=m??h.bC,this.modBulkActions=new r.M,this._host?.addController(this)}get isPost(){return this.itemType===t.a9.Post}get itemType(){return a.i(this._getThingId())}get modPartialPath(){switch(this.itemType){case t.a9.Award:case t.a9.Comment:case t.a9.Post:return this.itemType.toLowerCase();default:return""}}hostConnected(){Object.keys(o.M).forEach((t=>{this._host.addEventListener(o.M[t],this[`handle${t}`])}))}hostDisconnected(){Object.keys(o.M).forEach((t=>{this._host.removeEventListener(o.M[t],this[`handle${t}`])}))}dispatchFaceplateAlertEvent(e,s,i=""){const a=t.c("faceplate-alert",{level:e,message:s,sourceElement:`modqueue-${this.itemType?.toLowerCase()}`,cause:i});this._host.dispatchEvent(a)}showSuccessToast(e){this.itemType&&this.dispatchFaceplateAlertEvent(t.x.success,l(e,!0,this.itemType),`success-${e}`)}showErrorToast(e){this.itemType&&this.dispatchFaceplateAlertEvent(t.x.error,l(e,!1,this.itemType),`failed-${e}`)}dispatchRequestReload(){this.itemType===t.a9.Comment&&this._host.dispatchEvent(new CustomEvent("reload-shreddit-comment",{bubbles:!0,composed:!0}))}async updateDistinguishState(e){if(this.isPost){const s={input:{postId:this._getThingId(),distinguishType:e,distinguishState:e===t.eU.None?t.eW.None:t.eW.Distinguished}},{data:i}=await t.B({operation:t.O.UpdatePostDistinguishedState,variables:s});return i?.updatePostDistinguishState}{const s={input:{commentId:this._getThingId(),distinguishType:e,distinguishState:e===t.eU.None?t.eX.None:t.eX.Distinguished}},{data:i}=await t.B({operation:t.O.UpdateCommentDistinguishedState,variables:s});return i?.updateCommentDistinguishState}}async updateStickyState(e){if(this.isPost){const s={input:{postId:this._getThingId(),sticky:e,toProfile:!1}},{data:i}=await t.B({operation:t.O.UpdatePostStickyState,variables:s});return i?.updatePostStickyState}{const s={input:{commentId:this._getThingId(),sticky:e}},{data:i}=await t.B({operation:t.O.UpdateCommentStickyState,variables:s});return i?.updateCommentStickyState}}async updateLockedState(e){if(this.isPost){const s={input:{postId:this._getThingId(),lockedState:e}},{data:i}=await t.B({operation:t.O.UpdatePostLockedState,variables:s});return i?.updatePostLockedState}{const s={input:{commentId:this._getThingId(),lockedState:e}},{data:i}=await t.B({operation:t.O.UpdateCommentLockedState,variables:s});return i?.updateCommentLockedState}}async removeHighlightedPost(t){return i.r({postId:t})}}}}));
SML.dm("distinguishedtags1c4757ea",["shelle48e5956"],(async o=>{var e,t,n;!function(o){o.AddRemovalReason="mod-add-removal-reason",o.IgnoreReports="mod-ignore-reports",o.UnignoreReports="mod-unignore-reports",o.Distinguish="mod-distinguish",o.Undistinguish="mod-undistinguish",o.Sticky="mod-sticky",o.Unsticky="mod-unsticky",o.Lock="mod-lock",o.Unlock="mod-unlock",o.ApproveContent="mod-approve-content",o.RemoveContent="mod-remove-content",o.RemoveContentAsSpam="mod-remove-spam-content",o.ConfirmRemoval="mod-confirm-removal",o.RemoveContentMenu="mod-remove-content-menu",o.MarkNsfw="mod-mark-nsfw",o.UnmarkNsfw="mod-unmark-nsfw",o.MarkSpoiler="mod-mark-spoiler",o.UnmarkSpoiler="mod-unmark-spoiler",o.AdjustCrowdControl="mod-adjust-crowd-control",o.OpenEditPostFlairModal="mod-open-edit-post-flair-modal",o.SnoozeReporter="mod-snooze-reporter",o.UnsnoozeReporter="mod-unsnooze-reporter",o.UpdateHighlightedPost="mod-update-highlighted-post",o.RemoveHighlightedPost="mod-remove-highlighted-post",o.ApproveContentOptimistic="mod-approve-content-optimistic",o.RemoveContentOptimistic="mod-remove-content-optimistic",o.ConfirmRemovalOptimistic="mod-confirm-removal-optimistic",o.RemoveContentAsSpamOptimistic="mod-remove-spam-optimistic",o.ShareToModChat="mod-share-to-mod-chat",o.ViewChatThread="view-chat-thread"}(e||(e={})),function(o){o.Distinguish="admin-distinguish",o.Undistinguish="admin-undistinguish"}(t||(t={})),function(o){o.Dismissed="Dismissed",o.Ignored="Ignored",o.Reported="Reported"}(n||(n={}));return{get A(){return t},get M(){return e},get R(){return n},a:()=>"MOD",b:()=>"CO-HOST",c:()=>"OP",d:t=>{switch(t){case o.gL.ApproveComment:case o.gL.ApproveLink:return e.ApproveContent;case o.gL.RemoveComment:case o.gL.RemoveLink:return e.RemoveContent;case o.gL.SpamComment:case o.gL.SpamLink:return e.RemoveContentAsSpam;case o.gL.AddRemovalReason:return e.AddRemovalReason;default:return e.ApproveContent}},g:()=>"ADMIN"}}));
SML.dm("comment5b02ad76",["distinguishedtags1c4757ea"],(async i=>{var e;!function(i){i.addRemovalReason="add_removal_reason",i.distinguishAsMod="distinguish_as_mod",i.distinguishAsAdmin="distinguish_as_admin",i.sticky="sticky",i.lock="lock",i.approve="approve",i.remove="remove",i.removeAsSpam="remove_as_spam",i.confirmRemoval="confirm_removal",i.approveOptimistic="approve_optimistic",i.removeOptimistic="remove_optimistic",i.removeAsSpamOptimistic="remove_as_spam_optimistic",i.confirmRemovalOptimistic="confirm_removal_optimistic",i.ignoreReports="ignore_reports",i.edit="edit",i.snoozeReporter="snooze_reporter",i.unsnoozeReporter="unsnooze_reporter"}(e||(e={}));const o={[i.M.Distinguish]:e.distinguishAsMod,[i.M.Undistinguish]:e.distinguishAsMod,[i.M.Lock]:e.lock,[i.M.Unlock]:e.lock,[i.M.Sticky]:e.sticky,[i.M.Unsticky]:e.sticky,[i.M.AddRemovalReason]:e.addRemovalReason,[i.M.ApproveContent]:e.approve,[i.M.RemoveContent]:e.remove,[i.M.RemoveContentAsSpam]:e.removeAsSpam,[i.M.ConfirmRemoval]:e.confirmRemoval,[i.M.IgnoreReports]:e.ignoreReports,[i.M.UnignoreReports]:e.ignoreReports,[i.M.SnoozeReporter]:e.snoozeReporter,[i.M.UnsnoozeReporter]:e.unsnoozeReporter,[i.A.Distinguish]:e.distinguishAsAdmin,[i.A.Undistinguish]:e.distinguishAsAdmin,[i.M.ApproveContentOptimistic]:e.approveOptimistic,[i.M.RemoveContentOptimistic]:e.removeOptimistic,[i.M.RemoveContentAsSpamOptimistic]:e.removeAsSpamOptimistic,[i.M.ConfirmRemovalOptimistic]:e.confirmRemovalOptimistic};var t,s;return function(i){i.Preview="preview",i.Pdp="pdp"}(t||(t={})),function(i){i.CommentPreviewUnit="CommentPreviewUnit",i.CommentTree="CommentTree"}(s||(s={})),{get C(){return e},S:o}}));
SML.dm("links22118b0c",["shelle48e5956","agegatestandaloneclientjsb13e879d"],(async(e,t)=>{var o,n;!function(e){e.SubredditFeed="SubredditFeed",e.CustomFeed="CustomFeed",e.AggregateFeed="AggregateFeed",e.BestOfRedditPage="BestOfRedditPage",e.CommentsPage="CommentsPage",e.Comment="Comment",e.DynamicFeed="DynamicFeed",e.ListingBelowSubredditPosts="ListingBelowSubredditPosts",e.ListingBelowLinkedPosts="ListingBelowLinkedPosts",e.PopularFeed="PopularFeed",e.PostStatsPage="PostStatsPage",e.ProfileFeed="ProfileFeed",e.ProfileFeed2="ProfileFeed2",e.ProfileTrendingConvos="ProfileTrendingConvos",e.BrandMentionFeed="BrandMentionFeed",e.BrandPostPerformanceFeed="BrandPostPerformanceFeed",e.ArticleFeed="ArticleFeed",e.SearchResultsPage="SearchResultsPage",e.RightRail="RightRail",e.ModChatChannels="ModChatChannels",e.ModQueue="ModQueue",e.ModQueueAll="ModQueueAll",e.ModNotesRail="ModNotesRail",e.ModLog="ModLog",e.UserManagement="UserManagement",e.ModRules="ModRules",e.ModRecruitment="ModRecruitment",e.ModWiki="ModWiki",e.ModCommunityGoldPage="ModCommunityGoldPage",e.ClubAwardsPage="ClubAwardsPage",e.ModClubAwardsPage="ModClubAwardsPage",e.ArticleDetails="ArticleDetails"}(o||(o={})),function(e){e.Scheduled="scheduled",e.Live="live",e.Ended="ended"}(n||(n={}));const s=e=>`${e}`.startsWith("t3_")?`${e}`:`t3_${e}`;function i(e){return e===o.ListingBelowLinkedPosts||e===o.ListingBelowSubredditPosts}const a=/^.*?\/(?:u|user|r)\/(?:[a-zA-Z0-9_-]+)\/comments\/(?<postId>[a-zA-Z0-9]+)(?:(?:\/|\?).*|$)/;const r=t=>d(t,e.dQ)?t:void 0,d=(e,t)=>Object.values(t).includes(e),c=(e,t)=>void 0===e?void 0:t(e);function u(e){return e&&i(e)?"post_detail":"post"}function l(e){return u(e.viewContext)}const m=({archived:t,authorId:o,createdTimestamp:n,domain:s,id:i,feedIndex:a,nsfw:d,isStickied:u,isHighlighted:l,postTitle:m,postType:p,promoted:_,recommendationSource:f,recommendationSubredditId:b,recommendationSubredditName:g,score:h,spoiler:w,subredditId:P,subredditPrefixedName:v,viewType:T,commentCount:k,permalink:M,awardId:S,interactionFromHotkey:C})=>{const A=c(p,r),F=c(n,e.gk),I={name:v?.toLowerCase(),id:P},L=S?{id:S}:void 0,x=C?e.d_.HOTKEY:void 0;return{...L,post:{archived:t,author_id:o,created_timestamp:F,domain:s,id:i,nsfw:d,pinned:u,highlighted:l,promoted:_,score:h,spoiler:w,subreddit_id:P,subreddit_name:I.name,title:m,type:A,recommendation_source:f?.toLowerCase(),recommendation_source_subreddit_id:b,recommendation_source_subreddit_name:g,number_comments:k,url:M},screen:{view_type:e.hX(T)},subreddit:I,action_info:{position:a,trigger_type:x}}},p=t=>({...m(t),feed:e.hW()}),_=({fields:t,post:o,postIsTranslated:n,reason:s,withTranslationMetrics:i})=>{const{postLanguage:a,translationLanguage:r}=o;return t={...t,post:{...t.post,language:a,translation_language:r,translation_state:n},..."boolean"==typeof i&&{translation_metrics:e.e8()},...s&&{action_info:{...t.action_info,reason:s}}}};function f(e,t){return{...t?_({fields:p(e),post:e,postIsTranslated:!!e.isPostTranslated,withTranslationMetrics:!0}):p(e),new_award:{id:e.awardId,is_content_eligible:Boolean(e.isAwardable)}}}const b=(t,o,n={})=>e.b({source:l(t),action:"click",noun:o},{...t.viewContext&&i(t.viewContext)?f(t,!!t.isTranslatable):n,feed:e.hW()}),g=e=>`${e}`.startsWith("t1_")?`${e}`:`t1_${e}`,h=/^.*\/r\/.*\/comments\/(?<postId>[a-zA-Z0-9]+)\/.*\/?$/;const w=/\/r\/([^/]+)\/$/;return{$:e=>b(e,"share",m(e)),get A(){return n},B:t=>e.b({source:u(t),action:"click",noun:"delete"}),C:"hidden",D:({markedAsSpoiler:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_spoiler":"unmark_spoiler"}),E:({markedAsNsfw:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_nsfw":"unmark_nsfw"}),F:({markedAsBrandAffiliate:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_brand_affiliate":"unmark_brand_affiliate"}),G:({turnNotificationsOn:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"turn_notifications":"unsend_reply_notifications"}),H:t=>e.b({source:u(t),action:"click",noun:"hide"}),I:t=>e.b({source:u(t),action:"click",noun:"post_overflow_menu"}),J:t=>e.b({source:"event_post",action:"click",noun:"rsvp"},{...m(t)}),K:t=>e.b({source:"event_post",action:"click",noun:"un_rsvp"},{...m(t)}),L:g,M:"overflow-hidden h-[60px] embed-xs:h-[80px]",N:function(t){const o=t?e.il(t.href):null;if(!o)return{postId:"",commentId:""};const n=o?.groups?.postId,i=o?.groups?.commentId;return{postId:n?s(n):"",commentId:i?g(i):""}},O:function(e){const t=(e?.getAttribute("href")||"").match(w);return t?t[1]:""},get P(){return o},Q:function(e){const t=e.match(a),o=t?.groups?.postId;if(o)return s(o)},R:"read-more-click",S:(t,o)=>e.b({source:"post"===o?"post":"post_detail",action:t,noun:"post"===o?"post":"comment"},{action_info:{trigger_type:e.d_.HOTKEY}}),T:"h-[316px]",U:t=>e.b({source:"post",action:"leave",noun:"post",visibility:{on_screen_timestamp:t.becameVisibleOnScreenTimestamp,off_screen_timestamp:Date.now()}},p(t)),V:(t,o)=>e.b({source:"post",action:"consume",noun:"post"},{...o?_({fields:p(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0}):p(t),new_award:{id:t.awardId,is_content_eligible:Boolean(t.isAwardable)}}),W:t=>e.b({source:l(t),action:"click",noun:"read_more"},p(t)),X:function(t){return t===e.w.Popular},Y:function(t){return t===e.w.Home},Z:function(e){return e===o.BrandMentionFeed||e===o.ArticleDetails},_:i,a:function(e){switch(e){case o.AggregateFeed:case o.SubredditFeed:case o.CustomFeed:case o.ListingBelowLinkedPosts:case o.ListingBelowSubredditPosts:case o.PopularFeed:case o.ProfileFeed:case o.ProfileFeed2:case o.BrandMentionFeed:case o.BrandPostPerformanceFeed:case o.ArticleDetails:case o.ModQueue:case o.ModQueueAll:case o.ModLog:case o.ModNotesRail:return!0;case o.CommentsPage:default:return!1}},a0:e=>b(e,"share_copy",m(e)),a1:(o,n)=>{switch(t.g(o,"postClickLocation")){case e.dS.SUBREDDIT_LINK:return(e=>b(e,"subreddit",m(e)))(n);case e.dS.JOIN:return(e=>b(e,"subscribe",m(e)))(n);case e.dS.OVERFLOW_BUTTON:case e.dS.COMMENTS_BUTTON:case e.dS.VOTE:case e.dS.SHARE:case e.dS.VIDEO_PLAYER:return null;case e.dS.TEXT_BODY:return(e=>b(e,"text",m(e)))(n);default:return(e=>b(e,"post",m(e)))(n)}},a2:t=>e.b({source:l(t),action:"click",noun:"clearvote"},p(t)),a3:t=>e.b({source:l(t),action:"click",noun:"upvote"},{...t.isTranslatable?_({fields:p(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0}):p(t)}),a4:t=>e.b({source:l(t),action:"click",noun:"vote_try"},m(t)),a5:t=>e.b({source:l(t),action:"click",noun:"downvote"},{...t.isTranslatable?_({fields:p(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0}):p(t)}),a6:t=>e.b({source:"subreddit_hovercard",action:"view",noun:"hover_subreddit_hovercard"},p(t)),a7:t=>e.b({source:"user_hovercard",action:"view",noun:"hover_user_hovercard"},p(t)),b:"partial-update",c:2e3,d:function(e){return`https://www.redditmedia.com/mediaembed/${e.replace("t3_","")}/`},e:s,f:_,g:m,h:p,i:function(e){return e===o.CommentsPage},j:"flex",k:"max-h-[253px] overflow-hidden s:max-h-[318px] m:max-h-[337px] l:max-h-[352px] xl:max-h-[452px]",l:e=>e.startsWith("t3_"),m:(t,o)=>e.b({source:l(t),action:"view",noun:"post"},f(t,o)),n:e=>b(e,"comments",m(e)),o:function(e){const t=(e?.getAttribute("href")||"").match(h),o=t?.groups?.postId;return o?s(o):""},p:(t,o)=>e.b({source:"translate_button",action:"view",noun:"post"},_({fields:p(t),post:t,postIsTranslated:o,reason:o?"on":"off"})),q:e=>b(e,"view_all_comments",m(e)),r:(t,o)=>e.b({source:u(t),action:"click",noun:"report"},o),s:t=>e.b({source:"ad_overflow",action:"hide",noun:"ad"},t),t:(t,o)=>e.b({source:u(t),action:"click",noun:"overflow_show_less"},o),u:t=>e.b({source:u(t),action:"click",noun:"edit"}),v:t=>e.b({source:u(t),action:"click",noun:"update_post_flair"}),w:t=>e.b({source:u(t),action:"click",noun:"save"}),x:(t,o)=>e.b({source:u(t),action:o?"undo":"click",noun:"follow"}),y:t=>e.b({source:u(t),action:"click",noun:"unpin"}),z:t=>e.b({source:u(t),action:"click",noun:"pin"})}}));
SML.dm("modverdict58953687",["shelle48e5956","links22118b0c"],(async(E,e)=>{const R=e=>e===E.am.ModApproved,D=e=>e===E.am.AdminApproved,m=e=>e===E.am.ModRemoved||e===E.am.ModSpammed,o=e=>e===E.am.AdminRemoved||e===E.am.AdminSpammed;var d;!function(E){E.UNMODERATED="UNMODERATED",E.APPROVED="APPROVED",E.REMOVED="REMOVED",E.SPAM="SPAM",E.REPORTED="REPORTED",E.FILTERED="FILTERED"}(d||(d={}));const M=(E,e)=>(E===d.FILTERED||e)&&E!==d.APPROVED&&E!==d.REMOVED;return{get M(){return d},a:(R,D)=>(R===e.P.ModQueue||R===e.P.ModQueueAll)&&D===E.al.ModQueueCompactView,b:E=>[d.REPORTED,d.FILTERED,d.UNMODERATED,d.REMOVED,d.SPAM].includes(E),c:E=>[d.APPROVED,d.UNMODERATED,d.REPORTED].includes(E),d:({moderationState:E,isSpamFilteredPost:e,isRemoved:R,isPromotedPost:D})=>(M(E,e)||!R)&&!D,e:({isPromotedPost:E})=>!E,f:(E,e,R,D)=>E===d.REMOVED&&!D&&!e&&!M(E,R),h:E=>R(E)||D(E)||m(E)||o(E),i:E=>R(E)||D(E),s:M}}));
SML.dm("shredditprofilecommenta51fc9c6",["shelle48e5956","modactionscontrollerd935e6bc","agegatestandaloneclientjsb13e879d","comment5b02ad76","links22118b0c","modverdict58953687","iconc33661e6"],(async(t,e,o,n,i,s,r)=>{const a="none";class l{constructor(t){this.host=t,this.convertCommentToBeDeleted=({commentId:t})=>{if(this.host.commentId===t){const t=this.host.querySelector("shreddit-comment-action-row");t&&(t.style.display=a);const e=this.host.querySelector('svg[icon-name="mic-fill"]');e&&(e.style.display=a);const n=this.host.querySelector(`span[id="poster-info-${this.host.commentId}"] a`);n&&(n.innerText=o.al(),n.href="",n.style.pointerEvents=a);const i=this.host.querySelector('div[id="-post-rtjson-content"]');i&&(i.style.display=a)}},t?.addController(this)}hostConnected(){this.host.pubsub.subscribe(t.T.CommentDeleted,this.convertCommentToBeDeleted)}hostDisconnected(){this.host.pubsub.unsubscribe(t.T.CommentDeleted,this.convertCommentToBeDeleted)}}const c=r.s;let d=class extends c{static get styles(){return[t.t,t.z(":host {\n  position: relative;\n  display: inline-block;\n}\n:host([item-state~='APPROVED']),\n:host([item-state~='REMOVED']) {\n  background-color: var(--color-neutral-background-weak);\n}\n:host(:hover),\n:host(:focus-within) {\n  background-color: var(--color-neutral-background-hover);\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n")]}constructor(){super(),this.commentId="",this.viewContext=i.P.ProfileFeed,this.itemState=s.M.UNMODERATED,this.updateAnimation=void 0,this.reloadUrl="",this.pubsub=new t.P(this),this.deleteCommentController=new l(this),this.onCommentUpdateAction=({commentId:t,action:e})=>{if(this.id===t)switch(e){case n.C.approve:case n.C.approveOptimistic:this.itemState=s.M.APPROVED;break;case n.C.remove:case n.C.removeAsSpam:case n.C.confirmRemoval:case n.C.addRemovalReason:case n.C.removeOptimistic:case n.C.removeAsSpamOptimistic:case n.C.confirmRemovalOptimistic:this.itemState=s.M.REMOVED}},this.onHotkeysFocus=t=>{this.querySelector("a")?.focus(t)},this.onToggleSave=()=>{const t=this?.overlowMenuItemProps?.find((t=>"save"===t.id));t?.onClick?.()},this.handleReload=t=>{t.stopPropagation(),this.reload()},this.handleClick=e=>{if(this.viewContext===i.P.ModQueue||this.viewContext===i.P.ModQueueAll)return void e.preventDefault();if(null==this.href||o.a(e,["A","BUTTON"]))return;if(null==o.g(e,"ignoreClickInterception")){const{telemetryNoun:o,telemetrySource:n}=this;o&&n&&t.a(this,{noun:o,source:n,action:"click"}),this._assignLocation(this.href),e.stopPropagation()}},new t.ar(this,this,{threshold:[.5]}),new e.ModActionsController(this,{getThingIdFn:()=>this.commentId})}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick),this.addEventListener("reload-shreddit-comment",this.handleReload);(this.viewContext===i.P.ModQueue||this.viewContext===i.P.ModQueueAll)&&this.pubsub.subscribe(t.T.CommentUpdated,this.onCommentUpdateAction,!1)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.handleClick),this.removeEventListener("reload-shreddit-comment",this.handleReload);(this.viewContext===i.P.ModQueue||this.viewContext===i.P.ModQueueAll)&&this.pubsub.unsubscribe(t.T.CommentUpdated,this.onCommentUpdateAction)}get commentActionRow(){return this.querySelector("shreddit-comment-action-row")}get overlowMenuItemProps(){return this.querySelector("shreddit-overflow-menu")?.getMenuItemProps()}reload(){if(!this.reloadUrl||!this.parentNode)return;const t=document.createElement("faceplate-partial");t.setAttribute("src",this.reloadUrl),this.parentNode.insertBefore(t,this),t.appendChild(this)}_assignLocation(t){window.location.assign(t)}render(){return r.x`<slot class="cursor-pointer"></slot>`}};t._([t.n({type:String,attribute:"comment-id"})],d.prototype,"commentId",void 0),t._([t.n({type:String,attribute:"user-id"})],d.prototype,"userId",void 0),t._([t.n({type:String,attribute:"view-context"})],d.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"item-state",reflect:!0})],d.prototype,"itemState",void 0),t._([t.n({type:String})],d.prototype,"href",void 0),t._([t.n({type:String,attribute:"telemetry-noun"})],d.prototype,"telemetryNoun",void 0),t._([t.n({type:String,attribute:"telemetry-source"})],d.prototype,"telemetrySource",void 0),t._([t.n({type:String,reflect:!0})],d.prototype,"updateAnimation",void 0),t._([t.n({type:String,attribute:"reload-url"})],d.prototype,"reloadUrl",void 0),d=t._([t.e("shreddit-profile-comment")],d)}));
SML.dm("faceplategifee4f8a57",["shelle48e5956","iconc33661e6"],(async(t,e)=>{let i=class extends e.s{constructor(){super(...arguments),this.replaceFromCache=()=>{this.imgCache&&this.canvasCache?this.freeze?this.replaceChildSafely(this.canvasCache,this.imgCache):this.replaceChildSafely(this.imgCache,this.canvasCache):this.initialize()},this.replaceChildSafely=(t,e)=>{const i=this._slot?.[0];t!==i&&this.replaceChild(t,e)},this.freezeGif=async()=>{const e=this._slot?.[0];if(!this.freeze||this.canvasCache)return void this.shadowRoot?.host.setAttribute("state","ready");const i=document.createElement("canvas");if(!i||!e||"IMG"!==this._slot?.[0].nodeName)return;this.shadowRoot?.host.setAttribute("state","loading"),this.imgCache||(this.imgCache=e),i.width=e.width,i.height=e.height,i.getContext("2d")?.drawImage(e,0,0,i.width,i.height);for(let t=0;t<e.attributes.length;t++){const s=e.attributes[t];"height"!==s.name&&"width"!==s.name&&i.setAttribute(s.name,s.value)}this.canvasCache=i,this.replaceChild(i,e),this.shadowRoot?.host.setAttribute("state","ready");const s=t.c("__TEST-ONLY_faceplate-gif:canvas-rendered");this.dispatchEvent(s),e.removeEventListener("load",this.freezeGif)}}static get styles(){return e.a`:host{display:block}:host([state=ready]){visibility:visible}:host([state=loading]){visibility:hidden}`}updated(t){t.has("freeze")&&this.replaceFromCache()}async initialize(){const t=this._slot?.[0];t?.complete&&t?.naturalWidth>0?this.freezeGif():t?.addEventListener("load",this.freezeGif)}render(){return e.x`<slot @slotchange="${this.initialize}"></slot>`}};t._([t.j({slot:"",flatten:!0})],i.prototype,"_slot",void 0),t._([t.n({type:Boolean})],i.prototype,"freeze",void 0),i=t._([t.e("faceplate-gif")],i)}));
SML.dm("shredditoverflowmenua4611b35",["shelle48e5956","iconc33661e6","contentactionbutton6a45f903","awardcontroller351c7b93","expandablesectionheader41e0cfd1","translationsa30aa3ad","comment5b02ad76","awards2379b181","scrolltocomments57babb9e","overflowmenuactionsf8d12b95","agegatestandaloneclientjsb13e879d","utils59e2ce2f","faceplatebottomsheetheadere0488abf","appselectorclientjs9964d0b0","selectcontroller4c63b3e8","tablepagination77cf692d","shredditcommentsharebutton10fe44fe","commentstatsentrypointclientjsb4288909","feedbacktooltipoverflowmenuc3c644ac","distinguishedtags1c4757ea","TinyGesture26737d23","userflairfe275854","withshared1523f2d","ae18b1320","index192b5d82","headeractionitemchatclientjsb3335fba","tooltipbaseaa9651a3","utils93db03dd","keywordsfa9c4196","rplcoachmark4e17786a","rplcoachmarkcard5c5498b1"],(async(e,t,o,n,i,s,a,r,l,d,m,c)=>{const u=(e,o)=>{const n=function(e,t){const{toggleProps:o}=e;return o&&t[o.stateKey]?i.l({...e,label:o.toggledLabel,leadingIcon:o.toggledIcon}):i.l({...e})}(e,o),s=function(e,t){const{toggleProps:o}=e;return o&&t[o.stateKey]?e.san||o.toggledSan?{...e.san,...o.toggledSan}:void 0:e.san}(e,o);return s?(a=n,r=s.source,l=s.action,d=s.noun,t.x` <faceplate-tracker source="${r}" action="${l}" noun="${d}"> ${a} </faceplate-tracker> `):n;var a,r,l,d},p=e=>({label:"Award",leadingIcon:t.bk(),disabled:e.disabled,attributes:{className:"award-comment-menu-button s:hidden"},isUserEligible:()=>e.canRenderAwardButton&&e.isAwardable,onClick:()=>{const t=l.a.setCorrelationId();e.trackEvent(r.o({awardId:e.awardId,thingId:e.commentId,subredditId:e.subredditId,correlationId:t})),e.awardController.activateDialog()},sortIndex:d.C.Award});function h(e,t){const o=t?"Something went wrong trying to mark as brand affiliate":"Something went wrong trying to unmark as brand affiliate";return e?.[0]?.message??o}const b=o=>({label:"Mark as brand affiliate",leadingIcon:t.ck({}),disabled:o.disabled,attributes:{className:"brand-affiliate-menu-button"},toggleProps:{stateKey:"isCommentCommercialCommunication",toggledLabel:"Unmark as brand affiliate",toggledIcon:t.cj({})},isUserEligible:()=>o.isUserLoggedIn&&o.isCommentAuthor&&!o.isDeleted,onClick:()=>{o.onToggleMenuItemClick({updateFunction:(t,n)=>async function(t,o,n){const i=!n,s={input:{thingId:o,commercialCommunicationState:i}},{data:a,errors:r}=await e.B({operation:e.O.UpdateCommercialCommunicationState,variables:s});if(r?.length)throw new Error(h(r,i));if(!a?.updateCommercialCommunicationState?.ok)throw new Error(h(a?.updateCommercialCommunicationState?.errors,i));return t.trackEvent(e.b({source:t.telemetrySource,action:"click",noun:i?"mark_brand_affiliate":"unmark_brand_affiliate"},{post:{id:t.postId},comment:{id:t.commentId}})),t.dispatchEvent(new CustomEvent("reload-shreddit-comment",{bubbles:!0,composed:!0})),i}(o,t,n),stateKey:"isCommentCommercialCommunication",successText:"Marked as brand affiliate",errorText:"Unable to mark as brand affiliate",toggleSuccessText:"Unmarked as brand affiliate",toggleErrorText:"Unable to unmark as brand affiliate"})},sortIndex:d.C.BrandAffiliate}),E=o=>({label:"Delete comment",leadingIcon:t.ab({}),disabled:o.disabled,san:{source:"comment_overflow_menu",action:"click",noun:"delete"},attributes:{className:"delete-comment-menu-button"},isUserEligible:()=>o.isCommentAuthor,onClick:async()=>{if(o.commentId){await o._activateFeature({name:e.h2});const t=document.getElementById(m.cA);await customElements.whenDefined("shreddit-comment-deletion-modal"),await(t?.updateComplete),t?.openModalForComment(o.commentId)}},sortIndex:d.C.Delete});let g=e.B;async function T(t,o,n){const i=n?e.eU.None:e.eU.AdminDistinguished,s={input:{commentId:o,distinguishType:i,distinguishState:i===e.eU.None?e.eX.None:e.eX.Distinguished}},{data:r,errors:l}=await g({operation:e.O.UpdateCommentDistinguishedState,variables:s});if(!r?.updateCommentDistinguishState?.ok)throw new Error(`Response was not "ok", ${l[0]?.message}`);const d=!n,m=d?"distinguish_as_admin":"undistinguish_as_admin";return t.trackEvent(function(t,o){return e.b({source:"moderator",action:"click",noun:t},{comment:{id:o},action_info:{reason:"comment"}})}(m,o)),t.publish(e.T.CommentUpdated,{commentId:o,action:a.C.distinguishAsAdmin,value:d}),d}const S=e=>({label:"Show admin label",leadingIcon:t.ci({}),disabled:e.disabled,toggleProps:{stateKey:"isCommentDistinguishedAsAdmin",toggledLabel:"Hide admin label",toggledIcon:t.ch({})},attributes:{className:"distinguish-as-admin-menu-button"},isUserEligible:()=>e.isAdmin&&function(e){return e.isCommentAuthor&&!e.isDeleted}(e),onClick:()=>{e.onToggleMenuItemClick({updateFunction:(t,o)=>T(e,t,o),stateKey:"isCommentDistinguishedAsAdmin",successText:"Comment is marked as distinguished as admin.",errorText:"There was an error distinguishing the comment as admin. Please try again.",toggleSuccessText:"Comment is marked as undistinguished as admin.",toggleErrorText:"There was an error undistinguishing the comment as admin. Please try again."})},sortIndex:d.C.AdminDistinguish}),v=o=>({label:"Edit comment",leadingIcon:t.G({}),disabled:o.disabled,href:!o.canOpenComposer&&o.permalink?o.permalink:void 0,san:{source:o.permalink?"comment":"comment_overflow_menu",action:"click",noun:"edit"},isUserEligible:()=>o.isCommentAuthor&&o.isEditableComment,onClick:t=>{if(!o.canOpenComposer&&o.permalink)return;const n=(i=o.commentErrorOnEditReason)===c.U.CommentHasCollectibleExpression?"Sorry, currently you cannot edit Collectible Expression comments on Web.":i===c.U.CommentHasVideo?"Sorry, currently you cannot edit comments with videos on Web.":void 0;var i;if(n){const o=e.c("faceplate-alert",{level:e.x.notice,message:n});return void t.target?.dispatchEvent(o)}const s=o.closest(`shreddit-comment[thingid="${o.commentId}"]`),a=s?.querySelector(`#comment-${o.commentId}-edit-partial`);if(!a)return;const r=a.querySelector("faceplate-shimmer");r?.classList.remove("hidden");const l=s?.querySelector("shreddit-comment-action-row");l?.classList.add("hidden"),s?.setAttribute("edit-mode","");const d=m.cu({adjacentElement:a});(async()=>{try{const e=new Promise(((e,t)=>{a.addEventListener("faceplate-error",t,{once:!0}),a.addEventListener("faceplate-alert",t,{once:!0})}));await Promise.race([e,a.load()]);const t=s?.querySelector("comment-composer-host");await(t?.focusAsync())}catch{r?.classList.add("hidden"),l?.classList.remove("hidden"),s?.removeAttribute("edit-mode")}finally{d()}})()},sortIndex:d.C.Edit});let I=e.B;const _=o=>({label:"Follow comment",leadingIcon:t.bg({}),disabled:o.disabled,toggleProps:{stateKey:"isCommentFollowed",toggledLabel:"Unfollow comment",toggledIcon:t.aF({})},attributes:{className:"follow-comment-menu-button"},isUserEligible:()=>o.isUserLoggedIn&&!o.isCommentAuthor&&o.shouldRenderFollowMenuItem,onClick:()=>{o.onToggleMenuItemClick({updateFunction:(t,n)=>async function(t,o,n){const i=await I({operation:e.O.UpdateCommentFollowState,variables:{input:{commentId:o,followState:n?e.h3.Unfollowed:e.h3.Followed}}});if(!i.data.updateCommentFollowState?.ok)throw new Error(`Response was not "ok", ${i.errors[0]?.message}`);const s=!n;return t.trackEvent((s?m.cB:m.cC)(t.telemetrySource)),s}(o,t,n),stateKey:"isCommentFollowed",successText:"Comment followed!",errorText:"Failed to follow comment.",toggleSuccessText:"Comment unfollowed!",toggleErrorText:"Failed to unfollow comment."})},sortIndex:d.C.Follow}),C=e=>({label:"Translate",leadingIcon:t.bH({attributes:{"aria-hidden":"true"},size:t.I.Medium}),attributes:{className:"translate-setting-menu-button"},toggleProps:{stateKey:"isTranslationActive",toggledLabel:"Show original",toggledIcon:t.bX({attributes:{"aria-hidden":"true"},size:t.I.Medium})},onClick:()=>{y(e,{dispatchEvent:!0,dispatchTelemetry:!0})},isUserEligible:()=>!!e.i18nTranslationOverrideEligible,sortIndex:d.C.TranslationSetting}),y=(t,o)=>{const n="boolean"==typeof o?.value?o.value:!t.menuState.isTranslationActive;if(t.menuState={...t.menuState,isTranslationActive:n},o?.dispatchEvent){const o={id:t.commentId,isTranslationActive:n,source:"PDP_COMMENT_OVERFLOW_MENU"};t.publish(e.T.I18nCommentTranslationOverride,o)}o?.dispatchTelemetry&&t.trackEvent(s.w({isCommentTranslated:t.menuState.isTranslationActive,isCommentTranslatedAfterClick:n,isImmersiveTranslationsActive:!!t.translationContextValue?.isTranslationActive,comment:{id:t.commentId},isImmersiveVisit:t.isImmersiveVisit,isMtSeoVisit:t.isMtSeoVisit}))},M="s:hidden m:hidden l:hidden xl:hidden",f="text-secondary hover:text-secondary-hover\n    active:bg-interactive-pressed hover:bg-neutral-background-hover\n    hover:no-underline cursor-pointer",D=`${M} py-xs px-md ${f}`,w=o=>({label:"Reply",leadingIcon:t.a8({attributes:{"aria-hidden":"true"},size:t.I.Medium}),san:{source:"post_detail",action:"click",noun:"reply_comment"},attributes:{className:`${m.cD} ${M} ${f}`},isUserEligible:()=>o.canRenderReplyButton,onClick:()=>{o.dispatchEvent(e.c(m.cw,{detail:o.commentId}))},sortIndex:d.C.Reply});let O=e.B;const R=o=>({label:"Turn on reply notifications",leadingIcon:t.bg({}),toggleProps:{stateKey:"isReplyNotificationOn",toggledLabel:"Turn off reply notifications",toggledIcon:t.aF({})},san:{source:"comment",action:"click",noun:"overflow_send_replies_disable"},attributes:{className:"reply-notifications-menu-button"},isUserEligible:()=>o.isCommentAuthor,onClick:()=>{o.onToggleMenuItemClick({updateFunction:(t,o)=>async function(t,o,n){const i=await O({operation:e.O.UpdateCommentSendRepliesState,variables:{input:{commentId:o,sendRepliesState:n?e.h4.DoNotSend:e.h4.Send}}});if(!i.data.updateCommentSendRepliesState?.ok)throw new Error(`Response was not "ok", ${i.errors[0]?.message}`);return!n}(0,t,o),stateKey:"isReplyNotificationOn",successText:"Notifications on! You’ll get updates when there is new activity.",errorText:"Unable to turn notifications on.",toggleSuccessText:"Notifications off. You won’t get updates on this comment anymore.",toggleErrorText:"Unable to turn notifications off."})},sortIndex:d.C.Notifs});const k=o=>({label:"Report",leadingIcon:t.cg(),disabled:o.disabled,san:{source:"comment",action:"click",noun:"report"},isUserEligible:()=>!o.isCommentAuthor,onClick:t=>{o.isUserLoggedIn&&function(t,o){o.publish(e.T.ReportFlowInit,{thingId:o.commentId,authorName:o.authorName,authorId:o.authorId,triggerElement:t.target,permalink:o.permalink})}(t,o)},sortIndex:d.C.Report});let A=e.B;const L=o=>({id:"save",label:"Save",leadingIcon:t.cd({}),disabled:o.disabled,toggleProps:{stateKey:"isCommentSaved",toggledLabel:"Remove from saved",toggledIcon:t.cc({})},attributes:{className:"save-comment-menu-button"},isUserEligible:()=>o.isUserLoggedIn,onClick:()=>{o.onToggleMenuItemClick({updateFunction:(t,n)=>async function(t,o,n){const i=await A({operation:e.O.UpdateCommentSaveState,variables:{input:{commentId:o,saveState:n?e.h5.None:e.h5.Saved}}});if(!i.data.updateCommentSaveState?.ok)throw new Error(`Update comment save state response was not "ok", ${i.errors[0]?.message}`);const s=!n;return t.trackEvent((s?m.cE:m.cF)(t.telemetrySource)),s}(o,t,n),stateKey:"isCommentSaved",successText:"Comment saved successfully",errorText:"Unable to save comment",toggleSuccessText:"Removed from saved",toggleErrorText:"Unable to remove from saved"})},sortIndex:d.C.Save}),P="s:hidden m:hidden l:hidden xl:hidden",U=e=>({label:"Insights",leadingIcon:t.aC({size:t.I.Medium}),attributes:{className:`comment-insights-menu-button ${P}`},isUserEligible:()=>e.canRenderInsightsButton,sortIndex:d.C.Insights,href:`/commentstats/${e.commentId}`}),x=o=>({id:"share-comment-as-post",label:"Share as post",leadingIcon:t.ca({}),disabled:o.disabled,attributes:{className:"share-comment-as-post-button"},isUserEligible:()=>o.isUserLoggedIn,onClick:()=>{var t;o.trackEvent((t=o.commentId,e.b({source:"comment",action:"click",noun:"share_as_post"},{action_info:{reason:"share_sheet"},comment:{id:t}})));const n=`${e.ee.CrosspostSourceId}=${o.commentId}`;window.open(`/submit?${n}`,"_blank")},sortIndex:d.C.ShareAsPost}),B=e.g(e.C(t.s));let N=class extends B{constructor(){super(...arguments),this.source="",this.action="",this.noun="",this.postId="",this.commentId="",this.shouldUseBottomSheet=!1,this.shouldUseSmallButton=!1,this.shouldRenderFollowMenuItem=!1,this.canRenderShareButton=!1,this.canRenderShareCommentAsPostButton=!1,this.canRenderReplyButton=!1,this.canRenderAwardButton=!1,this.canRenderInsightsButton=!1,this.canOpenComposer=!1,this.classOverride="",this.disabled=!1,this.isSaved=!1,this.isFollowed=!1,this.isDeleted=!1,this.isCommentAuthor=!1,this.isUserLoggedIn=!1,this.isAdmin=!1,this.authorId="",this.isEditableComment=!1,this.isAwardable=!1,this.isSendReplies=!1,this.isCommercialCommunication=!1,this.telemetrySource="no-telemetry-source-defined",this.menuLabel="",this.isCustomPost=!1,this.translationContextValue=e.aw,this.isCommentPretranslated=!1,this.i18nFeedbackEligible=!1,this.isImmersiveVisit=!1,this.isMtSeoVisit=!1,this.commentStatsKillSwitch=!1,this.menuProps=[],this.menuState={isCommentSaved:!1,isCommentFollowed:!1,isCommentDistinguishedAsAdmin:!1,isCommentCommercialCommunication:!1,isReplyNotificationOn:!0,isTranslationActive:!1},this.showBottomSheet=!1,this.awardController=new n.A(this,{getThingId:()=>this.commentId}),this.onCommentUpdate=e=>{e.commentId===this.commentId&&(e.action===a.C.edit?this.openMenuBtn?.focus():e.action===a.C.distinguishAsMod&&(this.menuState={...this.menuState,isCommentDistinguishedAsAdmin:!1}))},this.closeMenu=()=>{this.shouldUseBottomSheet?(this.bottomSheet?.close(),this.showBottomSheet=!1):this.dropdownMenu?.close()},this.openMenu=()=>{this.shouldUseBottomSheet?(this.showBottomSheet=!0,this.updateComplete.then((()=>{this.bottomSheet?.showModal()}))):this.dropdownMenu?.show(),this.i18nTranslationOverrideEligible&&this.trackEvent(s.x({isCommentTranslated:this.menuState.isTranslationActive,isImmersiveTranslationsActive:!!this.translationContextValue?.isTranslationActive,comment:{id:this.commentId},isImmersiveVisit:this.isImmersiveVisit,isMtSeoVisit:this.isMtSeoVisit}))},this.handleKeyUp=e=>{"Enter"!==e.key&&"Space"!==e.key||this.closeMenu()},this.handlePostTranslationOverride=e=>{var t;(e.id===((t=this.postId)&&t.length>0&&!t.includes("t3_")?`t3_${t}`:t)||e.isContextUpdateEvent)&&y(this,{value:e.isTranslationActive})},this.handleCommentTranslationOverride=e=>{e.id===this.commentId&&"PDP_COMMENT_OVERFLOW_MENU"!==e.source&&y(this,{value:e.isTranslationActive})},this._activateFeature=async t=>e.k(t)}connectedCallback(){super.connectedCallback(),this.menuState=this.getInitialMenuState(),this.menuProps=this.getMenuItemProps(),this.subscribe(e.T.CommentUpdated,this.onCommentUpdate),this.subscribe(e.T.I18nPostTranslationOverride,this.handlePostTranslationOverride,!1),this.subscribe(e.T.I18nCommentTranslationOverride,this.handleCommentTranslationOverride,!1)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(e.T.CommentUpdated,this.onCommentUpdate),this.unsubscribe(e.T.I18nPostTranslationOverride,this.handlePostTranslationOverride),this.unsubscribe(e.T.I18nCommentTranslationOverride,this.handleCommentTranslationOverride)}getAllMenuItemProps(){return[v(this),k(this),L(this),(o=this,{label:"Give translation feedback",leadingIcon:t.ce({attributes:{"aria-hidden":"true"},size:t.I.Medium}),san:{source:"translate_button",action:"click",noun:"feedback"},attributes:{className:"feedback-menu-button"},onClick:()=>{const t=new CustomEvent(e.di,{bubbles:!0,composed:!0,detail:{commentId:o.commentId,postId:o.postId}});o.dispatchEvent(t)},isUserEligible:()=>o.i18nFeedbackEligible,sortIndex:d.C.TranslationFeedback}),C(this),_(this),E(this),S(this),b(this),R(this),w(this),p(this),U(this)].sort(((e,t)=>e.sortIndex-t.sortIndex));var o}getMenuItemProps(){return this.getAllMenuItemProps().filter((e=>e.isUserEligible()))}getInitialMenuState(){return{isCommentSaved:this.isSaved,isCommentFollowed:this.isFollowed,isReplyNotificationOn:this.isSendReplies,isCommentCommercialCommunication:this.isCommercialCommunication,isCommentDistinguishedAsAdmin:this.distinguishedAs===e.at.Admin,isTranslationActive:this.isCommentPretranslated||e.ft()}}async onToggleMenuItemClick({updateFunction:t,stateKey:o,successText:n,errorText:i,toggleSuccessText:s,toggleErrorText:a}){if(!this.commentId)return;const r=this.menuState[o];try{const i=await t(this.commentId,r);this.menuState={...this.menuState,[o]:i};const a=e.c("faceplate-alert",{level:e.x.success,message:i?n:s});this.dispatchEvent(a)}catch(t){const o=e.c("faceplate-alert",{level:e.x.error,cause:"uncategorized",message:r?a:i});this.dispatchEvent(o)}}renderMenuItems(){return t.x` ${e=this.menuProps,o=this.menuState,t.x` ${e.map((e=>u(e,o)))} `} ${this.renderShareButton()} ${this.renderShareCommentAsPostButton()} <slot name="devvit-context-actions"></slot> `;var e,o}renderOverflowMenuButton(){return t.x` <faceplate-tracker source="${this.source}" action="${this.action}" noun="${this.noun}"> ${o.c({appearance:"plain-weak",attributes:{onclick:this.openMenu,className:"open-menu-btn","aria-disabled":this.disabled?"true":"false","aria-label":"Open user actions"},leadingIcon:t.p({size:this.shouldUseSmallButton?t.I.Small:t.I.ExtraSmall}),size:e.s.Small})} </faceplate-tracker> `}renderBottomSheetMenuModal(){return this.showBottomSheet?t.x` <faceplate-bottom-sheet data-ignore-click-interception> <faceplate-bottom-sheet-header slot="header" has-divider> ${this.menuLabel?this.menuLabel:"Options"} <span slot="trailing"> ${e.r({appearance:"secondary",attributes:{onclick:this.closeMenu,"aria-label":"Close actions menu"},leadingIcon:t.C({size:t.I.Small}),size:e.s.Small})} </span> </faceplate-bottom-sheet-header> <div class="w-full max-h-[19rem] overflow-y-auto pb-md"> <faceplate-menu @click="${this.closeMenu}" @keyup="${this.handleKeyUp}"> ${this.renderMenuItems()} </faceplate-menu> </div> </faceplate-bottom-sheet> `:""}renderBottomSheetMenu(){return t.x` ${this.renderOverflowMenuButton()} ${this.renderBottomSheetMenuModal()} `}renderDropdownMenu(){return t.x` <faceplate-dropdown-menu class="${this.classOverride}" position="bottom-end" disabled="disabled" data-ignore-click-interception> ${this.renderOverflowMenuButton()} <faceplate-menu slot="menu" class="whitespace-nowrap max-h-[25.5rem] overflow-y-auto" @click="${this.closeMenu}" @keyup="${this.handleKeyUp}" hidden> ${this.renderMenuItems()} </faceplate-menu> </faceplate-dropdown-menu> `}renderShareButton(){if(!this.canRenderShareButton||!this.permalink)return"";const e={comment:{id:this.commentId,...this.commentCreatedTimestamp&&{created_timestamp:Date.parse(this.commentCreatedTimestamp)}}};return t.x` <div class="${D}"> <shreddit-comment-share-button data-faceplate-tracking-context="${JSON.stringify(e)}" is-list-item permalink="${this.permalink}" ?is-desktop-viewport="${!this.shouldUseBottomSheet}" ?disabled="${this.disabled}"></shreddit-comment-share-button> </div> `}renderShareCommentAsPostButton(){return this.canRenderShareCommentAsPostButton?t.x` ${u(x(this),this.menuState)} `:""}render(){const e=this.shouldUseBottomSheet?this.renderBottomSheetMenu():this.renderDropdownMenu();return this.i18nFeedbackCoachmarkEligible?t.x` <feedback-tooltip-overflow-menu @feedback-tooltip-closed="${this.openMenu}"> ${e} </feedback-tooltip-overflow-menu> `:this.canRenderInsightsButton&&!this.commentStatsKillSwitch?t.x` <comment-stats-coachmark class="nd:visible" coachmark-card-classes="${P}"> ${e} </comment-stats-coachmark> `:t.x`${e}`}};return N.styles=[e.t],e._([e.n({type:String})],N.prototype,"source",void 0),e._([e.n({type:String})],N.prototype,"action",void 0),e._([e.n({type:String})],N.prototype,"noun",void 0),e._([e.n({type:String,attribute:"post-id"})],N.prototype,"postId",void 0),e._([e.n({type:String,attribute:"comment-id"})],N.prototype,"commentId",void 0),e._([e.n({type:Boolean,attribute:"should-use-bottom-sheet"})],N.prototype,"shouldUseBottomSheet",void 0),e._([e.n({type:Boolean,attribute:"should-use-small-button"})],N.prototype,"shouldUseSmallButton",void 0),e._([e.n({type:Boolean,attribute:"should-render-follow-menu-item"})],N.prototype,"shouldRenderFollowMenuItem",void 0),e._([e.n({type:Boolean,attribute:"can-render-share-button"})],N.prototype,"canRenderShareButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-share-comment-as-post-button"})],N.prototype,"canRenderShareCommentAsPostButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-reply-button"})],N.prototype,"canRenderReplyButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-award-button"})],N.prototype,"canRenderAwardButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-insights-button"})],N.prototype,"canRenderInsightsButton",void 0),e._([e.n({type:Boolean,attribute:"can-open-composer"})],N.prototype,"canOpenComposer",void 0),e._([e.n({type:String,attribute:"class-override"})],N.prototype,"classOverride",void 0),e._([e.n({type:Boolean,attribute:"disabled"})],N.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"is-saved"})],N.prototype,"isSaved",void 0),e._([e.n({type:Boolean,attribute:"is-followed"})],N.prototype,"isFollowed",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],N.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"is-comment-author"})],N.prototype,"isCommentAuthor",void 0),e._([e.n({type:Boolean,attribute:"is-user-logged-in"})],N.prototype,"isUserLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"is-admin"})],N.prototype,"isAdmin",void 0),e._([e.n({type:String,attribute:"author-name"})],N.prototype,"authorName",void 0),e._([e.n({type:String,attribute:"author-id"})],N.prototype,"authorId",void 0),e._([e.n({type:Boolean,attribute:"editable-comment"})],N.prototype,"isEditableComment",void 0),e._([e.n({type:String,attribute:"comment-error-on-edit-reason"})],N.prototype,"commentErrorOnEditReason",void 0),e._([e.n({type:Boolean,attribute:"is-awardable"})],N.prototype,"isAwardable",void 0),e._([e.n({type:Boolean,attribute:"is-send-replies"})],N.prototype,"isSendReplies",void 0),e._([e.n({type:Boolean,attribute:"is-commercial-communication"})],N.prototype,"isCommercialCommunication",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],N.prototype,"distinguishedAs",void 0),e._([e.n({type:String})],N.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"telemetry-source"})],N.prototype,"telemetrySource",void 0),e._([e.n({type:String,attribute:"menu-label"})],N.prototype,"menuLabel",void 0),e._([e.n({type:Boolean,attribute:"is-custom-post"})],N.prototype,"isCustomPost",void 0),e._([e.av({context:e.ax,subscribe:!0}),e.d()],N.prototype,"translationContextValue",void 0),e._([e.d()],N.prototype,"translationOverrideActive",void 0),e._([e.n({type:Boolean,attribute:"comment-pretranslated"})],N.prototype,"isCommentPretranslated",void 0),e._([e.n({type:Boolean,attribute:"i18n-translation-override-eligible"})],N.prototype,"i18nTranslationOverrideEligible",void 0),e._([e.n({type:Boolean,attribute:"i18n-feedback-coachmark-eligible"})],N.prototype,"i18nFeedbackCoachmarkEligible",void 0),e._([e.n({type:Boolean,attribute:"i18n-feedback-eligible"})],N.prototype,"i18nFeedbackEligible",void 0),e._([e.n({type:Boolean,attribute:"is-immersive-visit"})],N.prototype,"isImmersiveVisit",void 0),e._([e.n({type:Boolean,attribute:"is-mt-seo-visit"})],N.prototype,"isMtSeoVisit",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],N.prototype,"subredditId",void 0),e._([e.n({type:String,reflect:!0,attribute:"award-id"})],N.prototype,"awardId",void 0),e._([e.n({type:String,attribute:"comment-created-timestamp"})],N.prototype,"commentCreatedTimestamp",void 0),e._([e.n({type:Boolean,attribute:"comment-stats-kill-switch"})],N.prototype,"commentStatsKillSwitch",void 0),e._([e.y("faceplate-bottom-sheet")],N.prototype,"bottomSheet",void 0),e._([e.y("faceplate-dropdown-menu")],N.prototype,"dropdownMenu",void 0),e._([e.y(".open-menu-btn")],N.prototype,"openMenuBtn",void 0),e._([e.d()],N.prototype,"menuProps",void 0),e._([e.d()],N.prototype,"menuState",void 0),e._([e.d()],N.prototype,"showBottomSheet",void 0),N=e._([e.e("shreddit-overflow-menu")],N),{get ShredditOverflowMenu(){return N}}}));
SML.dm("shredditcommentactionrow312dcbcd",["shelle48e5956","iconc33661e6","index43b39749","agegatestandaloneclientjsb13e879d","utils59e2ce2f","comment5b02ad76","links22118b0c","postFlair51562697","shopgallerydatafetcherclientjs777c4af0","numbera5d31186","contentactionbutton6a45f903","awardcontroller351c7b93","scrolltocomments57babb9e","awards2379b181","awards8d1217c9","distinguishedtags1c4757ea"],(async(t,o,e,n,r,i,a,l)=>{const s=t.g(o.s);let c=window.location.search,d=class extends s{constructor(){super(...arguments),this.commentId="",this.score=void 0,this.isDesktopViewport=!1,this.disabled=!1,this.isUserLoggedIn=!1,this.isMod=!1,this.previousActionsFeature=!1,this.isCommentArchived=!1,this.isViewOnly=!1,this.isContestMode=!1,this.isScoreHidden=!1,this.permalink="",this.interactionFromHotkey=!1,this.isUserBanned=!1,this.voteState=t.ek.None,this.updateAnimation=void 0,this.recordTTCI=!1,this.isCommentComposerActive=!1,this.viewContext=a.P.CommentsPage,this.commentOverflowMenu=null,this.pubsub=new t.P(this),this.subscribeToReplyMenuItemClick=()=>{this.commentOverflowMenu=this.getCommentOverflowMenu(),this.commentOverflowMenu?.addEventListener(n.cw,this.handleReply)},this.unsubscribeToReplyMenuItemClick=()=>{this.commentOverflowMenu?.removeEventListener(n.cw,this.handleReply)},this.getCommentOverflowMenu=()=>this.querySelector("shreddit-overflow-menu"),this._events=new t.E(this),this.hideCommentComposer=()=>{const t=this.querySelector('[slot="comment-composer"]');t&&t.remove(),this.isCommentComposerActive=!1},this.handleCommentUpdated=({commentId:t,action:o,value:e})=>{this.commentId===t&&o===i.C.lock&&(this.isViewOnly=r.i({isLocked:Boolean(e),isMod:this.isMod,isArchived:this.isCommentArchived,isUserBanned:this.isUserBanned}),this.isViewOnly&&this.hideCommentComposer())},this.handleCancelDraftEvent=this._events.define(n.c8,this.hideCommentComposer),this.handleCommentPostEvent=this._events.define(n.cr,this.hideCommentComposer),this.focusOnCommentComposer=()=>{if(!this.querySelector('[slot="comment-composer"]')){const t=this.querySelector('[slot="comment-composer-template"]');if(!(t instanceof HTMLTemplateElement))return;const o=t.content.cloneNode(!0);this.appendChild(o)}this.isCommentComposerActive=!0,t.dw("shreddit_hotkeys_m1")?this.querySelector("comment-composer-host")?.focus():this.querySelector('[slot="comment-composer"]')?.focus()},this.handleReply=t=>{if(this.disabled)return;const o=this.getAttribute("reply-permalink");o?window.history.pushState({},"",o):(t.stopImmediatePropagation(),t.stopPropagation(),this.focusOnCommentComposer())},this.getCommentVoteTypeFromVoteState=()=>{switch(this.voteState){case t.ek.Up:return e.V.Upvote;case t.ek.Down:return e.V.Downvote;default:return}},this._getCommentScoreDelta=t=>e.g(this.commentVoteType,t),this._onUpdateCommentVoteType=async()=>await e.o(this.commentId,"comment",this.commentVoteType),this.getContestModeVoteCTA=()=>o.x`Vote`}static get styles(){return[t.t,t.z(".rpl-vote-button-group {\n  /* APPEARANCE AGNOSTIC STYLES */\n  /* PLAIN APPEARANCE */\n  /* SECONDARY APPEARANCE */\n  /* BORDERED APPEARANCE */\n  --vote-button-divider-color: var(--color-neutral-border-weak);\n  /* MEDIA APPEARANCE */\n}\n.rpl-vote-button-group:not([disabled]) .rpl-vote-button-group-label {\n  color: var(--vote-button-label-color);\n}\n.rpl-vote-button-group:not([disabled]):hover.rpl-vote-button-group-label {\n  color: var(--vote-button-label-color-hover);\n}\n.rpl-vote-button-group .rpl-vote-button-group-divider {\n  background-color: var(--vote-button-divider-color);\n}\n.rpl-vote-button-group[disabled] button[rpl]:disabled {\n  --button-color-background-disabled: transparent;\n}\n.rpl-vote-button-group.button-plain {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-plain button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-plain.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-plain.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n  --vote-button-divider-color: var(--color-neutral-border);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary.upvote,\n.rpl-vote-button-group.button-secondary.upvote button[rpl] {\n  --button-color-text-default: var(--color-upvote-onBackground);\n  --button-color-text-hover: var(--color-upvote-onBackground);\n  --button-color-text-disabled: var(--color-upvote-disabled);\n  --button-color-text-activated: var(--color-upvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.upvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.upvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-upvote-background);\n  --button-color-background-hover: var(--color-upvote-background-hover);\n  --button-color-background-active: var(--color-upvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote,\n.rpl-vote-button-group.button-secondary.downvote button[rpl] {\n  --button-color-text-default: var(--color-downvote-onBackground);\n  --button-color-text-hover: var(--color-downvote-onBackground);\n  --button-color-text-disabled: var(--color-downvote-disabled);\n  --button-color-text-activated: var(--color-downvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.downvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-downvote-background);\n  --button-color-background-hover: var(--color-downvote-background-hover);\n  --button-color-background-active: var(--color-downvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-bordered-cab {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-media-cab {\n  --vote-button-label-color: var(--color-media-onBackground);\n  --vote-button-label-color-hover: var(--color-media-onBackground);\n  --vote-button-divider-color: var(--color-media-border-weak);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-upvote-onStrongScrim-disabled);\n}\n.rpl-vote-button-group.button-media-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-downvote-onStrongScrim-disabled);\n}\n")]}connectedCallback(){super.connectedCallback(),this.commentVoteType=this.getCommentVoteTypeFromVoteState(),this.isUserLoggedIn&&this.subscribeToReplyMenuItemClick(),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdated),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_pdp_no_mod_js_lo?this.isUserLoggedIn&&this.initModActionsController():this.initModActionsController(),(t.X()===t.w.PostDetail||t.X()===t.w.SingleCommentThread)&&this.recordTTCI&&t.h0()&&requestAnimationFrame((()=>{this.trackEvent(t.h1(performance.now()))}))}async initModActionsController(){const{ModActionsController:t}=await SML.di("./mod-actions-controller-d935e6bc.js",import.meta.url,"modactionscontrollerd935e6bc");new t(this,{getThingIdFn:()=>this.commentId})}disconnectedCallback(){super.disconnectedCallback(),this.isUserLoggedIn&&this.unsubscribeToReplyMenuItemClick(),this.pubsub.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdated)}firstUpdated(...t){super.firstUpdated(...t);new URLSearchParams(c).get("reply")===this.commentId&&this.focusOnCommentComposer()}handleInteraction(){document.querySelector(l.S)?.setAttribute("pageindex","1")}async handleDownvote(o){this.isUserLoggedIn?(this.handleInteraction(),await this.handleUpdateCommentVote(e.V.Downvote)):this.disabled||(this.trackEvent(n.cx(this.telemetrySource)),this.pubsub.publish(t.T.CommentDownvoted))}async handleUpvote(o){this.isUserLoggedIn?(this.handleInteraction(),await this.handleUpdateCommentVote(e.V.Upvote)):this.disabled||(this.trackEvent(n.cy(this.telemetrySource)),this.pubsub.publish(t.T.CommentUpvoted))}async handleUpdateCommentVote(o){const r=this.score,i=this.commentVoteType;if(void 0!==this.score){const t=this._getCommentScoreDelta(o);this.score=this.score+t}const a=o===this.commentVoteType;this.commentVoteType=a?undefined:o;try{await this._onUpdateCommentVoteType(),a?"enabled"===t.dw("shreddit_hotkeys_m1")?this.trackEvent(n.cz(this.telemetrySource,this.interactionFromHotkey?t.d_.HOTKEY:void 0)):this.trackEvent(n.cz(this.telemetrySource)):o===e.V.Upvote?("enabled"===t.dw("shreddit_hotkeys_m1")?this.trackEvent(n.cy(this.telemetrySource,this.interactionFromHotkey?t.d_.HOTKEY:void 0)):this.trackEvent(n.cy(this.telemetrySource)),this.pubsub.publish(t.T.CommentUpvoted)):("enabled"===t.dw("shreddit_hotkeys_m1")?this.trackEvent(n.cx(this.telemetrySource,this.interactionFromHotkey?t.d_.HOTKEY:void 0)):this.trackEvent(n.cx(this.telemetrySource)),this.trackEvent(n.cx(this.telemetrySource)),this.pubsub.publish(t.T.CommentDownvoted))}catch(o){this.score=r,this.commentVoteType=i,this.dispatchEvent(t.c("faceplate-alert",{level:t.x.warning,message:o.message}))}}renderVoteButtons(){const o=n.bM(),r=o?e.v:e.a,i=o?e.u:e.b,a=o?e.d:e.c,l=this.isContestMode||this.isScoreHidden?void 0:this.score,s=this.isContestMode||this.isScoreHidden?this.getContestModeVoteCTA():void 0,c={voteType:this.commentVoteType||null,attributes:{disabled:this.disabled||this.isCommentArchived},size:t.s.Small,appearance:"plain-weak"},d=i({...c,voteCount:l,initialStateText:s,screenReaderContent:"Upvote",onClick:this.handleUpvote}),u=a({...c,screenReaderContent:"Downvote",onClick:this.handleDownvote});return r({appearance:"plain-weak",voteCount:l,voteType:this.commentVoteType||void 0,size:c.size,upvoteButton:d,downvoteButton:u,initialStateText:s,attributes:{slot:"vote-button",disabled:this.disabled}})}render(){return o.x`<div class="flex flex-col w-100"> <slot name="mod-content-state-indicators"></slot> <div class="flex items-center max-h-2xl"> <div class="flex items-center max-h-2xl shrink"> ${this.renderVoteButtons()} ${this.isViewOnly?o.A:o.x`<slot name="comment-reply" @click="${this.handleReply}"></slot>`} <slot name="comment-share-as-post-topline"></slot> <slot name="comment-award"></slot> <slot name="comment-share"></slot> <slot name="comment-insight"></slot> <slot name="overflow"></slot> </div> <slot name="mod-content-actions"></slot> </div> ${this.isCommentComposerActive&&!this.isViewOnly?o.x` <div class="py-md"> <slot name="comment-composer"></slot> </div> `:o.x``} </div>`}};return t._([t.n({type:String,attribute:"comment-id"})],d.prototype,"commentId",void 0),t._([t.n({type:String,attribute:"user-id"})],d.prototype,"userId",void 0),t._([t.n({type:Number})],d.prototype,"score",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],d.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean})],d.prototype,"disabled",void 0),t._([t.n({type:Boolean,attribute:"is-user-logged-in"})],d.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"mod"})],d.prototype,"isMod",void 0),t._([t.n({type:String,attribute:"moderation-verdict"})],d.prototype,"moderationVerdict",void 0),t._([t.n({type:Boolean,attribute:"previous-actions-feature"})],d.prototype,"previousActionsFeature",void 0),t._([t.n({type:Boolean,attribute:"comment-archived"})],d.prototype,"isCommentArchived",void 0),t._([t.n({type:Boolean,attribute:"view-only"})],d.prototype,"isViewOnly",void 0),t._([t.n({type:Boolean,attribute:"is-contest-mode"})],d.prototype,"isContestMode",void 0),t._([t.n({type:Boolean,attribute:"is-score-hidden"})],d.prototype,"isScoreHidden",void 0),t._([t.n({type:String})],d.prototype,"permalink",void 0),t._([t.n({type:Boolean,attribute:"interaction-from-hotkey"})],d.prototype,"interactionFromHotkey",void 0),t._([t.n({type:Boolean,attribute:"banned"})],d.prototype,"isUserBanned",void 0),t._([t.n({type:String,attribute:"vote-state"})],d.prototype,"voteState",void 0),t._([t.d()],d.prototype,"commentVoteType",void 0),t._([t.n({type:String,attribute:"telemetry-source"})],d.prototype,"telemetrySource",void 0),t._([t.n({type:String,reflect:!0})],d.prototype,"updateAnimation",void 0),t._([t.n({type:Boolean,attribute:"record-ttci"})],d.prototype,"recordTTCI",void 0),t._([t.d()],d.prototype,"isCommentComposerActive",void 0),d=t._([t.e("shreddit-comment-action-row")],d),{get ShredditCommentActionRow(){return d}}}));
SML.dm("shredditcommentbadges163ab703",["shelle48e5956","distinguishedtags1c4757ea","comment5b02ad76","agegatestandaloneclientjsb13e879d","iconc33661e6"],(async(t,e,i,s,n)=>{let o=class extends n.s{constructor(){super(...arguments),this.pubsub=new t.P(this),this.class="",this.thingId="",this.isOP=!1,this.isCollaborator=!1,this.isCommentDeleted=!1,this.handleCommentUpdated=({commentId:e,action:s,value:n})=>{this.thingId===e&&s===i.C.distinguishAsMod?this.distinguishedAs=n?t.at.Moderator:void 0:this.thingId===e&&s===i.C.distinguishAsAdmin&&(this.distinguishedAs=n?t.at.Admin:void 0)},this.handleCommentDeleted=({commentId:t})=>{this.thingId===t&&(this.isCommentDeleted=!0)}}static get styles(){return[t.t,n.a`:host{display:contents}`]}get authorType(){return this.isCommentDeleted?"":this.distinguishedAs===t.at.Admin?"admin":this.distinguishedAs===t.at.Moderator?"moderator":this.isOP?"op":this.isCollaborator?"collaborator":""}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdated,!1),this.pubsub.subscribe(t.T.CommentDeleted,this.handleCommentDeleted,!1)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdated),this.pubsub.unsubscribe(t.T.CommentDeleted,this.handleCommentDeleted)}render(){const t=this.authorType,i=`font-semibold text-12 tracking-wide uppercase ${this.class} ${t}`;switch(t){case"moderator":return n.x`<span class="${s.o(i,"text-identity-moderator")}" aria-label="Comment distinguished by moderator"> ${e.a()} </span>`;case"admin":return n.x`<span class="${s.o(i,"text-identity-admin")}" aria-label="Comment distinguished by admin"> ${e.g()} </span>`;case"op":return n.x`<span class="${s.o(i,"comment-op-icon-js text-alienblue-600")}" aria-label="Comment distinguished as the original poster"> ${e.c()} </span>`;case"collaborator":return n.x`<span class="${s.o(i,"text-alienblue-600")}" aria-label="Comment distinguished as a post collaborator"> ${e.b()} </span>`;default:return n.A}}};t._([t.n({type:String})],o.prototype,"class",void 0),t._([t.n({type:String,attribute:"thing-id"})],o.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"distinguished-as"})],o.prototype,"distinguishedAs",void 0),t._([t.n({type:Boolean,attribute:"op"})],o.prototype,"isOP",void 0),t._([t.n({type:Boolean,attribute:"collaborator"})],o.prototype,"isCollaborator",void 0),t._([t.n({type:Boolean,attribute:"comment-deleted"})],o.prototype,"isCommentDeleted",void 0),o=t._([t.e("shreddit-comment-author-modifier-icon")],o);let a=class extends(t.C(n.s)){constructor(){super(...arguments),this.thingId="",this.iconSize=n.I.Small,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isOP=!1,this.handleCommentUpdated=({commentId:e,action:s,value:n})=>{if(this.thingId===e)switch(s){case i.C.distinguishAsMod:this.distinguishedAs=n?t.at.Moderator:void 0;break;case i.C.sticky:this.isStickied=Boolean(n);break;case i.C.lock:this.isLocked=Boolean(n)}},this.handleCommentDeleted=({commentId:t})=>{this.thingId===t&&(this.isDeleted=!0)}}connectedCallback(){super.connectedCallback(),this.subscribe(t.T.CommentUpdated,this.handleCommentUpdated),this.subscribe(t.T.CommentDeleted,this.handleCommentDeleted)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdated),this.unsubscribe(t.T.CommentDeleted,this.handleCommentDeleted)}renderLockedIcon(){return this.isDeleted||!this.isLocked?null:n.aj({size:this.iconSize,attributes:{"aria-label":"Locked comment",className:"lock-icon text-alert-caution"}})}renderStickiedIcon(){if(this.isDeleted||!this.isStickied)return null;let e;return this.distinguishedAs===t.at.Admin?e="text-identity-admin":this.distinguishedAs===t.at.Moderator?e="text-identity-moderator":this.isOP&&(e="text-action-secondary"),this.isLocked?n.ak({size:this.iconSize,attributes:{"aria-label":"Stickied comment",className:e}}):n.x` <span class="text-12 text-neutral-content inline-flex items-center gap-2xs"> ${n.ak({attributes:{"aria-hidden":"true"},size:this.iconSize})} <span> Stickied comment </span> </span> `}render(){const t=this.renderLockedIcon(),e=this.renderStickiedIcon();return t||e?n.x` <span class="ml-2xs text-12 text-neutral-content-weak">\u2022</span> ${t} ${e} `:null}};a.styles=[n.a`:host{display:inline-flex;align-items:center;gap:var(--spacer-2xs)}`,t.t],t._([t.n({type:String,attribute:"thing-id"})],a.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"icon-size"})],a.prototype,"iconSize",void 0),t._([t.n({type:Boolean,attribute:"deleted"})],a.prototype,"isDeleted",void 0),t._([t.n({type:Boolean,attribute:"locked"})],a.prototype,"isLocked",void 0),t._([t.n({type:Boolean,attribute:"stickied"})],a.prototype,"isStickied",void 0),t._([t.n({type:Boolean,attribute:"op"})],a.prototype,"isOP",void 0),t._([t.n({type:String,attribute:"distinguished-as"})],a.prototype,"distinguishedAs",void 0),a=t._([t.e("shreddit-comment-badges")],a)}));
SML.dm("redditpagedataa05fe7df",["shelle48e5956","iconc33661e6"],(async(a,e)=>{let t=class extends e.s{constructor(){super(...arguments),this.data={}}connectedCallback(){super.connectedCallback(),a.p(a.T.PageDataLoaded,this.data)}};a._([a.n({type:Object})],t.prototype,"data",void 0),t=a._([a.e("reddit-page-data")],t)}));
SML.dm("textinput9c3f45be",["iconc33661e6","shelle48e5956","communitypickerf331f77f","constants9e09f052"],(async(t,e,i,a)=>{const r=t.e(class extends t.i{constructor(e){if(super(e),e.type!==t.t.PROPERTY&&e.type!==t.t.ATTRIBUTE&&e.type!==t.t.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!t.b(e))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(e,[i]){if(i===t.T||i===t.A)return i;const a=e.element,r=e.name;if(e.type===t.t.PROPERTY){if(i===a[r])return t.T}else if(e.type===t.t.BOOLEAN_ATTRIBUTE){if(!!i===a.hasAttribute(r))return t.T}else if(e.type===t.t.ATTRIBUTE&&a.getAttribute(r)===i+"")return t.T;return t.bN(e),i}});class n{constructor(t,e){this._observedNames=new Set,this._previousStates=new Map,this._records=new Map,this._eventListener=t=>{this._processRecord(t.detail)},this._callCallback=()=>{this._records.size&&this._callback(this.takeRecords(),this)},this._callback=t,this.form=e.form}_processRecord(t){const e=!this._records.size,{input:i,message:a,name:r}=t;if(!this._observedNames.has(r))return;this._previousStates.get(r)!==a&&(this._records.set(r,{target:i,message:a,name:r}),this._previousStates.set(r,a),this._records.size&&e&&queueMicrotask(this._callCallback))}observe(t){if(this._observedNames.has(t))return;this._observedNames.add(t),1===this._observedNames.size&&this.form.addEventListener("_faceplate-validation-change",this._eventListener);const e=this.form.elements[t];!e||e instanceof HTMLOutputElement||Array.isArray(e)||this._processRecord({input:e,name:t,message:e.validationMessage})}disconnect(){this._observedNames.size&&(this._observedNames.clear(),this._previousStates.clear(),this._records.clear(),this.form.removeEventListener("_faceplate-validation-change",this._eventListener))}takeRecords(){const t=Array.from(this._records.values());return this._records=new Map,t}unobserve(t){this._observedNames.has(t)&&(this._observedNames.delete(t),this._previousStates.delete(t),this._records.delete(t),this._observedNames.size||this.disconnect())}}let s=class extends t.s{constructor(){super(...arguments),this.name="",this.level=null,this.placeholder="",this.ariaLive=null,this.message="",this.characterCount=Number.NEGATIVE_INFINITY,this.characterCountAriaLabel="",this.visuallyHiddenText="",this.isInputDirty=!0,this._message="",this.setIsDirtyByAttribute=t=>{this.isInputDirty=t.hasAttribute("faceplate-dirty")},this.onFormConnect=t=>{t?.addEventListener("faceplate-submit",(()=>{this.isInputDirty=!0})),t&&this.isConnected&&(this._observer=new n((t=>{for(const i of t)if(i.name===this.name){if(i.target instanceof a.F){this.setIsDirtyByAttribute(i.target);new MutationObserver((t=>{for(const e of t)"faceplate-dirty"===e.attributeName&&this.setIsDirtyByAttribute(e.target),"faceplate-validity"===e.attributeName&&this.toggleSuccessStyling(e.target)})).observe(i.target,{attributes:!0})}else this.isInputDirty=!0;this.setMessage(this.message||i.message,"valid"===i.target.getAttribute("faceplate-validity")?e.x.success:e.x.error)}}),{form:t}),this._observer.observe(this.name),this._observer.form.addEventListener("faceplate-alert",this._handleAlert))},this.associateForm=t=>{this.onFormConnect(t)},this._handleAlert=t=>{this.isInputDirty=!0;const{name:i,level:a,message:r}=t.detail;i===this.name&&a!==e.x.error&&this.setMessage(r,a)},this.toggleSuccessStyling=t=>{this.isInputDirty&&("valid"===t.getAttribute("faceplate-validity")?this.shadowRoot?.getElementById("helper-text")?.classList.add("success"):this.shadowRoot?.getElementById("helper-text")?.classList.remove("success"))}}connectedCallback(){super.connectedCallback(),i.c(this).then(this.onFormConnect)}disconnectedCallback(){super.disconnectedCallback(),this._observer&&(this._observer.disconnect(),this._observer.form.removeEventListener("faceplate-alert",this._handleAlert))}setMessage(t,i){t&&void 0!==i?this.level=e.x[i]:this.removeAttribute("level"),this._message=t||""}get textContent(){return this.shadowRoot?.firstElementChild?.textContent||""}get innerText(){return this.shadowRoot?.firstElementChild?.innerText||""}static get styles(){return t.a`:host{display:block;font-size:var(--font-small);color:var(--color-input-helper-text);line-height:var(--size-md);font-size:var(--font-small);box-sizing:border-box}.container{display:flex;justify-content:space-between;padding-top:var(--spacer-input-padding-top);line-height:var(--size-md);font-size:var(--font-small)}.success,:host([level=success]){color:var(--color-success-content)}.overflow-char-limit,:host([level=alert]),:host([level=critical]),:host([level=emergency]),:host([level=error]){color:var(--color-danger-content)}:host([level=warning]){color:var(--color-alert-caution)}:host([level=notice]){color:var(--color-success-content)}.pristine{color:var(--color-input-helper-text)}:host([character-count]) .character-count{margin-inline-start:var(--spacer-xs);flex-shrink:0}.empty{padding:0}`}render(){const i=this.characterCount>Number.NEGATIVE_INFINITY;return this.placeholder||this._message||i?t.x`<span aria-live="${t.l(this.ariaLive??void 0)}" class="${e.U({container:!0,pristine:!this.isInputDirty})}"> <span id="helper-text">${this.isInputDirty&&this._message?this._message:this.placeholder}</span> ${i?t.x`<span class="character-count ${this.characterCount<0?"overflow-char-limit":""}" aria-label="${t.l(this.characterCountAriaLabel)}">${this.characterCount}</span>`:void 0} </span> <faceplate-screen-reader-content aria-live="assertive">${this.visuallyHiddenText}</faceplate-screen-reader-content>`:t.x`<faceplate-screen-reader-content aria-live="polite">${this.visuallyHiddenText}</faceplate-screen-reader-content>`}};e._([e.n({type:String,reflect:!0})],s.prototype,"name",void 0),e._([e.n({type:String,reflect:!0})],s.prototype,"level",void 0),e._([e.n({type:String})],s.prototype,"placeholder",void 0),e._([e.n({type:String,reflect:!0,attribute:"aria-live"})],s.prototype,"ariaLive",void 0),e._([e.n({type:String,attribute:"message"})],s.prototype,"message",void 0),e._([e.n({type:Number,attribute:"character-count"})],s.prototype,"characterCount",void 0),e._([e.n({type:String,attribute:"character-count-aria-label"})],s.prototype,"characterCountAriaLabel",void 0),e._([e.n({type:String,attribute:"visually-hidden-text"})],s.prototype,"visuallyHiddenText",void 0),e._([e.d()],s.prototype,"isInputDirty",void 0),e._([e.d()],s.prototype,"_message",void 0),s=e._([e.e("faceplate-form-helper-text")],s);class l extends a.F{constructor(){super(...arguments),this.suffix="",this.value="",this.name="",this.placeholder="",this.required=!1,this.screenReaderContent="",this.novalidate=!1,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.hasLabel=!1,this.hasTrailingButton=!1,this.statefulInput=!1,this.reportedDirty=!1,this.hasValidationHelpers=!1,this.suppressInternalClicks=!1,this.validationMsg="",this.allowMaxLengthOverflow=!1,this.setFormValidationHelpers=t=>{t&&(t.addEventListener("faceplate-submit",this.setDirtyAttribute),this.helperText?.associateForm(t),this.hasValidationHelpers=!0)},this.setStatefulInputByValue=()=>{this.statefulInput=!this.isEmpty},this.inputContainer=i=>t.x` <span class="${e.U({"input-container":!0})}"> ${i} </span> `,this.labelTextWrapper=()=>{const e=t=>t&&t[0]?.textContent;return t.x` <span class="label-text inner-label" id="fp-input-label"><slot name="label" @slotchange="${t=>this.onSlotChange({event:t,property:"hasLabel",name:"label",hasChanged:e})}"></slot>${this.required?t.x`<span class="required-asterisk" aria-hidden="true">*</span>`:null}</span> `},this.setDirtyAttribute=()=>{this.setAttribute("faceplate-dirty","")},this.onSlotChange=({event:t,property:e,name:i,hasChanged:a})=>{t.target?.name===i&&(this[e]=a?a(t.target?.assignedElements()):t.target?.assignedNodes().length>0)}}async connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.onFocus.bind(this)),this.addEventListener("blur",this.onBlur.bind(this));const t=await i.c(this);this.setFormValidationHelpers(t)}disconnectedCallback(){super.disconnectedCallback(),this?.removeEventListener("focus",this.onFocus),this?.removeEventListener("blur",this.onBlur),this.form?.removeEventListener("faceplate-submit",this.setDirtyAttribute)}async firstUpdated(){super.firstUpdated(),this.calculateLabelPosition(),this.validateMaxLength()}updated(t){if(t.get("prefix")&&this.calculateLabelPosition(),void 0!==t.get("statefulInput")){const t=this.shadowRoot?.querySelector(".input-container")?.classList;this.statefulInput?t.add("stateful-input"):t.remove("stateful-input")}t.has("value")&&(super.value=this.value,this.setStatefulInputByValue())}get delegatedFocusElements(){return[this.innerInput]}static get styles(){return[super.styles,t.a`label{display:flex;position:relative}:host{outline:0;font-family:var(--font-sans);cursor:text}:host input,:host textarea{font:inherit;color:var(--color-neutral-content-strong);padding:0}.label-container{display:inline-flex;position:relative;height:var(--rem40);align-items:center;box-sizing:border-box}:host([appearance=bordered]) .label-container{background:var(--color-input-bordered);color:var(--color-input-bordered-text)}:host([appearance=secondary]) .label-container{background:var(--color-input-secondary);border-radius:var(--radius-md);outline:0;color:var(--color-input-secondary-text)}:host([appearance=secondary]) .label-container:hover{background:var(--color-input-secondary-hover)}:host([appearance=bordered]) .label-container:hover{background:var(--color-input-bordered-hover)}:host(:focus-within) .label-container{outline:1px auto var(--color-global-focus)}:host([faceplate-validity=invalid][faceplate-dirty]) .label-container{border-color:transparent;box-shadow:0 0 0 var(--rem2) var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .label-container{border-color:transparent;box-shadow:none}:host .label-container,:host faceplate-form-helper-text{padding-inline-start:var(--spacer-md)}:host .label-container,:host faceplate-form-helper-text:not(.helper-text-without-label-with-trailing){padding-inline-end:var(--spacer-md)}:host([appearance=secondary]) .label-container{align-items:center}:host .label-container.with-trailing-button{padding-inline-end:var(--spacer-xs)}.label-container.interior-label{height:var(--rem56)}.input-container{font:var(--font-16-20-regular)}::slotted([slot=leadingIcon]),::slotted([slot=trailingIconButton]){color:var(--color-neutral-content-weak);display:inline-flex;align-items:center}:host([faceplate-validity=valid][faceplate-dirty]) .trailing-icon.valid{color:var(--color-success-background)}.required-asterisk,:host([faceplate-validity=invalid][faceplate-dirty]) .trailing-icon.invalid{color:var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .trailing-icon.valid{display:none}.trailing-icon,::slotted([slot=trailingIcon]){margin-inline-start:var(--spacer-xs);flex-shrink:0}:host([disabled]){color:var(--color-neutral-content-disabled)}:host([faceplate-validity=invalid][faceplate-dirty]) .invalid,:host([faceplate-validity=valid][faceplate-dirty]) .valid{display:inline-block}.trailing-icon{display:none}:host .label-container.without-label faceplate-form-helper-text,:host([appearance=secondary]) .label-container.without-label{padding-top:var(--rem10);padding-bottom:var(--rem10)}:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label),:host([faceplate-validity=valid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label){color:var(--color-label-default)}.label-text{position:absolute;pointer-events:none}:host([disabled]) .label-text:not(.inner-label){color:var(--color-neutral-content-disabled)}.stateful-input .label-text:not(.inner-label){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.stateful-input .label-text.inner-label{transform:translate(calc(-1 * var(--left-label-position)),calc(-1 * (var(--rem16))));font-size:var(--size-sm);line-height:var(--rem16);white-space:nowrap}.label-container:not(.without-label) .input-container:not(.stateful-input) input::placeholder,.label-container:not(.without-label) .input-container:not(.stateful-input) textarea::placeholder{opacity:0}.label-container:not(.without-label) .input-container.stateful-input{transform:translateY(var(--spacer-xs))}.activated,.activated .label-text.inner-label{transition:all 150ms ease-out}.inner-label{inset-inline-start:var(--left-label-position)}.input-container:not(.stateful-input) .inner-label{transform:translateY(0);transition:transform 150ms ease}.hidden{display:none}.label-text:not(.inner-label){color:var(--color-label-default)}slot[name=clearButton]:not(.has-value){display:none}.input-boundary-box{display:flex;align-items:center}.input-boundary-box,.label-container{flex:1}.label-container:not(.without-label) .input-boundary-box{padding:var(--spacer-xs) 0}#trailing-icons-container{display:flex;align-items:center;gap:var(--spacer-xs);justify-content:flex-end}:host([persistent-trailing-icon]) #trailing-icons-general{flex-direction:row-reverse}.input-prefix,.input-suffix,.label-text{color:var(--color-label-default)}:host .without-label.with-trailing-button{padding-inline-end:var(--spacer-2xs)}.input-container{position:relative;transform:translateY(0);display:flex;align-items:center;width:100%;line-height:var(--rem20)}:host([faceplate-validity=invalid]:not([persistent-trailing-icon])[faceplate-dirty]) ::slotted([slot=trailingIconButton]){display:none}#trailing-icons-general{display:flex;align-items:center}#trailing-icons-validation{display:flex}:host(:not([faceplate-dirty])) #trailing-icons-validation{display:none}`]}get isEmpty(){return!(!this.innerInput?.value&&this.innerInput?.validity.badInput)&&!(this.innerInput?.value??this.value)}onFocus(){this.hasAttribute("faceplate-dirty")&&!this.reportedDirty&&(this.reportedDirty=!0),this.removeAttribute("faceplate-dirty"),this.shadowRoot?.querySelector(".input-container")?.classList.add("activated"),this.isEmpty&&(this.statefulInput=!0)}onBlur(){this.isEmpty&&(this.statefulInput=!1),this.reportedDirty&&this.setAttribute("faceplate-dirty","")}focus(){this.innerInput?.focus()}blur(){this.innerInput?.blur()}onChange(t){const e=t?.target;this.value=e?.value||"",this.dispatchEvent(new InputEvent("change",{bubbles:!0}))}onInput(t){const e=t?.target;this.value=e?.value||"",this.handleCharLimit?.(),this.validateMaxLength(),this.setStatefulInputByValue()}validateMaxLength(){if(this.allowMaxLengthOverflow&&this.maxLength){const t=this._internals.validationMessage===this.validationMsg,e=this.value.length>this.maxLength;!t&&e?this.setCustomValidity(this.validationMsg):t&&!e&&this.setCustomValidity("")}}handleCharLimit(){const t=this.maxLength&&this.value.length>=this.maxLength;this.helperText&&this.helperTextScreenReaderMsg&&(t?this.helperText.visuallyHiddenText=this.helperTextScreenReaderMsg:!t&&this.helperText.visuallyHiddenText&&(this.helperText.visuallyHiddenText=""))}async calculateLabelPosition(t=0){let e=0,i=0;const a=this.shadowRoot?.querySelector(".input-prefix");if(a){!getComputedStyle(this.shadowRoot?.host).getPropertyValue("--font-16-20-regular").trim().length&&t<5&&setTimeout((()=>{this.calculateLabelPosition(t+1)}),50),i=a.getBoundingClientRect().width;const r=getComputedStyle(this.shadowRoot?.querySelector(".input-prefix")).getPropertyValue("margin-inline-end");e+=i+parseFloat(r)}(this.shadowRoot?.querySelector("label")).style.setProperty("--left-label-position",`${e}px`)}onLabelClick(t){this.suppressInternalClicks&&"input"!==t.target.nodeName.toLowerCase()&&t.stopPropagation()}renderInput(i){let a;return this.characterCount&&(a=this.maxLength?this.maxLength-this.value.length:this.value.length),t.x`<label @click="${this.onLabelClick}"> <div class="${e.U({"label-container":!0,"interior-label":!0,"without-label":!this.hasLabel,"with-trailing-button":this.hasTrailingButton})}"> <span class="input-boundary-box"> <slot name="leadingIcon"></slot> ${this.inputContainer(t.x` ${this.prefix?t.x`<span class="input-prefix">${this.prefix}</span>`:void 0} ${this.labelTextWrapper()} ${i} ${this.suffix?t.x`<span class="input-suffix">${this.suffix}</span>`:void 0} `)} <span id="trailing-icons-container"> <span id="trailing-icons-validation"> ${t.a1({attributes:{className:"trailing-icon invalid"},size:t.I.Medium})} ${t.E({attributes:{className:"trailing-icon valid"},size:t.I.Medium})} </span> <span id="trailing-icons-general"> <slot name="trailingIconButton" @slotchange="${t=>this.onSlotChange({event:t,property:"hasTrailingButton",name:"trailingIconButton"})}"> </slot> <slot name="clearButton" class="${e.U({"has-value":!!this.value.length})}"></slot> </span> </span> </span> </div> </label> <faceplate-form-helper-text class="${e.U({"no-label":!this.hasLabel,"helper-text-without-label-with-trailing":!this.hasLabel&&this.hasTrailingButton})}" character-count="${t.l(a)}" name="${this.name}" aria-live="${t.l(this.helperTextAriaLive??void 0)}" message="${t.l(this.helperTextMessage)}" level="${t.l(this.helperTextLevel??void 0)}" placeholder="${this.helperTextPlaceholder}" character-count-aria-label="${t.l(this.characterCountAriaLabel)}"> </faceplate-form-helper-text>`}}return l.clearButton=(i={})=>e.r({attributes:{...i,type:"button"},appearance:"plain",size:e.s.Small,leadingIcon:t.a6({attributes:{className:"trailing-icon"},size:t.I.Medium})}),e._([e.n({type:String})],l.prototype,"suffix",void 0),e._([e.n({type:String})],l.prototype,"value",void 0),e._([e.n({type:String})],l.prototype,"name",void 0),e._([e.n({type:String})],l.prototype,"placeholder",void 0),e._([e.n({type:Boolean})],l.prototype,"required",void 0),e._([e.n({type:String})],l.prototype,"screenReaderContent",void 0),e._([e.n({type:String})],l.prototype,"autocomplete",void 0),e._([e.n({type:String})],l.prototype,"inputmode",void 0),e._([e.n({type:Boolean})],l.prototype,"novalidate",void 0),e._([e.n({type:Number,attribute:"maxlength"})],l.prototype,"maxLength",void 0),e._([e.n({type:Number,attribute:"minlength"})],l.prototype,"minLength",void 0),e._([e.y("input,textarea")],l.prototype,"innerInput",void 0),e._([e.y("faceplate-form-helper-text")],l.prototype,"helperText",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-level"})],l.prototype,"helperTextLevel",void 0),e._([e.n({type:String,attribute:"helper-text-placeholder"})],l.prototype,"helperTextPlaceholder",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-aria-live"})],l.prototype,"helperTextAriaLive",void 0),e._([e.n({type:String,attribute:"helper-text-message"})],l.prototype,"helperTextMessage",void 0),e._([e.n({type:Boolean,attribute:"character-count"})],l.prototype,"characterCount",void 0),e._([e.n({type:String,attribute:"helper-text-screen-reader-msg"})],l.prototype,"helperTextScreenReaderMsg",void 0),e._([e.n({type:String,attribute:"character-count-aria-label"})],l.prototype,"characterCountAriaLabel",void 0),e._([e.d()],l.prototype,"hasLabel",void 0),e._([e.d()],l.prototype,"hasTrailingButton",void 0),e._([e.j({slot:"label"})],l.prototype,"labelSlot",void 0),e._([e.j({slot:"trailingIconButton"})],l.prototype,"trailingIconButtonSlot",void 0),e._([e.d()],l.prototype,"statefulInput",void 0),e._([e.n({type:Boolean,attribute:"suppress-internal-clicks"})],l.prototype,"suppressInternalClicks",void 0),e._([e.n({type:Boolean})],l.prototype,"readonly",void 0),e._([e.n({type:String,attribute:"validation-message"})],l.prototype,"validationMsg",void 0),e._([e.n({type:Boolean,attribute:"allow-max-length-overflow"})],l.prototype,"allowMaxLengthOverflow",void 0),{T:l,l:r}}));
SML.dm("faceplatetextareainput29f541e5",["shelle48e5956","iconc33661e6","textinput9c3f45be"],(async(e,t,r)=>{var i,a;!function(e){e.BORDERED="bordered",e.SECONDARY="secondary",e.PLAIN="plain"}(i||(i={})),function(e){e.COLLAPSED="collapsed",e.EXPANDED="expanded"}(a||(a={}));let n=class extends r.T{constructor(){super(...arguments),this.appearance=i.SECONDARY,this.size=a.COLLAPSED,this._textAreaContainerRef=e.aq()}static get styles(){return[super.styles,t.a`:host(){--trailing-icons-container:var(--rem32)}:host([resize]) .label-container{overflow:auto}.label-container:not(.without-label){padding-top:var(--spacer-xs);padding-bottom:var(--spacer-xs)}:host([resize]) textarea{height:100%;width:100%}:host([resize=both]) .label-container{resize:both}:host([resize=horizontal]) .label-container{resize:horizontal}:host([resize=vertical]) .label-container{resize:vertical}textarea{background:0 0;border:none;outline:0;overflow-y:auto;resize:none}:host([size=expanded]:not([rows])) .label-container{min-height:var(--rem90)}:host(:not([rows])) textarea{min-height:var(--rem20,1.25rem);height:var(--rem20,1.25rem)}:host(:not([cols])) textarea{width:100%}.label-text{top:0}:host([appearance=bordered]) .label-container{border:1px solid var(--color-neutral-border)}:host([appearance=bordered]) .label-container:hover{border-color:var(--color-neutral-border-medium)}:host([appearance=bordered]) .label-container:hover,:host([appearance=plain]) .label-container:hover{background:var(--color-neutral-background-hover);border-radius:none}:host([appearance=plain]) .label-container{border-radius:0}.input-boundary-box,.input-container,:host .label-container,label{height:100%;width:100%;box-sizing:border-box}:host([size=expanded]) .input-container{height:calc(100% - var(--trailing-icon-container,0px))}.input-container{align-items:flex-start}:host .label-container{border-radius:var(--radius-md)}.input-boundary-box{flex-direction:column}:host(:not([size])) .input-boundary-box,:host([size=collapsed]) .input-boundary-box{flex-direction:row;min-height:var(--rem40);padding:var(--spacer-2xs) 0}:host([size=expanded]) #trailing-icons-container{width:100%;justify-content:flex-end}#trailing-icons-container{height:(--trailing-icons-container)}.text-area-wrapper{height:inherit;width:100%;min-height:var(--textarea-minheight,var(--rem20));display:flex}`]}updated(e){e.has("value")&&this.handleDynamicResize(),super.updated(e)}async handleDynamicResize(){if(!this.rows&&!this.cols){const{width:e}=this.innerTextArea.getBoundingClientRect();this.innerTextArea.style.overflow="hidden",this.innerTextArea.style.height="0",this.innerTextArea.style.width=`${e}px`;const t=`${this.innerTextArea?.scrollHeight}px`;this.innerTextArea.style.height=t,this.innerTextArea.style.removeProperty("overflow"),this.innerTextArea.style.removeProperty("width"),this._textAreaContainerRef?.value&&this._textAreaContainerRef.value.style.setProperty("--textarea-minheight",t)}}onInput(e){this.handleDynamicResize(),super.onInput(e)}render(){return super.renderInput(t.x` <div class="text-area-wrapper" ${e.as(this._textAreaContainerRef)}> <textarea aria-labelledby="fp-input-label" style="${t.l(this.fontFamily?`font-family: ${this.fontFamily}`:void 0)}" class="${e.U({"no-label":!this.hasLabel})}" ?readonly="${this.readonly}" id="innerTextArea" rows="${t.l(this.rows)}" cols="${t.l(this.cols)}" @input="${this.onInput}" @change="${this.onChange}" .value="${r.l(this.value)}" name="${t.l(this.name)}" minlength="${t.l(this.minLength)}" maxlength="${t.l(this.allowMaxLengthOverflow?void 0:this.maxLength)}" placeholder="${t.l(0===this.placeholder.length?void 0:this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${t.l(this.autocomplete)}" inputmode="${t.l(this.inputmode)}"></textarea> </div>`)}};return e._([e.n({type:Number})],n.prototype,"rows",void 0),e._([e.n({type:Number})],n.prototype,"cols",void 0),e._([e.n({type:String})],n.prototype,"resize",void 0),e._([e.y("#innerTextArea")],n.prototype,"innerTextArea",void 0),e._([e.n({type:String,reflect:!0})],n.prototype,"appearance",void 0),e._([e.n({type:String})],n.prototype,"size",void 0),e._([e.n({type:String,attribute:"font-family"})],n.prototype,"fontFamily",void 0),n=e._([e.e("faceplate-textarea-input")],n),{get F(){return n},get T(){return a},get a(){return i}}}));
SML.dm("translationsa30aa3ad",["shelle48e5956"],(async t=>{var o;!function(t){t.ACCOUNT_AGE="account_age",t.BACKEND="backend",t.DEFAULT_OFF="default_off",t.REGULAR_SEO="regular_seo",t.MT_SEO="mt_seo"}(o||(o={}));const n="on",e="off",s="initiated",a="see_translation",i="see_original",r=t=>!1===t.isEligibleForImmersive?s:t.isImmersiveTranslationsActive?n:e,c=t=>("isPostTranslatedAfterClick"in t?t.isPostTranslatedAfterClick:t.isCommentTranslatedAfterClick)?a:i;return{get T(){return o},a:o=>{const n=o?{post:{id:o}}:{};return t.b({source:"translate_button",action:"view",noun:"post_composer"},{action_info:{reason:"on"},...n})},b:(o,n)=>t.b({source:"translate_button",action:"click",noun:"comment_composer"},{action_info:{reason:o?"on":"off"},...n?{comment:{id:n}}:{}}),c:(o,n)=>{const e=n?{post:{id:n}}:{};return t.b({source:"translate_button",action:"click",noun:"post_composer"},{action_info:{reason:o?"on":"off"},...e})},d:(o,n)=>t.b({source:"translate_button",action:"submit",noun:"post_composer"},{action_info:{reason:o?"on":"off"},...n?{post:{id:n.id,subreddit_id:n.subredditId,subreddit_name:n.subredditPrefixedName,url:n.permalink}}:{}}),e:()=>t.b({source:"translate_button",action:"hide",noun:"comment_composer"}),f:()=>t.b({source:"translate_button",action:"hide",noun:"post_composer"}),g:o=>t.b({source:"translate_button",action:"dismiss",noun:"translation_intervention"},{action_info:{reason:r(o)},comment:{...o.comment},post:o.post}),h:o=>t.b({source:"translate_button",action:"click",noun:"translation_intervention"},{action_info:{reason:r(o),type:o.actionType},comment:{...o.comment},post:o.post}),i:o=>t.b({source:"translate_button",action:"click",noun:"toggle"},{action_info:{reason:r(o)}}),j:o=>t.b({source:"translate_button",action:"dismiss",noun:"survey"},{post:o?.post,comment:o?.comment}),k:o=>t.b({source:"translate_button",action:"view",noun:"survey"},{post:o?.post,comment:o?.comment}),l:o=>t.b({source:"translate_button",action:"submit",noun:"survey"},{action_info:{reason:o.reason},post:o.post,comment:o.comment,survey:{text:o.survey_text}}),m:o=>t.b({source:"translate_button",action:"enabled",noun:"status"},{action_info:{reason:o}}),n:o=>t.b({source:"translate_button",action:"disabled",noun:"status"},{action_info:{reason:o}}),o:o=>t.b({source:"overflow_menu",action:"click",noun:"translate_post"},{action_info:{reason:r(o),type:c(o)},post:{...o.post,translation_state:o.isPostTranslated}}),p:o=>t.b({source:"overflow_menu",action:"view",noun:"translate_post"},{action_info:{reason:r(o)},post:{...o.post,translation_state:o.isPostTranslated}}),q:o=>t.b({source:"translate_button",action:"view",noun:"post_banner"},{action_info:{reason:r(o)},post:{...o.post,translation_state:o.isPostTranslated}}),r:o=>t.b({source:"translate_button",action:"click",noun:"post_banner"},{action_info:{reason:r(o),type:c(o)},post:{...o.post,translation_state:o.isPostTranslated}}),s:o=>t.b({source:"translate_button",action:"dismiss",noun:"post_banner"},{action_info:{reason:r(o)},post:{...o.post,translation_state:o.isPostTranslated}}),t:o=>t.b({source:"translate_button",action:"view",noun:"comment_composer"},{action_info:{reason:"on"},...o?{comment:{id:o}}:{}}),u:o=>t.b({source:"overflow_menu",action:"click",noun:"translate_survey"},{post:o?.post,comment:o?.comment}),v:(o,n,e)=>t.b({source:"translate_button",action:"submit",noun:"comment_composer"},{action_info:{reason:o?"on":"off"},...n?{post:{id:n.id,language:n.postLanguage,subreddit_id:n.subredditId,subreddit_name:n.subredditPrefixedName,type:n.postType,url:n.permalink}}:{},...e?{comment:{id:e}}:{}}),w:o=>t.b({source:"overflow_menu",action:"click",noun:"translate_comment"},{action_info:{reason:r(o),type:c(o)},comment:{...o.comment,translation_state:o.isCommentTranslated},post:o.post}),x:o=>t.b({source:"overflow_menu",action:"view",noun:"translate_comment"},{action_info:{reason:r(o)},comment:{...o.comment,translation_state:o.isCommentTranslated},post:o.post})}}));
SML.dm("TinyGesture26737d23",[],(async()=>{class t{constructor(e,o){this.element=e,this.touch1=null,this.touch2=null,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.touchMove1=null,this.touchMove2=null,this.touchMoveX=null,this.touchMoveY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapTimer=null,this.doubleTapWaiting=!1,this.thresholdX=0,this.thresholdY=0,this.disregardVelocityThresholdX=0,this.disregardVelocityThresholdY=0,this.swipingHorizontal=!1,this.swipingVertical=!1,this.swipingDirection=null,this.swipedHorizontal=!1,this.swipedVertical=!1,this.originalDistance=null,this.newDistance=null,this.scale=null,this.originalAngle=null,this.newAngle=null,this.rotation=null,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[],pinch:[],pinchend:[],rotate:[],rotateend:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.opts=Object.assign({},t.defaults,o),this.element.addEventListener("touchstart",this._onTouchStart,i),this.element.addEventListener("touchmove",this._onTouchMove,i),this.element.addEventListener("touchend",this._onTouchEnd,i),this.opts.mouseSupport&&!("ontouchstart"in window)&&(this.element.addEventListener("mousedown",this._onTouchStart,i),document.addEventListener("mousemove",this._onTouchMove,i),document.addEventListener("mouseup",this._onTouchEnd,i))}destroy(){var t,i;this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout(null!==(t=this.longPressTimer)&&void 0!==t?t:void 0),clearTimeout(null!==(i=this.doubleTapTimer)&&void 0!==i?i:void 0)}on(t,i){if(this.handlers[t])return this.handlers[t].push(i),{type:t,fn:i,cancel:()=>this.off(t,i)}}off(t,i){if(this.handlers[t]){const e=this.handlers[t].indexOf(i);-1!==e&&this.handlers[t].splice(e,1)}}fire(t,i){for(let e=0;e<this.handlers[t].length;e++)this.handlers[t][e](i)}onTouchStart(t){var i,e,o,s,h,n,l,u,r,d,c,a,v,p,m,T,g,M,w,f,y,X,Y,E,b,S;let V=!1;if("mousedown"!==t.type){if(this.touch1||(this.touch1=t.changedTouches[0],V=!0),(V&&t.changedTouches.length>1||!V)&&!this.touch2)return this.touch2=[...t.changedTouches].find((t=>{var i;return t.identifier!==(null===(i=this.touch1)||void 0===i?void 0:i.identifier)}))||null,this.originalDistance=Math.sqrt(Math.pow((null!==(e=null===(i=this.touch2)||void 0===i?void 0:i.screenX)&&void 0!==e?e:0)-(null!==(n=null!==(s=null===(o=this.touchMove1)||void 0===o?void 0:o.screenX)&&void 0!==s?s:null===(h=this.touch1)||void 0===h?void 0:h.screenX)&&void 0!==n?n:0),2)+Math.pow((null!==(u=null===(l=this.touch2)||void 0===l?void 0:l.screenY)&&void 0!==u?u:0)-(null!==(a=null!==(d=null===(r=this.touchMove1)||void 0===r?void 0:r.screenY)&&void 0!==d?d:null===(c=this.touch1)||void 0===c?void 0:c.screenY)&&void 0!==a?a:0),2)),void(this.originalAngle=Math.atan2((null!==(p=null===(v=this.touch2)||void 0===v?void 0:v.screenY)&&void 0!==p?p:0)-(null!==(M=null!==(T=null===(m=this.touchMove1)||void 0===m?void 0:m.screenY)&&void 0!==T?T:null===(g=this.touch1)||void 0===g?void 0:g.screenY)&&void 0!==M?M:0),(null!==(f=null===(w=this.touch2)||void 0===w?void 0:w.screenX)&&void 0!==f?f:0)-(null!==(E=null!==(X=null===(y=this.touchMove1)||void 0===y?void 0:y.screenX)&&void 0!==X?X:null===(Y=this.touch1)||void 0===Y?void 0:Y.screenX)&&void 0!==E?E:0))/(Math.PI/180));if(!V)return}(V||"mousedown"===t.type)&&(this.thresholdX=this.opts.threshold("x",this),this.thresholdY=this.opts.threshold("y",this),this.disregardVelocityThresholdX=this.opts.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.opts.disregardVelocityThreshold("y",this),this.touchStartX="mousedown"===t.type?t.screenX:(null===(b=this.touch1)||void 0===b?void 0:b.screenX)||0,this.touchStartY="mousedown"===t.type?t.screenY:(null===(S=this.touch1)||void 0===S?void 0:S.screenY)||0,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.swipingDirection=null,this.longPressTimer=setTimeout((()=>this.fire("longpress",t)),this.opts.longPressTime),this.scale=1,this.rotation=0,this.fire("panstart",t))}onTouchMove(t){var i,e,o,s,h,n,l,u,r,d,c,a,v;if("mousemove"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;let p,m;if("mousemove"!==t.type&&(p=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)})),this.touchMove1=p||this.touchMove1,m=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch2)||void 0===i?void 0:i.identifier)})),this.touchMove2=m||this.touchMove2),"mousemove"===t.type||p){const u=("mousemove"===t.type?t.screenX:null!==(i=null==p?void 0:p.screenX)&&void 0!==i?i:0)-(null!==(e=this.touchStartX)&&void 0!==e?e:0);this.velocityX=u-(null!==(o=this.touchMoveX)&&void 0!==o?o:0),this.touchMoveX=u;const r=("mousemove"===t.type?t.screenY:null!==(s=null==p?void 0:p.screenY)&&void 0!==s?s:0)-(null!==(h=this.touchStartY)&&void 0!==h?h:0);this.velocityY=r-(null!==(n=this.touchMoveY)&&void 0!==n?n:0),this.touchMoveY=r;const d=Math.abs(this.touchMoveX),c=Math.abs(this.touchMoveY);this.swipingHorizontal=d>this.thresholdX,this.swipingVertical=c>this.thresholdY,this.swipingDirection=d>c?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(d,c)>this.opts.pressThreshold&&clearTimeout(null!==(l=this.longPressTimer)&&void 0!==l?l:void 0),this.fire("panmove",t)}"mousemove"!==t.type&&null!=this.touchMove1&&null!=this.touchMove2&&(this.newDistance=Math.sqrt(Math.pow(this.touchMove2.screenX-this.touchMove1.screenX,2)+Math.pow(this.touchMove2.screenY-this.touchMove1.screenY,2)),this.scale=this.newDistance/(null!==(u=this.originalDistance)&&void 0!==u?u:0),this.fire("pinch",t),this.newAngle=Math.atan2((null!==(r=this.touchMove2.screenY)&&void 0!==r?r:0)-(null!==(d=this.touchMove1.screenY)&&void 0!==d?d:0),(null!==(c=this.touchMove2.screenX)&&void 0!==c?c:0)-(null!==(a=this.touchMove1.screenX)&&void 0!==a?a:0))/(Math.PI/180),this.rotation=this.newAngle-(null!==(v=this.originalAngle)&&void 0!==v?v:0),this.fire("rotate",t))}onTouchEnd(t){var i,e,o,s,h,n,l,u,r,d;let c;if("mouseup"!==t.type&&(c=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)})),[...t.touches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)}))||(this.touch1=null,this.touchMove1=null),[...t.touches].find((t=>{var i;return t.identifier===(null===(i=this.touch2)||void 0===i?void 0:i.identifier)}))||(this.touch2=null,this.touchMove2=null)),"mouseup"!==t.type||this.touchStartX&&null===this.touchEndX){if("mouseup"===t.type||c){this.touchEndX="mouseup"===t.type?t.screenX:null!==(i=null==c?void 0:c.screenX)&&void 0!==i?i:0,this.touchEndY="mouseup"===t.type?t.screenY:null!==(e=null==c?void 0:c.screenY)&&void 0!==e?e:0,this.fire("panend",t),clearTimeout(null!==(o=this.longPressTimer)&&void 0!==o?o:void 0);const a=this.touchEndX-(null!==(s=this.touchStartX)&&void 0!==s?s:0),v=Math.abs(a),p=this.touchEndY-(null!==(h=this.touchStartY)&&void 0!==h?h:0),m=Math.abs(p),T=Math.sqrt(Math.pow(a,2)+Math.pow(p,2)),g=Math.abs(T),M=m/v;v>this.thresholdX||m>this.thresholdY||this.opts.diagonalSwipes&&(g>this.thresholdX||g>this.thresholdY)?(this.swipedHorizontal=v>this.thresholdX||this.opts.diagonalSwipes&&g>this.thresholdX,this.swipedVertical=m>this.thresholdY||this.opts.diagonalSwipes&&g>this.thresholdY,(!this.opts.diagonalSwipes||M<Math.tan((45-this.opts.diagonalLimit)*Math.PI/180)||M>Math.tan((45+this.opts.diagonalLimit)*Math.PI/180))&&(v>=m&&(this.swipedVertical=!1),m>v&&(this.swipedHorizontal=!1)),this.swipedHorizontal&&(a<0?((null!==(n=this.velocityX)&&void 0!==n?n:0)<-this.opts.velocityThreshold||T<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):((null!==(l=this.velocityX)&&void 0!==l?l:0)>this.opts.velocityThreshold||T>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(p<0?((null!==(u=this.velocityY)&&void 0!==u?u:0)<-this.opts.velocityThreshold||T<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):((null!==(r=this.velocityY)&&void 0!==r?r:0)>this.opts.velocityThreshold||T>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):v<this.opts.pressThreshold&&m<this.opts.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout(null!==(d=this.doubleTapTimer)&&void 0!==d?d:void 0),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout((()=>this.doubleTapWaiting=!1),this.opts.doubleTapTime),this.fire("tap",t)))}this.touch1||this.touch2||(this.fire("pinchend",t),this.fire("rotateend",t),this.originalDistance=null,this.newDistance=null,this.scale=null,this.originalAngle=null,this.newAngle=null,this.rotation=null)}}}t.defaults={threshold:(t,i)=>Math.max(25,Math.floor(.15*("x"===t?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight))),velocityThreshold:10,disregardVelocityThreshold:(t,i)=>Math.floor(.5*("x"===t?i.element.clientWidth:i.element.clientHeight)),pressThreshold:8,diagonalSwipes:!1,diagonalLimit:15,longPressTime:500,doubleTapTime:300,mouseSupport:!0};let i=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){i={passive:!0}}}))}catch(t){}return{T:t}}));
SML.dm("appselectorclientjs9964d0b0",["shelle48e5956","iconc33661e6","TinyGesture26737d23"],(async(t,e,i)=>{const s="var(--bottom-sheet-max-height)";let o=class extends e.s{constructor(){super(...arguments),this.open=!1,this.blocking=!1,this.docked=!1,this.focusManager=new t.aF(this,this),this.inFocusTrap=!1,this._isModal=!1,this._isExpanded=!1,this._isExpandable=!1,this._isDockable=!1,this._gesture=new i.T(this,{mouseSupport:!1}),this._cachedHeight="auto",this._dockedHeight="auto",this._cachedHeightAtTouchStartPx=0,this._rafID=null,this._mutationObserver=void 0,this.show=t=>{this._isModal=!1,this._isExpanded=(t&&"expanded"in t&&t.expanded)??!1,this._isExpandable=t?.expandable??!1,this._isDockable=t?.dockable??!1,this.open=!0,this._isExpandable&&(this._gesture.on("panstart",this._onTouchStart),this._gesture.on("panmove",this._onTouchMove),this._gesture.on("panend",this._onTouchEnd)),this._isExpanded?this._content.style.height=s:""!==this._content.style.height&&"auto"!==this._content.style.height||(this._cachedHeight=this._content.clientHeight+"px",this._content.style.height=this._cachedHeight),this._dockedHeight=this._headerElements[0]?this._headerElements[0].clientHeight-1+"px":"auto",this._mutationObserver||this._connectMutationObserver()},this.showModal=e=>{if(this.open)throw new Error('The element already has an "open" attribute, and therefore cannot be opened modally');t.hl.add(this),this.show(e),this._isModal=!0,t.hu.add(this)},this.close=()=>{const e=t.c("faceplate-close");this.dispatchEvent(e),e.defaultPrevented||(this.open=!1,this._isExpanded=!1,this.inFocusTrap&&(t.hu.remove(this),t.hl.remove(this)),this._isExpandable&&(this._gesture.off("panstart",this._onTouchStart),this._gesture.off("panmove",this._onTouchMove),this._gesture.off("panend",this._onTouchEnd)),this._content.style.height=this._cachedHeight)},this.expand=()=>{if(this.open&&this._isExpandable&&!this._isExpanded){const e=t.c("faceplate-expand");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=s,this.docked=!1,this._isExpanded=!0}},this.collapse=()=>{if(this.open&&this._isExpandable&&this._isExpanded){const e=t.c("faceplate-collapse");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=this._cachedHeight,this.docked=!1,this._isExpanded=!1}},this.dock=()=>{if(!this.open||!this._isDockable||this.docked)return;const e=t.c("faceplate-dock");this.dispatchEvent(e),e.defaultPrevented||(this._cancelRAF(),this._content.style.height=this._dockedHeight,this.docked=!0)},this.undock=()=>{if(!this.open||!this._isDockable||!this.docked)return;const e=this._isExpandable&&this._isExpanded?s:this._cachedHeight,i=t.c("faceplate-undock");this.dispatchEvent(i),i.defaultPrevented||(this._cancelRAF(),this._content.style.height=e,this.docked=!1)},this.recalculateCachedHeight=()=>{const e=this._cachedHeight;this._content.style.height="auto";const i=this._content.clientHeight+"px";this._cachedHeight=i,this._isDockable&&this.docked?this._content.style.height=this._dockedHeight:this._isExpandable&&this._isExpanded?this._content.style.height=s:(this._content.style.height=e,window.requestAnimationFrame((()=>{this._content.style.height=i,this._cancelRAF()})));const o=t.c("__TEST-ONLY_bottom-sheet-recalculation",{cachedHeight:this._cachedHeight,dockedHeight:this._dockedHeight,expandedHeight:s});this.dispatchEvent(o)},this._onTouchStart=()=>{this._cancelRAF(),this._content.style.transitionDuration="0ms",this._cachedHeightAtTouchStartPx=this._content.clientHeight},this._onTouchMove=()=>{this._cancelRAF(),this._isExpanded&&(this._gesture.touchMoveY??0)<=0||(this._rafID=window.requestAnimationFrame((()=>{null!=this._gesture.touchMoveY&&(this._content.style.height=this._cachedHeightAtTouchStartPx-this._gesture.touchMoveY+"px")})))},this._onTouchEnd=()=>{if(this._cancelRAF(),this._content.style.transitionDuration="300ms",!this.open||null==this._gesture.touchMoveY)return;const t=this._gesture.touchMoveY>=this._gesture.thresholdY,e=this._gesture.touchMoveY<=-this._gesture.thresholdY;t?this._isExpanded?this.collapse():this._closeIfNotBlocked():e?this._isExpanded||this.expand():this._isExpanded?this._content.style.height=s:this._content.style.height=this._cachedHeight},this._cancelRAF=()=>{this._rafID&&(window.cancelAnimationFrame(this._rafID),this._rafID=null)},this._renderHandle=()=>this._isExpandable?e.x`<div id="handle" class="${this._isModal?"out":"in"}"></div>`:null,this._handleBackDropKeyUp=t=>{"Enter"===t.key&&this._closeIfNotBlocked()},this._closeIfNotBlocked=()=>{this.blocking||this.close()},this.render=()=>e.x` <div id="backdrop" part="backdrop" class="${this._isModal&&this.open?"blocker":""}" @click="${this._closeIfNotBlocked}" @keyup="${this._handleBackDropKeyUp}"></div> <div id="content" part="content" role="${e.l(this.open?"dialog":void 0)}" aria-label="${e.l(this.label??void 0)}" aria-modal="${e.l(this.open&&this._isModal?"true":void 0)}"> ${this._renderHandle()} <slot name="header"></slot> <slot></slot> </div> `}static get styles(){return e.a`:host{--bottom-sheet-max-height:85vh}@supports (height:95dvh){:host{--bottom-sheet-max-height:95dvh}}:host{position:fixed;bottom:0;left:0;opacity:0;transition-duration:.3s;transition-property:visibility,opacity;transition-timing-function:ease;visibility:hidden;pointer-events:none}:host([open]){opacity:1;z-index:2;visibility:visible}:host([open])>#content{pointer-events:auto;transform:translateY(0)}:host>#backdrop{position:fixed;--backdrop-position-value:-100%;left:var(--backdrop-position-value);right:var(--backdrop-position-value);top:var(--backdrop-position-value);bottom:var(--backdrop-position-value)}:host>#backdrop.blocker{background:var(--color-scrim);pointer-events:auto}:host>#content{align-items:center;background:var(--color-ui-modalbackground);bottom:0;border-top-left-radius:var(--rem12);border-top-right-radius:var(--rem12);box-shadow:var(--boxshadow-modal);box-sizing:border-box;display:flex;flex-direction:column;left:0;position:fixed;touch-action:none;transform:translateY(100%);transition-duration:.3s;transition-property:height,transform;transition-timing-function:ease;width:100vw;max-height:var(--bottom-sheet-max-height)}:host>slot:not([name]){align-items:center;display:flex;flex-direction:column;gap:var(--spacer-sm)}#handle{position:absolute;top:0;left:50%;transform:translateX(-50%);height:var(--rem4);width:var(--rem48);border-radius:var(--rem4)}#handle.in{top:var(--spacer-xs);background-color:var(--color-neutral-border)}#handle.out{top:calc(-1 * var(--spacer-xs));background-color:var(--color-global-white)}`}disconnectedCallback(){super.disconnectedCallback(),this._gesture.destroy(),t.hu.remove(this),t.hl.remove(this),this._mutationObserver?.disconnect()}_connectMutationObserver(){this._mutationObserver=new MutationObserver((()=>{window.requestAnimationFrame(this.recalculateCachedHeight)})),this._mutationObserver.observe(this,{characterData:!0,childList:!0,attributes:!1,subtree:!0})}};t._([t.n({type:Boolean,reflect:!0})],o.prototype,"open",void 0),t._([t.n({type:Boolean})],o.prototype,"blocking",void 0),t._([t.n({type:Boolean,reflect:!0})],o.prototype,"docked",void 0),t._([t.n({type:String,attribute:"ariaLabel"})],o.prototype,"label",void 0),t._([t.y("#content")],o.prototype,"_content",void 0),t._([t.j({slot:"header"})],o.prototype,"_headerElements",void 0),o=t._([t.e("faceplate-bottom-sheet")],o)}));
SML.dm("translationfeedbackmodalclientjse1d4812d",["shelle48e5956","faceplatetextareainput29f541e5","iconc33661e6","translationsa30aa3ad","chatmobilexpromoclientjs5e1c145c","appselectorclientjs9964d0b0","agegatestandaloneclientjsb13e879d","textinput9c3f45be","communitypickerf331f77f","constants9e09f052","TinyGesture26737d23"],(async(e,t,s,a)=>{const i=s.s,o="translation-feedback-modal",n="feedback-other-input";let l=class extends i{constructor(){super(...arguments),this.FEEDBACK_ANSWERS={incomprehensible:"Incomprehensible",slang:"Slang, idioms or expressions",grammar:"Grammar","tone of voice":"Tone of voice",other:"Other"},this.open=!1,this.selectedAnswers=new Set,this.otherFeedbackValue=""}async show(t){if(!this.open)return this.originMetadata=t,e.a(this,a.u({post:t.post,comment:t.comment})),e.a(this,a.k({post:t.post,comment:t.comment})),this.open=!0,this.modal?.showModal()}_close(){if(this.open)return e.a(this,a.j({post:this.originMetadata?.post,comment:this.originMetadata?.comment})),this.open=!1,this.originMetadata=void 0,this.selectedAnswers=new Set,this.otherFeedbackValue="",this.modal?.close()}handleAnswerButtonClick(e){const t=new Set(this.selectedAnswers);this.selectedAnswers.has(e)?t.delete(e):t.add(e),this.selectedAnswers=t}handleSubmit(){return e.a(this,a.l({reason:Array.from(this.selectedAnswers).join(","),survey_text:this.otherFeedbackValue,post:this.originMetadata?.post,comment:this.originMetadata?.comment})),this.dispatchEvent(e.c("faceplate-alert",{level:e.x.success,message:"Thanks for rating"})),this.open=!1,this.originMetadata=void 0,this.selectedAnswers=new Set,this.otherFeedbackValue="",this.modal?.close()}renderFeedbackBody(){return s.x` <span class="font-bold text-14 mb-md"> What's wrong with these translations?</span> <div class="flex flex-row gap-xs flex-wrap ${this.selectedAnswers.has("other")?"mb-md":""}"> ${Object.keys(this.FEEDBACK_ANSWERS).map((t=>{const a=t;return e.r({appearance:"bordered",size:e.s.Medium,shape:"pill",attributes:{className:"inline-flex px-sm box-border "+(this.selectedAnswers.has(a)?"bg-neutral-background-selected":""),onclick:()=>this.handleAnswerButtonClick(a)},children:s.x`<span class="font-semibold text-12">${this.FEEDBACK_ANSWERS[a]}</span>`})}))} </div> ${this.selectedAnswers.has("other")?s.x` <div class="flex w-full box-border"> <faceplate-textarea-input appearance="${t.a.BORDERED}" size="${t.T.EXPANDED}" maxlength="500" @keyup="${e=>{e.stopPropagation(),this.otherFeedbackValue=e.target.value}}" class="w-full ${n}" .value="${this.otherFeedbackValue}"> <span slot="label">Leave a comment (optional)</span> </faceplate-textarea-input> </div> `:s.x``} `}renderTitle(){return s.x` <h3 class="mb-0 mt-xs font-bold inline-flex text-18"> Translation Feedback </h3> `}renderCloseButton(){return s.x` ${e.r({attributes:{"aria-label":"Close",onclick:()=>this._close()},appearance:"secondary",leadingIcon:s.C({size:s.I.Small}),size:e.s.Small})} `}renderSubmitButton(){return s.x` <div class="flex w-full"> ${e.r({appearance:"primary",size:e.s.Large,shape:"pill",attributes:{className:"flex box-border w-full",onclick:this.handleSubmit.bind(this),disabled:0===this.selectedAnswers.size},children:s.x`<span class="font-semibold text-14">Submit</span>`})} </div> `}render(){return s.x` <faceplate-modal blocking ?open="${this.open}" class="${o} w-[350px] m:w-[640px] h-fit z-10"> <div slot="title" class="w-full m:w-fit">${this.renderTitle()}</div> <div slot="closeButton" class="flex items-center">${this.renderCloseButton()}</div> <div class="flex flex-col w-full box-border mt-lg">${this.renderFeedbackBody()}</div> <div slot="primaryButton">${this.renderSubmitButton()}</div> </faceplate-modal> `}};l.styles=[e.t],e._([e.y(`faceplate-modal.${o}`,!0)],l.prototype,"modal",void 0),e._([e.n({type:Boolean,attribute:"open"})],l.prototype,"open",void 0),e._([e.d()],l.prototype,"selectedAnswers",void 0),e._([e.d()],l.prototype,"otherFeedbackValue",void 0),e._([e.d()],l.prototype,"originMetadata",void 0),l=e._([e.e("translation-feedback-modal")],l)}));
SML.dm("feeds869c579e",["shelle48e5956"],(async t=>{const e={[t.F.Card]:{get description(){return"Card"}},[t.F.Compact]:{get description(){return"Compact"}},[t.F.Classic]:{get description(){return"Compact"}}};var r;return function(t){t.MANUAL="manual",t.AUTOMATIC="automatic"}(r||(r={})),{get B(){return r},C:"/svc/shreddit/:subredditName/community-highlights",F:e,P:"post-deletion-modal",S:"subreddit-mute-modal",a:"subreddit-right-rail__partial"}}));
SML.dm("index751e2b35",["shelle48e5956"],(async t=>{const e={next:"nextElementSibling",prev:"previousElementSibling"};var r,s;!function(t){t.FEED="feed",t.COMMENTS_PAGE="comments_page"}(r||(r={})),function(t){t.NEXT="next",t.PREV="prev"}(s||(s={}));return{get P(){return s},a:class{constructor(s,n){this.cache={},this.isPostOrComment=t=>["shreddit-comment","shreddit-post","shreddit-ad-post","shreddit-profile-comment"].includes(t?.tagName.toLowerCase()??""),this.traverse=t=>{const e=this.current;this._current?this.findPostOrComment(t):this._current=this.options.getFirstElement(),this.focusElement(e)},this.focusElement=e=>{if(!this.current||e===this.current)return;const s=document.activeElement;this.current?.onHotkeysFocus?this.current.onHotkeysFocus?.({preventScroll:!0}):this.current.hotkeyController?.onFocus?.({preventScroll:!0}),s===document.activeElement&&t.ae(this.current)?.focus(),this.current.style.scrollMarginTop="var(--shreddit-header-height)";const n=this.isCurrentComment?"start":this.options.type===r.COMMENTS_PAGE?"end":"center";this.current.scrollIntoView({behavior:"instant",block:n})},this.findPostOrComment=t=>{let r=this._current;for(let s=0;r&&s<this.options.maxTraversalCount;s++){const s=r,n=this.options.customTraversal?.(t,r);if(r=n??r?.[e[t]]??s.parentElement?.[e[t]],this.options?.customPostOrCommentDetection?.(r)||this.isPostOrComment(r)){this._current=r;break}}},this.host=s,this.host.addController(this),this.options={maxTraversalCount:10,...n}}hostConnected(){}hostDisconnected(){}get current(){return this._current!==this.cache?.rawElement&&(this.cache={rawElement:this._current,postOrComment:this.options?.customPostOrCommentDetection?.(this._current)??this._current}),this.cache?.postOrComment}get isCurrentPost(){return["shreddit-post","shreddit-ad-post"].includes(this.current?.tagName.toLowerCase()??"")}get isCurrentComment(){return"shreddit-comment"===(this.current?.tagName.toLowerCase()??"")}get isCurrentProfileComment(){return"shreddit-profile-comment"===(this.current?.tagName.toLowerCase()??"")}},get b(){return r}}}));
SML.dm("huiuserdrawerclientjs91e856a7",["shelle48e5956","iconc33661e6","TinyGesture26737d23","agegatestandaloneclientjsb13e879d"],(async(e,t,i,o)=>{const s=(e,t,{parentBoundary:i=document.documentElement,root:a=document,cache:n=new Set})=>{const r=a.elementsFromPoint(e,t),h=[];for(const e of r)if(!n.has(e)){if(!o.aT(i,e))break;h.push(e),n.add(e)}const l=[];for(const i of h)i.shadowRoot&&l.push(...s(e,t,{parentBoundary:i,root:i.shadowRoot,cache:n}));return[...h,...l]};class a{get inSwipe(){return this._inSwipe}set inSwipe(e){this._inSwipe!==e&&(this._inSwipe=e,this.host.requestUpdate("inSwipe",!this._inSwipe))}constructor(e,{recognitionThreshold:t=10,mouseSupport:i=!1}={recognitionThreshold:10,mouseSupport:!1}){this.host=e,this.mouseSupport=!1,this.rafId=null,this._inSwipe=!1,this.protectScrollInterference=!0,this.recognitionThreshold=t,this.mouseSupport=i}clearRaf(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null)}addListeners(e){this.gesture=new i.T(e,{mouseSupport:this.mouseSupport}),this.gesture.on("panstart",this.handleTouchStart.bind(this)),this.gesture.on("panmove",this.handleTouchMove.bind(this)),this.gesture.on("panend",this.handleTouchEnd.bind(this))}removeListeners(){this.gesture?.destroy()}reset(){const e=this.gesture?.element;e&&(this.removeListeners(),this.addListeners(e))}handleTouchStart(e){this.clearRaf(),this.gesture&&this.host.handleSwipeMayStart?.(this.gesture)}handleTouchMove(t){if(this.clearRaf(),!this.gesture)return;const i=(this.gesture.touchMoveY??0)<=0;if(!this.inSwipe&&Math.abs((this.gesture.touchStartY??0)-(this.gesture.touchEndY??0))>this.recognitionThreshold){if(this.protectScrollInterference){const[o,a]=n(t),r=s(o,a,{parentBoundary:this.gesture.element}).filter((t=>t instanceof HTMLElement&&e.hA(t)));if(i&&r.some((t=>!e.hB(t)))||!i&&r.some((t=>!e.hC(t))))return this.reset()}!1!==this.host.handleSwipeWillStart?.({...this.gesture,swipeDirection:i?"up":"down"})?(this.inSwipe=!0,this.host.handleSwipeProgress?.({...this.gesture,swipeDirection:i?"up":"down"})):this.reset()}this.inSwipe&&this.gesture&&(this.rafId=requestAnimationFrame((()=>{this.host.handleSwipeProgress?.({...this.gesture,swipeDirection:i?"up":"down"})})))}handleTouchEnd(e){this.gesture&&(this.clearRaf(),this.inSwipe=!1,this.host.handleSwipeEnd?.(this.gesture))}disableScrollInterferenceProtection(){this.protectScrollInterference=!1}enableScrollInterferenceProtection(){this.protectScrollInterference=!0}}const n=e=>e instanceof MouseEvent?[e.clientX,e.clientY]:[e.touches[0].clientX,e.touches[0].clientY],r="expanded",h="normal",l="docked";var d=t.a`${e.V}:host{--transition-duration:250ms;display:contents}.dialog{--bottom-sheet-docked-height:'auto';--bottom-sheet-normal-height:'auto';--bottom-sheet-height:var(--bottom-sheet-normal-height)}.dialog{--bottom-sheet-expanded-height:85vh}@supports (height:95dvh){.dialog{--bottom-sheet-expanded-height:95dvh}}.dialog.state-normal{--bottom-sheet-height:1fr}.dialog.state-docked{--bottom-sheet-height:var(--bottom-sheet-docked-height)}.dialog.state-expanded{--bottom-sheet-height:var(--bottom-sheet-expanded-height)}.dialog{display:flex;align-items:center;justify-content:center;position:fixed;top:0;right:0;bottom:0;left:0;z-index:var(--z-index-dialog,1000);user-select:none;pointer-events:none;width:100vw}.dialog-panel{display:grid;grid-template-rows:auto var(--bottom-sheet-height);grid-auto-flow:column;position:fixed;z-index:2;bottom:0;touch-action:none;transform:translateY(100%);max-height:var(--bottom-sheet-expanded-height);width:100vw;background-color:var(--color-ui-modalbackground);border-start-start-radius:var(--radius-md);border-start-end-radius:var(--radius-md);box-shadow:var(--boxshadow-modal);transition:--bottom-sheet-height var(--transition-duration) ease,grid-template-rows var(--transition-duration) ease,transform var(--transition-duration) ease}.dialog.reflect-gesture .dialog-panel{grid-template-rows:auto var(--bottom-sheet-forced-height);transition:none}.dialog-variant-plain .dialog-panel{max-width:100%;max-height:100%;background-color:transparent;border-radius:initial;box-shadow:initial}.dialog-panel:focus{outline:0}.dialog-open{user-select:auto}.dialog-open .dialog-overlay,.dialog-open .dialog-panel{pointer-events:auto}.dialog-open .dialog-panel{opacity:1;transform:translateY(0)}.dialog-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.5)}.dialog-overlay-blur{backdrop-filter:blur(var(--dialog-backdrop-blur, 4px))}.dialog-overlay-no-modal{display:none}.handle-container{display:flex;justify-content:center;align-items:flex-end;width:100%}.handle-container-inside{--handle-color:var(--color-neutral-border);padding-top:var(--rem8);padding-bottom:var(--rem4)}.handle-container-outside{--handle-color:var(--color-global-white);padding-bottom:var(--rem8);padding-top:var(--rem4);position:relative;top:-16px}.handle{display:block;background:var(--handle-color);width:var(--rem48);height:var(--rem4);border-radius:10000rem}`;let c=class extends e.hD{constructor(){super(...arguments),this.resizeController=new e.hE(this,{callback:()=>this.updateDimensions,elements:{slottedElement:()=>this.slottedElement,styledDialogChildWithHeader:()=>this.styledDialogChildWithHeader,panel:()=>this.panelRef.value}}),this.gestureController=new a(this,{recognitionThreshold:10}),this.slottedElement=null,this.styledDialogChildWithHeader=null,this.handleContainer=e.aq(),this.animationNames={show:"bottomSheet.show",hide:"bottomSheet.hide",denyClose:"bottomSheet.denyClose",denyExpand:"bottomSheet.denyExpand",overlayShow:"bottomSheet.overlay.show",overlayHide:"bottomSheet.overlay.hide"},this.openState=h,this.dockable=!1,this.expandable=!1,this.handleDockButtonClicked=e=>{e.stopPropagation(),this.open&&(this.isDocked?this.undock():this.dock())},this.updateDimensions=async e=>{const t=this.slottedElement;t&&e.some((e=>e.target===t))&&this.slottedElement&&this.styledDialogChildWithHeader&&this.updateDockedHeight(),this.requestUpdate(),this.emitter.dispatch("resize")}}get isDocked(){return this.openState===l}get isExpanded(){return this.openState===r}get isNormal(){return this.openState===h}addOpenListeners(){super.addOpenListeners(),this.resizeController.observeAllElements(),this.portalContainer.addEventListener("rpl-modal-card:dock-button-clicked",this.handleDockButtonClicked),this.panelRef.value&&this.gestureController.addListeners(this.panelRef.value)}removeOpenListeners(){super.removeOpenListeners(),this.resizeController.unobserveAllElements(),this.gestureController.removeListeners(),this.portalContainer.removeEventListener("rpl-modal-card:dock-button-clicked",this.handleDockButtonClicked)}willUpdate(e){return e.has("dockable")&&!this.dockable&&this.isDocked&&(this.dockable=!0),e.has("expandable")&&!this.expandable&&this.isExpanded&&(this.expandable=!0),e.has("openState")&&this.isExpanded&&!this.expandable&&(this.openState=e.get("openState")??h),e.has("openState")&&this.isDocked&&!this.dockable&&(this.openState=e.get("openState")??h),(e.get("openState")||e.get("dockable"))&&this.styledDialogChildren.size>0&&this.styledDialogChildren.forEach((e=>{e.dockable=this.dockable,e.docked=this.isDocked})),e.has("openState")&&(this.isDocked?this.gestureController.disableScrollInterferenceProtection():this.gestureController.enableScrollInterferenceProtection()),super.willUpdate(e)}getCachedHeightContainer(e){return["forced","forcedInitial"].includes(e)?this.panelRef.value:this.dialogRef.value}setCachedHeight(e,t){this.getCachedHeightContainer(e)?.style.setProperty(p[e],t)}getCachedHeight(e){const t=this.getCachedHeightContainer(e);return t?getComputedStyle(t).getPropertyValue(p[e])??"auto":"auto"}async updateDockedHeight(){if(!this.styledDialogChildWithHeader)return;await e.hF(this.styledDialogChildWithHeader);const t=this.styledDialogChildWithHeader.headerHeight,i=this.handleContainer.value?.clientHeight??16;t&&this.setCachedHeight("docked",`${t+i}px`)}async expand(){if(!this.open||!this.expandable||this.isExpanded||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:r}})||(this.openState=r)}async collapse(){if(!this.open||!this.isExpanded||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:h}})||(this.openState=h)}async dock(){if(!this.open||!this.dockable||this.isDocked||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:l}})||(this.openState=l)}async undock(){if(!this.open||!this.isDocked||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:h}})||(this.openState=h)}handleSwipeMayStart(){this.setCachedHeight("forcedInitial",`${this.panelRef?.value?.clientHeight}px`),this.setCachedHeight("forced",`var(${p.forcedInitial})`)}handleSwipeWillStart({swipeDirection:e}){return!("down"===e&&this.blocking&&!this.isExpanded||"up"===e&&!this.expandable)}handleSwipeProgress({swipeDirection:e,touchMoveY:t}){null===t||this.isExpanded&&"up"===e||this.setCachedHeight("forced",`calc(var(${p.forcedInitial}) - ${t??0}px)`)}handleSwipeEnd({touchMoveY:t,thresholdY:i}){if(!this.open||null==t)return;const o=t>=i,s=t<=-i;if(o&&this.isExpanded)this.collapse();else if(o&&this.isNormal)this.requestClose("gesture");else if(s&&this.isDocked)this.undock();else if(s&&this.isNormal&&this.expandable)this.expand();else if(s&&!this.isExpanded&&!this.expandable&&this.panelRef.value){const{keyframes:t,options:i}=e.cF(this,this.animationNames.denyExpand);e.cG(this.panelRef.value,t,i)}}handleSlotChange(e){this.styledDialogChildWithHeader=null,this.slottedElement=this.portalContainer.firstElementChild,this.slottedElement&&this.resizeController.replaceObservedElement("slottedElement")}handleDialogChildConnected(t){t.appearance="bottom-sheet",t.dockable=this.dockable,t.docked="docked"===this.openState,e.hG(t)&&"headerHeight"in t&&(this.styledDialogChildWithHeader=t,this.resizeController.replaceObservedElement("styledDialogChildWithHeader"),this.updateDockedHeight())}handleDialogChildDisconnected(e){}renderDialogBaseClasses(){return{"reflect-gesture":this.gestureController.inSwipe,[`state-${this.openState}`]:!0}}renderTopOfDialog(){return t.x`<div class="${e.U({"handle-container":!0,["handle-container-"+(this.open&&this.modal.disableFocusTrap?"inside":"outside")]:!0})}" part="handle-container" ${e.as(this.handleContainer)}> <div class="handle"></div> </div>`}};c.styles=d,e._([e.n({type:String,reflect:!0,attribute:"open-state"})],c.prototype,"openState",void 0),e._([e.n({type:Boolean,reflect:!0})],c.prototype,"dockable",void 0),e._([e.n({type:Boolean,reflect:!0})],c.prototype,"expandable",void 0),c=e._([e.e("rpl-bottom-sheet")],c);const p={forced:"--bottom-sheet-forced-height",forcedInitial:"--bottom-sheet-forced-initial-height",currentHeight:"--bottom-sheet-current-height",[l]:"--bottom-sheet-docked-height"},u=250;return e.cC("bottomSheet.show",{keyframes:[{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0%)"}],options:{duration:u,easing:"ease"}}),e.cC("bottomSheet.hide",{keyframes:[{opacity:1,transform:"translateY(0%)",maxHeight:"var(--bottom-sheet-forced-height)"},{opacity:0,transform:"translateY(100%)",maxHeight:"var(--bottom-sheet-forced-height)"}],options:{duration:u,easing:"ease"}}),e.cC("bottomSheet.denyClose",{keyframes:[{transform:"translateY(0%)"},{transform:"translateY(4%)"},{transform:"translateY(0%)"}],options:{duration:u,easing:"ease-in"}}),e.cC("bottomSheet.denyExpand",{keyframes:[{height:"var(--bottom-sheet-forced-height)"},{height:"var(--bottom-sheet-height)",transform:"translateY(0%)",offset:.2},{height:"var(--bottom-sheet-height)",transform:"translateY(4%)",offset:.5},{height:"var(--bottom-sheet-height)",transform:"translateY(0%)"}],options:{duration:375,easing:"ease-in"}}),e.cC("bottomSheet.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:u}}),e.cC("bottomSheet.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:u}}),{get R(){return c}}}));
SML.dm("communityonboardingcompletedmodalclientjsf4f5192c",["shelle48e5956","iconc33661e6","huiuserdrawerclientjs91e856a7","TinyGesture26737d23","agegatestandaloneclientjsb13e879d"],(async(e,t,a)=>{class i{get matches(){return this.mediaQuery.matches}constructor(e,t){this.host=e,this.query=t,this.rafId=null,this.handleMediaChange=()=>{this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame((()=>{this.rafId=null,this.host.requestUpdate("matches",!this.matches)}))},e.addController(this),this.mediaQuery=window.matchMedia(t),this.mediaQuery.addEventListener("change",this.handleMediaChange)}async hostConnected(){}async hostDisconnected(){}}var n=t.a`${e.V}:host{display:contents}`;let l=class extends e.Q{constructor(){super(...arguments),this.nonSyncedPropNames=["variant","litTemplateChildren","overlayBlur","dialogId","dialogClassName","blocking","disableCacheContents","noAnimate"],this.isTouchOnly=new i(this,"(pointer: coarse)"),this.isLargeWidth=new i(this,"(width >= 640px)"),this.dialogRef=e.aq(),this.panelRef=e.aq(),this.overlayRef=e.aq(),this.open=!1,this.overlayBlur=!0,this.dialogId="",this.dialogClassName="",this.label="",this.blocking=!1,this.noAnimate=!1,this.disableCacheContents=!1,this.openState="normal",this.expandable=!1}setElementRef(t){(t instanceof e.ik||t instanceof a.R)&&(this.elementRef&&this.elementRef.removeEventListener(`${this.tagName.toLowerCase()}:internal-update`,this.handleInternalSync),this.elementRef=t,this.elementRef.addEventListener(`${this.tagName.toLowerCase()}:internal-update`,this.handleInternalSync))}get rplBottomSheet(){return this.elementRef instanceof a.R?this.elementRef:void 0}get rplDialog(){return this.elementRef instanceof e.ik?this.elementRef:void 0}get portalContainer(){if(!this.elementRef)throw new Error("[RPLDialogSheet]: The .portalContainer is not available until after the component has rendered.");return this.elementRef.portalContainer}get portalShadowRoot(){if(!this.elementRef)throw new Error("[RPLDialogSheet]: The .portalShadowRoot is not available until after the component has rendered.");return this.elementRef.portalShadowRoot}set litTemplateChildren(e){this._litTemplateChildren=e,this.elementRef&&e&&(this.elementRef.litTemplateChildren=e)}get litTemplateChildren(){return this._litTemplateChildren}async expand(){return this.rplBottomSheet?.expand()}async collapse(){return this.rplBottomSheet?.collapse()}async showModal(){return this.elementRef?.showModal()}checkFocus(){return this.elementRef?.checkFocus()}async show(){return this.elementRef?.show()}async hide(){return this.elementRef?.hide()}get currentVariant(){if(this.forceVariant)return this.forceVariant;const{isTouchOnly:e,isLargeWidth:t}=this;return e.matches&&!t.matches?"bottom-sheet":"dialog"}handleInternalSync(e){const t=e;t.stopImmediatePropagation();for(const e of t.detail)!this.nonSyncedPropNames.includes(e.key)&&e.key in this&&e.newValue!==this[e.key]&&(this[e.key]=e.newValue)}renderDialog(){return t.x`<rpl-dialog .eventNamespaceOverride="${this.tagName.toLowerCase()}" .dialogRef="${this.dialogRef}" .panelRef="${this.panelRef}" .overlayRef="${this.overlayRef}" .litTemplateChildren="${this.litTemplateChildren}" .open="${this.open}" .overlayBlur="${this.overlayBlur}" .dialogId="${this.dialogId}" .dialogClassName="${this.dialogClassName}" .label="${this.label}" .blocking="${this.blocking}" .disableCacheContents="${this.disableCacheContents}" .noAnimate="${this.noAnimate}" @rpl-dialog-sheet:internal-sync="${this.handleInternalSync}" ${e.as(this.setElementRef)}> <slot></slot> </rpl-dialog>`}renderBottomSheet(){return t.x`<rpl-bottom-sheet .eventNamespaceOverride="${this.tagName.toLowerCase()}" .dialogRef="${this.dialogRef}" .panelRef="${this.panelRef}" .overlayRef="${this.overlayRef}" .litTemplateChildren="${this.litTemplateChildren}" .open="${this.open}" .overlayBlur="${this.overlayBlur}" .dialogId="${this.dialogId}" .dialogClassName="${this.dialogClassName}" .label="${this.label}" .blocking="${this.blocking}" .disableCacheContents="${this.disableCacheContents}" .noAnimate="${this.noAnimate}" .openState="${this.openState}" .dockable="${!1}" .expandable="${this.expandable}" @rpl-dialog-sheet:internal-sync="${this.handleInternalSync}" ${e.as(this.setElementRef)}> <slot></slot> </rpl-bottom-sheet>`}render(){return"dialog"===this.currentVariant?this.renderDialog():this.renderBottomSheet()}};return l.styles=n,e._([e.n({type:String,reflect:!0,attribute:"force-variant"})],l.prototype,"forceVariant",void 0),e._([e.n({type:Boolean,reflect:!0})],l.prototype,"open",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"overlay-blur"})],l.prototype,"overlayBlur",void 0),e._([e.n({reflect:!0,attribute:"dialog-id"})],l.prototype,"dialogId",void 0),e._([e.n({reflect:!0,attribute:"dialog-classname"})],l.prototype,"dialogClassName",void 0),e._([e.n({reflect:!0})],l.prototype,"label",void 0),e._([e.n({type:Boolean})],l.prototype,"blocking",void 0),e._([e.n({type:Boolean,attribute:"no-animate"})],l.prototype,"noAnimate",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"disable-cache-contents"})],l.prototype,"disableCacheContents",void 0),e._([e.n({type:String,reflect:!0,attribute:"open-state"})],l.prototype,"openState",void 0),e._([e.n({type:Boolean,reflect:!0})],l.prototype,"expandable",void 0),e._([e.d()],l.prototype,"litTemplateChildren",null),l=e._([e.e("rpl-dialog-sheet")],l),{i:function(){return window.matchMedia("(pointer: coarse)").matches}}}));
SML.dm("index970155ae",["shelle48e5956","iconc33661e6","helpers4792ac4d"],(async(t,e,n)=>{var r;!function(t){t.PRIMARY="primary",t.BRAND="brand"}(r||(r={}));const o={[r.PRIMARY]:"switch-input-primary",[r.BRAND]:"switch-input-brand"};var a;!function(t){t.ON="faceplate-switch-input:on",t.OFF="faceplate-switch-input:off"}(a||(a={}));let i=class extends n.C{constructor(){super(...arguments),this.appearance=r.PRIMARY}static get styles(){return[super.styles,e.a`.switch-input-primary{--checked-color-background-default:var(--color-switch-input-background-checked);--checked-color-background-hover:var(--color-switch-input-background-checked-hover)}.switch-input-brand{--checked-color-background-default:var(--color-brand-background);--checked-color-background-hover:var(--color-brand-background-hover)}.outer{background:var(--color-switch-input-background-default);border-radius:var(--radius-full);box-shadow:var(--elevation-switch-input-default-inset);height:var(--size-switch-input-h);vertical-align:middle;width:var(--size-switch-input-w);padding:var(--line-md);box-sizing:border-box;position:relative;display:flex;align-items:center;flex-shrink:0;transition:background-color .3s;contain:strict}.knob{--knob-size:calc(var(--size-switch-input-h) - (var(--line-md) * 2));--knob-size-active:calc((36 / 28) * var(--knob-size));--translate-checked:calc(
            var(--size-switch-input-w) - var(--knob-size) - (var(--line-md) * 2)
          );background:var(--color-global-white);border-radius:var(--radius-full);filter:drop-shadow(0 1px 4px rgba(0, 0, 0, .15));display:flex;align-items:center;justify-content:center;height:var(--knob-size);position:absolute;transform:translateX(0);transition-duration:.3s;transition-property:transform,width;width:var(--knob-size)}.knob:dir(rtl){--translate-checked:calc(
            -1 * (var(--size-switch-input-w) - var(--knob-size) - (var(--line-md) * 2))
          )}:host(:active:not([aria-disabled=true])) .knob{width:var(--knob-size-active)}:host([checked]) .knob{transform:translateX(var(--translate-checked))}:host([checked]:active:not([aria-disabled=true])) .knob{transform:translateX(calc(var(--translate-checked) - (var(--knob-size-active) - var(--knob-size))))}:host([checked]:active:not([aria-disabled=true])) .knob:dir(rtl){transform:translateX(calc(var(--translate-checked) + (var(--knob-size-active) - var(--knob-size))))}label{margin-inline-start:var(--spacer-xs)}:host([checked]) .outer{background:var(--checked-color-background-default)}:host([faceplate-validity=invalid]) .outer{background:var(--color-danger-content)}:host(:focus-visible) .outer{outline:1px auto var(--color-global-focus)}:host(:hover) .outer{background:var(--color-switch-input-background-default-hover)}:host([checked]:hover) .outer{background:var(--checked-color-background-hover)}:host([aria-disabled=true]){opacity:1}:host([aria-disabled=true]) .outer{background-color:var(--color-switch-input-background-disabled);box-shadow:none}:host([checked][aria-disabled=true]) .outer{background-color:var(--color-switch-input-background-checked-disabled);box-shadow:none}:host([aria-disabled=true][checked]:active) .outer{background:var(--color-switch-input-background-checked-disabled);box-shadow:none}:host([aria-disabled=true]) .knob{background-color:var(--color-switch-input-background-handle-disabled);box-shadow:none}:host([aria-disabled=true]) label{opacity:.5}svg{opacity:0;color:var(--color-global-black);transition:opacity .3s}:host([checked]) svg{opacity:1}`]}render(){return e.x` <span class="${o[this.appearance||r.PRIMARY]} outer"> <span class="knob"> ${e.P({attributes:{"aria-hidden":"true"},size:e.I.ExtraSmall})} </span> </span> ${super.render()} `}toggle(){this.checked=!this.checked,this.dispatchEvent(t.c(this.checked?a.ON:a.OFF)),super.handleInteraction()}handleInteraction(){this.toggle()}};t._([t.n({type:String})],i.prototype,"appearance",void 0),i=t._([t.e("faceplate-switch-input")],i);const c=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${t}`)})();function s(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function l(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function u(t,e={}){return{width:e.width||function(t){const e=l(t,"border-left-width"),n=l(t,"border-right-width");return t.clientWidth+e+n}(t),height:e.height||function(t){const e=l(t,"border-top-width"),n=l(t,"border-bottom-width");return t.clientHeight+e+n}(t)}}const d=16384;function h(t){return new Promise(((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t}))}async function f(t,e,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),o.appendChild(a),a.appendChild(t),async function(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}(o)}const g=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||g(n,e))};function p(t,e,n){const r=`.${t}:${e}`,o=n.cssText?function(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function(t){return s(t).map((e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${o}}`)}function w(t,e,n){const r=window.getComputedStyle(t,n),o=r.getPropertyValue("content");if(""===o||"none"===o)return;const a=c();try{e.className=`${e.className} ${a}`}catch(t){return}const i=document.createElement("style");i.appendChild(p(a,n,r)),e.appendChild(i)}const m="application/font-woff",b="image/jpeg",y={woff:m,woff2:m,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:b,jpeg:b,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function v(t){const e=function(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return y[e]||""}function k(t){return-1!==t.search(/^(data:)/)}async function E(t,e,n){const r=await fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise(((t,e)=>{const a=new FileReader;a.onerror=e,a.onloadend=()=>{try{t(n({res:r,result:a.result}))}catch(t){e(t)}},a.readAsDataURL(o)}))}const S={};async function x(t,e,n){const r=function(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}(t,e,n.includeQueryParams);if(null!=S[r])return S[r];let o;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const r=await E(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(n))));o=function(t,e){return`data:${e};base64,${t}`}(r,e)}catch(e){o=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${t}`;e&&(r="string"==typeof e?e:e.message),r&&console.warn(r)}return S[r]=o,o}async function R(t,e){return g(t,HTMLCanvasElement)?async function(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):h(e)}(t):g(t,HTMLVideoElement)?async function(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height),h(e.toDataURL())}const n=t.poster,r=v(n);return h(await x(n,r,e))}(t,e):g(t,HTMLIFrameElement)?async function(t){var e;try{if(null===(e=null==t?void 0:t.contentDocument)||void 0===e?void 0:e.body)return await T(t.contentDocument.body,{},!0)}catch(t){}return t.cloneNode(!1)}(t):t.cloneNode(!1)}const P=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function $(t,e){return g(e,Element)&&(function(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):s(r).forEach((o=>{let a=r.getPropertyValue(o);if("font-size"===o&&a.endsWith("px")){const t=Math.floor(parseFloat(a.substring(0,a.length-2)))-.1;a=`${t}px`}g(t,HTMLIFrameElement)&&"display"===o&&"inline"===a&&(a="block"),"d"===o&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),n.setProperty(o,a,r.getPropertyPriority(o))}))}(t,e),function(t,e){w(t,e,":before"),w(t,e,":after")}(t,e),function(t,e){g(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),g(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(g(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));r&&r.setAttribute("selected","")}}(t,e)),e}async function T(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>R(t,e))).then((n=>async function(t,e,n){var r,o;let a=[];return a=P(t)&&t.assignedNodes?s(t.assignedNodes()):g(t,HTMLIFrameElement)&&(null===(r=t.contentDocument)||void 0===r?void 0:r.body)?s(t.contentDocument.body.childNodes):s((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes),0===a.length||g(t,HTMLVideoElement)||await a.reduce(((t,r)=>t.then((()=>T(r,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}(t,n,e))).then((e=>$(t,e))).then((t=>async function(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let o=0;o<n.length;o++){const a=n[o].getAttribute("xlink:href");if(a){const n=t.querySelector(a),o=document.querySelector(a);n||!o||r[a]||(r[a]=await T(o,e,!0))}}const o=Object.values(r);if(o.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(e,"defs");n.appendChild(r);for(let t=0;t<o.length;t++)r.appendChild(o[t]);t.appendChild(n)}return t}(t,e))):null}const C=/url\((['"]?)([^'"]+?)\1\)/g,A=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,L=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function D(t,e,n,r,o){try{const a=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),e&&(r.href=e),o.href=t,o.href}(e,n):e,i=v(e);let c;return o||(c=await x(a,i,r)),t.replace(function(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${c}$3`)}catch(t){}return t}function I(t){return-1!==t.search(C)}async function N(t,e,n){if(!I(t))return t;const r=function(t,{preferredFontFormat:e}){return e?t.replace(L,(t=>{for(;;){const[n,,r]=A.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}})):t}(t,n),o=function(t){const e=[];return t.replace(C,((t,n,r)=>(e.push(r),t))),e.filter((t=>!k(t)))}(r);return o.reduce(((t,r)=>t.then((t=>D(t,r,e,n)))),Promise.resolve(r))}async function M(t,e,n){var r;const o=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(o){const r=await N(o,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function z(t,e){g(t,Element)&&(await async function(t,e){await M("background",t,e)||await M("background-image",t,e),await M("mask",t,e)||await M("mask-image",t,e)}(t,e),await async function(t,e){const n=g(t,HTMLImageElement);if((!n||k(t.src))&&(!g(t,SVGImageElement)||k(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,o=await x(r,v(r),e);await new Promise(((e,r)=>{t.onload=e,t.onerror=r;const a=t;a.decode&&(a.decode=e),"lazy"===a.loading&&(a.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o}))}(t,e),await async function(t,e){const n=s(t.childNodes).map((t=>z(t,e)));await Promise.all(n).then((()=>t))}(t,e))}const O={};async function H(t){let e=O[t];if(null!=e)return e;const n=await fetch(t);return e={url:t,cssText:await n.text()},O[t]=e,e}async function _(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),E(a,e.fetchRequestInit,(({result:t})=>(n=n.replace(o,`url(${t})`),[o,t])))}));return Promise.all(o).then((()=>n))}function F(t){if(null==t)return[];const e=[];let n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const t=r.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=o.exec(n);if(null===t){if(t=a.exec(n),null===t)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;e.push(t[0])}return e}async function j(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=s(t.ownerDocument.styleSheets),r=await async function(t,e){const n=[],r=[];return t.forEach((n=>{if("cssRules"in n)try{s(n.cssRules||[]).forEach(((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let a=o+1;const i=H(t.href).then((t=>_(t,e))).then((t=>F(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?a+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));r.push(i)}}))}catch(o){const a=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&r.push(H(n.href).then((t=>_(t,e))).then((t=>F(t).forEach((t=>{a.insertRule(t,n.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",o)}})),Promise.all(r).then((()=>(t.forEach((t=>{if("cssRules"in t)try{s(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}(n,e);return function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>I(t.style.getPropertyValue("src"))))}(r)}async function U(t,e){const n=await j(t,e);return(await Promise.all(n.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return N(t.cssText,n,e)})))).join("\n")}async function V(t,e={}){const{width:n,height:r}=u(t,e),o=await T(t,e,!0);await async function(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await U(t,e);if(n){const e=document.createElement("style"),r=document.createTextNode(n);e.appendChild(r),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}(o,e),await z(o,e),function(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;null!=r&&Object.keys(r).forEach((t=>{n[t]=r[t]}))}(o,e);return await f(o,n,r)}async function q(t,e={}){const{width:n,height:r}=u(t,e),o=await V(t,e),a=await h(o),i=document.createElement("canvas"),c=i.getContext("2d"),s=e.pixelRatio||function(){let t,e;try{e=process}catch(t){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),l=e.canvasWidth||n,f=e.canvasHeight||r;return i.width=l*s,i.height=f*s,e.skipAutoScale||function(t){(t.width>d||t.height>d)&&(t.width>d&&t.height>d?t.width>t.height?(t.height*=d/t.width,t.width=d):(t.width*=d/t.height,t.height=d):t.width>d?(t.height*=d/t.width,t.width=d):(t.width*=d/t.height,t.height=d))}(i),i.style.width=`${l}`,i.style.height=`${f}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,i.width,i.height)),c.drawImage(a,0,0,i.width,i.height),i}var B=Object.freeze({__proto__:null,getFontEmbedCSS:async function(t,e={}){return U(t,e)},toBlob:async function(t,e={}){const n=await q(t,e);return await function(t,e={}){return t.toBlob?new Promise((n=>{t.toBlob(n,e.type?e.type:"image/png",e.quality?e.quality:1)})):new Promise((n=>{const r=window.atob(t.toDataURL(e.type?e.type:void 0,e.quality?e.quality:void 0).split(",")[1]),o=r.length,a=new Uint8Array(o);for(let t=0;t<o;t+=1)a[t]=r.charCodeAt(t);n(new Blob([a],{type:e.type?e.type:"image/png"}))}))}(n)},toCanvas:q,toJpeg:async function(t,e={}){return(await q(t,e)).toDataURL("image/jpeg",e.quality||1)},toPixelData:async function(t,e={}){const{width:n,height:r}=u(t,e);return(await q(t,e)).getContext("2d").getImageData(0,0,n,r).data},toPng:async function(t,e={}){return(await q(t,e)).toDataURL()},toSvg:V});return{get F(){return i},get S(){return r},get i(){return B}}}));
SML.dm("expandablesectionheader41e0cfd1",["iconc33661e6"],(async e=>{var t;!function(e){e.Small="sm",e.Medium="md"}(t||(t={}));const n=e=>{let t;return"boolean"==typeof e&&(t=e?"true":"false"),t},a=t=>{const{attributes:n,trailingSlot:a,selected:r,liRole:l}=t,{html:o,createElement:c}=e.g(),{role:d,tabindex:p,"aria-disabled":u,"aria-selected":g,...m}=n||{},h=o`${s(t)} ${i(a)}`;return c("li",{...m,className:`relative list-none mt-0 ${n?.className||""}`,rpl:!0,rplSelected:r,role:l||"presentation"},h)},s=a=>{const{anchorAttributes:s,appearance:i,description:o,disabled:c,href:d,innerClassName_DO_NOT_USE:p,label:u,leadingAvatar:g,leadingIcon:m,noXPadding:h=!1,onClick:x,selected:f,size:b=t.Medium,trailingSlot:$,attributes:y,suppressHoverStyles:v=!1}=a,k=!f&&a.hasTransparentBackground,{html:N,createElement:S,ifDefined:w}=e.g(),{role:E,tabindex:_}=y??{},j=Boolean(_??y?.onclick??a.onClick),I=j?parseInt(_??"0"):void 0,O=!v&&(null!=d||j),T=e=>{return t=e,O?t:"";var t},D=["flex justify-between relative",(h?"px-xs -mx-xs":"px-md")+" gap-[0.5rem]","danger"===i?f?"text-danger-content":`text-danger-content ${T("hover:text-danger-content-hover")}`:f?"text-secondary-onBackground":`text-secondary ${T("hover:text-secondary-hover")}`,`${k?"":f?`bg-neutral-background-selected ${T("hover:bg-neutral-background-selected")}`:`${T("active:bg-interactive-pressed")}`} ${T("hover:bg-neutral-background-hover")}`,`${T("hover:no-underline")}`,`${T("cursor-pointer")}`,c?"opacity-60 pointer-events-none":"",b===t.Medium?"py-xs":"py-2xs"," -outline-offset-1",p].join(" "),B=N` <span class="flex items-center gap-xs min-w-0 shrink"> ${m?N` <span class="flex shrink-0 items-center justify-center h-xl w-xl text-20 leading-4"> ${m} </span>`:void 0} ${g?N`<span class="flex shrink-0 items-center justify-center h-xl w-xl"> <span class="text-20 leading-4">${g}</span> </span>`:void 0} <span class="flex flex-col justify-center min-w-0 shrink py-[var(--rem6)]"> <span class="text-14">${u}</span> <span class="text-12 text-secondary-weak">${o}</span> </span> </span> ${l($)} `;return d?S("a",{...s,role:E,href:d,tabindex:I,onclick:x,className:`${D} ${s?.className?s.className:""} no-underline`,style:`padding-inline-end: ${r(a)}`},B):N`<div aria-disabled="${w(n(c)||y?.["aria-disabled"])}" aria-selected="${w(n(f)||y?.["aria-selected"])}" role="${w(E)}" tabindex="${w(I)}" class="${D}" @click="${x}" @keydown="${e=>{"Enter"!==e.code&&"Space"!==e.code||!x||x(e)}}" style="padding-inline-end:${r(a)}"> ${B} </div>`};function r({trailingSlot:e}){if("object"!=typeof e||!("type"in e))return"16px";switch(e.type){case"iconButton":return"58px";case"switchInput":return"80px";default:return"16px"}}const i=t=>{if("object"!=typeof t||!("type"in t))return null;const{html:n}=e.g();return n`<div class="absolute top-1/2" style="inset-inline-end:${function(e){if("object"!=typeof e||!("type"in e))return"16px";switch(e.type){case"iconButton":return"10px";case"switchInput":return"8px";default:return"16px"}}(t)};transform:translateY(-50%)"> ${t.content} </div>`},l=t=>{if("object"==typeof t&&"type"in t)return null;const{html:n}=e.g();return n`<span class="flex items-center shrink-0"> <span class="flex items-center justify-center h-lg">${t}</span> </span>`},o=e.e(class extends e.i{constructor(e){super(e),this.tt=new WeakMap}render(e){return[e]}update(t,[n]){if(e.cF(this.et)&&(!e.cF(n)||this.et.strings!==n.strings)){const n=e.cG(t).pop();let a=this.tt.get(this.et.strings);if(void 0===a){const t=document.createDocumentFragment();a=e.B(e.A,t),a.setConnected(!1),this.tt.set(this.et.strings,a)}e.bN(a,[n]),e.cH(a,void 0,n)}if(e.cF(n)){if(!e.cF(this.et)||this.et.strings!==n.strings){const a=this.tt.get(n.strings);if(void 0!==a){const n=e.cG(a).pop();e.cI(t),e.cH(t,void 0,n),e.bN(t,[n])}}this.et=n}else this.et=void 0;return this.render(n)}}),c={"list-item":"","group-label":"text-12 text-secondary-weak tracking-widest",title:"text-16 text-neutral-content-strong"};return{get L(){return t},a:({appearance:n="list-item",attributes:s,innerClassName_DO_NOT_USE:r,label:i,leadingIcon:l,noXPadding:o})=>{const{html:d}=e.g();return a({attributes:{...s,tabindex:"-1"},hasTransparentBackground:!0,innerClassName_DO_NOT_USE:r,label:d`<span class="${c[n]}">${i}</span>`,leadingIcon:l,size:t.Small,trailingSlot:e.Y(),noXPadding:o})},d:o,e:({attributes:t,contentId:n,content:a,header:s,hasLeadingBorder:r,isInitiallyOpen:i=!0})=>{const{html:l,createElement:o}=e.g();return o("faceplate-expandable-section-helper",{...t,booleanOpen:i,rpl:!0},l`<details ?open="${i}" class="p-0 m-0 bg-transparent border-none rounded-none"> <summary aria-controls="${n}" aria-expanded="${i}" class="font-normal"> ${s} </summary> <faceplate-auto-height-animator class="block" ?open="${i}"> <div faceplate-auto-height-animator-content id="${n}" style="${r?"border-left: 1px solid var(--color-neutral-border-weak); margin-left: 28px;":""}"> ${a} </div> </faceplate-auto-height-animator> </details>`)},l:a}}));
SML.dm("shouldconttruncated81ee171",["iconc33661e6","shelle48e5956"],(async(e,n)=>{var r;!function(e){e.NEUTRAL="NEUTRAL",e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.ALERT="ALERT",e.PLAIN="PLAIN",e.DISABLED="DISABLED",e.DANGER="DANGER",e.INVERTED="INVERTED",e.SECONDARY="SECONDARY",e.MEDIA="MEDIA",e.BRAND="BRAND"}(r||(r={}));const t="bg-brand-background text-brand-onBackground",a="bg-secondary-background text-secondary-onBackground",o={[r.WARNING]:"bg-warning-background text-neutral-background",[r.SUCCESS]:"bg-success-background text-primary-onBackground",[r.NEUTRAL]:"bg-neutral-content text-neutral-background",[r.PLAIN]:a,[r.ALERT]:t,[r.BRAND]:t,[r.DANGER]:"bg-danger-background text-primary-onBackground",[r.DISABLED]:"bg-interactive-content-disabled text-neutral-background",[r.INVERTED]:"bg-inverted-neutral-background text-neutral-background",[r.SECONDARY]:a,[r.MEDIA]:"bg-media-background text-media-onBackground"};return{get B(){return r},b:({attributes:n,appearance:t=r.NEUTRAL,content:a,outline:c=!1})=>{const{html:E,createElement:d}=e.g(),u=E`<span class="font-semibold inline-block text-10 text-center ${a&&"min-h-[1rem] min-w-[0.5rem]"} px-2xs">${a}</span>`;let i="rounded-full inline-flex";return a||(i+=" h-xs w-xs"),c&&(i+=" border-md border-solid border-neutral-background"),d("span",{...n,className:`${[o[t]]} ${i} ${n?.className}`,rpl:!0},u)},s:function({readMoreExperimentName:e,readMoreExperimentVariant:r,readMoreExperimentVersion:t}={}){return!r||(n.fT({experimentName:e??"",variant:r,experimentVersion:t??""}).catch((()=>{})),"none"!==r)}}}));
SML.dm("tabbuttonb7771ce6",["iconc33661e6","shelle48e5956","shouldconttruncated81ee171","agegatestandaloneclientjsb13e879d"],(async(e,a,r,t)=>{var l,n,o;!function(e){e.Small="sm",e.Medium="md",e.Large="lg"}(l||(l={})),function(e){e.Pill="pill",e.Square="square"}(n||(n={})),function(e){e.Pill="default",e.BottomBorder="bottom-border",e.Hug="hug",e.Fill="fill"}(o||(o={}));const s={sm:"py-[var(--rem6)] leading-5 text-14",md:"py-[var(--rem10)] leading-5 text-14",lg:"py-[var(--rem14)] leading-5 text-14"},d={sm:" pl-[var(--rem12)]",md:" pl-[var(--rem14)]",lg:" pl-[var(--rem14)]"},c={sm:" pr-[var(--rem12)]",md:" pr-[var(--rem12)]",lg:" pr-[var(--rem16)]"},i={sm:" pr-[var(--rem8)]",md:" pr-[var(--rem12)]",lg:" pr-[var(--rem16)]"},p={sm:" pl-[var(--rem12)]",md:" pl-[var(--rem16)]",lg:" pl-[var(--rem16)]"},m={sm:" pr-[var(--rem12)]",md:" pr-[var(--rem16)]",lg:" pr-[var(--rem16)]"},u=({leadingIcon:e,size:a,hasBadge:r,dropdown:t,appearance:l})=>{if(l===o.Fill||l===o.Hug)return;let n=" ";return n+=e?d[a]:p[a],n+=t?i[a]:r?c[a]:m[a],n},b="inline-flex flex-col text-secondary-plain-weak font-semibold relative";return{get T(){return o},a:({attributes:a,label:t,size:n=l.Medium,leadingIcon:d,hasBadge:c,badgeCount:i,dropdown:p,role:m="tab",selected:g,selectedTabBorderColor:v="bg-secondary-plain",hoverTabBorderColorClass:h="group-hover:block group-hover:bg-secondary-plain-weak",disabled:x,appearance:f=o.BottomBorder})=>{const{html:E,createElement:T}=e.g(),S={classes:"tab-bottom-border group",selected:"!text-neutral-content-strong tab-selected",badge:r.b({appearance:r.B.NEUTRAL,content:i})},y={[o.Pill]:{classes:"rounded-full",selected:"bg-secondary-background-selected !text-neutral-content-strong",badge:r.b({appearance:r.B.ALERT,content:i}),disabled:"text-neutral-content-disabled",interactive:"hover:no-underline hover:bg-secondary-background-hover hover:text-secondary-content active:bg-secondary-background"}},I=y[f]??S,M=null==a?.href?"button":"a",$=[b,I.classes,g?I.selected:null,x?"text-interactive-content-disabled":"hover:no-underline hover:text-secondary-plain",u({hasBadge:c,leadingIcon:d,dropdown:p,size:n,appearance:f}),f===o.Fill?"items-center grow":f===o.Hug?"grow-0":null,null==a?.href?"rounded-none bg-transparent p-0 border-none h-auto":null,f===o.Pill?x?y.disabled:I.interactive:null].filter((e=>null!==e)).join(" "),B=`${v} ${x?"":h}`,D=E` <span class="inline-flex"> <span class="inline-flex flex-row items-center gap-xs ${n===l.Small&&f===o.Fill?s[l.Medium]:s[n]}"> ${[d??"",t?E`<span>${t}</span>`:""]} </span> <span class="inline-flex flex-row items-center gap-xs"> ${[c?E`<span class="self-start mt-[-0.25rem]${i?"":" ml-[-.25rem]"}"> ${I.badge} </span>`:"",p?e.Y({size:n===l.Small?e.I.Small:e.I.Medium}):""]} </span> </span> <span class="hidden group-[.tab-bottom-border.tab-selected]:block bottom-border-selected flex-grow h-[2px] -mt-[2px] pointer-events-none ${B} rounded-full absolute bottom-0 left-0 right-0"></span> `,L="boolean"==typeof g?`${g}`:void 0;let _;_="boolean"==typeof a?.["aria-selected"]?`${a["aria-selected"]}`:"true"===a?.["aria-selected"]||"false"===a?.["aria-selected"]?a["aria-selected"]:void 0;const R=a&&"role"in a,P=R&&void 0!==a.role||!R?L??_:void 0;return x?T("span",{...a,"aria-selected":P,className:$,rpl:!0},D):T(M,{...a,"aria-selected":P,className:$,role:R?a.role:m,rpl:!0,rplSelected:g},D)},get b(){return l},t:({attributes:l,appearance:n=o.Pill,label:s,size:d=a.s.Medium,selectedIcon:c,unselectedIcon:i,hasBadge:p,badgeCount:m,tabPanelID:u,dropdown:b,selected:g,role:v="tab"})=>{const{html:h}=e.g();let x="mt-[-0.125rem]";m||(x+=" ml-[-.25rem]");const f=[b||g||!i?"":i,!b&&g&&c?c:"",s?h`<span>${s}</span>`:"",p?h`<span class="${x}"> ${r.b({appearance:r.B.ALERT,content:m})} </span>`:""],E=b?f:h`<span class="inline-flex flex-col"> <span class="inline-flex flex-row items-center gap-xs"> ${f} </span> ${g&&n===o.BottomBorder?h` <span class="flex-grow ${d===a.s.Small||d===a.s.ExtraSmall?"h-[2px] -mt-[2px]":"h-2xs -mt-2xs"} pointer-events-none bg-primary rounded-full"></span>`:""} </span>`,T=[l?.className??"",n===o.BottomBorder?"rounded-none bg-transparent hover:bg-secondary-background-hover hover:text-secondary-content active:bg-secondary-background":""].join(" "),S={attributes:{"aria-selected":g?"true":"false","aria-controls":u,...l,className:T},children:E,size:d,appearance:"bottom-border"===n?"tab":void 0,shape:"bottom-border"===n?void 0:"pill",role:v};return h` ${b?t.p({...S,selectedIcon:c,unselectedIcon:i,selected:g}):a.he({...S})} `}}}));
SML.dm("hotkeysmodalclientjs3f8675a3",["shelle48e5956","iconc33661e6","expandablesectionheader41e0cfd1","tabbuttonb7771ce6","communityonboardingcompletedmodalclientjsf4f5192c","faceplatetabpanelb6d69013","faceplatetabgroupa59ee035","index970155ae","huiuserdrawerclientjs91e856a7","TinyGesture26737d23","agegatestandaloneclientjsb13e879d","faceplatetablistb81db8b2","helpers4792ac4d","constants9e09f052","communitypickerf331f77f","shouldconttruncated81ee171"],(async(t,e,a,s)=>{const o={shift:"⇧",ctrl:"^",alt:"⌥",arrowup:"↑",arrowdown:"↓",arrowleft:"←",arrowright:"→",enter:"↵ Enter",meta:"⌘"," ":"Space"},i=[t.gz.NAVIGATION,t.gz.ACTION,t.gz.MEDIA];var r;!function(t){t.TOGGLE="shreddit-hotkeys-modal:toggle",t.OPENED="shreddit-hotkeys-modal:show"}(r||(r={}));let l=class extends e.s{constructor(){super(...arguments),this.activeTabIndex=1,this.registry=t.gr,this.disableShortcuts=!1,this.open=!1,this.modalRef=t.aq(),this.hotkeysMap={},this.hotkeysController=new t.dx(this),this.toggleDialog=()=>{this.dialog&&(this.dialog?.open?this.dialog.hide():this.dialog?.showModal())},this.transformNonModifierKey=t=>{const e=t.toLowerCase(),a=e in o?o[e]:t.toUpperCase();return this.getKeyMarkup(a)},this.getKeyMarkup=t=>e.x`${a.d(e.x`<span class="bg-neutral-background-weak-hover px-2xs rounded-[0.125rem]">${t}</span>`)}`,this.useModifierBasedOnOS=()=>navigator.userAgent.includes("Mac")?o.meta:o.ctrl,this.transformModifierKey=t=>{const a=[],s=this.getKeyMarkup(t.key.toUpperCase());return t.ctrl&&a.push(o.ctrl),t.alt&&a.push(o.alt),t.shift&&a.push(o.shift),t.meta&&a.push(this.useModifierBasedOnOS()),a?e.x`${this.getKeyMarkup(a.join(" + "))} + ${s}`:s},this.transformKey=t=>"string"==typeof t?this.transformNonModifierKey(t):this.transformModifierKey(t),this.renderHotkey=t=>{const a=[];for(let s=0;s<t.length;s++)s>0&&a.push(e.x`<span>OR</span>`),a.push(this.transformKey(t[s]));return e.x`<span class="flex gap-2xs">${a}</span>`},this.createKeyMap=()=>{if(this.registry){this.hotkeysMap={};for(const[t,e]of Object.entries(this.registry)){const{type:a}=e,s={...e,icon:this.renderHotkey(e.keys),id:t};this.hotkeysMap[a]?this.hotkeysMap[a].push(s):this.hotkeysMap[a]=[s]}}},this.createHotkeyCategoryTab=e=>{const a=e===t.gz.NAVIGATION?"page-1":e===t.gz.ACTION?"page-2":"page-3";return s.a({label:t.gA[e](),size:s.b.Medium,attributes:{slot:a,onclick:()=>{this.activeTabIndex=parseInt(a.replace(/[a-zA-Z-]/g,""))},"data-test-id":e}})},this.createHotKeyListItem=t=>a.l({label:t.label(),trailingSlot:t.icon,disabled:this.disableShortcuts,attributes:{"data-test-id":t.id},innerClassName_DO_NOT_USE:"!px-0"}),this.dispatchHotkeyToggle=e=>{const a=e.target,{checked:s}=a;this.dispatchEvent(new CustomEvent(r.TOGGLE,{composed:!0,bubbles:!0,detail:{checked:s,target:a}})),t.a(this,t.b({source:"settings",action:"save",noun:"hotkey"},{setting:{old_value:this.convertToOnOff(!a.checked),value:this.convertToOnOff(a.checked)}})),this.disableShortcuts=!s},this.convertToOnOff=t=>t?"on":"off"}get dialog(){return this.shadowRoot?.querySelector('[dialog-id="hotkeys-dialog"]')}connectedCallback(){super.connectedCallback(),this.createKeyMap(),this.hotkeysController.subscribe(t.dy.SHOW_SHORTCUTS,this.toggleDialog)}disconnectedCallback(){super.disconnectedCallback(),this.hotkeysController.unsubscribe(t.dy.SHOW_SHORTCUTS,this.toggleDialog)}willUpdate(t){t.has("registry")&&this.createKeyMap()}render(){const s=!this.disableShortcuts,o=e.x` <ac-track trigger="view" san="settings|click|hotkey_help"></ac-track> <rpl-modal-card auto-close class="min-w-[288px] max-w-[640px]"> <h2 slot="title"> Keyboard shortcuts </h2> ${t.r({appearance:"secondary",attributes:{slot:"close-button","aria-label":"Close dialog"},leadingIcon:e.C({size:e.I.Small}),size:t.s.Small})} <div> <div> <p> Boost your efficiency with keyboard shortcuts! Get into the conversation faster without reaching for your mouse. Below is a complete list of available shortcuts, organized by category. </p> <faceplate-tabgroup pages="${Object.keys(t.gz).length}"> ${[this.createHotkeyCategoryTab(t.gz.NAVIGATION),this.createHotkeyCategoryTab(t.gz.ACTION),this.createHotkeyCategoryTab(t.gz.MEDIA)]} </faceplate-tabgroup> <faceplate-tabpanel pages="${Object.keys(t.gz).length}" pageindex="${this.activeTabIndex}" style="opacity:${this.disableShortcuts?".60":"1"}"> ${i.map(((t,a)=>e.x`<ul slot="page-${a+1}" class="p-0 m-0"> ${this.hotkeysMap[t]?.map((t=>this.createHotKeyListItem(t)))} </ul>`))} </faceplate-tabpanel> </div> <hr> ${a.l({label:"Enable shortcuts",innerClassName_DO_NOT_USE:"!px-0",attributes:{"data-test-id":"toggles"},trailingSlot:e.x`<faceplate-switch-input ?checked="${s}" @input="${this.dispatchHotkeyToggle}"> </faceplate-switch-input>`})} </div> <ac-track trigger="view" san="settings|click|hotkey_help"></ac-track> </rpl-modal-card>`;return e.x`<rpl-dialog-sheet ${t.as(this.modalRef)} dialog-id="hotkeys-dialog" ?open="${this.open}" .litTemplateChildren="${o}"></rpl-dialog-sheet>`}};return l.styles=[t.t],t._([t.d()],l.prototype,"activeTabIndex",void 0),t._([t.n({type:Object})],l.prototype,"registry",void 0),t._([t.n({type:Boolean,attribute:"disable-shortcuts"})],l.prototype,"disableShortcuts",void 0),t._([t.n({type:Boolean})],l.prototype,"open",void 0),t._([t.n({type:Object})],l.prototype,"modalRef",void 0),l=t._([t.e("shreddit-hotkeys-modal")],l),{get S(){return r}}}));
SML.dm("hotkeysloaderclientjs8e4fa9ee",["shelle48e5956","hotkeysmodalclientjs3f8675a3","iconc33661e6","communityonboardingcompletedmodalclientjsf4f5192c","huiuserdrawerclientjs91e856a7","TinyGesture26737d23","agegatestandaloneclientjsb13e879d","faceplatetabpanelb6d69013","faceplatetabgroupa59ee035","faceplatetablistb81db8b2","index970155ae","helpers4792ac4d","constants9e09f052","communitypickerf331f77f","expandablesectionheader41e0cfd1","tabbuttonb7771ce6","shouldconttruncated81ee171"],(async(e,t,s)=>{let a=e.B,i=e.k,n=class extends s.s{constructor(){super(...arguments),this.registry=e.gr,this.pubsub=new e.P(this),this.compareModifiers=(e,t)=>!!e==!!t,this.hasMatchingModifiers=(e,t)=>{if(!t)return!1;const{metaKey:s,altKey:a,shiftKey:i,ctrlKey:n}=e,{meta:o,alt:r,ctrl:l,shift:c}=t,E=!(navigator.userAgent.includes("Mac")||!o||l||!n);return(this.compareModifiers(s,o)||E)&&(this.compareModifiers(n,l)||E)&&this.compareModifiers(i,c)&&this.compareModifiers(a,r)},this.getContextualSubscriber=(t,s,a)=>{const i=t.composedPath();return Array.from(a).find((a=>this.hasMatchingModifiers(t,e.gs.keys[s]?.[a])&&void 0===e.gt[a]&&i?.find((t=>e.gu.has(t)))))},this.getGlobalSubscriber=(t,s,a)=>Array.from(a).find((a=>this.hasMatchingModifiers(t,e.gs.keys[s]?.[a]))),this.publishHotkeyEvent=async t=>{const s=t.key.toLowerCase(),a=e.gs.keys[s],n=this.getContextualSubscriber(t,s,e.gv),o=this.getGlobalSubscriber(t,s,e.gw),r=n??o;if(a&&(this.enabled||"?"===s)&&(r&&a[r].allowFromInput||!t.composedPath().find((e=>e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement||e instanceof HTMLElement&&e.hasAttribute("contenteditable"))))){if(a[e.dy.SHOW_SHORTCUTS]&&await i({name:e.fR,bodyParams:{enabled:encodeURIComponent(!!this.enabled),open:"true"}}),n)return this.pubsub.publish(e.T.Hotkeys,{id:n}),void this.cancelEvent(t);o&&(this.pubsub.publish(e.T.Hotkeys,{id:o}),this.cancelEvent(t))}},this.cancelEvent=e=>{e.preventDefault(),e.stopImmediatePropagation()},this.onHotkeysToggle=async t=>{const{detail:{checked:s,target:i}}=t;try{const t=await a({operation:e.O.UpdateAccountPreferences,variables:{input:{isHotkeysEnabled:s}}});if(this.enabled=s,t.errors.length>0)throw new Error("Could not save setting")}catch{i.checked=!s;const t=e.c("faceplate-alert",{level:e.x.error,cause:"uncategorized",message:"We had some issues saving your changes. Please try again."});this.dispatchEvent(t)}}}connectedCallback(){super.connectedCallback(),document.addEventListener("keydown",this.publishHotkeyEvent),document.addEventListener(t.S.TOGGLE,this.onHotkeysToggle)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.publishHotkeyEvent),document.removeEventListener(t.S.TOGGLE,this.onHotkeysToggle)}willUpdate(t){t.has("enabled")&&this.enabled&&!Object.keys(e.gs.keys).length?e.gx(this.registry):t.has("registry")&&(e.gy(),e.gx(this.registry))}};e._([e.n({type:Object})],n.prototype,"registry",void 0),e._([e.n({type:Boolean})],n.prototype,"enabled",void 0),n=e._([e.e("shreddit-hotkeys-controller")],n)}));
SML.dm("shredditfeed12f9d370",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d","feeds869c579e","index751e2b35","translationfeedbackmodalclientjse1d4812d","hotkeysloaderclientjs8e4fa9ee"],(async(e,t,s,o,i)=>{const r="virtualized-placeholder";class n{constructor(e){this.topPadding=0,this.topStack=[],this.updatesSinceConnect=0,(this.host=e).addController(this)}hostConnected(){this.updatesSinceConnect=0}hostDisconnected(){}async update(){if(await this.host.updateComplete,this.updatesSinceConnect++,this.updatesSinceConnect<3)return;const{top:e}=this.host.getBoundingClientRect(),t=-1*(e+this.topPadding+window.innerHeight);this._virtualizeTop(t)}virtualizeTopElements(e){let t=e;const s=[];let o=this.host.querySelector(`:not(.${r})`);for(;o;){const{height:e}=o.getBoundingClientRect();if(t-=e,t<0)break;const i=l(e);s.push({node:o,placeholder:i,height:e}),o=o.nextElementSibling}s.forEach((e=>{const{node:t,placeholder:s,height:o}=e;this.topPadding+=o,this.host.replaceChild(s,t),this.topStack.push(e)}))}devirtualizeTopElements(e){let t=e,s=0;const o=[];for(;t<0&&this.topStack.length>0;){const e=this.topStack.pop();if(!e)break;const{height:i}=e;t+=i,s-=i,o.push(e)}this.topPadding+=s,o.forEach((e=>{const{node:t,placeholder:s}=e;this.host.replaceChild(t,s)}))}_virtualizeTop(e){e>1e3?this.virtualizeTopElements(e):e<0&&this.devirtualizeTopElements(e)}}function l(e){const t=document.createElement("div");return t.classList.add(r),t.style.height=`${e}px`,t}class a{constructor(t){this.initializeHotkeys=()=>{"enabled"===e.dw("shreddit_hotkeys_m1")&&(this.subscriberController?.subscribe(e.dy.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.subscribe(e.dy.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.subscribe(e.dy.UPVOTE,this.upvote),this.subscriberController?.subscribe(e.dy.DOWNVOTE,this.downvote),this.subscriberController?.subscribe(e.dy.TOGGLE_EXPANDO,this.toggleExpando),this.subscriberController?.subscribe(e.dy.COPY_POST_OR_COMMENT_LINK,this.copyPostLink),this.subscriberController?.subscribe(e.dy.HIDE_POST,this.hidePost),this.subscriberController?.subscribe(e.dy.TOGGLE_SAVE,this.toggleSave))},this.cleanupHotkeys=()=>{"enabled"===e.dw("shreddit_hotkeys_m1")&&(this.subscriberController?.unsubscribe(e.dy.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.unsubscribe(e.dy.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.unsubscribe(e.dy.UPVOTE,this.upvote),this.subscriberController?.unsubscribe(e.dy.DOWNVOTE,this.downvote),this.subscriberController?.unsubscribe(e.dy.TOGGLE_EXPANDO,this.toggleExpando),this.subscriberController?.unsubscribe(e.dy.COPY_POST_OR_COMMENT_LINK,this.copyPostLink),this.subscriberController?.unsubscribe(e.dy.HIDE_POST,this.hidePost),this.subscriberController?.unsubscribe(e.dy.TOGGLE_SAVE,this.toggleSave))},this.findShredditPost=e=>["shreddit-post","shreddit-ad-post","shreddit-profile-comment"].includes(e?.tagName.toLowerCase()??"")?e:e?.querySelector("shreddit-post, shreddit-ad-post, shreddit-profile-comment"),this.customHotkeyPostTraversal=(e,t)=>{if(!t)return;const s="faceplate-batch"===t.nextElementSibling?.tagName.toLowerCase(),o="faceplate-batch"===t.previousElementSibling?.tagName.toLowerCase();if(s||o)return e===i.P.NEXT?t.nextElementSibling?.firstElementChild:t.previousElementSibling?.lastElementChild;if("faceplate-batch"===t.parentElement?.tagName.toLowerCase()){if(e===i.P.NEXT&&!t.nextElementSibling)return t.parentElement.nextElementSibling;if(e===i.P.PREV&&!t.previousElementSibling)return t.parentElement.previousElementSibling}},this.nextPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(i.P.NEXT),this.host.trackEvent(e.b({source:"post",action:"next",noun:"post"}))},this.prevPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(i.P.PREV),this.host.trackEvent(e.b({source:"post",action:"previous",noun:"post"}))},this.upvote=()=>{this.useVotingMethodsFromChildren("upvote")},this.downvote=()=>{this.useVotingMethodsFromChildren("downvote")},this.toggleExpando=()=>{this.postOrCommentTraversalController?.isCurrentPost&&this.postOrCommentTraversalController.current?.hotkeyController?.onToggleExpando()},this.copyPostLink=()=>{this.postOrCommentTraversalController?.isCurrentPost&&this.postOrCommentTraversalController?.current?.hotkeyController?.onCopyLink()},this.hidePost=()=>{this.postOrCommentTraversalController?.isCurrentPost&&this.postOrCommentTraversalController?.current?.hotkeyController?.onToggleHide()},this.toggleSave=()=>{if(this.postOrCommentTraversalController?.isCurrentPost)this.postOrCommentTraversalController?.current?.hotkeyController?.onToggleSave();else{const e=this.postOrCommentTraversalController?.current?.overlowMenuItemProps?.find((e=>"save"===e.id));e?.onClick?.()}},this.useVotingMethodsFromChildren=async e=>{const t=void 0;let s;s=this.postOrCommentTraversalController?.isCurrentPost?this.postOrCommentTraversalController?.current:this.postOrCommentTraversalController?.current?.querySelector("shreddit-comment-action-row"),s&&(s.interactionFromHotkey=!0,"upvote"===e?await s.handleUpvote(t):await s.handleDownvote(t),s.interactionFromHotkey=!1)},this.host=t,t.addController(this)}hostConnected(){this.subscriberController=new e.dx(this.host),this.postOrCommentTraversalController=new i.a(this.host,{type:i.b.FEED,customPostOrCommentDetection:this.findShredditPost,getFirstElement:()=>this.host.firstElementChild,customTraversal:this.customHotkeyPostTraversal}),this.initializeHotkeys()}hostDisconnected(){this.cleanupHotkeys()}}const h=e.g(t.s);let d=class extends h{static get styles(){return[e.t,t.a`:host{display:flex;flex-direction:column}`]}get loadAfterController(){return this._loadAfterController}constructor(){super(),this.navigationSessionId="",this.loadBeforeController=new s.I(this),this._loadAfterController=null,this.isFeedTranslatable=!1,this.isTranslationsEligible=!1,this.omitLoadAfter=!1,this.refreshPillDismissThreshold=1200,this.showRefreshPill=!1,this.refreshPillRef=e.aq(),this.virtualization=new n(this),this.handleVirtualization=s.M((()=>{this.virtualization?.update()}),200,!0),this.onDocumentScroll=()=>{this.handleVirtualization(),this.updateRefreshPillStyle()},this.updateRefreshPillStyle=()=>{const e=this.refreshPillRef.value;e&&this.refreshPillDismissThreshold&&!isNaN(this.scrollPositionAtRefreshShow??NaN)&&window.scrollY-this.scrollPositionAtRefreshShow>this.refreshPillDismissThreshold&&(e.classList.add("opacity-0"),e.classList.remove("opacity-100"),setTimeout((()=>{this.showRefreshPill=!1,this.scrollPositionAtRefreshShow=void 0}),1e3))},this.reloadFeed=(e={})=>{window.scrollBy({top:this.getBoundingClientRect().top-56,behavior:"instant"}),this.dispatchEvent(new CustomEvent(s.a7,{detail:{queryParameters:e}}))},this.trackRefresh=(t,s)=>{this.trackEvent(e.b({source:"feed",action:"refresh",noun:"feed"},{timer:{millis:1e3*t,type:e.a$.Background},action_info:{type:s}}))},this.handleVisibilityChange=e=>{e?this.backgroundedAtTime&&(this.backgroundTimeElapsedInSeconds=(Date.now()-this.backgroundedAtTime)/1e3,this.backgroundedAtTime=void 0,this.backgroundAutoRefreshTimeThreshold&&!isNaN(this.backgroundAutoRefreshTimeThreshold)&&this.backgroundTimeElapsedInSeconds>=this.backgroundAutoRefreshTimeThreshold?(this.reloadFeed({refresh:o.B.AUTOMATIC}),this.showRefreshPill=!1,this.trackRefresh(this.backgroundTimeElapsedInSeconds,"automatic_refresh")):this.backgroundManualRefreshTimeThreshold&&!isNaN(this.backgroundManualRefreshTimeThreshold)&&this.backgroundTimeElapsedInSeconds>=this.backgroundManualRefreshTimeThreshold&&(this.showRefreshPill=!0,this.scrollPositionAtRefreshShow=window.scrollY)):(this.backgroundedAtTime=Date.now(),this.backgroundTimeElapsedInSeconds=void 0)},this.pubsub=new e.P(this),this.reloadController=new s.a8(this,{mode:e.o.Contents,containerSelector:"body"}),"enabled"===e.dw("shreddit_hotkeys_m1")&&(this.hotkeyController=new a(this))}async connectedCallback(){super.connectedCallback(),this.omitLoadAfter||(this._loadAfterController=new s.I(this,{rootMargin:2*window.innerHeight+"px"})),document.addEventListener("scroll",this.onDocumentScroll),this.reloadUrl&&(this.reloadController.reloadUrl=this.reloadUrl),"scrollRestoration"in history&&(history.scrollRestoration="manual"),e.aT(this.handleVisibilityChange)}updated(e){this.hasUpdated&&e.has("reloadUrl")&&this.reloadUrl&&(this.reloadController.reloadUrl=this.reloadUrl)}handleAfterSlotChange(e){this.loadAfterController?.handleSlotChange(e)}async disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("scroll",this.onDocumentScroll),this.pubsub.unsubscribe,e.aU(this.handleVisibilityChange)}render(){return this.reloadController.isLoading?t.x`<shreddit-loading></shreddit-loading>`:t.x`<faceplate-screen-reader-content> <h1>Feed</h1> </faceplate-screen-reader-content> ${this.showRefreshPill?t.x`<div ${e.as(this.refreshPillRef)} class="sticky h-0 top-[56px] self-center z-10 transition-opacity ease-in-out opacity-100 duration-1000"> ${e.r({appearance:"primary",size:e.s.Small,children:t.x`✨ New Posts`,trailingIcon:t.bd({size:t.I.ExtraSmall,attributes:{className:"ml-xs"}}),attributes:{className:"!px-md mt-xs xs:mt-md shadow-sm",onclick:()=>{this.reloadFeed({refresh:o.B.MANUAL}),this.showRefreshPill=!1,this.trackRefresh(this.backgroundTimeElapsedInSeconds??0,"refresh_pill")}}})} </div>`:t.A} <slot @slotchange="${this.loadBeforeController?.handleSlotChange}" name="load-before"></slot> <slot></slot> <slot @slotchange="${this.handleAfterSlotChange}" name="load-after"></slot> ${this.isTranslationsEligible?t.x`<translation-feedback-modal id="${e.dl.ID.FEED_POST_FEEDBACK_MODAL}"></translation-feedback-modal>`:t.x``}`}};e._([e.n({type:String,attribute:"navigation-session-id"})],d.prototype,"navigationSessionId",void 0),e._([e.n({type:Boolean,attribute:"is-feed-translatable"})],d.prototype,"isFeedTranslatable",void 0),e._([e.n({type:Boolean,attribute:"is-translations-eligible"})],d.prototype,"isTranslationsEligible",void 0),e._([e.n({type:String,attribute:"reload-url"})],d.prototype,"reloadUrl",void 0),e._([e.n({type:Boolean,attribute:"omit-load-after"})],d.prototype,"omitLoadAfter",void 0),e._([e.n({type:Number,attribute:"bg-auto-refresh-time-threshold"})],d.prototype,"backgroundAutoRefreshTimeThreshold",void 0),e._([e.n({type:Number,attribute:"bg-manual-refresh-time-threshold"})],d.prototype,"backgroundManualRefreshTimeThreshold",void 0),e._([e.n({type:Number,attribute:"refresh-pill-dismiss-threshold"})],d.prototype,"refreshPillDismissThreshold",void 0),e._([e.d()],d.prototype,"showRefreshPill",void 0),d=e._([e.e("shreddit-feed")],d)}));
SML.dm("shredditspoilerd9cdac7e",["shelle48e5956","iconc33661e6"],(async(e,r)=>{let t=class extends r.s{constructor(){super(...arguments),this.revealed=!1,this.blockRevealOnClick=!1}static get styles(){return r.a`.outer{background:var(--color-category-spoiler);border-radius:2px;cursor:pointer;line-height:21px;transition:background ease-out 1s;border:none;padding:0;font:inherit;color:inherit;margin-right:.25rem}.inner{opacity:0;transition:opacity ease-out 1s;margin-right:-.25rem}.revealed.outer{background:0 0}.revealed .inner{opacity:1}`}revealSpoiler(e){this.revealed||e.preventDefault(),this.revealed=!0}handleKeyPress(e){"Enter"!==e.key&&" "!==e.key||this.revealSpoiler(e)}render(){return this.blockRevealOnClick?r.x` <span class="outer"> <span class="inner" aria-hidden="true"> <slot></slot> </span> </span> `:r.x` <span class="outer${this.revealed?" revealed":""}" title="Reveal Spoiler" role="button" @click="${this.revealSpoiler}" @keypress="${this.handleKeyPress}" tabindex="0"> <span class="inner" aria-hidden="${!this.revealed}"> <slot></slot> </span> </span> `}};e._([e.d()],t.prototype,"revealed",void 0),e._([e.n({type:Boolean,attribute:"block-reveal-on-click"})],t.prototype,"blockRevealOnClick",void 0),t=e._([e.e("shreddit-spoiler")],t)}));
SML.dm("openinterstitialmodal729b0136",["shelle48e5956","iconc33661e6"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.refreshAndAppendConsent=e=>{if("click"===e.type||"Enter"===e.key||"Space"===e.key){const e=new URL(window.location.href);e.searchParams.set("consent","true"),this.redirect(e)}},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return t.x`<slot name="continue" @click="${this.refreshAndAppendConsent}" @keypress="${this.refreshAndAppendConsent}"></slot> <slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};r.styles=[e.t],r=e._([e.e("blocked-profile-interactions")],r);let n=class extends t.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return t.x`<slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};n.styles=[e.t],n=e._([e.e("back-to-reddit")],n),customElements.whenDefined("faceplate-modal").then((()=>{const e=document.querySelector("#over-18-interstitial-modal");e?.showModal({blur:!0})}))}));
SML.dm("passwordrecoveryfc50288b",["shelle48e5956"],(async e=>{function t(e){localStorage.removeItem(function(e){return`chat:${e}`}(e))}function o(){(function(){let e=["access-token","matrix-user-id","matrix-access-token"];for(let o of e)t(o)})(),function(){try{window.indexedDB.deleteDatabase("matrix-js-sdk:reddit-chat-sync")}catch{}}()}function n(){e.v.remove(e.gg),e.v.remove(e.az),e.v.remove(e.dM),e.v.remove(e.gf),e.v.remove(e.gh),o()}const r="comment-draft-items-";var c;!function(e){e[e.Submit=0]="Submit",e[e.Discard=1]="Discard",e[e.Other=2]="Other"}(c||(c={}));let a=window.location;return{C:r,get D(){return c},a:function(e){return new Promise(((t,o)=>{e?window.google?.accounts?.id?window.google.accounts.id.revoke(e,(({successful:e,error:n})=>{e?t():o(n)})):o("Google API is not ready"):o("Google account id is not available")}))},b:(t,o)=>e.b({source:t,action:"view",noun:"banner"},{action_info:{reason:o}}),e:(t,o)=>e.b({source:t,action:"submit",noun:"email"},{action_info:{success:o}}),g:()=>!!document.querySelector("shreddit-app")?.hasAttribute?.("user-logged-in"),l:async function(){await fetch(e.bh.Logout,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({0:"1",csrf_token:e.v.get("csrf_token")})}),window.google?.accounts?.id?.disableAutoSelect?.(),e.v.remove(e.hi),e.v.remove(e.hj),e.l.removeItem(e.L.RecentPages),e.l.removeItem(e.L.RecentCommunities),e.l.removeItem(e.L.RecentSearches),n(),Object.keys(localStorage).filter((e=>e.startsWith(r))).forEach((e=>localStorage.removeItem(e))),localStorage.removeItem(e.L.DraftsCoachMarkSeen),a.reload()},p:function(e){try{return new URL(e,"https://www.reddit.com")}catch(e){return}},r:()=>e.b({source:e.aY.ResetPassword,action:"submit",noun:"reset_complete"}),s:()=>{e.l.setItem(e.L.LoginTime,(new Date).toString())}}}));
SML.dm("confirmover18b76b2940",["shelle48e5956","iconc33661e6","passwordrecoveryfc50288b"],(async(e,r,s)=>{let t=class extends r.s{constructor(){super(...arguments),this.country="",this.onClick=()=>{this.confirmOver18()},this.onKeyPress=e=>{"Enter"!==e.key&&"Space"!==e.key||this.confirmOver18()}}redirect(e){window.location.href=e.toString()}refreshAndRememberSEO(){const r=new URL(window.location.href);r.searchParams.set(e.a2,"1"),this.redirect(r)}setOver18Cookie(){e.$({country:this.country,name:e.a3,value:"true",options:e.a0})}async confirmOver18(){s.g()?await e.B({operation:e.O.UpdateProfileSettings,variables:{input:{isNsfw:!0}}}):this.setOver18Cookie(),this.refreshAndRememberSEO()}render(){return r.x`<slot @click="${this.onClick}" @keypress="${this.onKeyPress}"></slot>`}};t.styles=[e.t],e._([e.n({type:String})],t.prototype,"country",void 0),t=e._([e.e("confirm-over-18")],t)}));
SML.dm("faceplateradioinput3de18d3b",["shelle48e5956","agegatestandaloneclientjsb13e879d","iconc33661e6","helpers4792ac4d","constants9e09f052","communitypickerf331f77f"],(async(e,t,o,s)=>{const n=new WeakMap;let c=class extends s.C{constructor(){super(),this.ariaRole="radio"}static get styles(){return[super.styles,o.a`:host(:focus) .icon{border-radius:100%}:host{margin:var(--spacer-sm)}:host([checked]) .icon,:host([indeterminate]) .icon{display:inline-block;color:var(--color-input-radio-hover)}:host .icon{color:var(--color-input-radio)}:host(:hover) .icon{color:var(--color-input-radio-hover)}`]}connectedCallback(){super.connectedCallback(),this._contextKey=t.d(this.name,this.getRootNode()),n.has(this._contextKey)?n.get(this._contextKey).add(this):n.set(this._contextKey,new Set([this]))}disconnectedCallback(){super.disconnectedCallback(),this._contextKey&&n.get(this._contextKey)?.delete(this)}handleInteraction(){if(this._contextKey){const e=n.get(this._contextKey);if(e)for(const t of e)t!==this&&(t.checked=!1)}this.checked=!0,super.handleInteraction()}render(){const e={size:o.I.Small,attributes:{className:"icon"}};return o.x` ${this.checked?o.f(e):o.h(e)} ${super.render()} `}};return c=e._([e.e("faceplate-radio-input")],c),{get FaceplateRadioInput(){return c}}}));
SML.dm("faceplateformcff507f5",["shelle48e5956","iconc33661e6","communitypickerf331f77f"],(async(t,e,i)=>{function n(t){if(i.i(t)&&(t.checked=t.hasAttribute("checked")),i.e(t))t.formResetCallback&&t.formResetCallback();else if(t instanceof HTMLInputElement)t.value=t.getAttribute("value")||"";else if(t instanceof HTMLTextAreaElement)t.value=t.textContent||"";else if(i.f(t))for(const e of t.options)e.selected=e.hasAttribute("selected");else t instanceof HTMLOutputElement&&(t.value=t.defaultValue)}function s(e){const i={};for(const n of e){const[e,s]=n;if(s instanceof File)throw t.eZ(e);Object.prototype.hasOwnProperty.call(i,e)?Array.isArray(i[e])?i[e].push(s):i[e]=[i[e],s]:i[e]=s}return i}const a=(t,e=0)=>{if(6!==e)return t instanceof HTMLInputElement||t instanceof HTMLButtonElement?t:t?a(t.parentElement,e+1):void 0};function o(e){let i;document.activeElement&&document.activeElement!==document.body&&(i=t.e_(document.activeElement)),!i&&e&&e.target instanceof Element&&(i=function(t){var e;for(const i of null!==(e=t.composedPath())&&void 0!==e?e:[])if((i instanceof HTMLInputElement||i instanceof HTMLButtonElement)&&"submit"===i.type)return i}(e));const n=i instanceof HTMLButtonElement||i instanceof HTMLInputElement;if(i&&e&&!n&&(i=a(i.parentElement)),i)return(i instanceof HTMLInputElement||i instanceof HTMLButtonElement)&&"submit"===i.type?i:void 0}function r(t){return t instanceof HTMLElement&&Object.prototype.hasOwnProperty.call(t.dataset,"faceplateConstraint")}function l(e,i,n){return t.c("faceplate-alert",{level:t.x.error,message:t.f2("Form submission failed"),meta:null==e?void 0:e.toString(),sourceElement:i,cause:n})}const c={[t.bE.UrlEncoded]:t.e$,[t.bE.JSON]:function(t){return JSON.stringify(s(t))},[t.bE.FormData]:t=>t};let d=class extends e.s{constructor(){super(...arguments),this.accept="text/vnd.reddit.partial+html, application/json",this.enctype=t.bE.UrlEncoded,this.action="",this.disabled=!1,this.method=t.bu.Post,this.target="",this.partialMode=t.o.Append,this.novalidate=!1,this.validationTrigger="focusout",this._events=new t.E(this),this.formSubmissionInProgress=!1,this.rulesDidChange=!1,this.focusedInputForValiditySinceLastSubmit=!1,this._shouldRebuildElements=!0,this._elements={},this._validationObserverCount=0,this._asyncInputOperations=0,this.requester=t.f0,this.encoders=c,this._handleInput=this._events.define("input",(()=>{this._shouldRebuildElements=!0})),this._handleFormSubmit=this._events.define("submit",(t=>{const e=t.target;if(!(e&&e instanceof HTMLFormElement))return;t.preventDefault();const i=o(t);this.submit(e.action,void 0,i)})),this._handleClick=this._events.define("click",(t=>{const e=o(t);e&&(t.preventDefault(),this.submit(this.action,void 0,e))})),this._handleFocusIn=this._events.define("focusin",(t=>{if(i.g(t.target)&&r(t.target))if(this.formSubmissionInProgress){const e=this;t.target.addEventListener("input",(function t(i){var n;e.validateElementAgainstRules(i.target)&&(null===(n=i.target)||void 0===n||n.removeEventListener("input",t))}))}else t.target.setCustomValidity("")})),this.configureValidation=()=>this.addEventListener(this.validationTrigger,(t=>{i.g(t.target)&&(r(t.target)&&this.validateElementAgainstRules(t.target),i.F in t.target.constructor&&t.target.syncInputValidity(),this.notifyObservers(t.target))})),this._handleFaceplateAlert=this._events.define("faceplate-alert",(e=>{const{level:i,name:n,message:s}=e.detail;i===t.x.error&&n&&s&&this.invalidateFieldWithMessage(n,s)&&(e.target.remove(),e.stopPropagation())})),this.register=t=>{this.dispatchEvent(new CustomEvent("_faceplate-register-input",{detail:{target:t}}))},this._handleRegister=this._events.define("_faceplate-register-input",(t=>{var e;t.stopImmediatePropagation(),t.detail.register&&(null===(e=t.detail)||void 0===e||e.register(this)),this._shouldRebuildElements=!0;const{target:i}=t.detail;i.syncInputValidity(!1),this.notifyObservers(i)}))}updated(t){t.has("validationTrigger")&&(t.get("validationTrigger")&&this.removeEventListener(t.get("validationTrigger"),this.configureValidation),this.configureValidation())}get canSubmit(){return!(this.disabled||this.formSubmissionInProgress||this._asyncInputOperations>0)}get elements(){if(this._shouldRebuildElements){this._elements={};for(const t of this.recognizedInputs()){const{name:e}=t;if(e)if(e in this._elements){const n=this._elements[e];let s;Array.isArray(n)?(s=n,n.push(t)):(s=[n,t],s.value=i.h(n)&&n.checked?n.value:"",this._elements[e]=s),i.h(t)&&t.checked&&(s.value=t.value)}else this._elements[t.name]=t}this._shouldRebuildElements=!1}return this._elements}static get styles(){return e.a`:host{display:block;margin-bottom:1rem}`}render(){return e.x` <slot></slot> `}addEventListener(t,e,i){super.addEventListener(t,e,i),"_faceplate-validation-change"===t&&(this._validationObserverCount+=1)}removeEventListener(t,e,i){super.removeEventListener(t,e,i),"_faceplate-validation-change"===t&&(this._validationObserverCount-=1)}async disableUntil(t){this._asyncInputOperations+=1;try{await t}finally{this._asyncInputOperations-=1}}notifyObservers(e){if(this._validationObserverCount){const i=t.f1("_faceplate-validation-change",{bubbles:!0,cancelable:!1,composed:!1,detail:{input:e,message:e.validationMessage,name:e.name}});this.dispatchEvent(i)}}invalidateFieldWithMessage(t,e){const n=this.querySelector(`[name="${t}"]`);return!!i.g(n)&&(n.setCustomValidity(e),n.setAttribute("faceplate-dirty",""),this.notifyObservers(n),e&&n.addEventListener("input",(function t(){n.setCustomValidity(""),n.removeEventListener("input",t)})),e&&!this.focusedInputForValiditySinceLastSubmit&&(this.focusedInputForValiditySinceLastSubmit=!0,this.reportFieldValidity(n)),!0)}reportFieldValidity(e){const i=e.reportValidity();if(!i&&null===e.offsetParent){const i=t.c("faceplate-alert",{level:t.x.error,message:t.f2("Validation error on hidden input"),meta:`"${e.name}": ${e.validationMessage}`,sourceElement:this.tagName,cause:"faceplate-form-input-validation-failure"});this.dispatchEvent(i)}return i}get targetElement(){return this.target&&document.querySelector(this.target)||this}get isValid(){let t=!0;const e=o(),n=!(this.novalidate||e&&e.hasAttribute("formnovalidate"));for(const e of this.recognizedInputs())if(i.g(e)){if(e.disabled)continue;if(e.matches(":disabled"))continue;if(n&&(this.validateElementAgainstRules(e),!e.checkValidity())){t=!1;break}}return t}async submit(e=this.action,i,n){var s,a,o,r;if(!this.canSubmit)return;this.formSubmissionInProgress=!0,this.focusedInputForValiditySinceLastSubmit=!1;try{const h=t.c("faceplate-submit");if(this.dispatchEvent(h),h.defaultPrevented)return;const f=this.buildRequest(i,n);if(!f)return;if("dialog"===f.method){const t=this.closest("faceplate-dialog");if(!t)throw new Error("Unable to find parent faceplate-dialog element to close with form submission");return t.close(f.body)}let p=this.enctype;if(n&&n.hasAttribute("formenctype")&&(p=n.getAttribute("formenctype")),"log"===f.method){const t=this.encoders[p];return console.log(t?t(f.body):f.body)}n&&n.hasAttribute("formaction")&&(e=n.getAttribute("formaction"));const m={enctype:p,encoders:this.encoders,credentials:this.credentials};try{for(var c,d=!0,u=t.f3(this.requester(e,f,m));!(s=(c=await u.next()).done);){r=c.value,d=!1;try{const t=r;if("faceplate-error"===t.type){const e=l(t.detail,this.tagName,"faceplate-form-fetch-failure");this.dispatchEvent(e);break}if(this.dispatchEvent(t),"faceplate-response"===t.type){await this.handleResponse(t.detail.response);break}}finally{d=!0}}}catch(t){a={error:t}}finally{try{d||s||!(o=u.return)||await o.call(u)}finally{if(a)throw a.error}}}catch(t){const e=l(t,this.tagName,"faceplate-form-submission-uncaught-error");this.dispatchEvent(e)}finally{return void(this.formSubmissionInProgress=!1)}}validateElementAgainstRules(e){var n;if(!r(e))return!0;if(this.rulesDidChange){const e=t.c("faceplate-form-constraints-changed");this.dispatchEvent(e),this.rulesDidChange=!1}e.setCustomValidity("");const s=i.j.getRegisteredElements(this);if(!s)return!0;const a=null===(n=e.dataset.faceplateConstraint)||void 0===n?void 0:n.split(" ");if(!a||!a.length)return!0;for(const t of a){const i=s.get(t);if(!i){console.warn(`Skipping validation against unknown rule "${t}"`);continue}const n=e.value;if(null!==n&&!i.validate(n))return e.setCustomValidity(i.message),!1}return!0}*elementsIterator(){yield*this.recognizedInputs()}recognizedInputs(){let t=new Set;for(const e of[...this.querySelectorAll("*")].filter(i.g))t.add(e);const e=this.querySelectorAll("output");for(let i=0;i<e.length;i++)t.add(e[i]);const n=i.k.getRegisteredElements(this);return n&&(t=new Set([...t,...n])),t}reset(){for(const t of this.recognizedInputs())n(t)}buildRequest(e,n){const s=new FormData;!n&&arguments.length<3&&(n=o());const a=!(this.novalidate||n&&n.hasAttribute("formnovalidate"));for(const t of this.recognizedInputs())if(i.g(t)){if(t.disabled)continue;if(t.matches(":disabled"))continue;if(a&&(this.validateElementAgainstRules(t),!this.reportFieldValidity(t)))return null;if(i.i(t)&&!t.checked)continue;const{name:e,value:n}=t;if(null===n)continue;if(n instanceof FormData){for(const t of n)s.append(t[0],t[1]);continue}if(!e)continue;if(i.f(t)&&t.multiple)for(const i of t.options)i.selected&&s.append(e,i.value);else if(t instanceof HTMLInputElement&&"file"===t.type){const i=t.files;if(i)for(const t of i)s.append(e,t)}else s.append(e,n)}if(e)for(const t of e)s.append(t.name,t.value);let r=this.method;return n&&(n.name&&n.value&&s.append(n.name,n.value),n.hasAttribute("formmethod")&&(r=t.f4(n.getAttribute("formmethod")))),{body:s,method:r.toLowerCase(),headers:{Accept:this.accept}}}async handleResponse(e){const i=t.dq(e);if("text/vnd.reddit.partial+html"===i){const i=await e.text(),n=this.targetElement;t.aQ(i,n,this.partialMode)}else if("application/json"===i&&e.status>=400){const i=await e.json();if("object"==typeof(n=i)&&n&&Object.prototype.hasOwnProperty.call(n,"title")&&Object.prototype.hasOwnProperty.call(n,"message")){const n=t.c("faceplate-alert",{level:t.x.error,name:i.title,message:t.f2("Form responded with error"),meta:i.message,sourceElement:this.tagName,cause:`faceplate-form-response-error-${e.status}`});this.dispatchEvent(n)}}else"text/html"===i&&e.redirected&&(window.location.href=e.url);var n}};return t._([t.n({type:String})],d.prototype,"accept",void 0),t._([t.n({type:String})],d.prototype,"enctype",void 0),t._([t.n({type:String})],d.prototype,"action",void 0),t._([t.n({type:Boolean,reflect:!0})],d.prototype,"disabled",void 0),t._([t.n({converter:t.f4,reflect:!0})],d.prototype,"method",void 0),t._([t.n({type:String})],d.prototype,"target",void 0),t._([t.n({type:String,attribute:"partial-mode"})],d.prototype,"partialMode",void 0),t._([t.n({type:String})],d.prototype,"novalidate",void 0),t._([t.n({type:String})],d.prototype,"credentials",void 0),t._([t.n({type:String,attribute:"validation-trigger"})],d.prototype,"validationTrigger",void 0),d=t._([t.e("faceplate-form")],d),i.r(d),{get F(){return d},c:s}}));
SML.dm("lexicaldeebab1b",[],(async()=>{var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t={},n={},r={get exports(){return n},set exports(e){n=e}};!function(t){var n=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(o=i.util.objId(t),n[o])return n[o];for(var l in r={},n[o]=r,t)t.hasOwnProperty(l)&&(r[l]=e(t[l],n));return r;case"Array":return o=i.util.objId(t),n[o]?n[o]:(r=[],n[o]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],l={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var a in n)n.hasOwnProperty(a)&&(l[a]=n[a]);n.hasOwnProperty(s)||(l[s]=o[s])}var d=r[e];return r[e]=l,i.languages.DFS(i.languages,(function(t,n){n===d&&t!=e&&(this[t]=l)})),l},DFS:function e(t,n,r,o){o=o||{};var l=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var a=t[s],d=i.util.type(a);"Object"!==d||o[l(a)]?"Array"!==d||o[l(a)]||(o[l(a)]=!0,e(a,n,s,o)):(o[l(a)]=!0,e(a,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,l=0;o=r.elements[l++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),l=i.languages[o];i.util.setLanguage(t,o);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,o);var a={element:t,language:o,grammar:l,code:t.textContent};function d(e){a.highlightedCode=e,i.hooks.run("before-insert",a),a.element.innerHTML=a.highlightedCode,i.hooks.run("after-highlight",a),i.hooks.run("complete",a),r&&r.call(a.element)}if(i.hooks.run("before-sanity-check",a),(s=a.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!a.code)return i.hooks.run("complete",a),void(r&&r.call(a.element));if(i.hooks.run("before-highlight",a),a.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){d(e.data)},u.postMessage(JSON.stringify({language:a.language,code:a.code,immediateClose:!0}))}else d(i.highlight(a.code,a.grammar,a.language));else d(i.util.encode(a.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new a;return d(i,i.head,e),s(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function l(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function s(e,t,n,r,a,c){for(var g in n)if(n.hasOwnProperty(g)&&n[g]){var h=n[g];h=Array.isArray(h)?h:[h];for(var f=0;f<h.length;++f){if(c&&c.cause==g+","+f)return;var p=h[f],_=p.inside,m=!!p.lookbehind,y=!!p.greedy,N=p.alias;if(y&&!p.pattern.global){var E=p.pattern.toString().match(/[imsuy]*$/)[0];p.pattern=RegExp(p.pattern.source,E+"g")}for(var T=p.pattern||p,C=r.next,v=a;C!==t.tail&&!(c&&v>=c.reach);v+=C.value.length,C=C.next){var S=C.value;if(t.length>e.length)return;if(!(S instanceof o)){var b,x=1;if(y){if(!(b=l(T,v,e,m))||b.index>=e.length)break;var A=b.index,O=b.index+b[0].length,w=v;for(w+=C.value.length;A>=w;)w+=(C=C.next).value.length;if(v=w-=C.value.length,C.value instanceof o)continue;for(var R=C;R!==t.tail&&(w<O||"string"==typeof R.value);R=R.next)x++,w+=R.value.length;x--,S=e.slice(v,w),b.index-=v}else if(!(b=l(T,0,S,m)))continue;A=b.index;var D=b[0],k=S.slice(0,A),M=S.slice(A+D.length),$=v+S.length;c&&$>c.reach&&(c.reach=$);var P=C.prev;if(k&&(P=d(t,P,k),v+=k.length),u(t,P,x),C=d(t,P,new o(g,_?i.tokenize(D,_):D,N,D)),M&&d(t,C,M),x>1){var I={cause:g+","+f,reach:$};s(e,t,n,C.prev,v,I),c&&I.reach>c.reach&&(c.reach=I.reach)}}}}}}function a(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function d(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},l=t.alias;l&&(Array.isArray(l)?Array.prototype.push.apply(o.classes,l):o.classes.push(l)),i.hooks.run("wrap",o);var s="";for(var a in o.attributes)s+=" "+a+'="'+(o.attributes[a]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,l=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),l&&e.close()}),!1),i):i;var c=i.util.currentScript();function g(){i.manual||i.highlightAll()}if(c&&(i.filename=c.src,c.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var h=document.readyState;"loading"===h||"interactive"===h&&c&&c.defer?document.addEventListener("DOMContentLoaded",g):window.requestAnimationFrame?window.requestAnimationFrame(g):window.setTimeout(g,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});t.exports&&(t.exports=n),void 0!==e&&(e.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(e,t){var r={};r["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[t]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+t]={pattern:/[\s\S]+/,inside:n.languages[t]};var o={};o[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:i},n.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(e,t){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:n.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(void 0!==n&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",r="loading",i="loaded",o="pre[data-src]:not(["+t+'="'+i+'"]):not(['+t+'="'+r+'"])';n.hooks.add("before-highlightall",(function(e){e.selector+=", "+o})),n.hooks.add("before-sanity-check",(function(l){var s=l.element;if(s.matches(o)){l.code="",s.setAttribute(t,r);var a=s.appendChild(document.createElement("CODE"));a.textContent="Loading…";var d=s.getAttribute("data-src"),u=l.language;if("none"===u){var c=(/\.(\w+)$/.exec(d)||[,"none"])[1];u=e[c]||c}n.util.setLanguage(a,u),n.util.setLanguage(s,u);var g=n.plugins.autoloader;g&&g.loadLanguages(u),function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&(r.status<400&&r.responseText?t(r.responseText):r.status>=400?n("✖ Error "+r.status+" while fetching file: "+r.statusText):n("✖ Error: File does not exist or is empty"))},r.send(null)}(d,(function(e){s.setAttribute(t,i);var r=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,void 0]:[n,n]}}(s.getAttribute("data-range"));if(r){var o=e.split(/\r\n?|\n/g),l=r[0],d=null==r[1]?o.length:r[1];l<0&&(l+=o.length),l=Math.max(0,Math.min(l-1,o.length)),d<0&&(d+=o.length),d=Math.max(0,Math.min(d,o.length)),e=o.slice(l,d).join("\n"),s.hasAttribute("data-start")||s.setAttribute("data-start",String(l+1))}a.textContent=e,n.highlightElement(a)}),(function(e){s.setAttribute(t,"failed"),a.textContent=e}))}})),n.plugins.fileHighlight={highlight:function(e){for(var t,r=(e||document).querySelectorAll(o),i=0;t=r[i++];)n.highlightElement(t)}};var l=!1;n.fileHighlight=function(){l||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),l=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}}()}(r),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike","code-snippet"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!=typeof t)for(var n=0,r=t.length;n<r;n++){var i=t[n];if("code"===i.type){var o=i.content[1],l=i.content[3];if(o&&l&&"code-language"===o.type&&"code-block"===l.type&&"string"==typeof o.content){var s=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),a="language-"+(s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase());l.alias?"string"==typeof l.alias?l.alias=[l.alias,a]:l.alias.push(a):l.alias=[a]}}else e(i.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,i=t.classes.length;r<i;r++){var o=t.classes[r],d=/language-(.+)/.exec(o);if(d){n=d[1];break}}var u,c,g=e.languages[n];if(g)t.content=e.highlight((u=t.content,c=(c=u.replace(l,"")).replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(e,t){var n;if("#"===(t=t.toLowerCase())[0])return n="x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1)),a(n);var r=s[t];return r||e})),c),g,n);else if(n&&"none"!==n&&e.plugins.autoloader){var h="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=h,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(h);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}}));var l=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},a=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(Prism),Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(Prism),Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete Prism.languages.objectivec["class-name"],Prism.languages.objc=Prism.languages.objectivec,Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,(function(){return t}));t=t.replace(/<self>/g,(function(){return/[^\s\S]/.source})),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism),Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+/(?:elseif|if)\b/.source+"(?:[ \t]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},Prism.languages.swift["string-literal"].forEach((function(e){e.inside.interpolation.inside=Prism.languages.swift})),function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism),function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism),function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism);var i={},o={},l={};let s={},a={},d={},u={},c={},g={},h={},f={},p={},_={},m={},y={},N={},E={},T={},C={},v={},S={},b={},x={},A={},O={},w={},R={},D={},k={},M={},$={},P={},I={},F={},L={},B={},z={},K={},W={};function H(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let U="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,G=U&&"documentMode"in document?document.documentMode:null,Y=U&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),j=U&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),J=!(!U||!("InputEvent"in window)||G)&&"getTargetRanges"in new window.InputEvent("input"),V=U&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),X=U&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Z=U&&/^(?=.*Chrome).*/i.test(navigator.userAgent),q=U&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Z,Q=V||X||q?" ":"​",ee=j?" ":Q,te=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,ne=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,re={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},ie={directionless:1,unmergeable:2},oe={center:2,end:6,justify:4,left:1,right:3,start:5},le={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},se={normal:0,segmented:2,token:1},ae={0:"normal",2:"segmented",1:"token"},de=!1,ue=0;function ce(e){ue=e.timeStamp}function ge(e,t,n){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${n._key}`]}function he(e,t,n){de=!0;let r=100<performance.now()-ue;try{$r(e,(()=>{let i=ar()||function(e){return e.getEditorState().read((()=>{let e=ar();return null!==e?e.clone():null}))}(e);var o=new Map,l=e.getRootElement(),s=e._editorState,a=e._blockCursorElement;let d=!1,u="";for(var c=0;c<t.length;c++){var g=t[c],h=g.type,f=g.target,p=Fe(f,s);if(!(null===p&&f!==l||Ir(p)))if("characterData"===h){if(g=r&&In(p))e:{h=f;var _=p;if(Gn(g=i)){var m=g.anchor.getNode();if(m.is(_)&&g.format!==m.getFormat()){g=!1;break e}}g=3===h.nodeType&&_.isAttached()}g&&(h=g=null,null!==(_=ct(e._window))&&_.anchorNode===f&&(g=_.anchorOffset,h=_.focusOffset),null!==(f=f.nodeValue)&&je(p,f,g,h,!1))}else if("childList"===h){for(d=!0,h=g.addedNodes,_=0;_<h.length;_++){var y=Ie(m=h[_]),N=m.parentNode;null==N||m===a||null!==y||"BR"===m.nodeName&&ge(m,N,e)||(j&&(y=m.innerText||m.nodeValue)&&(u+=y),N.removeChild(m))}if(0<(h=(g=g.removedNodes).length)){for(_=0,m=0;m<h;m++)("BR"===(N=g[m]).nodeName&&ge(N,f,e)||a===N)&&(f.appendChild(N),_++);h!==_&&(f===l&&(p=s._nodeMap.get("root")),o.set(f,p))}}}if(0<o.size)for(let[t,n]of o)if(Lr(n))for(o=n.getChildrenKeys(),l=t.firstChild,s=0;s<o.length;s++)null!==(a=e.getElementByKey(o[s]))&&(null==l?(t.appendChild(a),l=a):l!==a&&t.replaceChild(a,l),l=l.nextSibling);else In(n)&&n.markDirty();if(0<(o=n.takeRecords()).length){for(l=0;l<o.length;l++)for(s=(a=o[l]).addedNodes,a=a.target,c=0;c<s.length;c++)null==(f=(p=s[c]).parentNode)||"BR"!==p.nodeName||ge(p,a,e)||f.removeChild(p);n.takeRecords()}null!==i&&(d&&(i.dirty=!0,Ke(i)),j&&qe(e)&&i.insertRawText(u))}))}finally{de=!1}}function fe(e){let t=e._observer;if(null!==t){he(e,t.takeRecords(),t)}}function pe(e){0===ue&&rt(e).addEventListener("textInput",ce,!0),e._observer=new MutationObserver(((t,n)=>{he(e,t,n)}))}function _e(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,o=t.__format;return t=t.__style,!(null!==n&&n!==i||null!==r&&r!==o||null!==e&&e!==t)}function me(e,t){let n=e.mergeWithSibling(t),r=br()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function ye(e){if(""===e.__text&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;null!==(t=e.getPreviousSibling())&&In(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){_e(t,e)&&(e=me(t,e));break}t.remove()}for(var n;null!==(n=e.getNextSibling())&&In(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){_e(e,n)&&me(e,n);break}n.remove()}}}function Ne(e){return Ee(e.anchor),Ee(e.focus),e}function Ee(e){for(;"element"===e.type;){var t=e.getNode(),n=e.offset;if(n===t.getChildrenSize()?(t=t.getChildAtIndex(n-1),n=!0):(t=t.getChildAtIndex(n),n=!1),In(t)){e.set(t.__key,n?t.getTextContentSize():0,"text");break}if(!Lr(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element")}}let Te=1,Ce="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function ve(e){let t=document.activeElement;if(null===t)return!1;let n=t.nodeName;return Ir(Fe(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==t.__lexicalEditor)}function Se(e,t,n){let r=e.getRootElement();try{return null!==r&&r.contains(t)&&r.contains(n)&&null!==t&&!ve(t)&&be(t)===e}catch(e){return!1}}function be(e){for(;null!=e;){let t=e.__lexicalEditor;if(null!=t)return t;e=tt(e)}return null}function xe(e){return e.isToken()||e.isSegmented()}function Ae(e){for(;null!=e;){if(3===e.nodeType)return e;e=e.firstChild}return null}function Oe(e,t,n){return!(e&(t=re[t]))||null!==n&&n&t?null===n||n&t?e|t:e:e^t}function we(e){return In(e)||En(e)||Ir(e)}function Re(e,t){if(null!=t)e.__key=t;else{vr(),99<Er&&H(14),t=br();var n=Sr(),r=""+Te++;n._nodeMap.set(r,e),Lr(e)?t._dirtyElements.set(r,!0):t._dirtyLeaves.add(r),t._cloneNotNeeded.add(r),t._dirtyType=1,e.__key=r}}function De(e){var t=e.getParent();if(null!==t){let i=e.getWritable();t=t.getWritable();var n=e.getPreviousSibling();if(e=e.getNextSibling(),null===n)if(null!==e){var r=e.getWritable();t.__first=e.__key,r.__prev=null}else t.__first=null;else{if(r=n.getWritable(),null!==e){let t=e.getWritable();t.__prev=r.__key,r.__next=t.__key}else r.__next=null;i.__prev=null}null===e?null!==n?(e=n.getWritable(),t.__last=n.__key,e.__next=null):t.__last=null:(e=e.getWritable(),null!==n?((n=n.getWritable()).__next=e.__key,e.__prev=n.__key):e.__prev=null,i.__next=null),t.__size--,i.__parent=null}}function ke(e){99<Er&&H(14);var t=e.getLatest(),n=t.__parent,r=Sr();let i=br(),o=r._nodeMap;if(r=i._dirtyElements,null!==n)e:for(;null!==n&&!r.has(n);){let e=o.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}t=t.__key,i._dirtyType=1,Lr(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function Me(e){vr();var t=br();let n=t._compositionKey;e!==n&&(t._compositionKey=e,null!==n&&(null!==(t=Pe(n))&&t.getWritable()),null!==e&&(null!==(e=Pe(e))&&e.getWritable()))}function $e(){return Cr()?null:br()._compositionKey}function Pe(e,t){return void 0===(e=(t||Sr())._nodeMap.get(e))?null:e}function Ie(e,t){return void 0!==(e=e[`__lexicalKey_${br()._key}`])?Pe(e,t):null}function Fe(e,t){for(;null!=e;){let n=Ie(e,t);if(null!==n)return n;e=tt(e)}return null}function Le(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function Be(e){return e.read((()=>ze().getTextContent()))}function ze(){return Sr()._nodeMap.get("root")}function Ke(e){vr();let t=Sr();null!==e&&(e.dirty=!0,e._cachedNodes=null),t._selection=e}function We(e){var t,n=br();e:{for(t=e;null!=t;){let e=t[`__lexicalKey_${n._key}`];if(void 0!==e){t=e;break e}t=tt(t)}t=null}return null===t?e===(n=n.getRootElement())?Pe("root"):null:Pe(t)}function He(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function Ue(e){let t=[];for(;null!==e;)t.push(e),e=e._parentEditor;return t}function Ge(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Ye(e,t,n){if(null!==(t=ct(t._window))){var r=t.anchorNode,{anchorOffset:i,focusOffset:o}=t;if(null!==r&&(t=3===r.nodeType?r.nodeValue:null,r=Fe(r),null!==t&&In(r))){if(t===Q&&n){t=n,o=i=n.length}null!==t&&je(r,t,i,o,e)}}}function je(e,t,n,r,i){let o=e;if(o.isAttached()&&(i||!o.isDirty())){let d=o.isComposing(),u=t;if((d||i)&&t[t.length-1]===Q&&(u=t.slice(0,-1)),t=o.getTextContent(),i||u!==t)if(""===u)if(Me(null),V||X||q)o.remove();else{let e=br();setTimeout((()=>{e.update((()=>{o.isAttached()&&o.remove()}))}),20)}else{i=o.getParent(),t=dr();var l=o.getTextContentSize(),s=$e(),a=o.getKey();o.isToken()||null!==s&&a===s&&!d||Gn(t)&&(null!==i&&!i.canInsertTextBefore()&&0===t.anchor.offset||t.anchor.key===e.__key&&0===t.anchor.offset&&!o.canInsertTextBefore()||t.focus.key===e.__key&&t.focus.offset===l&&!o.canInsertTextAfter())?o.markDirty():(Gn(e=ar())&&null!==n&&null!==r&&(e.setTextNodeRange(o,n,o,r),o.isSegmented()&&(n=Pn(n=o.getTextContent()),o.replace(n),o=n)),o.setTextContent(u))}}}function Je(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,r=n[t];return void 0!==r?r:"string"==typeof(e=e[t])?(e=e.split(" "),n[t]=e):e}function Ve(e,t,n,r,i){0!==n.size&&(n=r.__type,r=r.__key,void 0===(t=t.get(n))&&H(33,n),n=t.klass,void 0===(t=e.get(n))&&(t=new Map,e.set(n,t)),n="destroyed"===(e=t.get(r))&&"created"===i,(void 0===e||n)&&t.set(r,n?"updated":i))}function Xe(e,t,n){let r=e.getParent(),i=n;return null!==r&&(t&&0===n?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function Ze(e,t){var n=e.offset;return"element"===e.type?Xe(e=e.getNode(),t,n):(e=e.getNode(),t&&0===n||!t&&n===e.getTextContentSize()?null===(n=t?e.getPreviousSibling():e.getNextSibling())?Xe(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n:null)}function qe(e){return"insertFromPaste"===(e=(e=rt(e).event)&&e.inputType)||"insertFromPasteAsQuotation"===e}function Qe(e){return!Kr(e)&&!e.isLastChild()&&!e.isInline()}function et(e,t){return void 0===(e=e._keyToDOMMap.get(t))&&H(75,t),e}function tt(e){return null!==(e=e.assignedSlot||e.parentElement)&&11===e.nodeType?e.host:e}function nt(e,t){for(e=e.getParent();null!==e;){if(e.is(t))return!0;e=e.getParent()}return!1}function rt(e){return null===(e=e._window)&&H(78),e}function it(e){for(e=e.getParentOrThrow();null!==e&&!ot(e);)e=e.getParentOrThrow();return e}function ot(e){return Kr(e)||Lr(e)&&e.isShadowRoot()}function lt(e){return Re(e=e.constructor.clone(e),null),e}function st(e){var t=br();let n=e.constructor.getType();return void 0===(t=t._nodes.get(n))&&H(97),null!==(t=t.replace)?((t=t(e))instanceof e.constructor||H(98),t):e}function at(e,t){!Kr(e=e.getParent())||Lr(t)||Ir(t)||H(99)}function dt(e){return(Ir(e)||Lr(e)&&!e.canBeEmpty())&&!e.isInline()}function ut(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null,null!==(t=e.parentElement)&&t.removeChild(e)}function ct(e){return U?(e||window).getSelection():null}function gt(e,t){let n=e.getChildAtIndex(t);null==n&&(n=e),ot(e)&&H(102);let r=e=>{const t=e.getParentOrThrow(),i=ot(t),o=e!==n||i?lt(e):e;if(i)return e.insertAfter(o),[e,o,o];const[l,s,a]=r(t);return e=e.getNextSiblings(),a.append(o,...e),[l,s,o]},[i,o]=r(n);return[i,o]}function ht(e,t){for(;e!==ze()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function ft(e){let t=[],n=[e];for(;0<n.length;){let r=n.pop();void 0===r&&H(112),Lr(r)&&n.unshift(...r.getChildren()),r!==e&&t.push(r)}return t}function pt(e){return 1===e.nodeType}function _t(e,t,n,r,i,o){for(e=e.getFirstChild();null!==e;){let l=e.__key;e.__parent===t&&(Lr(e)&&_t(e,l,n,r,i,o),n.has(l)||o.delete(l),i.push(l)),e=e.getNextSibling()}}let mt,yt,Nt,Et,Tt,Ct,vt,St,bt,xt,At="",Ot="",wt="",Rt=!1,Dt=!1,kt=null;function Mt(e,t){let n=vt.get(e);if(null!==t){let n=jt(e);n.parentNode===t&&t.removeChild(n)}St.has(e)||yt._keyToDOMMap.delete(e),Lr(n)&&$t(e=Ht(n,vt),0,e.length-1,null),void 0!==n&&Ve(xt,Nt,Et,n,"destroyed")}function $t(e,t,n,r){for(;t<=n;++t){let n=e[t];void 0!==n&&Mt(n,r)}}function Pt(e,t){e.setProperty("text-align",t)}function It(e,t){var n=mt.theme.indent;if("string"==typeof n){let r=e.classList.contains(n);0<t&&!r?e.classList.add(n):1>t&&r&&e.classList.remove(n)}n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px",e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${n})`)}function Ft(e,t){e=e.style,0===t?Pt(e,""):1===t?Pt(e,"left"):2===t?Pt(e,"center"):3===t?Pt(e,"right"):4===t?Pt(e,"justify"):5===t?Pt(e,"start"):6===t&&Pt(e,"end")}function Lt(e,t,n){let r=St.get(e);void 0===r&&H(60);let i=r.createDOM(mt,yt);var o=yt._keyToDOMMap;if(i["__lexicalKey_"+yt._key]=e,o.set(e,i),In(r)?i.setAttribute("data-lexical-text","true"):Ir(r)&&i.setAttribute("data-lexical-decorator","true"),Lr(r)){if(e=r.__indent,o=r.__size,0!==e&&It(i,e),0!==o){--o,e=Ht(r,St);var l=Ot;Ot="",Bt(e,r,0,o,i,null),Wt(r,i),Ot=l}0!==(e=r.__format)&&Ft(i,e),r.isInline()||Kt(null,r,i),Qe(r)&&(At+="\n\n",wt+="\n\n")}else o=r.getTextContent(),Ir(r)?(null!==(l=r.decorate(yt,mt))&&Gt(e,l),i.contentEditable="false"):In(r)&&(r.isDirectionless()||(Ot+=o)),At+=o,wt+=o;return null!==t&&(null!=n?t.insertBefore(i,n):null!=(n=t.__lexicalLineBreak)?t.insertBefore(i,n):t.appendChild(i)),Ve(xt,Nt,Et,r,"created"),i}function Bt(e,t,n,r,i,o){let l=At;for(At="";n<=r;++n)Lt(e[n],i,o);Qe(t)&&(At+="\n\n"),i.__lexicalTextContent=At,At=l+At}function zt(e,t){return En(e=t.get(e))||Ir(e)&&e.isInline()}function Kt(e,t,n){e=null!==e&&(0===e.__size||zt(e.__last,vt)),t=0===t.__size||zt(t.__last,St),e?t||(null!=(t=n.__lexicalLineBreak)&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement("br"),n.__lexicalLineBreak=t,n.appendChild(t))}function Wt(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==Ot||n!==kt){let o=""===Ot;if(o)var r=kt;else r=Ot,r=te.test(r)?"rtl":ne.test(r)?"ltr":null;if(r!==n){let l=t.classList,s=mt.theme;var i=null!==n?s[n]:void 0;let a=null!==r?s[r]:void 0;void 0!==i&&("string"==typeof i&&(i=i.split(" "),i=s[n]=i),l.remove(...i)),null===r||o&&"ltr"===r?t.removeAttribute("dir"):(void 0!==a&&("string"==typeof a&&(n=a.split(" "),a=s[r]=n),void 0!==a&&l.add(...a)),t.dir=r),Dt||(e.getWritable().__dir=r)}kt=r,t.__lexicalDirTextContent=Ot,t.__lexicalDir=r}}function Ht(e,t){let n=[];for(e=e.__first;null!==e;){let r=t.get(e);void 0===r&&H(101),n.push(e),e=r.__next}return n}function Ut(e,t){var n=vt.get(e),r=St.get(e);void 0!==n&&void 0!==r||H(61);var i=Rt||Ct.has(e)||Tt.has(e);let o=et(yt,e);if(n===r&&!i)return Lr(n)?(void 0!==(r=o.__lexicalTextContent)&&(At+=r,wt+=r),void 0!==(r=o.__lexicalDirTextContent)&&(Ot+=r)):(r=n.getTextContent(),In(n)&&!n.isDirectionless()&&(Ot+=r),wt+=r,At+=r),o;if(n!==r&&i&&Ve(xt,Nt,Et,r,"updated"),r.updateDOM(n,o,mt))return r=Lt(e,null,null),null===t&&H(62),t.replaceChild(r,o),Mt(e,null),r;if(Lr(n)&&Lr(r)){if((e=r.__indent)!==n.__indent&&It(o,e),(e=r.__format)!==n.__format&&Ft(o,e),i){e=r,i=Ot,Ot="",t=At;var l=n.__size,s=e.__size;if(At="",1===l&&1===s){var a=n.__first,d=e.__first;if(a===d)Ut(a,o);else{var u=jt(a);d=Lt(d,null,null),o.replaceChild(d,u),Mt(a,null)}}else{d=Ht(n,vt);var c=Ht(e,St);if(0===l)0!==s&&Bt(c,e,0,s-1,o,null);else if(0===s)0!==l&&($t(d,0,l-1,(a=null==o.__lexicalLineBreak)?null:o),a&&(o.textContent=""));else{var g=d;d=c,c=l-1,l=s-1;let t=o.firstChild,n=0;for(s=0;n<=c&&s<=l;){var h=g[n];let e=d[s];if(h===e)t=Yt(Ut(e,o)),n++,s++;else{void 0===a&&(a=new Set(g)),void 0===u&&(u=new Set(d));let r=u.has(h),i=a.has(e);r?(i?((h=et(yt,e))===t?t=Yt(Ut(e,o)):(null!=t?o.insertBefore(h,t):o.appendChild(h),Ut(e,o)),n++):Lt(e,o,t),s++):(t=Yt(jt(h)),Mt(h,o),n++)}}u=s>l,(a=n>c)&&!u?Bt(d,e,s,l,o,a=void 0===(a=d[l+1])?null:yt.getElementByKey(a)):u&&!a&&$t(g,n,c,o)}}Qe(e)&&(At+="\n\n"),o.__lexicalTextContent=At,At=t+At,Wt(e,o),Ot=i,Kr(r)||r.isInline()||Kt(n,r,o)}Qe(r)&&(At+="\n\n",wt+="\n\n")}else n=r.getTextContent(),Ir(r)?null!==(i=r.decorate(yt,mt))&&Gt(e,i):In(r)&&!r.isDirectionless()&&(Ot+=n),At+=n,wt+=n;return!Dt&&Kr(r)&&r.__cachedText!==wt&&((r=r.getWritable()).__cachedText=wt),o}function Gt(e,t){let n=yt._pendingDecorators,r=yt._decorators;if(null===n){if(r[e]===t)return;n=Le(yt)}n[e]=t}function Yt(e){return null!==(e=e.nextSibling)&&e===yt._blockCursorElement&&(e=e.nextSibling),e}function jt(e){let t=bt.get(e);return void 0===t&&H(75,e),t}let Jt=Object.freeze({}),Vt=[["keydown",function(e,t){if(Xt=e.timeStamp,Zt=e.keyCode,!t.isComposing()){var{keyCode:n,shiftKey:r,ctrlKey:i,metaKey:o,altKey:l}=e;if(!Dr(t,E,e)){if(39!==n||i||o||l)if(39!==n||l||r||!i&&!o)if(37!==n||i||o||l)if(37!==n||l||r||!i&&!o)if(38!==n||i||o)if(40!==n||i||o)if(13===n&&r)rn=!0,Dr(t,A,e);else if(32===n)Dr(t,O,e);else if(Y&&i&&79===n)e.preventDefault(),rn=!0,Dr(t,u,!0);else if(13!==n||r){var s=Y?!l&&!o&&(8===n||72===n&&i):!(i||l||o)&&8===n;s?8===n?Dr(t,w,e):(e.preventDefault(),Dr(t,d,!0)):27===n?Dr(t,R,e):(s=Y?!(r||l||o)&&(46===n||68===n&&i):!(i||l||o)&&46===n)?46===n?Dr(t,D,e):(e.preventDefault(),Dr(t,d,!1)):8===n&&(Y?l:i)?(e.preventDefault(),Dr(t,p,!0)):46===n&&(Y?l:i)?(e.preventDefault(),Dr(t,p,!1)):Y&&o&&8===n?(e.preventDefault(),Dr(t,_,!0)):Y&&o&&46===n?(e.preventDefault(),Dr(t,_,!1)):66===n&&!l&&(Y?o:i)?(e.preventDefault(),Dr(t,m,"bold")):85===n&&!l&&(Y?o:i)?(e.preventDefault(),Dr(t,m,"underline")):73===n&&!l&&(Y?o:i)?(e.preventDefault(),Dr(t,m,"italic")):9!==n||l||i||o?90===n&&!r&&(Y?o:i)?(e.preventDefault(),Dr(t,y,void 0)):(s=Y?90===n&&o&&r:89===n&&i||90===n&&i&&r)?(e.preventDefault(),Dr(t,N,void 0)):Xn(t._editorState._selection)?(s=!r&&(67===n&&(Y?o:i)))?(e.preventDefault(),Dr(t,F,e)):(s=!r&&(88===n&&(Y?o:i)))?(e.preventDefault(),Dr(t,L,e)):65===n&&(Y?o:i)&&(e.preventDefault(),Dr(t,B,e)):!j&&65===n&&(Y?o:i)&&(e.preventDefault(),Dr(t,B,e)):Dr(t,k,e)}else rn=!1,Dr(t,A,e);else Dr(t,x,e);else Dr(t,b,e);else Dr(t,S,e);else Dr(t,v,e);else Dr(t,C,e);else Dr(t,T,e);(i||r||l||o)&&Dr(t,W,e)}}}],["pointerdown",function(e,t){let n=e.target;e=e.pointerType,n instanceof Node&&"touch"!==e&&$r(t,(()=>{Ir(Fe(n))||(nn=!0)}))}],["compositionstart",function(e,t){$r(t,(()=>{let n=ar();if(Gn(n)&&!t.isComposing()){let r=n.anchor,i=n.anchor.getNode();Me(r.key),(e.timeStamp<Xt+30||"element"===r.type||!n.isCollapsed()||i.getFormat()!==n.format||i.getStyle()!==n.style)&&Dr(t,g,ee)}}))}],["compositionend",function(e,t){j?on=!0:$r(t,(()=>{cn(t,e.data)}))}],["input",function(e,t){e.stopPropagation(),$r(t,(()=>{var n=ar(),r=e.data,i=un(e);if(null!=r&&Gn(n)&&sn(n,i,r,e.timeStamp,!1)){on&&(cn(t,r),on=!1);var o=n.anchor,l=o.getNode();if(null===(i=ct(t._window)))return;let s=o.offset;(o=J&&!n.isCollapsed()&&In(l)&&null!==i.anchorNode)&&(o=(l=l.getTextContent().slice(0,s)+r+l.getTextContent().slice(s+n.focus.offset))===(3===(i=i.anchorNode).nodeType?i.nodeValue:null)),o||Dr(t,g,r),r=r.length,j&&1<r&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=r),V||X||q||!t.isComposing()||(Xt=0,Me(null))}else Ye(!1,t,null!==r?r:void 0),on&&(cn(t,r||void 0),on=!1);vr(),fe(n=br())})),Qt=null}],["click",function(e,t){$r(t,(()=>{let n=ar();var r=ct(t._window);let i=dr();if(r)if(Gn(n)){let t=n.anchor;var o=t.getNode();"element"===t.type&&0===t.offset&&n.isCollapsed()&&!Kr(o)&&1===ze().getChildrenSize()&&o.getTopLevelElementOrThrow().isEmpty()&&null!==i&&n.is(i)?(r.removeAllRanges(),n.dirty=!0):3!==e.detail||n.isCollapsed()||o!==(r=n.focus.getNode())&&(Lr(o)?o.select(0):o.getParentOrThrow().select(0))}else"touch"===e.pointerType&&(null!==(o=r.anchorNode)&&(1===(o=o.nodeType)||3===o))&&Ke(r=sr(i,r,t));Dr(t,a,e)}))}],["cut",Jt],["copy",Jt],["dragstart",Jt],["dragover",Jt],["dragend",Jt],["paste",Jt],["focus",Jt],["blur",Jt],["drop",Jt]];J&&Vt.push(["beforeinput",(e,t)=>function(e,t){let n=e.inputType,r=un(e);"deleteCompositionText"===n||j&&qe(t)||"insertCompositionText"!==n&&$r(t,(()=>{let i=ar();if("deleteContentBackward"===n){if(null===i){var o=dr();if(!Gn(o))return;Ke(o.clone())}if(Gn(i))return void(229===Zt&&e.timeStamp<Xt+30&&t.isComposing()&&i.anchor.key===i.focus.key?(Me(null),Xt=0,setTimeout((()=>{$r(t,(()=>{Me(null)}))}),30),Gn(i)&&(o=i.anchor.getNode(),o.markDirty(),i.format=o.getFormat(),i.style=o.getStyle())):(e.preventDefault(),Dr(t,d,!0)))}if(Gn(i)){o=e.data,null!==Qt&&Ye(!1,t,Qt),i.dirty&&null===Qt||!i.isCollapsed()||Kr(i.anchor.getNode())||null===r||i.applyDOMRange(r),Qt=null;var l=i.focus,s=i.anchor.getNode();if(l=l.getNode(),"insertText"===n||"insertTranspose"===n)"\n"===o?(e.preventDefault(),Dr(t,u,!1)):"\n\n"===o?(e.preventDefault(),Dr(t,c,void 0)):null==o&&e.dataTransfer?(o=e.dataTransfer.getData("text/plain"),e.preventDefault(),i.insertRawText(o)):null!=o&&sn(i,r,o,e.timeStamp,!0)?(e.preventDefault(),Dr(t,g,o)):Qt=o,qt=e.timeStamp;else switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Dr(t,g,e);break;case"insertFromComposition":Me(null),Dr(t,g,e);break;case"insertLineBreak":Me(null),Dr(t,u,!1);break;case"insertParagraph":Me(null),rn&&!X?(rn=!1,Dr(t,u,!1)):Dr(t,c,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Dr(t,h,e);break;case"deleteByComposition":(function(e,t){return e!==t||Lr(e)||Lr(t)||!e.isToken()||!t.isToken()})(s,l)&&Dr(t,f,e);break;case"deleteByDrag":case"deleteByCut":Dr(t,f,e);break;case"deleteContent":Dr(t,d,!1);break;case"deleteWordBackward":Dr(t,p,!0);break;case"deleteWordForward":Dr(t,p,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Dr(t,_,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Dr(t,_,!1);break;case"formatStrikeThrough":Dr(t,m,"strikethrough");break;case"formatBold":Dr(t,m,"bold");break;case"formatItalic":Dr(t,m,"italic");break;case"formatUnderline":Dr(t,m,"underline");break;case"historyUndo":Dr(t,y,void 0);break;case"historyRedo":Dr(t,N,void 0)}}}))}(e,t)]);let Xt=0,Zt=0,qt=0,Qt=null,en=0,tn=!1,nn=!1,rn=!1,on=!1,ln=[0,"",0,"root",0];function sn(e,t,n,r,i){let o=e.anchor,l=e.focus,s=o.getNode();var a=br();let d=ct(a._window),u=null!==d?d.anchorNode:null,c=o.key;a=a.getElementByKey(c);let g=n.length;return c!==l.key||!In(s)||(!i&&(!J||qt<r+50)||s.isDirty()&&2>g||He(n))&&o.offset!==l.offset&&!s.isComposing()||xe(s)||s.isDirty()&&1<g||(i||!J)&&null!==a&&!s.isComposing()&&u!==Ae(a)||null!==d&&null!==t&&(!t.collapsed||t.startContainer!==d.anchorNode||t.startOffset!==d.anchorOffset)||s.getFormat()!==e.format||s.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let n=t.getParentOrThrow(),r=t.isToken();return 0===e?((e=!t.canInsertTextBefore()||!n.canInsertTextBefore()||r)||(e=(In(t=t.getPreviousSibling())||Lr(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()||r)}(e,s)}function an(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function dn(e,t,n){let{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l}=e;tn&&(tn=!1,an(r,i)&&an(o,l))||$r(t,(()=>{if(n){if(Se(t,r,o)){var i=ar();if(Gn(i)){var l=i.anchor,a=l.getNode();if(i.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(i.dirty=!0);var d=rt(t).event;d=d?d.timeStamp:performance.now();let[n,r,o,s,u]=ln;d<u+200&&l.offset===o&&l.key===s?(i.format=n,i.style=r):"text"===l.type?(i.format=a.getFormat(),i.style=a.getStyle()):"element"===l.type&&(i.format=0,i.style="")}else{l=255,a=!1;let e=(d=i.getNodes()).length;for(let t=0;t<e;t++){let e=d[t];if(In(e)&&(a=!0,0===(l&=e.getFormat())))break}i.format=a?l:0}}Dr(t,s,void 0)}}else Ke(null)}))}function un(e){return e.getTargetRanges?0===(e=e.getTargetRanges()).length?null:e[0]:null}function cn(e,t){var n=e._compositionKey;if(Me(null),null!==n&&null!=t){if(""===t)return t=Pe(n),void(null!==(e=Ae(e.getElementByKey(n)))&&null!==e.nodeValue&&In(t)&&je(t,e.nodeValue,null,null,!0));if("\n"===t[t.length-1]&&Gn(n=ar()))return t=n.focus,n.anchor.set(t.key,t.offset,t.type),void Dr(e,A,null)}Ye(!0,e,t)}function gn(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let hn=new Map;function fn(e){let t=ct(null==(e=e.target)?null:9===e.nodeType?e.defaultView:e.ownerDocument.defaultView);if(null!==t){var n=be(t.anchorNode);if(null!==n){nn&&(nn=!1,$r(n,(()=>{var e=dr(),r=t.anchorNode;null!==r&&(1===(r=r.nodeType)||3===r)&&Ke(e=sr(e,t,n))})));var r=(e=(e=Ue(n))[e.length-1])._key,i=hn.get(r),o=i||e;o!==n&&dn(t,o,!1),dn(t,n,!0),n!==e?hn.set(r,n):i&&hn.delete(r)}}}function pn(e,t,n){vr();var r=e.__key;let i=e.getParent();if(null!==i){var o=ar();if(Gn(o)&&Lr(e)){var{anchor:l,focus:s}=o,a=l.getNode(),d=s.getNode();nt(a,e)&&l.set(e.__key,0,"element"),nt(d,e)&&s.set(e.__key,0,"element")}if(d=!1,Gn(a=o)&&t){o=a.anchor;let t=a.focus;o.key===r&&(gr(o,e,i,e.getPreviousSibling(),e.getNextSibling()),d=!0),t.key===r&&(gr(t,e,i,e.getPreviousSibling(),e.getNextSibling()),d=!0)}else Xn(a)&&t&&e.isSelected()&&e.selectPrevious();Gn(a)&&t&&!d?(r=e.getIndexWithinParent(),De(e),ur(a,i,r,-1)):De(e),n||ot(i)||i.canBeEmpty()||!i.isEmpty()||pn(i,t),t&&Kr(i)&&i.isEmpty()&&i.selectEnd()}}class _n{static getType(){H(64,this.name)}static clone(){H(65,this.name)}constructor(e){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,Re(this,e)}getType(){return this.__type}isAttached(){for(var e=this.__key;null!==e;){if("root"===e)return!0;if(null===(e=Pe(e)))break;e=e.__parent}return!1}isSelected(e){if(null==(e=e||ar()))return!1;let t=e.getNodes().some((e=>e.__key===this.__key));return(In(this)||!Gn(e)||"element"!==e.anchor.type||"element"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&t}getKey(){return this.__key}getIndexWithinParent(){var e=this.getParent();if(null===e)return-1;e=e.getFirstChild();let t=0;for(;null!==e;){if(this.is(e))return t;t++,e=e.getNextSibling()}return-1}getParent(){let e=this.getLatest().__parent;return null===e?null:Pe(e)}getParentOrThrow(){let e=this.getParent();return null===e&&H(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(ot(t))return e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&H(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:Pe(e)}getPreviousSiblings(){let e=[];var t=this.getParent();if(null===t)return e;for(t=t.getFirstChild();null!==t&&!t.is(this);)e.push(t),t=t.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:Pe(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=this.getParents();var n=e.getParents();Lr(this)&&t.unshift(this),Lr(e)&&n.unshift(e),e=t.length;var r=n.length;if(0===e||0===r||t[e-1]!==n[r-1])return null;for(n=new Set(n),r=0;r<e;r++){let e=t[r];if(n.has(e))return e}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var t=this.getCommonAncestor(e);let n=this;for(;;){var r=n.getParentOrThrow();if(r===t){r=n.getIndexWithinParent();break}n=r}for(n=e;;){if((e=n.getParentOrThrow())===t){t=n.getIndexWithinParent();break}n=e}return r<t}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;for(;null!==e;){if(e.__key===t)return!0;e=e.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),n=[],r=new Set;for(var i=this;;){var o=i.__key;if(r.has(o)||(r.add(o),n.push(i)),i===e)break;if(null!==(o=Lr(i)?t?i.getFirstChild():i.getLastChild():null))i=o;else if(null!==(o=t?i.getNextSibling():i.getPreviousSibling()))i=o;else{if(i=i.getParentOrThrow(),r.has(i.__key)||n.push(i),i===e)break;o=i;do{null===o&&H(68),i=t?o.getNextSibling():o.getPreviousSibling(),null!==(o=o.getParent())&&(null!==i||r.has(o.__key)||n.push(o))}while(null===i)}}return t||n.reverse(),n}isDirty(){let e=br()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=Pe(this.__key);return null===e&&H(113),e}getWritable(){vr();var e=Sr(),t=br();e=e._nodeMap;let n=this.__key,r=this.getLatest(),i=r.__parent;t=t._cloneNotNeeded;var o=ar();return null!==o&&(o._cachedNodes=null),t.has(n)?(ke(r),r):((o=r.constructor.clone(r)).__parent=i,o.__next=r.__next,o.__prev=r.__prev,Lr(r)&&Lr(o)?(o.__first=r.__first,o.__last=r.__last,o.__size=r.__size,o.__indent=r.__indent,o.__format=r.__format,o.__dir=r.__dir):In(r)&&In(o)&&(o.__format=r.__format,o.__style=r.__style,o.__mode=r.__mode,o.__detail=r.__detail),t.add(n),o.__key=n,ke(o),e.set(n,o),o)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){H(70)}updateDOM(){H(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){H(72)}static importJSON(){H(18,this.name)}static transform(){return null}remove(e){pn(this,!0,e)}replace(e,t){vr();var n=ar();null!==n&&(n=n.clone()),at(this,e);let r=this.getLatest(),i=this.__key,o=e.__key,l=e.getWritable(),s=(e=this.getParentOrThrow().getWritable()).__size;De(l);let a=r.getPreviousSibling(),d=r.getNextSibling(),u=r.__prev,c=r.__next,g=r.__parent;return pn(r,!1,!0),null===a?e.__first=o:a.getWritable().__next=o,l.__prev=u,null===d?e.__last=o:d.getWritable().__prev=o,l.__next=c,l.__parent=g,e.__size=s,t&&this.getChildren().forEach((e=>{l.append(e)})),Gn(n)&&(Ke(n),t=n.anchor,n=n.focus,t.key===i&&Kn(t,l),n.key===i&&Kn(n,l)),$e()===i&&Me(o),l}insertAfter(e,t=!0){vr(),at(this,e);var n=this.getWritable();let r=e.getWritable();var i=r.getParent();let o=ar();var l=!1,s=!1;if(null!==i){var a=e.getIndexWithinParent();De(r),Gn(o)&&(s=i.__key,l=o.anchor,i=o.focus,l="element"===l.type&&l.key===s&&l.offset===a+1,s="element"===i.type&&i.key===s&&i.offset===a+1)}i=this.getNextSibling(),a=this.getParentOrThrow().getWritable();let d=r.__key,u=n.__next;return null===i?a.__last=d:i.getWritable().__prev=d,a.__size++,n.__next=d,r.__next=u,r.__prev=n.__key,r.__parent=n.__parent,t&&Gn(o)&&(ur(o,a,(t=this.getIndexWithinParent())+1),n=a.__key,l&&o.anchor.set(n,t+2,"element"),s&&o.focus.set(n,t+2,"element")),e}insertBefore(e,t=!0){vr(),at(this,e);var n=this.getWritable();let r=e.getWritable(),i=r.__key;De(r);let o=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),s=n.__prev,a=this.getIndexWithinParent();return null===o?l.__first=i:o.getWritable().__next=i,l.__size++,n.__prev=i,r.__prev=s,r.__next=n.__key,r.__parent=n.__parent,n=ar(),t&&Gn(n)&&ur(n,t=this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return jr()}selectPrevious(e,t){vr();let n=this.getPreviousSibling(),r=this.getParentOrThrow();return null===n?r.select(0,0):Lr(n)?n.select():In(n)?n.select(e,t):(e=n.getIndexWithinParent()+1,r.select(e,e))}selectNext(e,t){vr();let n=this.getNextSibling(),r=this.getParentOrThrow();return null===n?r.select():Lr(n)?n.select(0,0):In(n)?n.select(e,t):(e=n.getIndexWithinParent(),r.select(e,e))}markDirty(){this.getWritable()}}class mn extends _n{static getType(){return"linebreak"}static clone(e){return new mn(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>{let t,n,r=e.parentElement;return null!==r&&((t=r.firstChild)===e||t.nextSibling===e&&3===t.nodeType&&null!==(t.textContent||"").match(/^( |\t|\r?\n)+$/))&&((n=r.lastChild)===e||n.previousSibling===e&&3===n.nodeType&&null!==(n.textContent||"").match(/^( |\t|\r?\n)+$/))?null:{conversion:yn,priority:0}}}}static importJSON(){return Nn()}exportJSON(){return{type:"linebreak",version:1}}}function yn(){return{node:Nn()}}function Nn(){return st(new mn)}function En(e){return e instanceof mn}function Tn(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function Cn(e,t){return 1&t?"strong":2&t?"em":"span"}function vn(e,t,n,r,i){e=r.classList,void 0!==(r=Je(i,"base"))&&e.add(...r);let o=!1,l=8&t&&4&t;var s=8&n&&4&n;void 0!==(r=Je(i,"underlineStrikethrough"))&&(s?(o=!0,l||e.add(...r)):l&&e.remove(...r));for(let a in re)s=re[a],void 0!==(r=Je(i,a))&&(n&s&&(!o||"underline"!==a&&"strikethrough"!==a)?(!(t&s)||l&&"underline"===a||"strikethrough"===a)&&e.add(...r):t&s&&e.remove(...r))}function Sn(e,t,n){let r=t.firstChild;if(e+=(n=n.isComposing())?Q:"",null==r)t.textContent=e;else if((t=r.nodeValue)!==e)if(n||j){n=t.length;let i=e.length,o=0,l=0;for(;o<n&&o<i&&t[o]===e[o];)o++;for(;l+o<n&&l+o<i&&t[n-l-1]===e[i-l-1];)l++;e=[o,n-o-l,e.slice(o,i-l)];let[s,a,d]=e;0!==a&&r.deleteData(s,a),r.insertData(s,d)}else r.nodeValue=e}function bn(e,t){return(t=document.createElement(t)).appendChild(e),t}class xn extends _n{static getType(){return"text"}static clone(e){return new xn(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return ae[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===$e()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){return e=re[e],!!(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Oe(this.getLatest().__format,e,t)}createDOM(e){var t=this.__format,n=Tn(0,t);let r=Cn(0,t),i=document.createElement(null===n?r:n),o=i;return this.hasFormat("code")&&i.setAttribute("spellcheck","false"),null!==n&&(o=document.createElement(r),i.appendChild(o)),n=o,Sn(this.__text,n,this),void 0!==(e=e.theme.text)&&vn(r,0,t,n,e),""!==(t=this.__style)&&(i.style.cssText=t),i}updateDOM(e,t,n){let r=this.__text;var i=e.__format,o=this.__format,l=Tn(0,i);let s=Tn(0,o);var a=Cn(0,i);let d=Cn(0,o);return(null===l?a:l)!==(null===s?d:s)||(l===s&&a!==d?(null==(i=t.firstChild)&&H(48),Sn(r,e=l=document.createElement(d),this),void 0!==(n=n.theme.text)&&vn(d,0,o,e,n),t.replaceChild(l,i),!1):(a=t,null!==s&&null!==l&&(null==(a=t.firstChild)&&H(49)),Sn(r,a,this),void 0!==(n=n.theme.text)&&i!==o&&vn(d,i,o,a,n),o=this.__style,e.__style!==o&&(t.style.cssText=o),!1))}static importDOM(){return{"#text":()=>({conversion:Rn,priority:0}),b:()=>({conversion:On,priority:0}),code:()=>({conversion:$n,priority:0}),em:()=>({conversion:$n,priority:0}),i:()=>({conversion:$n,priority:0}),s:()=>({conversion:$n,priority:0}),span:()=>({conversion:An,priority:0}),strong:()=>({conversion:$n,priority:0}),sub:()=>({conversion:$n,priority:0}),sup:()=>({conversion:$n,priority:0}),u:()=>({conversion:$n,priority:0})}}static importJSON(e){let t=Pn(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){return({element:e}=super.exportDOM(e)),null!==e&&pt(e)||H(132),e.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(e=bn(e,"b")),this.hasFormat("italic")&&(e=bn(e,"i")),this.hasFormat("strikethrough")&&(e=bn(e,"s")),this.hasFormat("underline")&&(e=bn(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?re[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?ie[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){return e=re[e],this.setFormat(this.getFormat()^e)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){if(e=se[e],this.__mode===e)return this;let t=this.getWritable();return t.__mode=e,t}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){vr();let n=ar();var r=this.getTextContent();let i=this.__key;return"string"==typeof r?(r=r.length,void 0===e&&(e=r),void 0===t&&(t=r)):t=e=0,Gn(n)?((r=$e())!==n.anchor.key&&r!==n.focus.key||Me(i),n.setTextNodeRange(this,e,this,t),n):or(i,e,i,t,"text","text")}spliceText(e,t,n,r){let i=this.getWritable(),o=i.__text,l=n.length,s=e;0>s&&(s=l+s,0>s&&(s=0));let a=ar();return r&&Gn(a)&&(e+=l,a.setTextNodeRange(i,e,i,e)),t=o.slice(0,s)+n+o.slice(s+t),i.__text=t,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){vr();var t=this.getLatest(),n=t.getTextContent(),r=t.__key,i=$e(),o=new Set(e);e=[];for(var l=n.length,s="",a=0;a<l;a++)""!==s&&o.has(a)&&(e.push(s),s=""),s+=n[a];if(""!==s&&e.push(s),0===(o=e.length))return[];if(e[0]===n)return[t];var d=e[0];n=t.getParentOrThrow(),a=t.getFormat();let u=t.getStyle(),c=t.__detail;l=!1,t.isSegmented()?((s=Pn(d)).__format=a,s.__style=u,s.__detail=c,l=!0):(s=t.getWritable()).__text=d,t=ar(),s=[s],d=d.length;for(let n=1;n<o;n++){var g=e[n],h=g.length;(g=Pn(g).getWritable()).__format=a,g.__style=u,g.__detail=c;let o=g.__key;if(h=d+h,Gn(t)){let e=t.anchor,n=t.focus;e.key===r&&"text"===e.type&&e.offset>d&&e.offset<=h&&(e.key=o,e.offset-=d,t.dirty=!0),n.key===r&&"text"===n.type&&n.offset>d&&n.offset<=h&&(n.key=o,n.offset-=d,t.dirty=!0)}i===r&&Me(o),d=h,s.push(g)}return r=this.getPreviousSibling(),i=this.getNextSibling(),null!==r&&ke(r),null!==i&&ke(i),r=n.getWritable(),i=this.getIndexWithinParent(),l?(r.splice(i,0,s),this.remove()):r.splice(i,1,s),Gn(t)&&ur(t,n,i,o-1),s}mergeWithSibling(e){var t=e===this.getPreviousSibling();t||e===this.getNextSibling()||H(50);var n=this.__key;let r=e.__key,i=this.__text,o=i.length;$e()===r&&Me(n);let l=ar();if(Gn(l)){let i=l.anchor,s=l.focus;null!==i&&i.key===r&&(hr(i,t,n,e,o),l.dirty=!0),null!==s&&s.key===r&&(hr(s,t,n,e,o),l.dirty=!0)}return n=e.__text,this.setTextContent(t?n+i:i+n),t=this.getWritable(),e.remove(),t}isTextEntity(){return!1}}function An(e){let t="700"===e.style.fontWeight,n="line-through"===e.style.textDecoration,r="italic"===e.style.fontStyle,i="underline"===e.style.textDecoration,o=e.style.verticalAlign;return{forChild:e=>In(e)?(t&&e.toggleFormat("bold"),n&&e.toggleFormat("strikethrough"),r&&e.toggleFormat("italic"),i&&e.toggleFormat("underline"),"sub"===o&&e.toggleFormat("subscript"),"super"===o&&e.toggleFormat("superscript"),e):e,node:null}}function On(e){let t="normal"===e.style.fontWeight;return{forChild:e=>(In(e)&&!t&&e.toggleFormat("bold"),e),node:null}}let wn=new WeakMap;function Rn(e){null===e.parentElement&&H(129);for(var t,n=e.textContent||"",r=e.parentNode,i=[e];null!==r&&void 0===(t=wn.get(r))&&!("PRE"===r.nodeName||1===r.nodeType&&r.style.whiteSpace.startsWith("pre"));)i.push(r),r=r.parentNode;for(t=void 0===t?r:t,r=0;r<i.length;r++)wn.set(i[r],t);if(null!==t){for(e=[],i=(n=n.split(/(\r?\n|\t)/)).length,t=0;t<i;t++)"\n"===(r=n[t])||"\r\n"===r?e.push(Nn()):"\t"===r?e.push(Ln()):""!==r&&e.push(Pn(r));return{node:e}}if(""===(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===n[0]){for(i=e,t=!0;null!==i&&null!==(i=kn(i,!1));)if(0<(r=i.textContent||"").length){/[ \t\n]$/.test(r)&&(n=n.slice(1)),t=!1;break}t&&(n=n.slice(1))}if(" "===n[n.length-1]){for(i=!0;null!==e&&null!==(e=kn(e,!0));)if(0<(e.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){i=!1;break}i&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:Pn(n)}}let Dn=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function kn(e,t){for(;;){for(var n=void 0;null===(n=t?e.nextSibling:e.previousSibling);)if(null===(e=e.parentElement))return null;if(1===(e=n).nodeType&&(""===(n=e.style.display)&&null===e.nodeName.match(Dn)||""!==n&&!n.startsWith("inline")))return null;for(;null!==(n=t?e.firstChild:e.lastChild);)e=n;if(3===e.nodeType)return e;if("BR"===e.nodeName)return null}}let Mn={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function $n(e){let t=Mn[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(In(e)&&!e.hasFormat(t)&&e.toggleFormat(t),e),node:null}}function Pn(e=""){return st(new xn(e))}function In(e){return e instanceof xn}class Fn extends xn{static getType(){return"tab"}static clone(e){let t=new Fn(e.__key);return t.__text=e.__text,t.__format=e.__format,t.__style=e.__style,t}constructor(e){super("\t",e),this.__detail=2}static importDOM(){return null}static importJSON(e){let t=Ln();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(){H(126)}setDetail(){H(127)}setMode(){H(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Ln(){return st(new Fn)}class Bn{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode(),r=this.offset;if(e=e.offset,Lr(t)){var i=t.getDescendantByIndex(r);t=null!=i?i:t}return Lr(n)&&(i=n.getDescendantByIndex(e),n=null!=i?i:n),t===n?r<e:t.isBefore(n)}getNode(){let e=Pe(this.key);return null===e&&H(20),e}set(e,t,n){let r=this._selection,i=this.key;this.key=e,this.offset=t,this.type=n,Cr()||($e()===i&&Me(e),null!==r&&(r._cachedNodes=null,r.dirty=!0))}}function zn(e,t){let n=t.__key,r=e.offset,i="element";if(In(t))i="text",r>(t=t.getTextContentSize())&&(r=t);else if(!Lr(t)){var o=t.getNextSibling();In(o)?(n=o.__key,r=0,i="text"):(o=t.getParent())&&(n=o.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function Kn(e,t){if(Lr(t)){let n=t.getLastDescendant();Lr(n)||In(n)?zn(e,n):zn(e,t)}else zn(e,t)}function Wn(e,t,n,r){let i=e.getNode(),o=i.getChildAtIndex(e.offset),l=Pn(),s=Kr(i)?jr().append(l):l;l.setFormat(n),l.setStyle(r),null===o?i.append(s):(o.insertBefore(s),"element"===t.type&&t.key===e.key&&t.offset!==e.offset&&t.set(t.key,t.offset+1,"element")),e.is(t)&&t.set(l.__key,0,"text"),e.set(l.__key,0,"text")}function Hn(e,t,n,r){e.key=t,e.offset=n,e.type=r}class Un{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}is(e){if(!Xn(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every((e=>n.has(e)))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Un(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let n=this.getNodes(),r=n.length;var i=n[r-1];if(In(i))i=i.select();else{let e=i.getIndexWithinParent()+1;i=i.getParentOrThrow().select(e,e)}for(i.insertNodes(e,t),e=0;e<r;e++)n[e].remove();return!0}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this._nodes;e=[];for(let n of t)null!==(t=Pe(n))&&e.push(t);return Cr()||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Gn(e){return e instanceof Vn}function Yn(e){let[t,,n]=pr(e),r=(e=n.getChildren()).length;var i=e[0].getChildren().length;let o=Array(r);for(var l=0;l<r;l++)o[l]=Array(i);for(i=0;i<r;i++){l=e[i].getChildren();let n=0;for(let e=0;e<l.length;e++){for(;o[i][n];)n++;let r=l[e],s=r.__rowSpan||1,a=r.__colSpan||1;for(let e=0;e<s;e++)for(let t=0;t<a;t++)o[i+e][n+t]=r;if(t===r)return{colSpan:a,columnIndex:n,rowIndex:i,rowSpan:s};n+=a}}return null}class jn{constructor(e,t,n){this.gridKey=e,this.anchor=t,this.focus=n,this.dirty=!1,this._cachedNodes=null,t._selection=this,n._selection=this}is(e){return!!Jn(e)&&(this.gridKey===e.gridKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus))}set(e,t,n){this.dirty=!0,this.gridKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new jn(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return qn(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let n=this.focus.getNode();return Ne(n.select(0,n.getChildrenSize())).insertNodes(e,t)}getShape(){var e=Pe(this.anchor.key);if(Zr(e)||H(103),null===(e=Yn(e)))throw Error("getCellRect: expected to find AnchorNode");var t=Pe(this.focus.key);Zr(t)||H(104);let n=Yn(t);if(null===n)throw Error("getCellRect: expected to find focusCellNode");t=Math.min(e.columnIndex,n.columnIndex);let r=Math.max(e.columnIndex,n.columnIndex),i=Math.min(e.rowIndex,n.rowIndex);return e=Math.max(e.rowIndex,n.rowIndex),{fromX:Math.min(t,r),fromY:Math.min(i,e),toX:Math.max(t,r),toY:Math.max(i,e)}}getNodes(){function e(e){let{cell:t,startColumn:n,startRow:r}=e;s=Math.min(s,n),a=Math.min(a,r),d=Math.max(d,n+t.__colSpan-1),u=Math.max(u,r+t.__rowSpan-1)}var t=this._cachedNodes;if(null!==t)return t;var n=this.anchor.getNode();t=this.focus.getNode(),n=ht(n,Zr);var r=ht(t,Zr);Zr(n)||H(103),Zr(r)||H(104),ti(t=n.getParent())||H(105),Qr(t=t.getParent())||H(106);let[i,o,l]=fr(t,n,r),s=Math.min(o.startColumn,l.startColumn),a=Math.min(o.startRow,l.startRow),d=Math.max(o.startColumn+o.cell.__colSpan-1,l.startColumn+l.cell.__colSpan-1),u=Math.max(o.startRow+o.cell.__rowSpan-1,l.startRow+l.cell.__rowSpan-1);n=s,r=a;for(var c=s,g=a;s<n||a<r||d>c||u>g;){if(s<n){var h=g-r;--n;for(var f=0;f<=h;f++)e(i[r+f][n])}if(a<r)for(h=c-n,--r,f=0;f<=h;f++)e(i[r][n+f]);if(d>c)for(h=g-r,c+=1,f=0;f<=h;f++)e(i[r+f][c]);if(u>g)for(h=c-n,g+=1,f=0;f<=h;f++)e(i[g][n+f])}for(t=[t],n=null,r=a;r<=u;r++)for(c=s;c<=d;c++)({cell:g}=i[r][c]),ti(h=g.getParent())||H(107),h!==n&&t.push(h),t.push(g,...ft(g)),n=h;return Cr()||(this._cachedNodes=t),t}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Jn(e){return e instanceof jn}class Vn{constructor(e,t,n,r){this.anchor=e,this.focus=t,this.dirty=!1,this.format=n,this.style=r,this._cachedNodes=null,e._selection=this,t._selection=this}is(e){return!!Gn(e)&&(this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style)}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(null!==e)return e;e=this.anchor;var t=this.focus,n=e.isBefore(t),r=n?e:t;n=n?t:e,e=r.getNode(),t=n.getNode();let i=r.offset;return r=n.offset,Lr(e)&&(n=e.getDescendantByIndex(i),e=null!=n?n:e),Lr(t)&&(null!==(n=t.getDescendantByIndex(r))&&n!==e&&t.getChildAtIndex(r)===n&&(n=n.getPreviousSibling()),t=null!=n?n:t),e=e.is(t)?Lr(e)&&0<e.getChildrenSize()?[]:[e]:e.getNodesBetween(t),Cr()||(this._cachedNodes=e),e}setTextNodeRange(e,t,n,r){Hn(this.anchor,e.__key,t,"text"),Hn(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],r=this.anchor,i=this.focus,o=r.isBefore(i),[l,s]=qn(this),a="",d=!0;for(let u=0;u<e.length;u++){let c=e[u];if(Lr(c)&&!c.isInline())d||(a+="\n"),d=!c.isEmpty();else if(d=!1,In(c)){let e=c.getTextContent();c===t?c===n?"element"===r.type&&"element"===i.type&&i.offset!==r.offset||(e=l<s?e.slice(l,s):e.slice(s,l)):e=o?e.slice(l):e.slice(s):c===n&&(e=o?e.slice(0,s):e.slice(0,l)),a+=e}else!Ir(c)&&!En(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=br(),n=t.getEditorState()._selection;if(null!==(e=rr(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n))){var[r,i]=e;Hn(this.anchor,r.key,r.offset,r.type),Hn(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}}clone(){let e=this.anchor,t=this.focus;return new Vn(new Bn(e.key,e.offset,e.type),new Bn(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Oe(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){return!!(this.format&re[e])}insertRawText(e){let t=[],n=(e=e.split(/(\r?\n|\t)/)).length;for(let r=0;r<n;r++){let n=e[r];"\n"===n||"\r\n"===n?t.push(Nn()):"\t"===n?t.push(Ln()):t.push(Pn(n))}this.insertNodes(t)}insertText(e){var t=this.anchor,n=this.focus,r=this.isCollapsed()||t.isBefore(n),i=this.format,o=this.style;r&&"element"===t.type?Wn(t,n,i,o):r||"element"!==n.type||Wn(n,t,i,o);var l=this.getNodes(),s=l.length,a=r?n:t;n=(r?t:n).offset;var d=a.offset;In(t=l[0])||H(26),r=t.getTextContent().length;var u=t.getParentOrThrow(),c=l[s-1];if(this.isCollapsed()&&n===r&&(t.isSegmented()||t.isToken()||!t.canInsertTextAfter()||!u.canInsertTextAfter()&&null===t.getNextSibling())){var g=t.getNextSibling();if(In(g)&&g.canInsertTextBefore()&&!xe(g)||((g=Pn()).setFormat(i),u.canInsertTextAfter()?t.insertAfter(g):u.insertAfter(g)),g.select(0,0),t=g,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===n&&(t.isSegmented()||t.isToken()||!t.canInsertTextBefore()||!u.canInsertTextBefore()&&null===t.getPreviousSibling())){if(In(g=t.getPreviousSibling())&&!xe(g)||((g=Pn()).setFormat(i),u.canInsertTextBefore()?t.insertBefore(g):u.insertBefore(g)),g.select(),t=g,""!==e)return void this.insertText(e)}else if(t.isSegmented()&&n!==r)(u=Pn(t.getTextContent())).setFormat(i),t.replace(u),t=u;else if(!(this.isCollapsed()||""===e||(g=c.getParent(),u.canInsertTextBefore()&&u.canInsertTextAfter()&&(!Lr(g)||g.canInsertTextBefore()&&g.canInsertTextAfter()))))return this.insertText(""),nr(this.anchor,this.focus,null),void this.insertText(e);if(1===s)if(t.isToken())(e=Pn(e)).select(),t.replace(e);else{if(l=t.getFormat(),s=t.getStyle(),n===d&&(l!==i||s!==o)){if(""!==t.getTextContent())return(l=Pn(e)).setFormat(i),l.setStyle(o),l.select(),0===n?t.insertBefore(l,!1):([s]=t.splitText(n),s.insertAfter(l,!1)),void(l.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length));t.setFormat(i),t.setStyle(o)}""===(t=t.spliceText(n,d-n,e,!0)).getTextContent()?t.remove():"text"===this.anchor.type&&(t.isComposing()?this.anchor.offset-=e.length:(this.format=l,this.style=s))}else{if(i=new Set([...t.getParentKeys(),...c.getParentKeys()]),g=Lr(t)?t:t.getParentOrThrow(),o=Lr(c)?c:c.getParentOrThrow(),u=c,!g.is(o)&&o.isInline())do{u=o,o=o.getParentOrThrow()}while(o.isInline());if("text"===a.type&&(0!==d||""===c.getTextContent())||"element"===a.type&&c.getIndexWithinParent()<d)if(In(c)&&!c.isToken()&&d!==c.getTextContentSize()){if(c.isSegmented()){var h=Pn(c.getTextContent());c.replace(h),c=h}Kr(a.getNode())||(c=c.spliceText(0,d,"")),i.add(c.__key)}else(a=c.getParentOrThrow()).canBeEmpty()||1!==a.getChildrenSize()?c.remove():a.remove();else i.add(c.__key);for(a=o.getChildren(),d=new Set(l),c=g.is(o),g=g.isInline()&&null===t.getNextSibling()?g:t,h=a.length-1;0<=h;h--){let e=a[h];if(e.is(t)||Lr(e)&&e.isParentOf(t))break;e.isAttached()&&(!d.has(e)||e.is(u)?c||g.insertAfter(e,!1):e.remove())}if(!c)for(a=o,d=null;null!==a;)(0===(c=(o=a.getChildren()).length)||o[c-1].is(d))&&(i.delete(a.__key),d=a),a=a.getParent();for(t.isToken()?n===r?t.select():((e=Pn(e)).select(),t.replace(e)):""===(t=t.spliceText(n,r-n,e,!0)).getTextContent()?t.remove():t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length),e=1;e<s;e++)t=l[e],i.has(t.__key)||t.remove()}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())this.toggleFormat(e),Me(null);else{var t=this.getNodes(),n=[];for(var r of t)In(r)&&n.push(r);var i=n.length;if(0===i)this.toggleFormat(e),Me(null);else{r=this.anchor;var o=this.focus,l=this.isBackward();t=l?o:r,r=l?r:o;var s=0,a=n[0];if(o="element"===t.type?0:t.offset,"text"===t.type&&o===a.getTextContentSize()&&(s=1,a=n[1],o=0),null!=a){l=a.getFormatFlags(e,null);var d=i-1,u=n[d];if(i="text"===r.type?r.offset:u.getTextContentSize(),a.is(u))o!==i&&(0===o&&i===a.getTextContentSize()?a.setFormat(l):(e=a.splitText(o,i),(e=0===o?e[0]:e[1]).setFormat(l),"text"===t.type&&t.set(e.__key,0,"text"),"text"===r.type&&r.set(e.__key,i-o,"text")),this.format=l);else{0!==o&&([,a]=a.splitText(o),o=0),a.setFormat(l);var c=u.getFormatFlags(e,l);for(0<i&&(i!==u.getTextContentSize()&&([u]=u.splitText(i)),u.setFormat(c)),s+=1;s<d;s++){let t=n[s];if(!t.isToken()){let n=t.getFormatFlags(e,c);t.setFormat(n)}}"text"===t.type&&t.set(a.__key,o,"text"),"text"===r.type&&r.set(u.__key,i,"text"),this.format=l|c}}}}}insertNodes(e,t){if(!this.isCollapsed()){var n=this.isBackward()?this.anchor:this.focus,r=n.getNode().getNextSibling();if(r=r?r.getKey():null,n=(n=n.getNode().getPreviousSibling())?n.getKey():null,this.removeText(),this.isCollapsed()&&"element"===this.focus.type){if(this.focus.key===r&&0===this.focus.offset){var i=Pn();this.focus.getNode().insertBefore(i)}else this.focus.key===n&&this.focus.offset===this.focus.getNode().getChildrenSize()&&(i=Pn(),this.focus.getNode().insertAfter(i));i&&(this.focus.set(i.__key,0,"text"),this.anchor.set(i.__key,0,"text"))}}n=(i=this.anchor).offset;var o=i.getNode();r=o,"element"===i.type&&(r=null===(r=(i=i.getNode()).getChildAtIndex(n-1))?i:r),i=[];var l=o.getNextSiblings(),s=ot(o)?null:o.getTopLevelElementOrThrow();if(In(o))if(r=o.getTextContent().length,0===n&&0!==r)r=null!==(r=o.getPreviousSibling())?r:o.getParentOrThrow(),i.push(o);else if(n===r)r=o;else{if(o.isToken())return!1;[r,o]=o.splitText(n),i.push(o)}o=r,i.push(...l),l=e[0];var a=!1,d=null;for(let t=0;t<e.length;t++){var u=e[t];if(ot(r)||Ir(r)||!Lr(u)||u.isInline())a&&!Lr(u)&&!Ir(u)&&ot(r.getParent())&&H(28);else{if(u.is(l)){if(Lr(r)&&r.isEmpty()&&r.canReplaceWith(u)){r.replace(u),r=u,a=!0;continue}if(we(a=u.getFirstDescendant())){for(var c=a.getParentOrThrow();c.isInline();)c=c.getParentOrThrow();if(a=(d=c.getChildren()).length,Lr(r)){var g=r.getFirstChild();for(let e=0;e<a;e++){let t=d[e];null===g?r.append(t):g.insertAfter(t),g=t}}else{for(g=a-1;0<=g;g--)r.insertAfter(d[g]);r=r.getParentOrThrow()}if(d=d[a-1],c.remove(),a=!0,c.is(u))continue}}In(r)&&(null===s&&H(27),r=s)}a=!1,Lr(r)&&!r.isInline()?(d=u,Ir(u)&&!u.isInline()?r=1===e.length&&r.canBeEmpty()&&r.isEmpty()?r.insertBefore(u,!1):r.insertAfter(u,!1):Lr(u)?!u.canBeEmpty()&&u.isEmpty()||(Kr(r)?(null!==(c=r.getChildAtIndex(n))?c.insertBefore(u):r.append(u),r=u):u.isInline()?(r.append(u),r=u):r=r.insertAfter(u,!1)):(null!==(c=r.getFirstChild())?c.insertBefore(u):r.append(u),r=u)):!Lr(u)||Lr(u)&&u.isInline()||Ir(r)&&!r.isInline()?(d=u,Gn(this)&&Ir(u)&&(Lr(r)||In(r))&&!u.isInline()?(In(r)?(c=r.getParentOrThrow(),[r]=r.splitText(n),r=r.getIndexWithinParent()+1):(c=r,r=n),[,r]=gt(c,r),r=r.insertBefore(u)):r=r.insertAfter(u,!1)):(u=r.getParentOrThrow(),En(r)&&r.remove(),r=u,t--)}if(t&&(In(o)?o.select():In(e=r.getPreviousSibling())?e.select():(e=r.getIndexWithinParent(),r.getParentOrThrow().select(e,e))),Lr(r)){if(e=In(d)?d:Lr(d)&&d.isInline()?d.getLastDescendant():r.getLastDescendant(),t||(null===e?r.select():In(e)?""===e.getTextContent()?e.selectPrevious():e.select():e.selectNext()),0!==i.length)for(t=r,e=i.length-1;0<=e;e--)s=(n=i[e]).getParentOrThrow(),!Lr(r)||ir(n)||Ir(n)&&(!n.isInline()||n.isIsolated())?Lr(r)||ir(n)?Lr(n)&&!n.canInsertAfter(r)?(Lr(o=s.constructor.clone(s))||H(29),o.append(n),r.insertAfter(o)):r.insertAfter(n):(r.insertBefore(n),r=n):(t===r?r.append(n):r.insertBefore(n),r=n),s.isEmpty()&&!s.canBeEmpty()&&s.remove()}else t||(In(r)?r.select():(t=r.getParentOrThrow(),e=r.getIndexWithinParent()+1,t.select(e,e)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var e=this.anchor,t=e.offset,n=[];if("text"===e.type){var r=e.getNode(),i=r.getNextSiblings().reverse(),o=r.getParentOrThrow(),l=o.isInline(),s=l?o.getTextContentSize():r.getTextContentSize();0===t?i.push(r):(l&&(n=o.getNextSiblings()),t===s||l&&t===r.getTextContentSize()||([,r]=r.splitText(t),i.push(r)))}else{if(ot(o=e.getNode()))return i=jr(),n=o.getChildAtIndex(t),i.select(),void(null!==n?n.insertBefore(i,!1):o.append(i));i=o.getChildren().slice(t).reverse()}if(r=i.length,0===t&&0<r&&o.isInline()){if(Lr(i=(n=o.getParentOrThrow()).insertNewAfter(this,!1)))for(n=n.getChildren(),o=0;o<n.length;o++)i.append(n[o])}else if(null===(l=o.insertNewAfter(this,!1)))this.insertLineBreak();else if(Lr(l))if(s=o.getFirstChild(),0===t&&(o.is(e.getNode())||s&&s.is(e.getNode()))&&0<r)o.insertBefore(l);else{if(o=null,t=n.length,e=l.getParentOrThrow(),0<t)for(s=0;s<t;s++)e.append(n[s]);if(0!==r)for(n=0;n<r;n++)t=i[n],null===o?l.append(t):o.insertBefore(t),o=t;l.canBeEmpty()||0!==l.getChildrenSize()?l.selectStart():(l.selectPrevious(),l.remove())}}insertLineBreak(e){let t=Nn();var n=this.anchor;"element"===n.type&&(Kr(n=n.getNode())&&this.insertParagraph()),e?this.insertNodes([t],!0):this.insertNodes([t])&&t.selectNext(0,0)}getCharacterOffsets(){return qn(this)}extract(){var e=this.getNodes(),t=e.length,n=t-1,r=this.anchor;let i=this.focus;var o=e[0];let l=e[n],[s,a]=qn(this);return 0===t?[]:1===t?In(o)&&!this.isCollapsed()?(e=s>a?a:s,n=o.splitText(e,s>a?s:a),null!=(e=0===e?n[0]:n[1])?[e]:[]):[o]:(t=r.isBefore(i),In(o)&&((r=t?s:a)===o.getTextContentSize()?e.shift():0!==r&&([,o]=o.splitText(r),e[0]=o)),In(l)&&(o=l.getTextContent().length,0===(t=t?a:s)?e.pop():t!==o&&([l]=l.splitText(t),e[n]=l)),e)}modify(e,t,n){var r=this.focus,i=this.anchor,o="move"===e,l=Ze(r,t);if(Ir(l)&&!l.isIsolated())o&&l.isKeyboardSelectable()?((t=lr()).add(l.__key),Ke(t)):In(e=t?l.getPreviousSibling():l.getNextSibling())?(l=e.__key,t=t?e.getTextContent().length:0,r.set(l,t,"text"),o&&i.set(l,t,"text")):(n=l.getParentOrThrow(),Lr(e)?(n=e.__key,l=t?e.getChildrenSize():0):(l=l.getIndexWithinParent(),n=n.__key,t||l++),r.set(n,l,"element"),o&&i.set(n,l,"element"));else if(r=ct((i=br())._window)){var s=i._blockCursorElement,a=i._rootElement;if(null===a||null===s||!Lr(l)||l.isInline()||l.canBeEmpty()||ut(s,i,a),r.modify(e,t?"backward":"forward",n),0<r.rangeCount&&(l=r.getRangeAt(0),i=Kr(i=this.anchor.getNode())?i:it(i),this.applyDOMRange(l),this.dirty=!0,!o)){for(o=this.getNodes(),e=[],n=!1,s=0;s<o.length;s++)nt(a=o[s],i)?e.push(a):n=!0;n&&0<e.length&&(t?Lr(t=e[0])?t.selectStart():t.getParentOrThrow().selectStart():Lr(t=e[e.length-1])?t.selectEnd():t.getParentOrThrow().selectEnd()),r.anchorNode===l.startContainer&&r.anchorOffset===l.startOffset||(t=this.focus,r=(o=this.anchor).key,l=o.offset,i=o.type,Hn(o,t.key,t.offset,t.type),Hn(t,r,l,i),this._cachedNodes=null)}}}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){var n=this.anchor,r=this.focus,i=n.getNode();if(!e&&("element"===n.type&&Lr(i)&&n.offset===i.getChildrenSize()||"text"===n.type&&n.offset===i.getTextContentSize())){var o=i.getParent();if(Lr(o=i.getNextSibling()||(null===o?null:o.getNextSibling()))&&o.isShadowRoot())return}if(Ir(o=Ze(r,e))&&!o.isIsolated())return void(o.isKeyboardSelectable()&&Lr(i)&&0===i.getChildrenSize()?(i.remove(),e=lr(),e.add(o.__key),Ke(e)):(o.remove(),br().dispatchCommand(s,void 0)));if(!e&&Lr(o)&&Lr(i)&&i.isEmpty())return i.remove(),void o.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===n.offset&&("element"===n.type?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(o="text"===r.type?r.getNode():null,i="text"===n.type?n.getNode():null,null!==o&&o.isSegmented()){if(n=r.offset,r=o.getTextContentSize(),o.is(i)||e&&n!==r||!e&&0!==n)return void Qn(o,e,n)}else if(null!==i&&i.isSegmented()&&(n=n.offset,r=i.getTextContentSize(),i.is(o)||e&&0!==n||!e&&n!==r))return void Qn(i,e,n);if(i=this.anchor,o=this.focus,(n=i.getNode())===(r=o.getNode())&&"text"===i.type&&"text"===o.type){var l=i.offset,a=o.offset;let t=l<a;(r=t?l:a)!==(l=(a=t?a:l)-1)&&(He(n=n.getTextContent().slice(r,a))||(e?o.offset=l:i.offset=l))}}}this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset&&((e=this.anchor.getNode()).isEmpty()&&Kr(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this))}deleteLine(e){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character")),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify("extend",e,"word"),this.removeText()}}function Xn(e){return e instanceof Un}function Zn(e){let t=e.offset;return"text"===e.type?t:t===(e=e.getNode()).getChildrenSize()?e.getTextContent().length:0}function qn(e){let t=e.anchor;return e=e.focus,"element"===t.type&&"element"===e.type&&t.key===e.key&&t.offset===e.offset?[0,0]:[Zn(t),Zn(e)]}function Qn(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,o=0,l=0;for(let e=0;e<i;e++){let s=e===i-1;if(l=o,o+=r[e].length,t&&o===n||o>n||s){r.splice(e,1),s&&(l=void 0);break}}""===(t=r.join("").trim())?e.remove():(e.setTextContent(t),e.select(l,l))}function er(e,t,n,r){var i=t;if(1===e.nodeType){let s=!1;var o=e.childNodes,l=o.length;i===l&&(s=!0,i=l-1);let a=o[i];if(l=!1,a===r._blockCursorElement?(a=o[i+1],l=!0):null!==r._blockCursorElement&&i--,In(r=We(a)))i=s?r.getTextContentSize():0;else{if(null===(o=We(e)))return null;if(Lr(o)?((t=Lr(e=o.getChildAtIndex(i)))&&(t=e.getParent(),t=null===n||null===t||!t.canBeEmpty()||t!==n.getNode()),t&&(null===(n=s?e.getLastDescendant():e.getFirstDescendant())?(o=e,i=0):o=Lr(e=n)?e:e.getParentOrThrow()),In(e)?(r=e,o=null,i=s?e.getTextContentSize():0):e!==o&&s&&!l&&i++):(i=o.getIndexWithinParent(),i=0===t&&Ir(o)&&We(e)===o?i:i+1,o=o.getParentOrThrow()),Lr(o))return new Bn(o.__key,i,"element")}}else r=We(e);return In(r)?new Bn(r.__key,i,"text"):null}function tr(e,t,n){var r=e.offset,i=e.getNode();0===r?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&null===r&&Lr(i)&&i.isInline()&&(In(t=i.getPreviousSibling())&&(e.key=t.__key,e.offset=t.getTextContent().length)):Lr(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):In(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&Lr(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type="element"):(n||t)&&null===r&&Lr(i)&&i.isInline()&&!i.canInsertTextAfter()&&(In(t=i.getNextSibling())&&(e.key=t.__key,e.offset=0)))}function nr(e,t,n){if("text"===e.type&&"text"===t.type){var r=e.isBefore(t);let i=e.is(t);tr(e,r,i),tr(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),(r=br()).isComposing()&&r._compositionKey!==e.key&&Gn(n)&&(r=n.anchor,n=n.focus,Hn(e,r.key,r.offset,r.type),Hn(t,n.key,n.offset,n.type))}}function rr(e,t,n,r,i,o){return null!==e&&null!==n&&Se(i,e,n)?null===(t=er(e,t,Gn(o)?o.anchor:null,i))||null===(r=er(n,r,Gn(o)?o.focus:null,i))||"element"===t.type&&"element"===r.type&&(e=We(e),n=We(n),Ir(e)&&Ir(n))?null:(nr(t,r,o),[t,r]):null}function ir(e){return Lr(e)&&!e.isInline()}function or(e,t,n,r,i,o){let l=Sr();return(e=new Vn(new Bn(e,t,i),new Bn(n,r,o),0,"")).dirty=!0,l._selection=e}function lr(){return new Un(new Set)}function sr(e,t,n){var r=n._window;if(null===r)return null;var i=r.event,o=i?i.type:void 0;let l;if(r="selectionchange"===o,i=!de&&(r||"beforeinput"===o||"compositionstart"===o||"compositionend"===o||"click"===o&&i&&3===i.detail||"drop"===o||void 0===o),Gn(e)&&!i)return e.clone();if(null===t)return null;if(i=t.anchorNode,o=t.focusNode,l=t.anchorOffset,t=t.focusOffset,r&&Gn(e)&&!Se(n,i,o))return e.clone();if(null===(n=rr(i,l,o,t,n,e)))return null;let[s,a]=n;return new Vn(s,a,Gn(e)?e.format:0,Gn(e)?e.style:"")}function ar(){return Sr()._selection}function dr(){return br()._editorState._selection}function ur(e,t,n,r=1){var i=e.anchor,o=e.focus,l=i.getNode(),s=o.getNode();if(t.is(l)||t.is(s)){if(l=t.__key,e.isCollapsed())(n<=(t=i.offset)&&0<r||n<t&&0>r)&&(n=Math.max(0,t+r),i.set(l,n,"element"),o.set(l,n,"element"),cr(e));else{let d=e.isBackward();var a=(s=d?o:i).getNode();o=(i=d?i:o).getNode(),t.is(a)&&((n<=(a=s.offset)&&0<r||n<a&&0>r)&&s.set(l,Math.max(0,a+r),"element")),t.is(o)&&((n<=(t=i.offset)&&0<r||n<t&&0>r)&&i.set(l,Math.max(0,t+r),"element"))}cr(e)}}function cr(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,o=t.getNode(),l=r.getNode();if(e.isCollapsed())Lr(o)&&(In(l=(i=n>=(l=o.getChildrenSize()))?o.getChildAtIndex(l-1):o.getChildAtIndex(n))&&(n=0,i&&(n=l.getTextContentSize()),t.set(l.__key,n,"text"),r.set(l.__key,n,"text")));else{if(Lr(o)){let r=o.getChildrenSize();In(n=(e=n>=r)?o.getChildAtIndex(r-1):o.getChildAtIndex(n))&&(o=0,e&&(o=n.getTextContentSize()),t.set(n.__key,o,"text"))}Lr(l)&&(In(i=(t=i>=(n=l.getChildrenSize()))?l.getChildAtIndex(n-1):l.getChildAtIndex(i))&&(l=0,t&&(l=i.getTextContentSize()),r.set(i.__key,l,"text")))}}function gr(e,t,n,r,i){let o=null,l=0,s=null;null!==r?(o=r.__key,In(r)?(l=r.getTextContentSize(),s="text"):Lr(r)&&(l=r.getChildrenSize(),s="element")):null!==i&&(o=i.__key,In(i)?s="text":Lr(i)&&(s="element")),null!==o&&null!==s?e.set(o,l,s):(l=t.getIndexWithinParent(),-1===l&&(l=n.getChildrenSize()),e.set(n.__key,l,"element"))}function hr(e,t,n,r,i){"text"===e.type?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}function fr(e,t,n){let r=[],i=null,o=null;e=e.getChildren();for(let u=0;u<e.length;u++){var l=e[u];ti(l)||H(108);var s=l.getChildren();l=0;for(let e of s){for(Zr(e)||H(109);void 0!==r[u]&&void 0!==r[u][l];)l++;var a=l,d=e;let c={cell:d,startColumn:a,startRow:s=u},g=d.__rowSpan,h=d.__colSpan;for(let e=0;e<g;e++){void 0===r[s+e]&&(r[s+e]=[]);for(let t=0;t<h;t++)r[s+e][a+t]=c}t.is(d)&&(i=c),n.is(d)&&(o=c),l+=e.__colSpan}}return null===i&&H(110),null===o&&H(111),[r,i,o]}function pr(e){e instanceof Xr||(e instanceof _n?Zr(e=ht(e,Zr))||H(114):Zr(e=ht(e.getNode(),Zr))||H(114));let t=e.getParent();ti(t)||H(115);let n=t.getParent();return Qr(n)||H(116),[e,t,n]}let _r=null,mr=null,yr=!1,Nr=!1,Er=0,Tr={characterData:!0,childList:!0,subtree:!0};function Cr(){return yr||null!==_r&&_r._readOnly}function vr(){yr&&H(13)}function Sr(){return null===_r&&H(15),_r}function br(){return null===mr&&H(16),mr}function xr(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(void 0===i&&H(30,r),void 0===(e=n.get(r))&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function Ar(e,t){var n=e.type,r=t.get(n);if(void 0===r&&H(17,n),n=r.klass,e.type!==n.getType()&&H(18,n.name),n=n.importJSON(e),e=e.children,Lr(n)&&Array.isArray(e))for(r=0;r<e.length;r++){let i=Ar(e[r],t);n.append(i)}return n}function Or(e,t){let n=_r,r=yr,i=mr;_r=e,yr=!0,mr=null;try{return t()}finally{_r=n,yr=r,mr=i}}function wr(e,t){let n=e._pendingEditorState,r=e._rootElement,i=e._headless||null===r;if(null!==n){var o=e._editorState,l=o._selection,a=n._selection,d=0!==e._dirtyType,u=_r,c=yr,g=mr,h=e._updating,f=e._observer,p=null;if(e._pendingEditorState=null,e._editorState=n,!i&&d&&null!==f){mr=e,_r=n,yr=!1,e._updating=!0;try{let t=e._dirtyType,r=e._dirtyElements,i=e._dirtyLeaves;f.disconnect();var _=r,m=i;Ot=wt=At="",Rt=2===t,kt=null,yt=e,mt=e._config,Nt=e._nodes,Et=yt._listeners.mutation,Tt=_,Ct=m,vt=o._nodeMap,St=n._nodeMap,Dt=n._readOnly,bt=new Map(e._keyToDOMMap);let l=new Map;xt=l,Ut("root",null),xt=bt=mt=St=vt=Ct=Tt=Nt=yt=void 0,p=l}catch(t){if(t instanceof Error&&e._onError(t),Nr)throw t;return Jr(e,null,r,n),pe(e),e._dirtyType=2,Nr=!0,wr(e,o),void(Nr=!1)}finally{f.observe(r,Tr),e._updating=h,_r=u,yr=c,mr=g}}n._readOnly||(n._readOnly=!0);var y=e._dirtyLeaves,N=e._dirtyElements,E=e._normalizedNodes,T=e._updateTags,C=e._deferred;d&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set);var v,S=e._decorators,b=e._pendingDecorators||S,x=n._nodeMap;for(v in b)x.has(v)||(b===S&&(b=Le(e)),delete b[v]);var A=i?null:ct(e._window);if(e._editable&&null!==A&&(d||null===a||a.dirty)){mr=e,_r=n;try{if(null!==f&&f.disconnect(),d||null===a||a.dirty){let t=e._blockCursorElement;null!==t&&ut(t,e,r);e:{let t=A.anchorNode,n=A.focusNode,i=A.anchorOffset,o=A.focusOffset,s=document.activeElement;if(!(T.has("collaboration")&&s!==r||null!==s&&ve(s)))if(Gn(a)){var O=a.anchor,w=a.focus,R=O.key,D=w.key,k=et(e,R),M=et(e,D),$=O.offset,P=w.offset,I=a.format,F=a.style,L=a.isCollapsed(),B=k,z=M,K=!1;if("text"===O.type){B=Ae(k);let e=O.getNode();K=e.getFormat()!==I||e.getStyle()!==F}else Gn(l)&&"text"===l.anchor.type&&(K=!0);if("text"===w.type&&(z=Ae(M)),null!==B&&null!==z){if(L&&(null===l||K||Gn(l)&&(l.format!==I||l.style!==F))){var W=performance.now();ln=[I,F,$,R,W]}if(i===$&&o===P&&t===B&&n===z&&("Range"!==A.type||!L)&&(null!==s&&r.contains(s)||r.focus({preventScroll:!0}),"element"!==O.type))break e;try{A.setBaseAndExtent(B,$,z,P)}catch(e){}if(!T.has("skip-scroll-into-view")&&a.isCollapsed()&&null!==r&&r===document.activeElement){let t=a instanceof Vn&&"element"===a.anchor.type?B.childNodes[$]||null:0<A.rangeCount?A.getRangeAt(0):null;if(null!==t){let n;if(t instanceof Text){let e=document.createRange();e.selectNode(t),n=e.getBoundingClientRect()}else n=t.getBoundingClientRect();let i=r.ownerDocument,o=i.defaultView;if(null!==o)for(var H,U,{top:G,bottom:Y}=n,j=r;null!==j;){let t=j===i.body;if(t)H=0,U=rt(e).innerHeight;else{let e=j.getBoundingClientRect();H=e.top,U=e.bottom}let n=0;if(G<H?n=-(H-G):Y>U&&(n=Y-U),0!==n)if(t)o.scrollBy(0,n);else{let e=j.scrollTop;j.scrollTop+=n;let t=j.scrollTop-e;G-=t,Y-=t}if(t)break;j=tt(j)}}}tn=!0}}else null!==l&&Se(e,t,n)&&A.removeAllRanges()}}e:{let t=e._blockCursorElement;if(Gn(a)&&a.isCollapsed()&&"element"===a.anchor.type&&r.contains(document.activeElement)){let n=a.anchor,i=n.getNode(),o=n.offset,l=i.getChildrenSize(),s=!1,d=null;if(o===l){dt(i.getChildAtIndex(o-1))&&(s=!0)}else{let t=i.getChildAtIndex(o);if(dt(t)){let n=t.getPreviousSibling();(null===n||dt(n))&&(s=!0,d=e.getElementByKey(t.__key))}}if(s){let n=e.getElementByKey(i.__key);if(null===t){let n=e._config.theme,r=document.createElement("div");r.contentEditable="false",r.setAttribute("data-lexical-cursor","true");let i=n.blockCursor;if(void 0!==i){if("string"==typeof i){let e=i.split(" ");i=n.blockCursor=e}void 0!==i&&r.classList.add(...i)}e._blockCursorElement=t=r}r.style.caretColor="transparent",null===d?n.appendChild(t):n.insertBefore(t,d);break e}}null!==t&&ut(t,e,r)}null!==f&&f.observe(r,Tr)}finally{mr=g,_r=u}}if(null!==p){var J=p;let t=Array.from(e._listeners.mutation),n=t.length;for(let e=0;e<n;e++){let[n,r]=t[e],i=J.get(r);void 0!==i&&n(i,{dirtyLeaves:y,prevEditorState:o,updateTags:T})}}Gn(a)||null===a||null!==l&&l.is(a)||e.dispatchCommand(s,void 0);var V=e._pendingDecorators;null!==V&&(e._decorators=V,e._pendingDecorators=null,Rr("decorator",e,!0,V));var X=Be(t||o),Z=Be(n);if(X!==Z&&Rr("textcontent",e,!0,Z),Rr("update",e,!0,{dirtyElements:N,dirtyLeaves:y,editorState:n,normalizedNodes:E,prevEditorState:t||o,tags:T}),e._deferred=[],0!==C.length){let t=e._updating;e._updating=!0;try{for(let e=0;e<C.length;e++)C[e]()}finally{e._updating=t}}var q=e._updates;if(0!==q.length){let t=q.shift();if(t){let[n,r]=t;Mr(e,n,r)}}}}function Rr(e,t,n,...r){let i=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=i}}function Dr(e,t,n){if(!1===e._updating||mr!==e){let r=!1;return e.update((()=>{r=Dr(e,t,n)})),r}let r=Ue(e);for(let o=4;0<=o;o--)for(let l=0;l<r.length;l++){var i=r[l]._commands.get(t);if(void 0!==i&&void 0!==(i=i[o])){let t=(i=Array.from(i)).length;for(let r=0;r<t;r++)if(!0===i[r](n,e))return!0}}return!1}function kr(e,t){let n=e._updates;for(t=t||!1;0!==n.length;){var r=n.shift();if(r){let n,[i,o]=r;void 0!==o&&(r=o.onUpdate,n=o.tag,o.skipTransforms&&(t=!0),r&&e._deferred.push(r),n&&e._updateTags.add(n)),i()}}return t}function Mr(e,t,n){let r=e._updateTags;var i,o=i=!1;if(void 0!==n){var l=n.onUpdate;null!=(i=n.tag)&&r.add(i),i=n.skipTransforms||!1,o=n.discrete||!1}l&&e._deferred.push(l),n=e._editorState;let s=!1;(null===(l=e._pendingEditorState)||l._readOnly)&&(l=e._pendingEditorState=new Ur(new Map((l||n)._nodeMap)),s=!0),l._flushSync=o,o=_r;let a=yr,d=mr,u=e._updating;_r=l,yr=!1,e._updating=!0,mr=e;try{s&&(e._headless?null!=n._selection&&(l._selection=n._selection.clone()):l._selection=function(e){let t=e.getEditorState()._selection,n=ct(e._window);return Xn(t)||Jn(t)?t.clone():sr(t,n,e)}(e));let r=e._compositionKey;t(),i=kr(e,i),function(e,t){if(t=t.getEditorState()._selection,Gn(e=e._selection)){var n=e.anchor;let r,i=e.focus;"text"===n.type&&(r=n.getNode(),r.selectionTransform(t,e)),"text"===i.type&&r!==(n=i.getNode())&&n.selectionTransform(t,e)}}(l,e),0!==e._dirtyType&&(i?function(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)In(t=e.get(n))&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&ye(t)}(l,e):function(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=$e(),o=new Map;var l=n;let s=l.size;for(var a=r,d=a.size;0<s||0<d;){if(0<s){t._dirtyLeaves=new Set;for(let r of l)In(l=e.get(r))&&l.isAttached()&&l.isSimpleText()&&!l.isUnmergeable()&&ye(l),void 0!==l&&void 0!==l&&l.__key!==i&&l.isAttached()&&xr(t,l,o),n.add(r);if(s=(l=t._dirtyLeaves).size,0<s){Er++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let n of a)a=n[0],d=n[1],("root"===a||d)&&(void 0!==(l=e.get(a))&&void 0!==l&&l.__key!==i&&l.isAttached()&&xr(t,l,o),r.set(a,d));s=(l=t._dirtyLeaves).size,d=(a=t._dirtyElements).size,Er++}t._dirtyLeaves=n,t._dirtyElements=r}(l,e),kr(e),function(e,t,n,r){e=e._nodeMap,t=t._nodeMap;let i=[];for(let[n]of r){let o=t.get(n);void 0===o||o.isAttached()||(Lr(o)&&_t(o,n,e,t,i,r),e.has(n)||r.delete(n),i.push(n))}for(let e of i)t.delete(e);for(let i of n)void 0===(r=t.get(i))||r.isAttached()||(e.has(i)||n.delete(i),t.delete(i))}(n,l,e._dirtyLeaves,e._dirtyElements)),r!==e._compositionKey&&(l._flushSync=!0);let o=l._selection;if(Gn(o)){let e=l._nodeMap,t=o.focus.key;void 0!==e.get(o.anchor.key)&&void 0!==e.get(t)||H(19)}else Xn(o)&&0===o._nodes.size&&(l._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void wr(e)}finally{_r=o,yr=a,mr=d,e._updating=u,Er=0}0!==e._dirtyType||function(e,t){if(t=t.getEditorState()._selection,e=e._selection,null!==e){if(e.dirty||!e.is(t))return!0}else if(null!==t)return!0;return!1}(l,e)?l._flushSync?(l._flushSync=!1,wr(e)):s&&Ce((()=>{wr(e)})):(l._flushSync=!1,s&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function $r(e,t,n){e._updating?e._updates.push([t,n]):Mr(e,t,n)}class Pr extends _n{constructor(e){super(e)}decorate(){H(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Ir(e){return e instanceof Pr}class Fr extends _n{constructor(e){super(e),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return le[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=br()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(In(t)&&e.push(t),Lr(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;null!==e;){if(Lr(e)){let t=e.getFirstChild();if(null!==t){e=t;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;null!==e;){if(Lr(e)){let t=e.getLastChild();if(null!==t){e=t;continue}}break}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;return e>=n?Lr(e=t[n-1])&&e.getLastDescendant()||e||null:Lr(e=t[e])&&e.getFirstDescendant()||e||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:Pe(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&H(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:Pe(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&H(96,this.__key),e}getChildAtIndex(e){var t=this.getChildrenSize();let n;if(e<t/2){for(n=this.getFirstChild(),t=0;null!==n&&t<=e;){if(t===e)return n;n=n.getNextSibling(),t++}return null}for(n=this.getLastChild(),--t;null!==n&&t>=e;){if(t===e)return n;n=n.getPreviousSibling(),t--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContent(),Lr(i)&&r!==n-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContentSize(),Lr(i)&&r!==n-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){return""!==e&&(e=oe[e],!!(this.getFormat()&e))}select(e,t){vr();let n=ar(),r=e,i=t;var o=this.getChildrenSize();if(!this.canBeEmpty())if(0===e&&0===t){if(In(e=this.getFirstChild())||Lr(e))return e.select(0,0)}else if(!(void 0!==e&&e!==o||void 0!==t&&t!==o)&&(In(e=this.getLastChild())||Lr(e)))return e.select();return void 0===r&&(r=o),void 0===i&&(i=o),o=this.__key,Gn(n)?(n.anchor.set(o,r,"element"),n.focus.set(o,i,"element"),n.dirty=!0,n):or(o,r,o,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return Lr(e)||In(e)?e.select(0,0):null!==e?e.selectPrevious():this.select(0,0)}selectEnd(){let e=this.getLastDescendant();return Lr(e)||In(e)?e.select():null!==e?e.selectNext():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach((e=>e.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?oe[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){let r=n.length,i=this.getChildrenSize(),o=this.getWritable(),l=o.__key;var s=[],a=[];let d=this.getChildAtIndex(e+t),u=null,c=i-t+r;if(0!==e)if(e===i)u=this.getLastChild();else{var g=this.getChildAtIndex(e);null!==g&&(u=g.getPreviousSibling())}if(0<t){var h=null===u?this.getFirstChild():u.getNextSibling();for(g=0;g<t;g++){null===h&&H(100);var f=h.getNextSibling(),p=h.__key;De(h=h.getWritable()),a.push(p),h=f}}for(g=u,f=0;f<r;f++){p=n[f],null!==g&&p.is(g)&&(u=g=g.getPreviousSibling()),(h=p.getWritable()).__parent===l&&c--,De(h);let e=p.__key;null===g?(o.__first=e,h.__prev=null):((g=g.getWritable()).__next=e,h.__prev=g.__key),p.__key===l&&H(76),h.__parent=l,s.push(e),g=p}if(e+t===i?null!==g&&(g.getWritable().__next=null,o.__last=g.__key):null!==d&&(e=d.getWritable(),null!==g?(t=g.getWritable(),e.__prev=g.__key,t.__next=d.__key):e.__prev=null),o.__size=c,a.length&&Gn(e=ar())){a=new Set(a),s=new Set(s);let{anchor:t,focus:n}=e;Br(t,a,s)&&gr(t,t.getNode(),this,u,d),Br(n,a,s)&&gr(n,n.getNode(),this,u,d),0!==c||this.canBeEmpty()||ot(this)||this.remove()}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function Lr(e){return e instanceof Fr}function Br(e,t,n){for(e=e.getNode();e;){let r=e.__key;if(t.has(r)&&!n.has(r))return!0;e=e.getParent()}return!1}class zr extends Fr{static getType(){return"root"}static clone(){return new zr}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){H(51)}getTextContent(){let e=this.__cachedText;return!Cr()&&0!==br()._dirtyType||null===e?super.getTextContent():e}remove(){H(52)}replace(){H(53)}insertBefore(){H(54)}insertAfter(){H(55)}updateDOM(){return!1}append(...e){for(let t=0;t<e.length;t++){let n=e[t];Lr(n)||Ir(n)||H(56)}return super.append(...e)}static importJSON(e){let t=ze();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function Kr(e){return e instanceof zr}function Wr(){return new Ur(new Map([["root",new zr]]))}function Hr(e){let t=e.exportJSON();var n=e.constructor;t.type!==n.getType()&&H(130,n.name);let r=t.children;if(Lr(e))for(Array.isArray(r)||H(59,n.name),e=e.getChildren(),n=0;n<e.length;n++){let t=Hr(e[n]);r.push(t)}return t}class Ur{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return Or(this,e)}clone(e){return(e=new Ur(this._nodeMap,void 0===e?this._selection:e))._readOnly=!0,e}toJSON(){return Or(this,(()=>({root:Hr(ze())})))}}class Gr extends Fr{static getType(){return"paragraph"}static clone(e){return new Gr(e.__key)}createDOM(e){let t=document.createElement("p");return void 0!==(e=Je(e.theme,"paragraph"))&&t.classList.add(...e),t}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:Yr,priority:0})}}exportDOM(e){if(({element:e}=super.exportDOM(e)),e&&pt(e)){this.isEmpty()&&e.append(document.createElement("br"));var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t),0<(t=this.getIndent())&&(e.style.textIndent=20*t+"px")}return{element:e}}static importJSON(e){let t=jr();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(e,t){e=jr();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=this.getChildren();if(0===e.length||In(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function Yr(e){let t=jr();return e.style&&(t.setFormat(e.style.textAlign),0<(e=parseInt(e.style.textIndent,10)/20)&&t.setIndent(e)),{node:t}}function jr(){return st(new Gr)}function Jr(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=Wr(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null,null!==(r=e._observer)&&(r.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",i.set("root",n))}class Vr{constructor(e,t,n,r,i,o,l){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Ge(),this._onError=i,this._htmlConversions=o,this._editable=l,this._headless=null!==t&&t._headless,this._blockCursorElement=this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&H(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=r.get(e);void 0===i&&H(36,String(e));let o=i[n];return o.add(t),()=>{o.delete(t),i.every((e=>0===e.size))&&r.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&H(37,e.name);let n=this._listeners.mutation;return n.set(t,e),()=>{n.delete(t)}}registerNodeTransformToKlass(e,t){var n=e.getType();return void 0===(n=this._nodes.get(n))&&H(37,e.name),n.transforms.add(t),n}registerNodeTransform(e,t){var n=this.registerNodeTransformToKlass(e,t);let r=[n];return null!=(n=n.replaceWithKlass)&&(n=this.registerNodeTransformToKlass(n,t),r.push(n)),function(e,t){$r(e,(()=>{var e=Sr();if(!e.isEmpty())if("root"===t)ze().markDirty();else{e=e._nodeMap;for(let[,t]of e)t.markDirty()}}),null===e._pendingEditorState?{tag:"history-merge"}:void 0)}(this,e.getType()),()=>{r.forEach((e=>e.transforms.delete(t)))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return Dr(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let o=Je(this._config.theme,"root");var n=this._pendingEditorState||this._editorState;if(this._rootElement=e,Jr(this,t,e,n),null!==t){if(!this._config.disableEvents){0!==en&&(en--,0===en&&t.ownerDocument.removeEventListener("selectionchange",fn));var r=t.__lexicalEditor;if(null!=r){if(null!==r._parentEditor){var i=Ue(r);i=i[i.length-1]._key,hn.get(i)===r&&hn.delete(i)}else hn.delete(r._key);t.__lexicalEditor=null}for(r=gn(t),i=0;i<r.length;i++)r[i]();t.__lexicalEventHandles=[]}null!=o&&t.classList.remove(...o)}null!==e?(n=(n=e.ownerDocument)&&n.defaultView||null,(r=e.style).userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=n,this._dirtyType=2,pe(this),this._updateTags.add("history-merge"),wr(this),this._config.disableEvents||function(e,t){0===en&&e.ownerDocument.addEventListener("selectionchange",fn),en++,e.__lexicalEditor=t;let n=gn(e);for(let r=0;r<Vt.length;r++){let[i,o]=Vt[r],l="function"==typeof o?e=>{!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()&&o(e,t))}:e=>{if(!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()))switch(i){case"cut":return Dr(t,L,e);case"copy":return Dr(t,F,e);case"paste":return Dr(t,h,e);case"dragstart":return Dr(t,$,e);case"dragover":return Dr(t,P,e);case"dragend":return Dr(t,I,e);case"focus":return Dr(t,z,e);case"blur":return Dr(t,K,e);case"drop":return Dr(t,M,e)}};e.addEventListener(i,l),n.push((()=>{e.removeEventListener(i,l)}))}}(e,this),null!=o&&e.classList.add(...o)):(this._editorState=n,this._window=this._pendingEditorState=null),Rr("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&H(38),fe(this);let n=this._pendingEditorState,r=this._updateTags;t=void 0!==t?t.tag:null,null===n||n.isEmpty()||(null!=t&&r.add(t),wr(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=t&&r.add(t),wr(this)}parseEditorState(e,t){e="string"==typeof e?JSON.parse(e):e;let n=Wr(),r=_r,i=yr,o=mr,l=this._dirtyElements,s=this._dirtyLeaves,a=this._cloneNotNeeded,d=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,_r=n,yr=!1,mr=this;try{Ar(e.root,this._nodes),t&&t(),n._readOnly=!0}catch(e){e instanceof Error&&this._onError(e)}finally{this._dirtyElements=l,this._dirtyLeaves=s,this._cloneNotNeeded=a,this._dirtyType=d,_r=r,yr=i,mr=o}return n}update(e,t){$r(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),$r(this,(()=>{let e=ar(),n=ze();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){var e=this._rootElement;null!==e&&e.blur(),null!==(e=ct(this._window))&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Rr("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class Xr extends Fr{constructor(e,t){super(t),this.__colSpan=e,this.__rowSpan=1}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan,rowSpan:this.__rowSpan}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}}function Zr(e){return e instanceof Xr}class qr extends Fr{}function Qr(e){return e instanceof qr}class ei extends Fr{}function ti(e){return e instanceof ei}l.$addUpdateTag=function(e){vr(),br()._updateTags.add(e)},l.$applyNodeReplacement=st,l.$copyNode=lt,l.$createLineBreakNode=Nn,l.$createNodeSelection=lr,l.$createParagraphNode=jr,l.$createRangeSelection=function(){let e=new Bn("root",0,"element"),t=new Bn("root",0,"element");return new Vn(e,t,0,"")},l.$createTabNode=Ln,l.$createTextNode=Pn,l.$getAdjacentNode=Ze,l.$getNearestNodeFromDOMNode=Fe,l.$getNearestRootOrShadowRoot=it,l.$getNodeByKey=Pe,l.$getPreviousSelection=dr,l.$getRoot=ze,l.$getSelection=ar,l.$getTextContent=function(){let e=ar();return null===e?"":e.getTextContent()},l.$hasAncestor=nt,l.$hasUpdateTag=function(e){return br()._updateTags.has(e)},l.$insertNodes=function(e,t){let n=ar()||dr();return null===n&&(n=ze().selectEnd()),n.insertNodes(e,t)},l.$isBlockElementNode=ir,l.$isDecoratorNode=Ir,l.$isElementNode=Lr,l.$isInlineElementOrDecoratorNode=function(e){return Lr(e)&&e.isInline()||Ir(e)&&e.isInline()},l.$isLeafNode=we,l.$isLineBreakNode=En,l.$isNodeSelection=Xn,l.$isParagraphNode=function(e){return e instanceof Gr},l.$isRangeSelection=Gn,l.$isRootNode=Kr,l.$isRootOrShadowRoot=ot,l.$isTabNode=function(e){return e instanceof Fn},l.$isTextNode=In,l.$nodesOfType=function(e){var t=Sr();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,o]of t)o instanceof e&&o.__type===r&&(n||o.isAttached())&&i.push(o);return i},l.$normalizeSelection__EXPERIMENTAL=Ne,l.$parseSerializedNode=function(e){return Ar(e,br()._nodes)},l.$selectAll=function(){var e=ze();Ke(Ne(e=e.select(0,e.getChildrenSize())))},l.$setCompositionKey=Me,l.$setSelection=Ke,l.$splitNode=gt,l.BLUR_COMMAND=K,l.CAN_REDO_COMMAND={},l.CAN_UNDO_COMMAND={},l.CLEAR_EDITOR_COMMAND={},l.CLEAR_HISTORY_COMMAND={},l.CLICK_COMMAND=a,l.COMMAND_PRIORITY_CRITICAL=4,l.COMMAND_PRIORITY_EDITOR=0,l.COMMAND_PRIORITY_HIGH=3,l.COMMAND_PRIORITY_LOW=1,l.COMMAND_PRIORITY_NORMAL=2,l.CONTROLLED_TEXT_INSERTION_COMMAND=g,l.COPY_COMMAND=F,l.CUT_COMMAND=L,l.DELETE_CHARACTER_COMMAND=d,l.DELETE_LINE_COMMAND=_,l.DELETE_WORD_COMMAND=p,l.DEPRECATED_$computeGridMap=fr,l.DEPRECATED_$createGridSelection=function(){let e=new Bn("root",0,"element"),t=new Bn("root",0,"element");return new jn("root",e,t)},l.DEPRECATED_$getGridCellNodeRect=Yn,l.DEPRECATED_$getNodeTriplet=pr,l.DEPRECATED_$isGridCellNode=Zr,l.DEPRECATED_$isGridNode=Qr,l.DEPRECATED_$isGridRowNode=ti,l.DEPRECATED_$isGridSelection=Jn,l.DEPRECATED_GridCellNode=Xr,l.DEPRECATED_GridNode=qr,l.DEPRECATED_GridRowNode=ei,l.DRAGEND_COMMAND=I,l.DRAGOVER_COMMAND=P,l.DRAGSTART_COMMAND=$,l.DROP_COMMAND=M,l.DecoratorNode=Pr,l.ElementNode=Fr,l.FOCUS_COMMAND=z,l.FORMAT_ELEMENT_COMMAND={},l.FORMAT_TEXT_COMMAND=m,l.INDENT_CONTENT_COMMAND={},l.INSERT_LINE_BREAK_COMMAND=u,l.INSERT_PARAGRAPH_COMMAND=c,l.INSERT_TAB_COMMAND={},l.KEY_ARROW_DOWN_COMMAND=x,l.KEY_ARROW_LEFT_COMMAND=v,l.KEY_ARROW_RIGHT_COMMAND=T,l.KEY_ARROW_UP_COMMAND=b,l.KEY_BACKSPACE_COMMAND=w,l.KEY_DELETE_COMMAND=D,l.KEY_DOWN_COMMAND=E,l.KEY_ENTER_COMMAND=A,l.KEY_ESCAPE_COMMAND=R,l.KEY_MODIFIER_COMMAND=W,l.KEY_SPACE_COMMAND=O,l.KEY_TAB_COMMAND=k,l.LineBreakNode=mn,l.MOVE_TO_END=C,l.MOVE_TO_START=S,l.OUTDENT_CONTENT_COMMAND={},l.PASTE_COMMAND=h,l.ParagraphNode=Gr,l.REDO_COMMAND=N,l.REMOVE_TEXT_COMMAND=f,l.RootNode=zr,l.SELECTION_CHANGE_COMMAND=s,l.SELECT_ALL_COMMAND=B,l.TabNode=Fn,l.TextNode=xn,l.UNDO_COMMAND=y,l.createCommand=function(){return{}},l.createEditor=function(e){var t=e||{},n=mr,r=t.theme||{};let i=void 0===e?n:t.parentEditor||null,o=t.disableEvents||!1,l=Wr(),s=t.namespace||(null!==i?i._config.namespace:Ge()),a=t.editorState,d=[zr,xn,mn,Fn,Gr,...t.nodes||[]],u=t.onError;if(t=void 0===t.editable||t.editable,void 0===e&&null!==n)e=n._nodes;else for(e=new Map,n=0;n<d.length;n++){let t=d[n],r=null;var c=null;"function"!=typeof t&&(t=(c=t).replace,r=c.with,c=c.withKlass?c.withKlass:null);let i=t.getType(),o=t.transform(),l=new Set;null!==o&&l.add(o),e.set(i,{klass:t,replace:r,replaceWithKlass:c,transforms:l})}return r=new Vr(l,i,e,{disableEvents:o,namespace:s,theme:r},u||console.error,function(e){let t=new Map,n=new Set;return e.forEach((e=>{if(null!=(e=null!=e.klass.importDOM?e.klass.importDOM.bind(e.klass):null)&&!n.has(e)){n.add(e);var r=e();null!==r&&Object.keys(r).forEach((e=>{let n=t.get(e);void 0===n&&(n=[],t.set(e,n)),n.push(r[e])}))}})),t}(e),t),void 0!==a&&(r._pendingEditorState=a,r._dirtyType=2),r},l.getNearestEditorFromDOMNode=be,l.isHTMLAnchorElement=function(e){return pt(e)&&"A"===e.tagName},l.isHTMLElement=pt,l.isSelectionCapturedInDecoratorInput=ve,l.isSelectionWithinEditor=Se;var ni=l,ri=ni;let ii=new Map;function oi(e){for(;null!=e;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function li(e){let t=e.parentNode;if(null==t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function si(e){let t={};e=e.split(";");for(let n of e)if(""!==n){let[e,r]=n.split(/:([^]+)/);t[e.trim()]=r.trim()}return t}function ai(e){let t=ii.get(e);return void 0===t&&(t=si(e),ii.set(e,t)),t}function di(e,t){var n=ai("getStyle"in e?e.getStyle():e.style);t=Object.entries(t).reduce(((e,[t,n])=>(null===n?delete e[t]:e[t]=n,e)),{...n}),n=function(e){let t="";for(let n in e)n&&(t+=`${n}: ${e[n]};`);return t}(t),e.setStyle(n),ii.set(n,t)}function ui(e){for(;null!==e&&!ri.$isRootOrShadowRoot(e);){let t=e.getLatest(),n=e.getParent();0===t.getChildrenSize()&&e.remove(!0),e=n}}function ci(e,t,n,r,i=null){if(0!==t.length){var o=t[0],l=new Map,s=[];(o=ri.$isElementNode(o)?o:o.getParentOrThrow()).isInline()&&(o=o.getParentOrThrow());for(var a=!1;null!==o;){var d=o.getPreviousSibling();if(null!==d){o=d,a=!0;break}if(o=o.getParentOrThrow(),ri.$isRootOrShadowRoot(o))break}d=new Set;for(var u=0;u<n;u++){var c=t[u];ri.$isElementNode(c)&&0===c.getChildrenSize()&&d.add(c.getKey())}var g=new Set;for(u=0;u<n;u++){var h=(c=t[u]).getParent();if(null!==h&&h.isInline()&&(h=h.getParent()),null!==h&&ri.$isLeafNode(c)&&!g.has(c.getKey())){if(c=h.getKey(),void 0===l.get(c)){let e=r();e.setFormat(h.getFormatType()),e.setIndent(h.getIndent()),s.push(e),l.set(c,e),h.getChildren().forEach((t=>{e.append(t),g.add(t.getKey()),ri.$isElementNode(t)&&t.getChildrenKeys().forEach((e=>g.add(e)))})),ui(h)}}else d.has(c.getKey())&&((h=r()).setFormat(c.getFormatType()),h.setIndent(c.getIndent()),s.push(h),c.remove(!0))}if(null!==i)for(t=0;t<s.length;t++)i.append(s[t]);if(t=null,ri.$isRootOrShadowRoot(o))if(a)if(null!==i)o.insertAfter(i);else for(i=s.length-1;0<=i;i--)o.insertAfter(s[i]);else if(a=o.getFirstChild(),ri.$isElementNode(a)&&(o=a),null===a)if(i)o.append(i);else for(i=0;i<s.length;i++)a=s[i],o.append(a),t=a;else if(null!==i)a.insertBefore(i);else for(o=0;o<s.length;o++)i=s[o],a.insertBefore(i),t=i;else if(i)o.insertAfter(i);else for(i=s.length-1;0<=i;i--)a=s[i],o.insertAfter(a),t=a;s=ri.$getPreviousSelection(),ri.$isRangeSelection(s)&&s.anchor.getNode().isAttached()&&s.focus.getNode().isAttached()?ri.$setSelection(s.clone()):null!==t?t.selectEnd():e.dirty=!0}}function gi(e,t,n,r){e.modify(t?"extend":"move",n,r)}function hi(e){return e=e.anchor.getNode(),"rtl"===(ri.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()}o.$addNodeStyle=function(e){let t=si(e=e.getStyle());ii.set(e,t)},o.$cloneWithProperties=function(e){let t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,ri.$isElementNode(e)&&ri.$isElementNode(t)?(t.__first=e.__first,t.__last=e.__last,t.__size=e.__size,t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir,t):(ri.$isTextNode(e)&&ri.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t)},o.$getSelectionStyleValueForProperty=function(e,t,n=""){let r=null,i=e.getNodes();var o=e.anchor,l=e.focus,s=e.isBackward();let a=s?l.offset:o.offset;if(o=s?l.getNode():o.getNode(),""!==e.style&&(null!==(e=ai(e.style))&&t in e))return e[t];for(e=0;e<i.length;e++){var d=i[e];if((0===e||0!==a||!d.is(o))&&ri.$isTextNode(d))if(l=t,s=n,l=null!==(d=ai(d=d.getStyle()))&&d[l]||s,null===r)r=l;else if(r!==l){r="";break}}return null===r?n:r},o.$isAtNodeEnd=function(e){return"text"===e.type?e.offset===e.getNode().getTextContentSize():e.offset===e.getNode().getChildrenSize()},o.$isParentElementRTL=hi,o.$moveCaretSelection=gi,o.$moveCharacter=function(e,t,n){let r=hi(e);gi(e,t,n?!r:r,"character")},o.$patchStyleText=function e(t,n){var r=t.getNodes(),i=r.length;if(ri.DEPRECATED_$isGridSelection(t)){for(var o=ri.$createRangeSelection(),l=o.anchor,s=o.focus,a=0;a<i;a++){var d=r[a];ri.DEPRECATED_$isGridCellNode(d)&&(l.set(d.getKey(),0,"element"),s.set(d.getKey(),d.getChildrenSize(),"element"),e(ri.$normalizeSelection__EXPERIMENTAL(o),n))}ri.$setSelection(t)}else if(--i,o=r[0],l=r[i],t.isCollapsed())di(t,n);else{var u=t.anchor,c=t.focus;a=o.getTextContent().length,d=c.offset;var g=u.offset,h=u.isBefore(c);s=h?g:d,t=h?d:g;var f=h?u.type:c.type,p=h?c.type:u.type;if(u=h?c.key:u.key,ri.$isTextNode(o)&&s===a&&(c=o.getNextSibling(),ri.$isTextNode(c)&&(s=g=0,o=c)),1===r.length)ri.$isTextNode(o)&&((s="element"===f?0:g>d?d:g)!==(t="element"===p?a:g>d?g:d)&&(0===s&&t===a?(di(o,n),o.select(s,t)):(r=o.splitText(s,t),di(r=0===s?r[0]:r[1],n),r.select(0,t-s))));else for(ri.$isTextNode(o)&&s<o.getTextContentSize()&&(0!==s&&(o=o.splitText(s)[1]),di(o,n)),ri.$isTextNode(l)&&(s=l.getTextContent().length,l.__key!==u&&0!==t&&(t=s),t!==s&&([l]=l.splitText(t)),0!==t&&di(l,n)),t=1;t<i;t++)a=(s=r[t]).getKey(),ri.$isTextNode(s)&&a!==o.getKey()&&a!==l.getKey()&&!s.isToken()&&di(s,n)}},o.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let r=n.getFirstDescendant();n=n.getLastDescendant();let i="element",o="element",l=0;ri.$isTextNode(r)?i="text":ri.$isElementNode(r)||null===r||(r=r.getParentOrThrow()),ri.$isTextNode(n)?(o="text",l=n.getTextContentSize()):ri.$isElementNode(n)||null===n||(n=n.getParentOrThrow()),r&&n&&(t.set(r.getKey(),0,i),e.set(n.getKey(),l,o))},o.$setBlocksType=function(e,t){if("root"===e.anchor.key){t=t();var n=ri.$getRoot();(e=n.getFirstChild())?e.replace(t,!0):n.append(t)}else for(n=e.getNodes(),e=e.anchor.getNode().getParentOrThrow(),-1===n.indexOf(e)&&n.push(e),e.isInline()&&(e=e.getParentOrThrow(),-1===n.indexOf(e)&&n.push(e)),e=0;e<n.length;e++){let o=n[e];var r=o;if(!ri.$isElementNode(r)||ri.$isRootOrShadowRoot(r))r=!1;else{var i=r.getFirstChild();i=null===i||ri.$isLineBreakNode(i)||ri.$isTextNode(i)||i.isInline(),r=!r.isInline()&&!1!==r.canBeEmpty()&&i}r&&((r=t()).setFormat(o.getFormatType()),r.setIndent(o.getIndent()),o.replace(r,!0))}},o.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=ri.$getAdjacentNode(e.focus,t),ri.$isDecoratorNode(e)&&!e.isIsolated()||ri.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()},o.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected()&&!t.isSegmented()&&!t.isToken()&&(ri.$isRangeSelection(e)||ri.DEPRECATED_$isGridSelection(e))){var n=e.anchor.getNode(),r=e.focus.getNode(),i=t.is(n),o=t.is(r);if(i||o){i=e.isBackward();let l,[s,a]=e.getCharacterOffsets();e=n.is(r),o=t.is(i?r:n),r=t.is(i?n:r),n=0,e?(n=s>a?a:s,l=s>a?s:a):o?(n=i?a:s,l=void 0):r&&(n=0,l=i=i?s:a),t.__text=t.__text.slice(n,l)}}return t},o.$wrapNodes=function(e,t,n=null){var r=e.getNodes();let i=r.length;var o=e.anchor;if(0===i||1===i&&"element"===o.type&&0===o.getNode().getChildrenSize()){r=(e="text"===o.type?o.getNode().getParentOrThrow():o.getNode()).getChildren();let i=t();i.setFormat(e.getFormatType()),i.setIndent(e.getIndent()),r.forEach((e=>i.append(e))),n&&(i=n.append(i)),e.replace(i)}else{o=null;var l=[];for(let s=0;s<i;s++){let i=r[s];ri.$isRootOrShadowRoot(i)?(ci(e,l,l.length,t,n),l=[],o=i):null===o||null!==o&&ri.$hasAncestor(i,o)?l.push(i):(ci(e,l,l.length,t,n),l=[i])}ci(e,l,l.length,t,n)}},o.createDOMRange=function(e,t,n,r,i){let o=t.getKey(),l=r.getKey(),s=document.createRange(),a=e.getElementByKey(o);if(e=e.getElementByKey(l),ri.$isTextNode(t)&&(a=oi(a)),ri.$isTextNode(r)&&(e=oi(e)),void 0===t||void 0===r||null===a||null===e)return null;"BR"===a.nodeName&&([a,n]=li(a)),"BR"===e.nodeName&&([e,i]=li(e)),t=a.firstChild,a===e&&null!=t&&"BR"===t.nodeName&&0===n&&0===i&&(i=1);try{s.setStart(a,n),s.setEnd(e,i)}catch(e){return null}return!s.collapsed||n===i&&o===l||(s.setStart(e,i),s.setEnd(a,n)),s},o.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);let r,i=(t=Array.from(t.getClientRects())).length;t.sort(((e,t)=>{let n=e.top-t.top;return 3>=Math.abs(n)?e.left-t.left:n}));for(let o=0;o<i;o++){let l=t[o],s=l.width+n===e.width;r&&r.top<=l.top&&r.top+r.height>l.top&&r.left+r.width>l.left||s?(t.splice(o--,1),i--):r=l}return t},o.getStyleObjectFromCSS=ai,o.trimTextContentFromAnchor=function(e,t,n){let r=t.getNode();if(ri.$isElementNode(r)){var i=r.getDescendantByIndex(t.offset);null!==i&&(r=i)}for(;0<n&&null!==r;){var o=r.getPreviousSibling(),l=0;if(null===o){for(var s=(i=r.getParentOrThrow()).getPreviousSibling();null===s;){if(null===(i=i.getParent())){o=null;break}s=i.getPreviousSibling()}null!==i&&(l=i.isInline()?0:2,o=ri.$isElementNode(s)?s.getLastDescendant():s)}if(""===(s=r.getTextContent())&&ri.$isElementNode(r)&&!r.isInline()&&(s="\n\n"),i=s.length,!ri.$isTextNode(r)||n>=i)s=r.getParent(),r.remove(),null==s||0!==s.getChildrenSize()||ri.$isRootNode(s)||s.remove(),n-=i+l,r=o;else{let a=r.getKey();l=e.getEditorState().read((()=>{const e=ri.$getNodeByKey(a);return ri.$isTextNode(e)&&e.isSimpleText()?e.getTextContent():null})),o=i-n;let d=s.slice(0,o);null!==l&&l!==s?(n=ri.$getPreviousSelection(),i=r,r.isSimpleText()?r.setTextContent(l):(i=ri.$createTextNode(l),r.replace(i)),ri.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,i.select(n,n))):r.isSimpleText()?(l=t.key===a,(s=t.offset)<n&&(s=i),n=l?s-n:0,i=l?s:o,l&&0===n?([n]=r.splitText(n,i),n.remove()):([,n]=r.splitText(n,i),n.remove())):(n=ri.$createTextNode(d),r.replace(n)),n=0}}};var fi=o,pi=fi,_i=ni;function mi(e,t){for(let n of t)if(e.type.startsWith(n))return!0;return!1}function yi(e,t){for(;e!==_i.$getRoot()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}i.$splitNode=_i.$splitNode,i.isHTMLAnchorElement=_i.isHTMLAnchorElement,i.isHTMLElement=_i.isHTMLElement,i.$dfs=function(e,t){let n=[];e=(e||_i.$getRoot()).getLatest(),t=t||(_i.$isElementNode(e)?e.getLastDescendant():e);for(var r=e,i=0;null!==(r=r.getParent());)i++;for(r=i;null!==e&&!e.is(t);)if(n.push({depth:r,node:e}),_i.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),r++;else for(i=null;null===i&&null!==e;)null===(i=e.getNextSibling())?(e=e.getParent(),r--):e=i;return null!==e&&e.is(t)&&n.push({depth:r,node:e}),n},i.$filter=function(e,t){let n=[];for(let r=0;r<e.length;r++){let i=t(e[r]);null!==i&&n.push(i)}return n},i.$findMatchingParent=yi,i.$getNearestBlockElementAncestorOrThrow=function(e){let t=yi(e,(e=>_i.$isElementNode(e)&&!e.isInline()));return _i.$isElementNode(t)||function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,e.__key),t},i.$getNearestNodeOfType=function(e,t){for(;null!=e;){if(e instanceof t)return e;e=e.getParent()}return null},i.$insertFirst=function(e,t){let n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t)},i.$insertNodeToNearestRoot=function(e){var t=_i.$getSelection()||_i.$getPreviousSelection();if(_i.$isRangeSelection(t)){var{focus:n}=t;if(t=n.getNode(),n=n.offset,_i.$isRootOrShadowRoot(t))null==(n=t.getChildAtIndex(n))?t.append(e):n.insertBefore(e),e.selectNext();else{let r,i;_i.$isTextNode(t)?(r=t.getParentOrThrow(),i=t.getIndexWithinParent(),0<n&&(i+=1,t.splitText(n))):(r=t,i=n),[,t]=_i.$splitNode(r,i),t.insertBefore(e),t.selectStart()}}else _i.$isNodeSelection(t)||_i.DEPRECATED_$isGridSelection(t)?(t=t.getNodes())[t.length-1].getTopLevelElementOrThrow().insertAfter(e):_i.$getRoot().append(e),t=_i.$createParagraphNode(),e.insertAfter(t),t.select();return e.getLatest()},i.$restoreEditorState=function(e,t){let n=new Map,r=e._pendingEditorState;for(let[e,r]of t._nodeMap){let t=pi.$cloneWithProperties(r);_i.$isTextNode(t)&&(t.__text=r.__text),n.set(e,t)}r&&(r._nodeMap=n),e._dirtyType=2,e=t._selection,_i.$setSelection(null===e?null:e.clone())},i.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t},i.addClassNamesToElement=function(e,...t){t.forEach((t=>{"string"==typeof t&&(t=t.split(" ").filter((e=>""!==e)),e.classList.add(...t))}))},i.isMimeType=mi,i.mediaFileReader=function(e,t){let n=e[Symbol.iterator]();return new Promise(((e,r)=>{let i=[],o=()=>{const{done:l,value:s}=n.next();if(l)return e(i);const a=new FileReader;a.addEventListener("error",r),a.addEventListener("load",(()=>{const e=a.result;"string"==typeof e&&i.push({file:s,result:e}),o()})),mi(s,t)?a.readAsDataURL(s):o()};o()}))},i.mergeRegister=function(...e){return()=>{e.forEach((e=>e()))}},i.objectKlassEquals=function(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name},i.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,(e=>{e:{for(var i=e.getChildren(),o=0;o<i.length;o++)if(i[o]instanceof t){i=null;break e}for(i=e;null!==i;)if(o=i,(i=i.getParent())instanceof t){i={child:o,parent:i};break e}i=null}if(null!==i){const{child:t,parent:l}=i;if(t.is(e)){if(r(l,e),i=(e=t.getNextSiblings()).length,l.insertAfter(t),0!==i){o=n(l),t.insertAfter(o);for(let t=0;t<i;t++)o.append(e[t])}l.canBeEmpty()||0!==l.getChildrenSize()||l.remove()}}}))},i.removeClassNamesFromElement=function(e,...t){t.forEach((t=>{"string"==typeof t&&e.classList.remove(...t.split(" "))}))};var Ni=i,Ei=n,Ti=Ni,Ci=ni;let vi=e=>null!=e&&Ei.languages.hasOwnProperty(e)?e:void 0;function Si(e,t){for(let n of e.childNodes){if(Ti.isHTMLElement(n)&&n.tagName===t)return!0;Si(n,t)}return!1}let bi=class e extends Ci.ElementNode{static getType(){return"code"}static clone(t){return new e(t.__language,t.__key)}constructor(e,t){super(t),this.__language=vi(e)}createDOM(e){let t=document.createElement("code");return Ti.addClassNamesToElement(t,e.theme.code),t.setAttribute("spellcheck","false"),(e=this.getLanguage())&&t.setAttribute("data-highlight-language",e),t}updateDOM(e,t){let n=this.__language;return e=e.__language,n?n!==e&&t.setAttribute("data-highlight-language",n):e&&t.removeAttribute("data-highlight-language"),!1}exportDOM(){let e=document.createElement("pre");e.setAttribute("spellcheck","false");let t=this.getLanguage();return t&&e.setAttribute("data-highlight-language",t),{element:e}}static importDOM(){return{code:e=>null!=e.textContent&&(/\r?\n/.test(e.textContent)||Si(e,"BR"))?{conversion:Oi,priority:1}:null,div:()=>({conversion:wi,priority:1}),pre:()=>({conversion:Oi,priority:0}),table:e=>Mi(e)?{conversion:Ri,priority:3}:null,td:e=>{let t=e.closest("table");return e.classList.contains("js-file-line")?{conversion:ki,priority:3}:t&&Mi(t)?{conversion:Di,priority:3}:null},tr:e=>(e=e.closest("table"))&&Mi(e)?{conversion:Di,priority:3}:null}}static importJSON(e){let t=xi(e.language);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),type:"code",version:1}}insertNewAfter(e,t=!0){var n=this.getChildren(),r=n.length;if(2<=r&&"\n"===n[r-1].getTextContent()&&"\n"===n[r-2].getTextContent()&&e.isCollapsed()&&e.anchor.key===this.__key&&e.anchor.offset===r)return n[r-1].remove(),n[r-2].remove(),e=Ci.$createParagraphNode(),this.insertAfter(e,t),e;if(t=e.anchor,n=e.focus,zi(t=(t.isBefore(n)?t:n).getNode())||Ci.$isTabNode(t)){for(t=Ki(t),n=[];;)if(Ci.$isTabNode(t))n.push(Ci.$createTabNode()),t=t.getNextSibling();else{if(!zi(t))break;{r=0;let e=t.getTextContent(),i=t.getTextContentSize();for(;r<i&&" "===e[r];r++);if(0!==r&&n.push(Bi(" ".repeat(r))),r!==i)break;t=t.getNextSibling()}}if(0<n.length)return e.insertNodes([Ci.$createLineBreakNode(),...n]),n[n.length-1]}return null}canIndent(){return!1}collapseAtStart(){let e=Ci.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}setLanguage(e){this.getWritable().__language=vi(e)}getLanguage(){return this.getLatest().__language}};function xi(e){return Ci.$applyNodeReplacement(new bi(e))}function Ai(e){return e instanceof bi}function Oi(e){let t;return Ti.isHTMLElement(e)&&(t=e.getAttribute("data-highlight-language")),{node:xi(t)}}function wi(e){let t=null!==e.style.fontFamily.match("monospace");return t||function(e){for(e=e.parentElement;null!==e;){if(null!==e.style.fontFamily.match("monospace"))return!0;e=e.parentElement}return!1}(e)?{after:t=>{let n=e.parentNode;return null!=n&&e!==n.lastChild&&t.push(Ci.$createLineBreakNode()),t},node:t?xi():null}:{node:null}}function Ri(){return{node:xi()}}function Di(){return{node:null}}function ki(e){return{after:t=>(e.parentNode&&e.parentNode.nextSibling&&t.push(Ci.$createLineBreakNode()),t),node:null}}function Mi(e){return e.classList.contains("js-file-line-container")}let $i={c:"C",clike:"C-like",cpp:"C++",css:"CSS",html:"HTML",java:"Java",js:"JavaScript",markdown:"Markdown",objc:"Objective-C",plain:"Plain Text",py:"Python",rust:"Rust",sql:"SQL",swift:"Swift",typescript:"TypeScript",xml:"XML"},Pi={cpp:"cpp",java:"java",javascript:"js",md:"markdown",plaintext:"plain",python:"py",text:"plain",ts:"typescript"};function Ii(e){return Pi[e]||e}let Fi=class e extends Ci.TextNode{constructor(e,t,n){super(e,n),this.__highlightType=t}static getType(){return"code-highlight"}static clone(t){return new e(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}createDOM(e){let t=super.createDOM(e);return e=Li(e.theme,this.__highlightType),Ti.addClassNamesToElement(t,e),t}updateDOM(e,t,n){let r=super.updateDOM(e,t,n);return(e=Li(n.theme,e.__highlightType))!==(n=Li(n.theme,this.__highlightType))&&(e&&Ti.removeClassNamesFromElement(t,e),n&&Ti.addClassNamesToElement(t,n)),r}static importJSON(e){let t=Bi(e.text,e.highlightType);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType(),type:"code-highlight",version:1}}setFormat(){return this}isParentRequired(){return!0}createParentElementNode(){return xi()}};function Li(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function Bi(e,t){return Ci.$applyNodeReplacement(new Fi(e,t))}function zi(e){return e instanceof Fi}function Ki(e){let t=e;for(;zi(e)||Ci.$isTabNode(e);)t=e,e=e.getPreviousSibling();return t}function Wi(e){let t=e;for(;zi(e)||Ci.$isTabNode(e);)t=e,e=e.getNextSibling();return t}let Hi={defaultLanguage:"javascript",tokenize(e,t){return Ei.tokenize(e,Ei.languages[t||""]||Ei.languages[this.defaultLanguage])}};function Ui(e,t){let n=null;var r=null,i=e;let o=t,l=e.getTextContent();for(;;){if(0===o){if(null===(i=i.getPreviousSibling()))break;if(!(zi(i)||Ci.$isTabNode(i)||Ci.$isLineBreakNode(i)))throw Error("Expected a valid Code Node: CodeHighlightNode, TabNode, LineBreakNode");if(Ci.$isLineBreakNode(i)){n={node:i,offset:1};break}o=Math.max(0,i.getTextContentSize()-1),l=i.getTextContent()}else o--;let e=l[o];zi(i)&&" "!==e&&(r={node:i,offset:o})}if(null!==r)return r;if(r=null,t<e.getTextContentSize()?zi(e)&&(r=e.getTextContent()[t]):zi(i=e.getNextSibling())&&(r=i.getTextContent()[0]),null!==r&&" "!==r)return n;e:for(r=e,i=e.getTextContent(),e=e.getTextContentSize();;){if(!zi(r)||t===e){if(null===(r=r.getNextSibling())||Ci.$isLineBreakNode(r)){e=null;break e}zi(r)&&(t=0,i=r.getTextContent(),e=r.getTextContentSize())}if(zi(r)){if(" "!==i[t]){e={node:r,offset:t};break e}t++}}return null!==e?e:n}function Gi(e){if(e=Wi(e),Ci.$isLineBreakNode(e))throw Error("Unexpected lineBreakNode in getEndOfCodeInLine");return e}function Yi(e,t,n){let r=e.getParent();Ai(r)?Ji(r,t,n):zi(e)&&e.replace(Ci.$createTextNode(e.__text))}let ji=new Set;function Ji(e,t,n){let r=e.getKey();ji.has(r)||(ji.add(r),void 0===e.getLanguage()&&e.setLanguage(n.defaultLanguage),t.update((()=>{!function(e,t){if(e=Ci.$getNodeByKey(e),Ai(e)&&e.isAttached()){var n=Ci.$getSelection();if(Ci.$isRangeSelection(n)){var r=(n=n.anchor).offset,i="element"===n.type&&Ci.$isLineBreakNode(e.getChildAtIndex(n.offset-1)),o=0;if(!i){let e=n.getNode();o=r+e.getPreviousSiblings().reduce(((e,t)=>e+t.getTextContentSize()),0)}t()&&(i?n.getNode().select(r,r):e.getChildren().some((e=>{let t=Ci.$isTextNode(e);if(t||Ci.$isLineBreakNode(e)){let n=e.getTextContentSize();if(t&&n>=o)return e.select(o,o),!0;o-=n}return!1})))}else t()}}(r,(()=>{var t=Ci.$getNodeByKey(r);if(!Ai(t)||!t.isAttached())return!1;var i=t.getTextContent();i=Vi(i=n.tokenize(i,t.getLanguage()||n.defaultLanguage));var o=t.getChildren();for(t=0;t<o.length&&Xi(o[t],i[t]);)t++;var l=o.length;let s=i.length,a=Math.min(l,s)-t,d=0;for(;d<a;)if(d++,!Xi(o[l-d],i[s-d])){d--;break}o=t,l-=d,i=i.slice(t,s-d);let{from:u,to:c,nodesForReplacement:g}={from:o,nodesForReplacement:i,to:l};return!(u===c&&!g.length)&&(e.splice(u,c-u,g),!0)}))}),{onUpdate:()=>{ji.delete(r)},skipTransforms:!0}))}function Vi(e,t){let n=[];for(let r of e)if("string"==typeof r){let i=(e=r.split(/(\n|\t)/)).length;for(let r=0;r<i;r++){let i=e[r];"\n"===i||"\r\n"===i?n.push(Ci.$createLineBreakNode()):"\t"===i?n.push(Ci.$createTabNode()):0<i.length&&n.push(Bi(i,t))}}else({content:e}=r),"string"==typeof e?n.push(...Vi([e],r.type)):Array.isArray(e)&&n.push(...Vi(e,r.type));return n}function Xi(e,t){return zi(e)&&zi(t)&&e.__text===t.__text&&e.__highlightType===t.__highlightType||Ci.$isTabNode(e)&&Ci.$isTabNode(t)||Ci.$isLineBreakNode(e)&&Ci.$isLineBreakNode(t)}function Zi(e){if(!Ci.$isRangeSelection(e))return!1;var t=e.anchor.getNode();return e=e.focus.getNode(),!(!t.is(e)||!Ai(t))||Ai(t=t.getParent())&&t.is(e.getParent())}function qi(e){let t=[[]];if(1===(e=e.getNodes()).length&&Ai(e[0]))return t;let n=t[0];for(let r=0;r<e.length;r++){let i=e[r];if(!(zi(i)||Ci.$isTabNode(i)||Ci.$isLineBreakNode(i)))throw Error("Expected selection to be inside CodeBlock and consisting of CodeHighlightNode, TabNode and LineBreakNode");Ci.$isLineBreakNode(i)?0!==r&&0<n.length&&(n=[],t.push(n)):n.push(i)}return t}function Qi(e){var t=Ci.$getSelection();if(!Ci.$isRangeSelection(t)||!Zi(t))return!1;var n=qi(t);let r=n.length;if(1<n.length){for(t=0;t<r;t++){var i=n[t];0<i.length&&(i=i[0],0===t&&(i=Ki(i)),null!==i&&(e===Ci.INDENT_CONTENT_COMMAND?i.insertBefore(Ci.$createTabNode()):Ci.$isTabNode(i)&&i.remove()))}return!0}if(!(Ai(n=t.getNodes()[0])||zi(n)||Ci.$isTabNode(n)||Ci.$isLineBreakNode(n)))throw Error("Expected selection firstNode to be CodeHighlightNode or CodeTabNode");if(Ai(n))return e===Ci.INDENT_CONTENT_COMMAND&&t.insertNodes([Ci.$createTabNode()]),!0;if(null===(n=Ki(n)))throw Error("Expected getFirstCodeNodeOfLine to return a valid Code Node");return e===Ci.INDENT_CONTENT_COMMAND?Ci.$isLineBreakNode(n)?n.insertAfter(Ci.$createTabNode()):n.insertBefore(Ci.$createTabNode()):Ci.$isTabNode(n)&&n.remove(),!0}function eo(e,t){let n=Ci.$getSelection();if(!Ci.$isRangeSelection(n))return!1;let{anchor:r,focus:i}=n,o=r.offset,l=i.offset,s=r.getNode(),a=i.getNode();var d=e===Ci.KEY_ARROW_UP_COMMAND;if(!Zi(n)||!zi(s)&&!Ci.$isTabNode(s)||!zi(a)&&!Ci.$isTabNode(a))return!1;if(!t.altKey){if(n.isCollapsed())if(e=s.getParentOrThrow(),d&&0===o&&null===s.getPreviousSibling()){if(null===e.getPreviousSibling())return e.selectPrevious(),t.preventDefault(),!0}else if(!d&&o===s.getTextContentSize()&&null===s.getNextSibling()&&null===e.getNextSibling())return e.selectNext(),t.preventDefault(),!0;return!1}let u;if(s.isBefore(a)){var c=Ki(s);u=Wi(a)}else c=Ki(a),u=Wi(s);if(null==c||null==u)return!1;let g=c.getNodesBetween(u);for(let e=0;e<g.length;e++){let t=g[e];if(!zi(t)&&!Ci.$isTabNode(t)&&!Ci.$isLineBreakNode(t))return!1}if(t.preventDefault(),t.stopPropagation(),t=d?c.getPreviousSibling():u.getNextSibling(),!Ci.$isLineBreakNode(t))return!0;if(null==(c=d?t.getPreviousSibling():t.getNextSibling()))return!0;let h=null!=(d=zi(c)||Ci.$isTabNode(c)||Ci.$isLineBreakNode(c)?d?Ki(c):Wi(c):null)?d:c;return t.remove(),g.forEach((e=>e.remove())),e===Ci.KEY_ARROW_UP_COMMAND?(g.forEach((e=>h.insertBefore(e))),h.insertBefore(t)):(h.insertAfter(t),h=t,g.forEach((e=>{h.insertAfter(e),h=e}))),n.setTextNodeRange(s,o,a,l),!0}function to(e,t){let n=Ci.$getSelection();if(!Ci.$isRangeSelection(n))return!1;let{anchor:r,focus:i}=n;var o=r.getNode();let l=i.getNode();if(e=e===Ci.MOVE_TO_START,!zi(o)&&!Ci.$isTabNode(o)||!zi(l)&&!Ci.$isTabNode(l))return!1;if(e)if(null!==(o=Ui(l,i.offset))){let{node:e,offset:t}=o;Ci.$isLineBreakNode(e)?e.selectNext(0,0):n.setTextNodeRange(e,t,e,t)}else l.getParentOrThrow().selectStart();else Gi(l).select();return t.preventDefault(),t.stopPropagation(),!0}t.$createCodeHighlightNode=Bi,t.$createCodeNode=xi,t.$isCodeHighlightNode=zi,t.$isCodeNode=Ai,t.CODE_LANGUAGE_FRIENDLY_NAME_MAP=$i,t.CODE_LANGUAGE_MAP=Pi,t.CodeHighlightNode=Fi,t.CodeNode=bi,t.DEFAULT_CODE_LANGUAGE="javascript",t.PrismTokenizer=Hi,t.getCodeLanguages=()=>Object.keys(Ei.languages).filter((e=>"function"!=typeof Ei.languages[e])).sort(),t.getDefaultCodeLanguage=()=>"javascript",t.getEndOfCodeInLine=Gi,t.getFirstCodeNodeOfLine=Ki,t.getLanguageFriendlyName=function(e){return e=Ii(e),$i[e]||e},t.getLastCodeNodeOfLine=Wi,t.getStartOfCodeInLine=Ui,t.normalizeCodeLang=Ii,t.registerCodeHighlighting=function(e,t){if(!e.hasNodes([bi,Fi]))throw Error("CodeHighlightPlugin: CodeNode or CodeHighlightNode not registered on editor");return null==t&&(t=Hi),Ti.mergeRegister(e.registerMutationListener(bi,(t=>{e.update((()=>{for(let[i,o]of t)if("destroyed"!==o){var n=Ci.$getNodeByKey(i);if(null!==n)e:{var r=n;if(null===(n=e.getElementByKey(r.getKey())))break e;let t=(r=r.getChildren()).length;if(t===n.__cachedChildrenLength)break e;n.__cachedChildrenLength=t;let i="1",o=1;for(let e=0;e<t;e++)Ci.$isLineBreakNode(r[e])&&(i+="\n"+ ++o);n.setAttribute("data-gutter",i)}}}))})),e.registerNodeTransform(bi,(n=>Ji(n,e,t))),e.registerNodeTransform(Ci.TextNode,(n=>Yi(n,e,t))),e.registerNodeTransform(Fi,(n=>Yi(n,e,t))),e.registerCommand(Ci.KEY_TAB_COMMAND,(t=>{let n=function(e){var t=Ci.$getSelection();if(!Ci.$isRangeSelection(t)||!Zi(t))return null;let n=e?Ci.OUTDENT_CONTENT_COMMAND:Ci.INDENT_CONTENT_COMMAND;if(e=e?Ci.OUTDENT_CONTENT_COMMAND:Ci.INSERT_TAB_COMMAND,1<qi(t).length)return n;var r=t.getNodes()[0];if(!(Ai(r)||zi(r)||Ci.$isTabNode(r)||Ci.$isLineBreakNode(r)))throw Error("Expected selection firstNode to be CodeHighlightNode or TabNode");if(Ai(r))return n;let i=Ki(r);r=Wi(r);var o=t.anchor;let l=t.focus;return l.isBefore(o)?t=l:(t=o,o=l),null!==i&&null!==r&&t.key===i.getKey()&&0===t.offset&&o.key===r.getKey()&&o.offset===r.getTextContentSize()?n:e}(t.shiftKey);return null!==n&&(t.preventDefault(),e.dispatchCommand(n,void 0),!0)}),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.INSERT_TAB_COMMAND,(()=>!!Zi(Ci.$getSelection())&&(Ci.$insertNodes([Ci.$createTabNode()]),!0)),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.INDENT_CONTENT_COMMAND,(()=>Qi(Ci.INDENT_CONTENT_COMMAND)),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.OUTDENT_CONTENT_COMMAND,(()=>Qi(Ci.OUTDENT_CONTENT_COMMAND)),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.KEY_ARROW_UP_COMMAND,(e=>eo(Ci.KEY_ARROW_UP_COMMAND,e)),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.KEY_ARROW_DOWN_COMMAND,(e=>eo(Ci.KEY_ARROW_DOWN_COMMAND,e)),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.MOVE_TO_END,(e=>to(Ci.MOVE_TO_END,e)),Ci.COMMAND_PRIORITY_LOW),e.registerCommand(Ci.MOVE_TO_START,(e=>to(Ci.MOVE_TO_START,e)),Ci.COMMAND_PRIORITY_LOW))};var no=t,ro={},io=Ni,oo=ni;let lo=new Set(["http:","https:","mailto:","sms:","tel:"]),so=class e extends oo.ElementNode{static getType(){return"link"}static clone(t){return new e(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(e,t={},n){super(n);let{target:r=null,rel:i=null,title:o=null}=t;this.__url=e,this.__target=r,this.__rel=i,this.__title=o}createDOM(e){let t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),null!==this.__target&&(t.target=this.__target),null!==this.__rel&&(t.rel=this.__rel),null!==this.__title&&(t.title=this.__title),io.addClassNamesToElement(t,e.theme.link),t}updateDOM(e,t){let n=this.__url,r=this.__target,i=this.__rel,o=this.__title;return n!==e.__url&&(t.href=n),r!==e.__target&&(r?t.target=r:t.removeAttribute("target")),i!==e.__rel&&(i?t.rel=i:t.removeAttribute("rel")),o!==e.__title&&(o?t.title=o:t.removeAttribute("title")),!1}static importDOM(){return{a:()=>({conversion:ao,priority:1})}}static importJSON(e){let t=uo(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}sanitizeUrl(e){try{let t=new URL(e);if(!lo.has(t.protocol))return"about:blank"}catch{}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}getTitle(){return this.getLatest().__title}setTitle(e){this.getWritable().__title=e}insertNewAfter(e,t=!0){return e=this.getParentOrThrow().insertNewAfter(e,t),oo.$isElementNode(e)?(t=uo(this.__url,{rel:this.__rel,target:this.__target,title:this.__title}),e.append(t),t):null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t){if(!oo.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&0<t.getTextContent().length}};function ao(e){let t=null;if(io.isHTMLAnchorElement(e)){let n=e.textContent;null!==n&&""!==n&&(t=uo(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function uo(e,t){return oo.$applyNodeReplacement(new so(e,t))}function co(e){return e instanceof so}let go=class e extends so{static getType(){return"autolink"}static clone(t){return new e(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}static importJSON(e){let t=ho(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(e,t=!0){return e=this.getParentOrThrow().insertNewAfter(e,t),oo.$isElementNode(e)?(t=ho(this.__url,{rel:this._rel,target:this.__target,title:this.__title}),e.append(t),t):null}};function ho(e,t){return oo.$applyNodeReplacement(new go(e,t))}let fo=oo.createCommand("TOGGLE_LINK_COMMAND");ro.$createAutoLinkNode=ho,ro.$createLinkNode=uo,ro.$isAutoLinkNode=function(e){return e instanceof go},ro.$isLinkNode=co,ro.AutoLinkNode=go,ro.LinkNode=so,ro.TOGGLE_LINK_COMMAND=fo,ro.toggleLink=function(e,t={}){let{target:n,title:r}=t,i=void 0===t.rel?"noreferrer":t.rel;if(t=oo.$getSelection(),oo.$isRangeSelection(t))if(t=t.extract(),null===e)t.forEach((e=>{if(co(e=e.getParent())){let t=e.getChildren();for(let n=0;n<t.length;n++)e.insertBefore(t[n]);e.remove()}}));else{if(1===t.length){var o=t[0];if(o=co(o)?o:function(e,t){for(;null!==e&&null!==(e=e.getParent())&&!t(e););return e}(o,co),null!==o)return o.setURL(e),void 0!==n&&o.setTarget(n),null!==i&&o.setRel(i),void(void 0!==r&&o.setTitle(r))}let l=null,s=null;t.forEach((t=>{var o=t.getParent();if(o!==s&&null!==o&&(!oo.$isElementNode(t)||t.isInline()))if(co(o))s=o,o.setURL(e),void 0!==n&&o.setTarget(n),null!==i&&s.setRel(i),void 0!==r&&s.setTitle(r);else if(o.is(l)||(l=o,s=uo(e,{rel:i,target:n}),co(o)?null===t.getPreviousSibling()?o.insertBefore(s):o.insertAfter(s):t.insertBefore(s)),co(t)){if(!t.is(s)){if(null!==s){o=t.getChildren();for(let e=0;e<o.length;e++)s.append(o[e])}t.remove()}}else null!==s&&s.append(t)}))}};var po=ro,_o={},mo=ni,yo=Ni;function No(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Eo(e){let t=1;for(e=e.getParent();null!=e;){if(Io(e)){if(Ho(e=e.getParent())){t++,e=e.getParent();continue}No(40)}break}return t}function To(e){Ho(e=e.getParent())||No(40);let t=e;for(;null!==t;)t=t.getParent(),Ho(t)&&(e=t);return e}function Co(e){let t=[];e=e.getChildren().filter(Io);for(let n=0;n<e.length;n++){let r=e[n],i=r.getFirstChild();Ho(i)?t=t.concat(Co(i)):t.push(r)}return t}function vo(e){return Io(e)&&Ho(e.getFirstChild())}function So(e){return Po().append(e)}function bo(e,t){return Io(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function xo(e,t){e.splice(e.getChildrenSize(),0,t)}function Ao(e,t){if(Ho(e))return e;let n=e.getPreviousSibling(),r=e.getNextSibling(),i=Po();return i.setFormat(e.getFormatType()),i.setIndent(e.getIndent()),xo(i,e.getChildren()),Ho(n)&&t===n.getListType()?(n.append(i),e.remove(),Ho(r)&&t===r.getListType()&&(xo(n,r.getChildren()),r.remove()),n):Ho(r)&&t===r.getListType()?(r.getFirstChildOrThrow().insertBefore(i),e.remove(),r):((t=Wo(t)).append(i),e.replace(t),wo(t),t)}function Oo(e,t){var n=e.getLastChild();let r=t.getFirstChild();n&&r&&vo(n)&&vo(r)&&(Oo(n.getFirstChild(),r.getFirstChild()),r.remove()),0<(n=t.getChildren()).length&&(e.append(...n),wo(e)),t.remove()}function wo(e,t){if(void 0!==(e=t||e.getChildren()))for(t=0;t<e.length;t++){let o=e[t];if(Io(o)){let e=o.getValue();var n=o,r=n.getParent(),i=1;for(null!=r&&(Ho(r)?i=r.getStart():No(44)),n=n.getPreviousSiblings(),r=0;r<n.length;r++){let e=n[r];Io(e)&&!Ho(e.getFirstChild())&&i++}e!==i&&o.setValue(i)}}}function Ro(e){if(!vo(e)){var t=e.getParent(),n=t?t.getParent():void 0,r=n?n.getParent():void 0;if(Ho(r)&&Io(n)&&Ho(t)){var i=t?t.getFirstChild():void 0,o=t?t.getLastChild():void 0;if(e.is(i))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(o))n.insertAfter(e),t.isEmpty()&&n.remove();else{var l=t.getListType();i=Po();let r=Wo(l);i.append(r),e.getPreviousSiblings().forEach((e=>r.append(e))),o=Po(),l=Wo(l),o.append(l),xo(l,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(o),n.replace(e)}wo(t),wo(r)}}}let Do=class e extends mo.ElementNode{static getType(){return"listitem"}static clone(t){return new e(t.__value,t.__checked,t.__key)}constructor(e,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}createDOM(e){let t=document.createElement("li"),n=this.getParent();return Ho(n)&&"check"===n.getListType()&&Mo(t,this,null),t.value=this.__value,ko(t,e.theme,this),t}updateDOM(e,t,n){let r=this.getParent();return Ho(r)&&"check"===r.getListType()&&Mo(t,this,e),t.value=this.__value,ko(t,n.theme,this),!1}static transform(){return e=>{let t=e.getParent();Ho(t)&&(wo(t),"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0))}}static importDOM(){return{li:()=>({conversion:$o,priority:0})}}static importJSON(e){let t=Po();return t.setChecked(e.checked),t.setValue(e.value),t.setFormat(e.format),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let t=0;t<e.length;t++){let n=e[t];if(mo.$isElementNode(n)&&this.canMergeWith(n)){let e=n.getChildren();this.append(...e),n.remove()}else super.append(n)}return this}replace(e,t){if(Io(e))return super.replace(e);this.setIndent(0);let n=this.getParentOrThrow();if(!Ho(n))return e;if(n.__first===this.getKey())n.insertBefore(e);else if(n.__last===this.getKey())n.insertAfter(e);else{let t=Wo(n.getListType()),r=this.getNextSibling();for(;r;){let e=r;r=r.getNextSibling(),t.append(e)}n.insertAfter(e),e.insertAfter(t)}return t&&this.getChildren().forEach((t=>{e.append(t)})),this.remove(),0===n.getChildrenSize()&&n.remove(),e}insertAfter(e,t=!0){var n=this.getParentOrThrow();Ho(n)||No(39);var r=this.getNextSiblings();if(Io(e))return t=super.insertAfter(e,t),Ho(e=e.getParentOrThrow())&&wo(e),t;if(Ho(e)){for(n=e,r=(e=e.getChildren()).length-1;0<=r;r--)n=e[r],this.insertAfter(n,t);return n}if(n.insertAfter(e,t),0!==r.length){let i=Wo(n.getListType());r.forEach((e=>i.append(e))),e.insertAfter(i,t)}return e}remove(e){let t=this.getPreviousSibling(),n=this.getNextSibling();super.remove(e),t&&n&&vo(t)&&vo(n)?(Oo(t.getFirstChild(),n.getFirstChild()),n.remove()):n&&(Ho(e=n.getParent())&&wo(e))}insertNewAfter(e,t=!0){return e=Po(null==this.__checked&&void 0),this.insertAfter(e,t),e}collapseAtStart(e){let t=mo.$createParagraphNode();this.getChildren().forEach((e=>t.append(e)));var n=this.getParentOrThrow(),r=n.getParentOrThrow();let i=Io(r);return 1===n.getChildrenSize()?i?(n.remove(),r.select()):(n.insertBefore(t),n.remove(),n=e.anchor,e=e.focus,r=t.getKey(),"element"===n.type&&n.getNode().is(this)&&n.set(r,n.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(r,e.offset,"element")):(n.insertBefore(t),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var e=this.getParent();if(null===e)return this.getLatest().__indent;e=e.getParentOrThrow();let t=0;for(;Io(e);)e=e.getParentOrThrow().getParentOrThrow(),t++;return t}setIndent(e){"number"==typeof e&&-1<e||No(117);let t=this.getIndent();for(;t!==e;)if(t<e){e:{var n=new Set;if(vo(this)||n.has(this.getKey()))break e;let e=this.getParent();var r=this.getNextSibling(),i=this.getPreviousSibling();if(vo(r)&&vo(i)){if(Ho(i=i.getFirstChild())){i.append(this);var o=r.getFirstChild();Ho(o)&&(xo(i,o=o.getChildren()),r.remove(),n.add(r.getKey())),wo(i)}}else vo(r)?Ho(r=r.getFirstChild())&&(null!==(n=r.getFirstChild())&&n.insertBefore(this),wo(r)):vo(i)?Ho(r=i.getFirstChild())&&(r.append(this),wo(r)):Ho(e)&&(n=Po(),o=Wo(e.getListType()),n.append(o),o.append(this),i?i.insertAfter(n):r?r.insertBefore(n):e.append(n),wo(o));Ho(e)&&wo(e)}t++}else Ro(this),t--;return this}insertBefore(e){if(Io(e)){let e=this.getParentOrThrow();if(Ho(e)){wo(e,this.getNextSiblings())}}return super.insertBefore(e)}canInsertAfter(e){return Io(e)}canReplaceWith(e){return Io(e)}canMergeWith(e){return mo.$isParagraphNode(e)||Io(e)}extractWithChild(e,t){if(!mo.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return Wo("bullet")}};function ko(e,t,n){let r=[],i=[];var o=(t=t.list)?t.listitem:void 0;if(t&&t.nested)var l=t.nested.listitem;if(void 0!==o&&(o=o.split(" "),r.push(...o)),t){o=Ho(o=n.getParent())&&"check"===o.getListType();let e=n.getChecked();o&&!e||i.push(t.listitemUnchecked),o&&e||i.push(t.listitemChecked),o&&r.push(e?t.listitemChecked:t.listitemUnchecked)}void 0!==l&&(l=l.split(" "),n.getChildren().some((e=>Ho(e)))?r.push(...l):i.push(...l)),0<i.length&&yo.removeClassNamesFromElement(e,...i),0<r.length&&yo.addClassNamesToElement(e,...r)}function Mo(e,t,n){Ho(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false"))}function $o(e){return{node:Po(e=yo.isHTMLElement(e)&&"true"===e.getAttribute("aria-checked"))}}function Po(e){return mo.$applyNodeReplacement(new Do(void 0,e))}function Io(e){return e instanceof Do}let Fo=class e extends mo.ElementNode{static getType(){return"list"}static clone(t){return new e(t.__listType||Ko[t.__tag],t.__start,t.__key)}constructor(e,t,n){super(n),this.__listType=e=Ko[e]||e,this.__tag="number"===e?"ol":"ul",this.__start=t}getTag(){return this.__tag}setListType(e){let t=this.getWritable();t.__listType=e,t.__tag="number"===e?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e){let t=document.createElement(this.__tag);return 1!==this.__start&&t.setAttribute("start",String(this.__start)),t.__lexicalListType=this.__listType,Lo(t,e.theme,this),t}updateDOM(e,t,n){return e.__tag!==this.__tag||(Lo(t,n.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:zo,priority:0}),ul:()=>({conversion:zo,priority:0})}}static importJSON(e){let t=Wo(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportDOM(e){return({element:e}=super.exportDOM(e)),e&&yo.isHTMLElement(e)&&(1!==this.__start&&e.setAttribute("start",String(this.__start)),"check"===this.__listType&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let n=0;n<e.length;n++){var t=e[n];if(Io(t))super.append(t);else{let e=Po();Ho(t)?e.append(t):mo.$isElementNode(t)?(t=mo.$createTextNode(t.getTextContent()),e.append(t)):e.append(t),super.append(e)}}return wo(this),this}extractWithChild(e){return Io(e)}};function Lo(e,t,n){let r=[],i=[];var o=t.list;if(void 0!==o){let e=o[`${n.__tag}Depth`]||[],s=(t=Eo(n)-1)%e.length;var l=e[s];let a,d=o[n.__tag];if(void 0!==(o=o.nested)&&o.list&&(a=o.list),void 0!==d&&r.push(d),void 0!==l)for(l=l.split(" "),r.push(...l),l=0;l<e.length;l++)l!==s&&i.push(n.__tag+l);void 0!==a&&(n=a.split(" "),1<t?r.push(...n):i.push(...n))}0<i.length&&yo.removeClassNamesFromElement(e,...i),0<r.length&&yo.addClassNamesToElement(e,...r)}function Bo(e){let t=[];for(let r=0;r<e.length;r++){var n=e[r];Io(n)?(t.push(n),1<(n=n.getChildren()).length&&n.forEach((e=>{Ho(e)&&t.push(So(e))}))):t.push(So(n))}return t}function zo(e){let t=e.nodeName.toLowerCase(),n=null;return"ol"===t?n=Wo("number",e.start):"ul"===t&&(n=yo.isHTMLElement(e)&&"check"===e.getAttribute("__lexicallisttype")?Wo("check"):Wo("bullet")),{after:Bo,node:n}}let Ko={ol:"number",ul:"bullet"};function Wo(e,t=1){return mo.$applyNodeReplacement(new Fo(e,t))}function Ho(e){return e instanceof Fo}let Uo=mo.createCommand("INSERT_UNORDERED_LIST_COMMAND"),Go=mo.createCommand("INSERT_ORDERED_LIST_COMMAND"),Yo=mo.createCommand("INSERT_CHECK_LIST_COMMAND"),jo=mo.createCommand("REMOVE_LIST_COMMAND");_o.$createListItemNode=Po,_o.$createListNode=Wo,_o.$getListDepth=Eo,_o.$handleListInsertParagraph=function(){var e=mo.$getSelection();if(!mo.$isRangeSelection(e)||!e.isCollapsed())return!1;if(!Io(e=e.anchor.getNode())||0!==e.getChildrenSize())return!1;var t=To(e),n=e.getParent();Ho(n)||No(40);let r,i=n.getParent();if(mo.$isRootOrShadowRoot(i))r=mo.$createParagraphNode(),t.insertAfter(r);else{if(!Io(i))return!1;r=Po(),i.insertAfter(r)}if(r.select(),0<(t=e.getNextSiblings()).length){let e=Wo(n.getListType());mo.$isParagraphNode(r)?r.insertAfter(e):((n=Po()).append(e),r.insertAfter(n)),t.forEach((t=>{t.remove(),e.append(t)}))}return function(e){for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){let t=e.getParent();if(null==t||!Io(e)&&!Ho(e))break;e=t}e.remove()}(e),!0},_o.$isListItemNode=Io,_o.$isListNode=Ho,_o.INSERT_CHECK_LIST_COMMAND=Yo,_o.INSERT_ORDERED_LIST_COMMAND=Go,_o.INSERT_UNORDERED_LIST_COMMAND=Uo,_o.ListItemNode=Do,_o.ListNode=Fo,_o.REMOVE_LIST_COMMAND=jo,_o.insertList=function(e,t){e.update((()=>{var e=mo.$getSelection();if(mo.$isRangeSelection(e)||mo.DEPRECATED_$isGridSelection(e)){var n=e.getNodes(),r=(e=e.anchor.getNode()).getParent();if(bo(e,n))n=Wo(t),mo.$isRootOrShadowRoot(r)?(e.replace(n),r=Po(),mo.$isElementNode(e)&&(r.setFormat(e.getFormatType()),r.setIndent(e.getIndent())),n.append(r)):Io(e)&&(xo(n,(e=e.getParentOrThrow()).getChildren()),e.replace(n));else for(e=new Set,r=0;r<n.length;r++){var i=n[r];if(mo.$isElementNode(i)&&i.isEmpty()&&!e.has(i.getKey()))Ao(i,t);else if(mo.$isLeafNode(i))for(i=i.getParent();null!=i;){let n=i.getKey();if(Ho(i)){if(!e.has(n)){var o=Wo(t);xo(o,i.getChildren()),i.replace(o),wo(o),e.add(n)}break}if(o=i.getParent(),mo.$isRootOrShadowRoot(o)&&!e.has(n)){e.add(n),Ao(i,t);break}i=o}}}}))},_o.removeList=function(e){e.update((()=>{let e=mo.$getSelection();if(mo.$isRangeSelection(e)){var t=new Set,n=e.getNodes(),r=e.anchor.getNode();if(bo(r,n))t.add(To(r));else for(r=0;r<n.length;r++){var i=n[r];mo.$isLeafNode(i)&&(null!=(i=yo.$getNearestNodeOfType(i,Do))&&t.add(To(i)))}for(let r of t){t=r,n=Co(r);for(let r of n)xo(n=mo.$createParagraphNode(),r.getChildren()),t.insertAfter(n),t=n,r.__key===e.anchor.key&&e.anchor.set(n.getKey(),0,"element"),r.__key===e.focus.key&&e.focus.set(n.getKey(),0,"element"),r.remove();r.remove()}}}))};var Jo=_o,Vo={},Xo={},Zo={},qo=fi,Qo=Ni,el=ni;function tl(e,t,n,r=null){let i=null==r||t.isSelected(r),o=el.$isElementNode(t)&&t.excludeFromCopy("html");var l=t;null!==r&&(l=qo.$cloneWithProperties(t),l=el.$isTextNode(l)&&null!=r?qo.$sliceSelectedTextNodeContent(r,l):l);let s=el.$isElementNode(l)?l.getChildren():[],{element:a,after:d}=l.exportDOM(e);if(!a)return!1;let u=document.createDocumentFragment();for(let n=0;n<s.length;n++){let o=s[n],l=tl(e,o,u,r);!i&&el.$isElementNode(t)&&l&&t.extractWithChild(o,r,"html")&&(i=!0)}return i&&!o?(Qo.isHTMLElement(a)&&a.append(u),n.append(a),d&&(e=d.call(l,a))&&a.replaceWith(e)):n.append(u),i}let nl=new Set(["STYLE","SCRIPT"]);function rl(e,t,n=new Map,r){let i=[];if(nl.has(e.nodeName))return i;let o=null;var l,{nodeName:s}=e,a=t._htmlConversions.get(s.toLowerCase());if(s=null,void 0!==a)for(l of a)null!==(a=l(e))&&(null===s||s.priority<a.priority)&&(s=a);if(s=(l=null!==s?s.conversion:null)?l(e):null,l=null,null!==s){if(l=s.after,a=s.node,o=Array.isArray(a)?a[a.length-1]:a,null!==o){for(var[,d]of n)if(o=d(o,r),!o)break;o&&i.push(...Array.isArray(a)?a:[o])}null!=s.forChild&&n.set(e.nodeName,s.forChild)}for(e=e.childNodes,r=[],d=0;d<e.length;d++)r.push(...rl(e[d],t,new Map(n),o));return null!=l&&(r=l(r)),null==o?i=i.concat(r):el.$isElementNode(o)&&o.append(...r),i}Zo.$generateHtmlFromNodes=function(e,t){if("undefined"==typeof document||"undefined"==typeof window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=el.$getRoot().getChildren();for(let i=0;i<r.length;i++)tl(e,r[i],n,t);return n.innerHTML},Zo.$generateNodesFromDOM=function(e,t){t=t.body?t.body.childNodes:[];let n=[];for(let i=0;i<t.length;i++){var r=t[i];nl.has(r.nodeName)||null!==(r=rl(r,e))&&(n=n.concat(r))}return n};var il=Zo,ol=il,ll=fi,sl=Ni,al=ni;function dl(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let ul="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function cl(e){let t=al.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return al.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?"":ol.$generateHtmlFromNodes(e,t)}function gl(e){let t=al.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return al.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(pl(e,t))}function hl(e,t,n){(al.DEPRECATED_$isGridSelection(n)||null!==sl.$findMatchingParent(n.anchor.getNode(),(e=>al.DEPRECATED_$isGridCellNode(e)))&&null!==sl.$findMatchingParent(n.focus.getNode(),(e=>al.DEPRECATED_$isGridCellNode(e))))&&1===t.length&&al.DEPRECATED_$isGridNode(t[0])?function(e,t,n,r){1===e.length&&al.DEPRECATED_$isGridNode(e[0])||dl(42);var i=e[0];e=i.getChildren(),n=i.getFirstChildOrThrow().getChildrenSize();var o=i.getChildrenSize(),l=sl.$findMatchingParent(t.anchor.getNode(),(e=>al.DEPRECATED_$isGridCellNode(e)));t=(i=l&&sl.$findMatchingParent(l,(e=>al.DEPRECATED_$isGridRowNode(e))))&&sl.$findMatchingParent(i,(e=>al.DEPRECATED_$isGridNode(e))),al.DEPRECATED_$isGridCellNode(l)&&al.DEPRECATED_$isGridRowNode(i)&&al.DEPRECATED_$isGridNode(t)||dl(43);var s=i.getIndexWithinParent(),a=Math.min(t.getChildrenSize()-1,s+o-1);let d,u;o=l.getIndexWithinParent(),l=Math.min(i.getChildrenSize()-1,o+n-1),n=Math.min(o,l),i=Math.min(s,a),o=Math.max(o,l),s=Math.max(s,a),a=t.getChildren(),l=0;for(let t=i;t<=s;t++){var c=a[t];al.DEPRECATED_$isGridRowNode(c)||dl(24);var g=e[l];al.DEPRECATED_$isGridRowNode(g)||dl(24),c=c.getChildren(),g=g.getChildren();let r=0;for(let e=n;e<=o;e++){let l=c[e];al.DEPRECATED_$isGridCellNode(l)||dl(25);let a=g[r];al.DEPRECATED_$isGridCellNode(a)||dl(25),t===i&&e===n?d=l.getKey():t===s&&e===o&&(u=l.getKey());let h=l.getChildren();a.getChildren().forEach((e=>{al.$isTextNode(e)&&al.$createParagraphNode().append(e),l.append(e)})),h.forEach((e=>e.remove())),r++}l++}d&&u&&(e=al.DEPRECATED_$createGridSelection(),e.set(t.getKey(),d,u),al.$setSelection(e),r.dispatchCommand(al.SELECTION_CHANGE_COMMAND,void 0))}(t,n,!1,e):function(e,t){let n=[],r=null;for(let t=0;t<e.length;t++){let i=e[t],o=al.$isLineBreakNode(i);if(o||al.$isDecoratorNode(i)&&i.isInline()||al.$isElementNode(i)&&i.isInline()||al.$isTextNode(i)||i.isParentRequired()){if(null===r&&(r=i.createParentElementNode(),n.push(r),o))continue;null!==r&&r.append(i)}else n.push(i),r=null}al.$isRangeSelection(t)?t.insertNodes(n):al.DEPRECATED_$isGridSelection(t)&&(e=t.anchor.getNode(),al.DEPRECATED_$isGridCellNode(e)||dl(41),e.append(...n))}(t,n)}function fl(e,t,n,r=[]){let i=null==t||n.isSelected(t),o=al.$isElementNode(n)&&n.excludeFromCopy("html");var l=n;if(null!==t){var s=ll.$cloneWithProperties(n);l=s=al.$isTextNode(s)&&null!=t?ll.$sliceSelectedTextNodeContent(t,s):s}let a=al.$isElementNode(l)?l.getChildren():[];var d=l;s=d.exportJSON();var u=d.constructor;s.type!==u.getType()&&dl(58,u.name);let c=s.children;for(al.$isElementNode(d)&&(Array.isArray(c)||dl(59,u.name)),al.$isTextNode(l)&&(0<(l=l.__text).length?s.text=l:i=!1),l=0;l<a.length;l++)u=fl(e,t,d=a[l],s.children),!i&&al.$isElementNode(n)&&u&&n.extractWithChild(d,t,"clone")&&(i=!0);if(i&&!o)r.push(s);else if(Array.isArray(s.children))for(e=0;e<s.children.length;e++)r.push(s.children[e]);return i}function pl(e,t){let n=[],r=al.$getRoot().getChildren();for(let i=0;i<r.length;i++)fl(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}function _l(e){let t=[];for(let n=0;n<e.length;n++){let r=al.$parseSerializedNode(e[n]);al.$isTextNode(r)&&ll.$addNodeStyle(r),t.push(r)}return t}let ml=null;function yl(e,t){var n=ul?(e._window||window).getSelection():null;if(!n)return!1;var r=n.anchorNode;if(n=n.focusNode,null!==r&&null!==n&&!al.isSelectionWithinEditor(e,r,n))return!1;if(t.preventDefault(),t=t.clipboardData,r=al.$getSelection(),null===t||null===r)return!1;n=cl(e),e=gl(e);let i="";return null!==r&&(i=r.getTextContent()),null!==n&&t.setData("text/html",n),null!==e&&t.setData("application/x-lexical-editor",e),t.setData("text/plain",i),!0}Xo.$generateJSONFromSelectedNodes=pl,Xo.$generateNodesFromSerializedNodes=_l,Xo.$getHtmlContent=cl,Xo.$getLexicalContent=gl,Xo.$insertDataTransferForPlainText=function(e,t){null!=(e=e.getData("text/plain")||e.getData("text/uri-list"))&&t.insertRawText(e)},Xo.$insertDataTransferForRichText=function(e,t,n){var r=e.getData("application/x-lexical-editor");if(r)try{let e=JSON.parse(r);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes)){return hl(n,_l(e.nodes),t)}}catch{}if(r=e.getData("text/html"))try{var i=(new DOMParser).parseFromString(r,"text/html"),o=ol.$generateNodesFromDOM(n,i);return hl(n,o,t)}catch{}if(null!=(e=e.getData("text/plain")||e.getData("text/uri-list")))if(al.$isRangeSelection(t))for(n=(e=e.split(/(\r?\n|\t)/)).length,i=0;i<n;i++)"\n"===(o=e[i])||"\r\n"===o?t.insertParagraph():"\t"===o?t.insertNodes([al.$createTabNode()]):t.insertText(o);else t.insertRawText(e)},Xo.$insertGeneratedNodes=hl,Xo.copyToClipboard=async function(e,t){if(null!==ml)return!1;if(null!==t)return new Promise((n=>{e.update((()=>{n(yl(e,t))}))}));var n=e.getRootElement();let r=null==e._window?window.document:e._window.document,i=ul?(e._window||window).getSelection():null;if(null===n||null===i)return!1;let o=r.createElement("span");return o.style.cssText="position: fixed; top: -1000px;",o.append(r.createTextNode("#")),n.append(o),(n=new Range).setStart(o,0),n.setEnd(o,1),i.removeAllRanges(),i.addRange(n),new Promise((t=>{let n=e.registerCommand(al.COPY_COMMAND,(r=>(sl.objectKlassEquals(r,ClipboardEvent)&&(n(),null!==ml&&(window.clearTimeout(ml),ml=null),t(yl(e,r))),!0)),al.COMMAND_PRIORITY_CRITICAL);ml=window.setTimeout((()=>{n(),ml=null,t(!1)}),50),r.execCommand("copy"),o.remove()}))};var Nl=Xo,El=Nl,Tl=fi,Cl=Ni,vl=ni;function Sl(e,t){return void 0!==document.caretRangeFromPoint?null===(e=document.caretRangeFromPoint(e,t))?null:{node:e.startContainer,offset:e.startOffset}:"undefined"!==document.caretPositionFromPoint?null===(e=document.caretPositionFromPoint(e,t))?null:{node:e.offsetNode,offset:e.offset}:null}let bl="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,xl=bl&&"documentMode"in document?document.documentMode:null,Al=!(!bl||!("InputEvent"in window)||xl)&&"getTargetRanges"in new window.InputEvent("input"),Ol=bl&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),wl=bl&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Rl=bl&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Dl=bl&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Rl,kl=vl.createCommand("DRAG_DROP_PASTE_FILE"),Ml=class e extends vl.ElementNode{static getType(){return"quote"}static clone(t){return new e(t.__key)}constructor(e){super(e)}createDOM(e){let t=document.createElement("blockquote");return Cl.addClassNamesToElement(t,e.theme.quote),t}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:Ll,priority:0})}}exportDOM(e){if(({element:e}=super.exportDOM(e)),e&&Cl.isHTMLElement(e)){this.isEmpty()&&e.append(document.createElement("br"));var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t)}return{element:e}}static importJSON(e){let t=$l();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(e,t){e=vl.$createParagraphNode();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=vl.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}};function $l(){return vl.$applyNodeReplacement(new Ml)}let Pl=class e extends vl.ElementNode{static getType(){return"heading"}static clone(t){return new e(t.__tag,t.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){let t=this.__tag,n=document.createElement(t);return void 0!==(e=e.theme.heading)&&Cl.addClassNamesToElement(n,e[t]),n}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:Fl,priority:0}),h2:()=>({conversion:Fl,priority:0}),h3:()=>({conversion:Fl,priority:0}),h4:()=>({conversion:Fl,priority:0}),h5:()=>({conversion:Fl,priority:0}),h6:()=>({conversion:Fl,priority:0}),p:e=>null!==(e=e.firstChild)&&Il(e)?{conversion:()=>({node:null}),priority:3}:null,span:e=>Il(e)?{conversion:()=>({node:Bl("h1")}),priority:3}:null}}exportDOM(e){if(({element:e}=super.exportDOM(e)),e&&Cl.isHTMLElement(e)){this.isEmpty()&&e.append(document.createElement("br"));var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t)}return{element:e}}static importJSON(e){let t=Bl(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(e,t=!0){e=0<(e=e?e.anchor.offset:0)&&e<this.getTextContentSize()?Bl(this.getTag()):vl.$createParagraphNode();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=this.isEmpty()?vl.$createParagraphNode():Bl(this.getTag());return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}extractWithChild(){return!0}};function Il(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function Fl(e){let t=e.nodeName.toLowerCase(),n=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(n=Bl(t),null!==e.style&&n.setFormat(e.style.textAlign)),{node:n}}function Ll(e){let t=$l();return null!==e.style&&t.setFormat(e.style.textAlign),{node:t}}function Bl(e){return vl.$applyNodeReplacement(new Pl(e))}function zl(e){let t=null;if(e instanceof DragEvent?t=e.dataTransfer:e instanceof ClipboardEvent&&(t=e.clipboardData),null===t)return[!1,[],!1];var n=t.types;return e=n.includes("Files"),n=n.includes("text/html")||n.includes("text/plain"),[e,Array.from(t.files),n]}function Kl(e){var t=vl.$getSelection();if(!vl.$isRangeSelection(t))return!1;let n=new Set;t=t.getNodes();for(let o=0;o<t.length;o++){var r=t[o],i=r.getKey();n.has(i)||(i=(r=Cl.$getNearestBlockElementAncestorOrThrow(r)).getKey(),r.canIndent()&&!n.has(i)&&(n.add(i),e(r)))}return 0<n.size}function Wl(e){return e=vl.$getNearestNodeFromDOMNode(e),vl.$isDecoratorNode(e)}Vo.$createHeadingNode=Bl,Vo.$createQuoteNode=$l,Vo.$isHeadingNode=function(e){return e instanceof Pl},Vo.$isQuoteNode=function(e){return e instanceof Ml},Vo.DRAG_DROP_PASTE=kl,Vo.HeadingNode=Pl,Vo.QuoteNode=Ml,Vo.eventFiles=zl,Vo.registerRichText=function(e){return Cl.mergeRegister(e.registerCommand(vl.CLICK_COMMAND,(()=>{const e=vl.$getSelection();return!!vl.$isNodeSelection(e)&&(e.clear(),!0)}),0),e.registerCommand(vl.DELETE_CHARACTER_COMMAND,(e=>{const t=vl.$getSelection();return!!vl.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.DELETE_WORD_COMMAND,(e=>{const t=vl.$getSelection();return!!vl.$isRangeSelection(t)&&(t.deleteWord(e),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.DELETE_LINE_COMMAND,(e=>{const t=vl.$getSelection();return!!vl.$isRangeSelection(t)&&(t.deleteLine(e),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.CONTROLLED_TEXT_INSERTION_COMMAND,(t=>{const n=vl.$getSelection();if("string"==typeof t)vl.$isRangeSelection(n)?n.insertText(t):vl.DEPRECATED_$isGridSelection(n);else{if(!vl.$isRangeSelection(n)&&!vl.DEPRECATED_$isGridSelection(n))return!1;const r=t.dataTransfer;null!=r?El.$insertDataTransferForRichText(r,n,e):vl.$isRangeSelection(n)&&(t=t.data)&&n.insertText(t)}return!0}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.REMOVE_TEXT_COMMAND,(()=>{const e=vl.$getSelection();return!!vl.$isRangeSelection(e)&&(e.removeText(),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.FORMAT_TEXT_COMMAND,(e=>{const t=vl.$getSelection();return!!vl.$isRangeSelection(t)&&(t.formatText(e),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.FORMAT_ELEMENT_COMMAND,(e=>{var t=vl.$getSelection();if(!vl.$isRangeSelection(t)&&!vl.$isNodeSelection(t))return!1;t=t.getNodes();for(const n of t)null!==(t=Cl.$findMatchingParent(n,(e=>vl.$isElementNode(e)&&!e.isInline())))&&t.setFormat(e);return!0}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.INSERT_LINE_BREAK_COMMAND,(e=>{const t=vl.$getSelection();return!!vl.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.INSERT_PARAGRAPH_COMMAND,(()=>{const e=vl.$getSelection();return!!vl.$isRangeSelection(e)&&(e.insertParagraph(),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.INSERT_TAB_COMMAND,(()=>(vl.$insertNodes([vl.$createTabNode()]),!0)),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.INDENT_CONTENT_COMMAND,(()=>Kl((e=>{const t=e.getIndent();e.setIndent(t+1)}))),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.OUTDENT_CONTENT_COMMAND,(()=>Kl((e=>{const t=e.getIndent();0<t&&e.setIndent(t-1)}))),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_ARROW_UP_COMMAND,(e=>{var t=vl.$getSelection();if(vl.$isNodeSelection(t)&&!Wl(e.target)){if(0<(e=t.getNodes()).length)return e[0].selectPrevious(),!0}else if(vl.$isRangeSelection(t)&&(t=vl.$getAdjacentNode(t.focus,!0),!e.shiftKey&&vl.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline()))return t.selectPrevious(),e.preventDefault(),!0;return!1}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_ARROW_DOWN_COMMAND,(e=>{var t=vl.$getSelection();if(vl.$isNodeSelection(t)){if(0<(e=t.getNodes()).length)return e[0].selectNext(0,0),!0}else if(vl.$isRangeSelection(t)){let n=t.focus;if("root"===n.key&&n.offset===vl.$getRoot().getChildrenSize())return e.preventDefault(),!0;if(t=vl.$getAdjacentNode(t.focus,!1),!e.shiftKey&&vl.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline())return t.selectNext(),e.preventDefault(),!0}return!1}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_ARROW_LEFT_COMMAND,(e=>{const t=vl.$getSelection();if(vl.$isNodeSelection(t)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectPrevious(),!0}return!!vl.$isRangeSelection(t)&&(!!Tl.$shouldOverrideDefaultCharacterSelection(t,!0)&&(n=e.shiftKey,e.preventDefault(),Tl.$moveCharacter(t,n,!0),!0))}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_ARROW_RIGHT_COMMAND,(e=>{const t=vl.$getSelection();if(vl.$isNodeSelection(t)&&!Wl(e.target)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectNext(0,0),!0}return!!vl.$isRangeSelection(t)&&(n=e.shiftKey,!!Tl.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),Tl.$moveCharacter(t,n,!1),!0))}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_BACKSPACE_COMMAND,(t=>{if(Wl(t.target))return!1;const n=vl.$getSelection();if(!vl.$isRangeSelection(n))return!1;t.preventDefault(),({anchor:t}=n);const r=t.getNode();return n.isCollapsed()&&0===t.offset&&!vl.$isRootNode(r)&&0<Cl.$getNearestBlockElementAncestorOrThrow(r).getIndent()?e.dispatchCommand(vl.OUTDENT_CONTENT_COMMAND,void 0):e.dispatchCommand(vl.DELETE_CHARACTER_COMMAND,!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_DELETE_COMMAND,(t=>{if(Wl(t.target))return!1;const n=vl.$getSelection();return!!vl.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(vl.DELETE_CHARACTER_COMMAND,!1))}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_ENTER_COMMAND,(t=>{const n=vl.$getSelection();if(!vl.$isRangeSelection(n))return!1;if(null!==t){if((wl||Ol||Dl)&&Al)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(vl.INSERT_LINE_BREAK_COMMAND,!1)}return e.dispatchCommand(vl.INSERT_PARAGRAPH_COMMAND,void 0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.KEY_ESCAPE_COMMAND,(()=>{const t=vl.$getSelection();return!!vl.$isRangeSelection(t)&&(e.blur(),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.DROP_COMMAND,(t=>{const[,n]=zl(t);if(0<n.length){var r=Sl(t.clientX,t.clientY);if(null!==r){const{offset:t,node:o}=r;var i=vl.$getNearestNodeFromDOMNode(o);if(null!==i){if(r=vl.$createRangeSelection(),vl.$isTextNode(i))r.anchor.set(i.getKey(),t,"text"),r.focus.set(i.getKey(),t,"text");else{const e=i.getParentOrThrow().getKey();i=i.getIndexWithinParent()+1,r.anchor.set(e,i,"element"),r.focus.set(e,i,"element")}r=vl.$normalizeSelection__EXPERIMENTAL(r),vl.$setSelection(r)}e.dispatchCommand(kl,n)}return t.preventDefault(),!0}return t=vl.$getSelection(),!!vl.$isRangeSelection(t)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.DRAGSTART_COMMAND,(e=>{[e]=zl(e);const t=vl.$getSelection();return!(e&&!vl.$isRangeSelection(t))}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.DRAGOVER_COMMAND,(e=>{var[t]=zl(e);const n=vl.$getSelection();return!(t&&!vl.$isRangeSelection(n))&&(null!==(t=Sl(e.clientX,e.clientY))&&(t=vl.$getNearestNodeFromDOMNode(t.node),vl.$isDecoratorNode(t)&&e.preventDefault()),!0)}),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.SELECT_ALL_COMMAND,(()=>(vl.$selectAll(),!0)),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.COPY_COMMAND,(t=>(El.copyToClipboard(e,Cl.objectKlassEquals(t,ClipboardEvent)?t:null),!0)),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.CUT_COMMAND,(t=>(async function(e,t){await El.copyToClipboard(t,Cl.objectKlassEquals(e,ClipboardEvent)?e:null),t.update((()=>{let e=vl.$getSelection();vl.$isRangeSelection(e)?e.removeText():vl.$isNodeSelection(e)&&e.getNodes().forEach((e=>e.remove()))}))}(t,e),!0)),vl.COMMAND_PRIORITY_EDITOR),e.registerCommand(vl.PASTE_COMMAND,(t=>{const[,n,r]=zl(t);if(0<n.length&&!r)return e.dispatchCommand(kl,n),!0;if(vl.isSelectionCapturedInDecoratorInput(t.target))return!1;const i=vl.$getSelection();return!(!vl.$isRangeSelection(i)&&!vl.DEPRECATED_$isGridSelection(i))&&(function(e,t){e.preventDefault(),t.update((()=>{let n=vl.$getSelection(),r=e instanceof InputEvent||e instanceof KeyboardEvent?null:e.clipboardData;null!=r&&(vl.$isRangeSelection(n)||vl.DEPRECATED_$isGridSelection(n))&&El.$insertDataTransferForRichText(r,n,t)}),{tag:"paste"})}(t,e),!0)}),vl.COMMAND_PRIORITY_EDITOR))};var Hl=Vo,Ul={},Gl=ni,Yl=Ni;let jl=/^(\d+(?:\.\d+)?)px$/,Jl={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1},Vl=class e extends Gl.DEPRECATED_GridCellNode{static getType(){return"tablecell"}static clone(t){let n=new e(t.__headerState,t.__colSpan,t.__width,t.__key);return n.__rowSpan=t.__rowSpan,n.__backgroundColor=t.__backgroundColor,n}static importDOM(){return{td:()=>({conversion:Xl,priority:0}),th:()=>({conversion:Xl,priority:0})}}static importJSON(e){let t=e.rowSpan||1,n=Zl(e.headerState,e.colSpan||1,e.width||void 0);return n.__rowSpan=t,n.__backgroundColor=e.backgroundColor||null,n}constructor(e=Jl.NO_STATUS,t=1,n,r){super(t,r),this.__headerState=e,this.__width=n,this.__backgroundColor=null}createDOM(e){let t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),1<this.__colSpan&&(t.colSpan=this.__colSpan),1<this.__rowSpan&&(t.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(t.style.backgroundColor=this.__backgroundColor),Yl.addClassNamesToElement(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){if(({element:e}=super.exportDOM(e)),e){var t=this.getParentOrThrow().getChildrenSize();e.style.border="1px solid black",1<this.__colSpan&&(e.colSpan=this.__colSpan),1<this.__rowSpan&&(e.rowSpan=this.__rowSpan),e.style.width=`${this.getWidth()||Math.max(90,700/t)}px`,e.style.verticalAlign="top",e.style.textAlign="start",null!==(t=this.getBackgroundColor())?e.style.backgroundColor=t:this.hasHeader()&&(e.style.backgroundColor="#f2f3f5")}return{element:e}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),headerState:this.__headerState,type:"tablecell",width:this.getWidth()}}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e){return this.getWritable().__headerState=e,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){return this.getWritable().__width=e,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){this.getWritable().__backgroundColor=e}toggleHeaderStyle(e){let t=this.getWritable();return t.__headerState=(t.__headerState&e)===e?t.__headerState-e:t.__headerState+e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==Jl.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}};function Xl(e){var t=e.nodeName.toLowerCase();let n;return jl.test(e.style.width)&&(n=parseFloat(e.style.width)),(t=Zl("th"===t?Jl.ROW:Jl.NO_STATUS,e.colSpan,n)).__rowSpan=e.rowSpan,""!==(e=e.style.backgroundColor)&&(t.__backgroundColor=e),{forChild:(e,t)=>ql(t)&&!Gl.$isElementNode(e)?(t=Gl.$createParagraphNode(),Gl.$isLineBreakNode(e)&&"\n"===e.getTextContent()?null:(t.append(e),t)):e,node:t}}function Zl(e,t=1,n){return Gl.$applyNodeReplacement(new Vl(e,t,n))}function ql(e){return e instanceof Vl}class Ql extends Gl.DEPRECATED_GridRowNode{static getType(){return"tablerow"}static clone(e){return new Ql(e.__height,e.__key)}static importDOM(){return{tr:()=>({conversion:es,priority:0})}}static importJSON(e){return ts(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){return{...super.exportJSON(),type:"tablerow",version:1}}createDOM(e){let t=document.createElement("tr");return this.__height&&(t.style.height=`${this.__height}px`),Yl.addClassNamesToElement(t,e.theme.tableRow),t}isShadowRoot(){return!0}setHeight(e){return this.getWritable().__height=e,this.__height}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function es(e){let t;return jl.test(e.style.height)&&(t=parseFloat(e.style.height)),{node:ts(t)}}function ts(e){return Gl.$applyNodeReplacement(new Ql(e))}function ns(e){return e instanceof Ql}function rs(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let is="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;class os{constructor(e,t){this.isHighlightingCells=!1,this.focusY=this.focusX=this.anchorY=this.anchorX=-1,this.listenersToRemove=new Set,this.tableNodeKey=t,this.editor=e,this.grid={cells:[],columns:0,rows:0},this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.gridSelection=null,this.hasHijackedSelectionStyles=!1,this.trackTableGrid()}getGrid(){return this.grid}removeListeners(){Array.from(this.listenersToRemove).forEach((e=>e()))}trackTableGrid(){let e=new MutationObserver((e=>{this.editor.update((()=>{var t=!1;for(let n=0;n<e.length;n++){const r=e[n].target.nodeName;if("TABLE"===r||"TR"===r){t=!0;break}}if(t){if(!(t=this.editor.getElementByKey(this.tableNodeKey)))throw Error("Expected to find TableElement in DOM");this.grid=ss(t)}}))}));this.editor.update((()=>{let t=this.editor.getElementByKey(this.tableNodeKey);if(!t)throw Error("Expected to find TableElement in DOM");this.grid=ss(t),e.observe(t,{childList:!0,subtree:!0})}))}clearHighlight(){let e=this.editor;this.isHighlightingCells=!1,this.focusY=this.focusX=this.anchorY=this.anchorX=-1,this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.gridSelection=null,this.hasHijackedSelectionStyles=!1,this.enableHighlightStyle(),e.update((()=>{var t=Gl.$getNodeByKey(this.tableNodeKey);if(!Cs(t))throw Error("Expected TableNode.");if(!(t=e.getElementByKey(this.tableNodeKey)))throw Error("Expected to find TableElement in DOM");t=ss(t),as(e,t,null),Gl.$setSelection(null),e.dispatchCommand(Gl.SELECTION_CHANGE_COMMAND,void 0)}))}enableHighlightStyle(){let e=this.editor;e.update((()=>{let t=e.getElementByKey(this.tableNodeKey);if(!t)throw Error("Expected to find TableElement in DOM");Yl.removeClassNamesFromElement(t,e._config.theme.tableSelection),t.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1}))}disableHighlightStyle(){let e=this.editor;e.update((()=>{let t=e.getElementByKey(this.tableNodeKey);if(!t)throw Error("Expected to find TableElement in DOM");Yl.addClassNamesToElement(t,e._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0}))}updateTableGridSelection(e){if(null!=e&&e.gridKey===this.tableNodeKey){let t=this.editor;this.gridSelection=e,this.isHighlightingCells=!0,this.disableHighlightStyle(),as(t,this.grid,this.gridSelection)}else null==e&&this.clearHighlight()}setFocusCellForSelection(e,t=!1){let n=this.editor;n.update((()=>{var r=Gl.$getNodeByKey(this.tableNodeKey);if(!Cs(r))throw Error("Expected TableNode.");if(!n.getElementByKey(this.tableNodeKey))throw Error("Expected to find TableElement in DOM");r=e.x;let i=e.y;if(this.focusCell=e,null!==this.anchorCell){let e=is?(n._window||window).getSelection():null;e&&e.setBaseAndExtent(this.anchorCell.elem,0,this.focusCell.elem,0)}if(this.isHighlightingCells||this.anchorX===r&&this.anchorY===i&&!t){if(r===this.focusX&&i===this.focusY)return}else this.isHighlightingCells=!0,this.disableHighlightStyle();this.focusX=r,this.focusY=i,this.isHighlightingCells&&(r=Gl.$getNearestNodeFromDOMNode(e.elem),null!=this.gridSelection&&null!=this.anchorCellNodeKey&&ql(r)&&(r=r.getKey(),this.gridSelection=this.gridSelection.clone()||Gl.DEPRECATED_$createGridSelection(),this.focusCellNodeKey=r,this.gridSelection.set(this.tableNodeKey,this.anchorCellNodeKey,this.focusCellNodeKey),Gl.$setSelection(this.gridSelection),n.dispatchCommand(Gl.SELECTION_CHANGE_COMMAND,void 0),as(n,this.grid,this.gridSelection)))}))}setAnchorCellForSelection(e){this.isHighlightingCells=!1,this.anchorCell=e,this.anchorX=e.x,this.anchorY=e.y,this.editor.update((()=>{var t=Gl.$getNearestNodeFromDOMNode(e.elem);ql(t)&&(t=t.getKey(),this.gridSelection=Gl.DEPRECATED_$createGridSelection(),this.anchorCellNodeKey=t)}))}formatCells(e){this.editor.update((()=>{let t=Gl.$getSelection();Gl.DEPRECATED_$isGridSelection(t)||rs(11);let n=Gl.$createRangeSelection(),r=n.anchor,i=n.focus;t.getNodes().forEach((t=>{ql(t)&&0!==t.getTextContentSize()&&(r.set(t.getKey(),0,"element"),i.set(t.getKey(),t.getChildrenSize(),"element"),n.formatText(e))})),Gl.$setSelection(t),this.editor.dispatchCommand(Gl.SELECTION_CHANGE_COMMAND,void 0)}))}clearText(){let e=this.editor;e.update((()=>{let t=Gl.$getNodeByKey(this.tableNodeKey);if(!Cs(t))throw Error("Expected TableNode.");var n=Gl.$getSelection();Gl.DEPRECATED_$isGridSelection(n)||rs(11),(n=n.getNodes().filter(ql)).length===this.grid.columns*this.grid.rows?(t.selectPrevious(),t.remove(),Gl.$getRoot().selectStart()):(n.forEach((e=>{if(Gl.$isElementNode(e)){let t=Gl.$createParagraphNode(),n=Gl.$createTextNode();t.append(n),e.append(t),e.getChildren().forEach((e=>{e!==t&&e.remove()}))}})),as(e,this.grid,null),Gl.$setSelection(null),e.dispatchCommand(Gl.SELECTION_CHANGE_COMMAND,void 0))}))}}function ls(e){for(;null!=e;){let t=e.nodeName;if("TD"===t||"TH"===t){if(void 0===(e=e._cell))break;return e}e=e.parentNode}return null}function ss(e){let t=[],n={cells:t,columns:0,rows:0};var r=e.firstChild;let i=e=0;for(t.length=0;null!=r;){var o=r.nodeName;if("TD"===o||"TH"===o){o={elem:o=r,hasBackgroundColor:""!==o.style.backgroundColor,highlighted:!1,x:e,y:i},r._cell=o;let n=t[i];void 0===n&&(n=t[i]=[]),n[e]=o}else if(null!=(o=r.firstChild)){r=o;continue}if(null!=(o=r.nextSibling))e++,r=o;else if(null!=(o=r.parentNode)){if(null==(r=o.nextSibling))break;i++,e=0}}return n.columns=e+1,n.rows=i+1,n}function as(e,t,n){let r=new Set(n?n.getNodes():[]);ds(t,((t,n)=>{let i=t.elem;r.has(n)?(t.highlighted=!0,hs(e,t)):(t.highlighted=!1,fs(e,t),i.getAttribute("style")||i.removeAttribute("style"))}))}function ds(e,t){({cells:e}=e);for(let n=0;n<e.length;n++){let r=e[n];if(r)for(let e=0;e<r.length;e++){let i=r[e];if(!i)continue;let o=Gl.$getNearestNodeFromDOMNode(i.elem);null!==o&&t(i,o,{x:e,y:n})}}}function us(e,t){t.disableHighlightStyle(),ds(t.grid,(t=>{t.highlighted=!0,hs(e,t)}))}let cs=(e,t,n,r,i)=>{const o="forward"===i;switch(i){case"backward":case"forward":return n!==(o?e.grid.columns-1:0)?(e=t.getCellNodeFromCordsOrThrow(n+(o?1:-1),r,e.grid),o?e.selectStart():e.selectEnd()):r!==(o?e.grid.rows-1:0)?(e=t.getCellNodeFromCordsOrThrow(o?0:e.grid.columns-1,r+(o?1:-1),e.grid),o?e.selectStart():e.selectEnd()):o?t.selectNext():t.selectPrevious(),!0;case"up":return 0!==r?t.getCellNodeFromCordsOrThrow(n,r-1,e.grid).selectEnd():t.selectPrevious(),!0;case"down":return r!==e.grid.rows-1?t.getCellNodeFromCordsOrThrow(n,r+1,e.grid).selectStart():t.selectNext(),!0;default:return!1}};function gs(e,t){if(Gl.$isRangeSelection(e)||Gl.DEPRECATED_$isGridSelection(e)){let n=t.isParentOf(e.anchor.getNode());return e=t.isParentOf(e.focus.getNode()),n&&e}return!1}function hs(e,t){e=t.elem,ql(t=Gl.$getNearestNodeFromDOMNode(e))||rs(131),null===t.getBackgroundColor()?e.style.setProperty("background-color","rgb(172,206,247)"):e.style.setProperty("background-image","linear-gradient(to right, rgba(172,206,247,0.85), rgba(172,206,247,0.85))"),e.style.setProperty("caret-color","transparent")}function fs(e,t){e=t.elem,ql(t=Gl.$getNearestNodeFromDOMNode(e))||rs(131),null===t.getBackgroundColor()&&e.style.removeProperty("background-color"),e.style.removeProperty("background-image"),e.style.removeProperty("caret-color")}function ps(e){return ql(e=Yl.$findMatchingParent(e,ql))?e:null}function _s(e){return Cs(e=Yl.$findMatchingParent(e,Cs))?e:null}function ms(e,t,n,r,i){var o=Gl.$getSelection();if(!gs(o,r))return!1;if(Gl.$isRangeSelection(o)&&o.isCollapsed()){if("backward"===n||"forward"===n)return!1;let{anchor:a,focus:d}=o;o=Yl.$findMatchingParent(a.getNode(),ql);var l=Yl.$findMatchingParent(d.getNode(),ql);if(!ql(o)||!o.is(l))return!1;l=e.getElementByKey(o.__key);var s=e.getElementByKey(a.key);if(null==s||null==l)return!1;if("element"===a.type)l=s.getBoundingClientRect();else{if(null===(l=window.getSelection())||0===l.rangeCount)return!1;l=l.getRangeAt(0).getBoundingClientRect()}if(null==(s="up"===n?o.getFirstChild():o.getLastChild()))return!1;if(null==(e=e.getElementByKey(s.__key)))return!1;if(e=e.getBoundingClientRect(),"up"===n?e.top>l.top-l.height:l.bottom+l.height>e.bottom)return ys(t),o=r.getCordsFromCellNode(o,i.grid),t.shiftKey?(n=r.getCellFromCordsOrThrow(o.x,o.y,i.grid),i.setAnchorCellForSelection(n),i.setFocusCellForSelection(n,!0),!0):cs(i,r,o.x,o.y,n)}else if(Gl.DEPRECATED_$isGridSelection(o)){let{anchor:l,focus:s}=o;return o=Yl.$findMatchingParent(l.getNode(),ql),e=Yl.$findMatchingParent(s.getNode(),ql),ql(o)&&ql(e)?(ys(t),t.shiftKey?(t=r.getCordsFromCellNode(e,i.grid),((e,t,n,r,i)=>{const o="forward"===i;switch(i){case"backward":case"forward":return n!==(o?e.grid.columns-1:0)&&e.setFocusCellForSelection(t.getCellFromCordsOrThrow(n+(o?1:-1),r,e.grid)),!0;case"up":return 0!==r&&(e.setFocusCellForSelection(t.getCellFromCordsOrThrow(n,r-1,e.grid)),!0);case"down":return r!==e.grid.rows-1&&(e.setFocusCellForSelection(t.getCellFromCordsOrThrow(n,r+1,e.grid)),!0);default:return!1}})(i,r,t.x,t.y,n)):(e.selectEnd(),!0)):!1}return!1}function ys(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}class Ns extends Gl.DEPRECATED_GridNode{static getType(){return"table"}static clone(e){return new Ns(e.__key)}static importDOM(){return{table:()=>({conversion:Es,priority:1})}}static importJSON(){return Ts()}constructor(e){super(e)}exportJSON(){return{...super.exportJSON(),type:"table",version:1}}createDOM(e){let t=document.createElement("table");return Yl.addClassNamesToElement(t,e.theme.table),t}updateDOM(){return!1}exportDOM(e){return{...super.exportDOM(e),after:e=>{if(e){let t=e.cloneNode(),n=document.createElement("colgroup"),r=document.createElement("tbody");if(Yl.isHTMLElement(e)&&r.append(...e.children),!ns(e=this.getFirstChildOrThrow()))throw Error("Expected to find row node.");e=e.getChildrenSize();for(let t=0;t<e;t++){let e=document.createElement("col");n.append(e)}return t.replaceChildren(n,r),t}}}}canExtractContents(){return!1}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,t){let{rows:n,cells:r}=t;for(t=0;t<n;t++){var i=r[t];if(null!=i&&(i=i.findIndex((t=>{if(t)return({elem:t}=t),Gl.$getNearestNodeFromDOMNode(t)===e})),-1!==i))return{x:i,y:t}}throw Error("Cell not found in table.")}getCellFromCords(e,t,n){return({cells:n}=n),null==(t=n[t])||null==(e=t[e])?null:e}getCellFromCordsOrThrow(e,t,n){if(!(e=this.getCellFromCords(e,t,n)))throw Error("Cell not found at cords.");return e}getCellNodeFromCords(e,t,n){return null==(e=this.getCellFromCords(e,t,n))?null:ql(e=Gl.$getNearestNodeFromDOMNode(e.elem))?e:null}getCellNodeFromCordsOrThrow(e,t,n){if(!(e=this.getCellNodeFromCords(e,t,n)))throw Error("Node at cords not TableCellNode.");return e}canSelectBefore(){return!0}canIndent(){return!1}}function Es(){return{node:Ts()}}function Ts(){return Gl.$applyNodeReplacement(new Ns)}function Cs(e){return e instanceof Ns}function vs(e){if(e=Yl.$findMatchingParent(e,(e=>ns(e))),ns(e))return e;throw Error("Expected table cell to be inside of table row.")}function Ss(e){if(e=Yl.$findMatchingParent(e,(e=>Cs(e))),Cs(e))return e;throw Error("Expected table cell to be inside of table.")}function bs(e,t){let n=Ss(e),{x:r,y:i}=n.getCordsFromCellNode(e,t);return{above:n.getCellNodeFromCords(r,i-1,t),below:n.getCellNodeFromCords(r,i+1,t),left:n.getCellNodeFromCords(r-1,i,t),right:n.getCellNodeFromCords(r+1,i,t)}}function xs(e){null===(e=e.getFirstDescendant())&&rs(124),e.getParentOrThrow().selectStart()}function As(e,t){let n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t)}let Os=Gl.createCommand("INSERT_TABLE_COMMAND");Ul.$createTableCellNode=Zl,Ul.$createTableNode=Ts,Ul.$createTableNodeWithDimensions=function(e,t,n=!0){let r=Ts();for(let o=0;o<e;o++){let e=ts();for(let r=0;r<t;r++){var i=Jl.NO_STATUS;"object"==typeof n?(0===o&&n.rows&&(i|=Jl.ROW),0===r&&n.columns&&(i|=Jl.COLUMN)):n&&(0===o&&(i|=Jl.ROW),0===r&&(i|=Jl.COLUMN)),i=Zl(i);let t=Gl.$createParagraphNode();t.append(Gl.$createTextNode()),i.append(t),e.append(i)}r.append(e)}return r},Ul.$createTableRowNode=ts,Ul.$deleteTableColumn=function(e,t){let n=e.getChildren();for(let e=0;e<n.length;e++){var r=n[e];if(ns(r)){if(t>=(r=r.getChildren()).length||0>t)throw Error("Table column target index out of range");r[t].remove()}}return e},Ul.$deleteTableColumn__EXPERIMENTAL=function(){var e=Gl.$getSelection();Gl.$isRangeSelection(e)||Gl.DEPRECATED_$isGridSelection(e)||rs(118);var t=e.anchor.getNode();e=e.focus.getNode();let[n,,r]=Gl.DEPRECATED_$getNodeTriplet(t);[t]=Gl.DEPRECATED_$getNodeTriplet(e);let[i,o,l]=Gl.DEPRECATED_$computeGridMap(r,n,t);var{startColumn:s}=o;let{startRow:a,startColumn:d}=l;e=Math.min(s,d);let u=(s=Math.max(s+n.__colSpan-1,d+t.__colSpan-1))-e+1;if(i[0].length===s-e+1)r.selectPrevious(),r.remove();else{var c=i.length;for(let t=0;t<c;t++)for(let n=e;n<=s;n++){let{cell:r,startColumn:o}=i[t][n];o<e?n===e&&r.setColSpan(r.__colSpan-Math.min(u,r.__colSpan-(e-o))):o+r.__colSpan-1>s?n===s&&r.setColSpan(r.__colSpan-(s-o+1)):r.remove()}void 0!==(t=(e=i[a])[d+t.__colSpan])?(({cell:t}=t),xs(t)):(({cell:t}=e[d-1]),xs(t))}},Ul.$deleteTableRow__EXPERIMENTAL=function(){var e=Gl.$getSelection();Gl.$isRangeSelection(e)||Gl.DEPRECATED_$isGridSelection(e)||rs(118);var t=e.anchor.getNode();e=e.focus.getNode();let[n,,r]=Gl.DEPRECATED_$getNodeTriplet(t);[e]=Gl.DEPRECATED_$getNodeTriplet(e);let[i,o,l]=Gl.DEPRECATED_$computeGridMap(r,n,e);({startRow:t}=o);var{startRow:s}=l;if(e=s+e.__rowSpan-1,i.length===e-t+1)r.remove();else{s=i[0].length;var a=i[e+1],d=r.getChildAtIndex(e+1);for(let n=e;n>=t;n--){for(var u=s-1;0<=u;u--){let{cell:r,startRow:o,startColumn:l}=i[n][u];if(l===u&&(n===t&&o<t&&r.setRowSpan(r.__rowSpan-(o-t)),o>=t&&o+r.__rowSpan-1>e))if(r.setRowSpan(r.__rowSpan-(e-o+1)),null===d&&rs(122),0===u)As(d,r);else{let{cell:e}=a[u-1];e.insertAfter(r)}}u=r.getChildAtIndex(n),Gl.DEPRECATED_$isGridRowNode(u)||rs(123,String(n)),u.remove()}void 0!==a?(({cell:t}=a[0]),xs(t)):(({cell:t}=i[t-1][0]),xs(t))}},Ul.$getElementGridForTableNode=function(e,t){if(null==(e=e.getElementByKey(t.getKey())))throw Error("Table Element Not Found");return ss(e)},Ul.$getTableCellNodeFromLexicalNode=function(e){return e=Yl.$findMatchingParent(e,(e=>ql(e))),ql(e)?e:null},Ul.$getTableColumnIndexFromTableCellNode=function(e){return vs(e).getChildren().findIndex((t=>t.is(e)))},Ul.$getTableNodeFromLexicalNodeOrThrow=Ss,Ul.$getTableRowIndexFromTableCellNode=function(e){let t=vs(e);return Ss(t).getChildren().findIndex((e=>e.is(t)))},Ul.$getTableRowNodeFromTableCellNodeOrThrow=vs,Ul.$insertTableColumn=function(e,t,n=!0,r,i){let o=e.getChildren();for(let e=0;e<o.length;e++){let a=o[e];if(ns(a))for(let e=0;e<r;e++){var l=a.getChildren();if(t>=l.length||0>t)throw Error("Table column target index out of range");ql(l=l[t])||rs(12);let{left:e,right:r}=bs(l,i);var s=Jl.NO_STATUS;(e&&e.hasHeaderState(Jl.ROW)||r&&r.hasHeaderState(Jl.ROW))&&(s|=Jl.ROW),(s=Zl(s)).append(Gl.$createParagraphNode()),n?l.insertAfter(s):l.insertBefore(s)}}return e},Ul.$insertTableColumn__EXPERIMENTAL=function(e=!0){function t(){let e=Zl(Jl.NO_STATUS).append(Gl.$createParagraphNode());return null===d&&(d=e),e}var n=Gl.$getSelection();Gl.$isRangeSelection(n)||Gl.DEPRECATED_$isGridSelection(n)||rs(118);var r=n.anchor.getNode();n=n.focus.getNode(),[r]=Gl.DEPRECATED_$getNodeTriplet(r);let[i,,o]=Gl.DEPRECATED_$getNodeTriplet(n),[l,s,a]=Gl.DEPRECATED_$computeGridMap(o,i,r);r=l.length,n=e?Math.max(s.startColumn,a.startColumn):Math.min(s.startColumn,a.startColumn),e=e?n+i.__colSpan-1:n-1,n=o.getFirstChild(),Gl.DEPRECATED_$isGridRowNode(n)||rs(120);let d=null;var u=n;e:for(n=0;n<r;n++){0!==n&&(u=u.getNextSibling(),Gl.DEPRECATED_$isGridRowNode(u)||rs(121));let r=l[n];if(0>e){As(u,t());continue}let{cell:i,startColumn:o,startRow:s}=r[e];if(o+i.__colSpan-1<=e){let o=i,l=s,a=e;for(;l!==n&&1<o.__rowSpan;){if(a-=i.__colSpan,!(0<=a)){u.append(t());continue e}{let{cell:e,startRow:t}=r[a];o=e,l=t}}o.insertAfter(t())}else i.setColSpan(i.__colSpan+1)}null!==d&&xs(d)},Ul.$insertTableRow=function(e,t,n=!0,r,i){var o=e.getChildren();if(t>=o.length||0>t)throw Error("Table row target index out of range");if(!ns(t=o[t]))throw Error("Row before insertion index does not exist.");for(o=0;o<r;o++){let e=t.getChildren(),r=e.length,o=ts();for(let t=0;t<r;t++){var l=e[t];ql(l)||rs(12);let{above:n,below:r}=bs(l,i);l=Jl.NO_STATUS;let s=n&&n.getWidth()||r&&r.getWidth()||void 0;(n&&n.hasHeaderState(Jl.COLUMN)||r&&r.hasHeaderState(Jl.COLUMN))&&(l|=Jl.COLUMN),(l=Zl(l,1,s)).append(Gl.$createParagraphNode()),o.append(l)}n?t.insertAfter(o):t.insertBefore(o)}return e},Ul.$insertTableRow__EXPERIMENTAL=function(e=!0){var t=Gl.$getSelection();Gl.$isRangeSelection(t)||Gl.DEPRECATED_$isGridSelection(t)||rs(118),t=t.focus.getNode();let[n,,r]=Gl.DEPRECATED_$getNodeTriplet(t),[i,o]=Gl.DEPRECATED_$computeGridMap(r,n,n);t=i[0].length;var{startRow:l}=o;if(e){var s=i[e=l+n.__rowSpan-1];l=ts();for(var a=0;a<t;a++){let{cell:t,startRow:n}=s[a];n+t.__rowSpan-1<=e?l.append(Zl(Jl.NO_STATUS)):t.setRowSpan(t.__rowSpan+1)}t=r.getChildAtIndex(e),Gl.DEPRECATED_$isGridRowNode(t)||rs(119),t.insertAfter(l)}else{for(s=i[l],e=ts(),a=0;a<t;a++){let{cell:t,startRow:n}=s[a];n===l?e.append(Zl(Jl.NO_STATUS)):t.setRowSpan(t.__rowSpan+1)}t=r.getChildAtIndex(l),Gl.DEPRECATED_$isGridRowNode(t)||rs(119),t.insertBefore(e)}},Ul.$isTableCellNode=ql,Ul.$isTableNode=Cs,Ul.$isTableRowNode=ns,Ul.$removeTableRowAtIndex=function(e,t){let n=e.getChildren();if(t>=n.length||0>t)throw Error("Expected table cell to be inside of table row.");return n[t].remove(),e},Ul.$unmergeCell=function(){var e=Gl.$getSelection();Gl.$isRangeSelection(e)||Gl.DEPRECATED_$isGridSelection(e)||rs(118),e=e.anchor.getNode();let[t,n,r]=Gl.DEPRECATED_$getNodeTriplet(e);e=t.__colSpan;let i=t.__rowSpan;if(1<e){for(var o=1;o<e;o++)t.insertAfter(Zl(Jl.NO_STATUS));t.setColSpan(1)}if(1<i){let a,[d,u]=Gl.DEPRECATED_$computeGridMap(r,t,t),{startColumn:c,startRow:g}=u;for(o=1;o<i;o++){var l=g+o;let t=d[l];a=(a||n).getNextSibling(),Gl.DEPRECATED_$isGridRowNode(a)||rs(125);var s=null;for(let e=0;e<c;e++){let n=t[e],r=n.cell;n.startRow===l&&(s=r),1<r.__colSpan&&(e+=r.__colSpan-1)}if(null===s)for(s=0;s<e;s++)As(a,Zl(Jl.NO_STATUS));else for(l=0;l<e;l++)s.insertAfter(Zl(Jl.NO_STATUS))}t.setRowSpan(1)}},Ul.INSERT_TABLE_COMMAND=Os,Ul.TableCellHeaderStates=Jl,Ul.TableCellNode=Vl,Ul.TableNode=Ns,Ul.TableRowNode=Ql,Ul.TableSelection=os,Ul.applyTableHandlers=function(e,t,n,r){function i(t){return t=e.getCordsFromCellNode(t,l.grid),e.getCellFromCordsOrThrow(t.x,t.y,l.grid)}let o=n.getRootElement();if(null===o)throw Error("No root element.");let l=new os(n,e.getKey()),s=n._window||window;t.__lexicalTableSelection=l,t.addEventListener("mousedown",(e=>{setTimeout((()=>{if(0===e.button&&s){var t=ls(e.target);null!==t&&(ys(e),l.setAnchorCellForSelection(t));var n=()=>{s.removeEventListener("mouseup",n),s.removeEventListener("mousemove",r)},r=e=>{const t=ls(e.target);null===t||l.anchorX===t.x&&l.anchorY===t.y||(e.preventDefault(),l.setFocusCellForSelection(t))};s.addEventListener("mouseup",n),s.addEventListener("mousemove",r)}}),0)}));let a=e=>{0===e.button&&n.update((()=>{const t=Gl.$getSelection(),n=e.target;Gl.DEPRECATED_$isGridSelection(t)&&t.gridKey===l.tableNodeKey&&o.contains(n)&&l.clearHighlight()}))};s.addEventListener("mousedown",a),l.listenersToRemove.add((()=>s.removeEventListener("mousedown",a))),l.listenersToRemove.add(n.registerCommand(Gl.KEY_ARROW_DOWN_COMMAND,(t=>ms(n,t,"down",e,l)),Gl.COMMAND_PRIORITY_HIGH)),l.listenersToRemove.add(n.registerCommand(Gl.KEY_ARROW_UP_COMMAND,(t=>ms(n,t,"up",e,l)),Gl.COMMAND_PRIORITY_HIGH)),l.listenersToRemove.add(n.registerCommand(Gl.KEY_ARROW_LEFT_COMMAND,(t=>ms(n,t,"backward",e,l)),Gl.COMMAND_PRIORITY_HIGH)),l.listenersToRemove.add(n.registerCommand(Gl.KEY_ARROW_RIGHT_COMMAND,(t=>ms(n,t,"forward",e,l)),Gl.COMMAND_PRIORITY_HIGH)),l.listenersToRemove.add(n.registerCommand(Gl.KEY_ESCAPE_COMMAND,(e=>{var t=Gl.$getSelection();return!(!Gl.DEPRECATED_$isGridSelection(t)||(t=Yl.$findMatchingParent(t.focus.getNode(),ql),!ql(t)))&&(ys(e),t.selectEnd(),!0)}),Gl.COMMAND_PRIORITY_HIGH));return[Gl.DELETE_WORD_COMMAND,Gl.DELETE_LINE_COMMAND,Gl.DELETE_CHARACTER_COMMAND].forEach((t=>{l.listenersToRemove.add(n.registerCommand(t,(t=>()=>{var n=Gl.$getSelection();if(!gs(n,e))return!1;if(Gl.DEPRECATED_$isGridSelection(n))return l.clearText(),!0;if(Gl.$isRangeSelection(n)){const o=Yl.$findMatchingParent(n.anchor.getNode(),(e=>ql(e)));if(!ql(o))return!1;var r=n.anchor.getNode(),i=n.focus.getNode();if(r=e.isParentOf(r),i=e.isParentOf(i),r&&!i||i&&!r)return l.clearText(),!0;if(r=(i=Yl.$findMatchingParent(n.anchor.getNode(),(e=>Gl.$isElementNode(e))))&&Yl.$findMatchingParent(i,(e=>Gl.$isElementNode(e)&&ql(e.getParent()))),!Gl.$isElementNode(r)||!Gl.$isElementNode(i))return!1;if(t===Gl.DELETE_LINE_COMMAND&&null===r.getPreviousSibling())return!0;if((t===Gl.DELETE_CHARACTER_COMMAND||t===Gl.DELETE_WORD_COMMAND)&&n.isCollapsed()&&0===n.anchor.offset&&i!==r){n=i.getChildren();const e=Gl.$createParagraphNode();return n.forEach((t=>e.append(t))),i.replace(e),i.getWritable().__parent=o.getKey(),!0}}return!1})(t),Gl.COMMAND_PRIORITY_CRITICAL))})),t=t=>{const n=Gl.$getSelection();return!!gs(n,e)&&(Gl.DEPRECATED_$isGridSelection(n)?(t.preventDefault(),t.stopPropagation(),l.clearText(),!0):(Gl.$isRangeSelection(n)&&(t=Yl.$findMatchingParent(n.anchor.getNode(),(e=>ql(e))),ql(t)),!1))},l.listenersToRemove.add(n.registerCommand(Gl.KEY_BACKSPACE_COMMAND,t,Gl.COMMAND_PRIORITY_CRITICAL)),l.listenersToRemove.add(n.registerCommand(Gl.KEY_DELETE_COMMAND,t,Gl.COMMAND_PRIORITY_CRITICAL)),l.listenersToRemove.add(n.registerCommand(Gl.FORMAT_TEXT_COMMAND,(t=>{let n=Gl.$getSelection();return!!gs(n,e)&&(Gl.DEPRECATED_$isGridSelection(n)?(l.formatCells(t),!0):(Gl.$isRangeSelection(n)&&(t=Yl.$findMatchingParent(n.anchor.getNode(),(e=>ql(e))),ql(t)),!1))}),Gl.COMMAND_PRIORITY_CRITICAL)),l.listenersToRemove.add(n.registerCommand(Gl.CONTROLLED_TEXT_INSERTION_COMMAND,(()=>{var t=Gl.$getSelection();return!!gs(t,e)&&(Gl.DEPRECATED_$isGridSelection(t)?l.clearHighlight():Gl.$isRangeSelection(t)&&(t=Yl.$findMatchingParent(t.anchor.getNode(),(e=>ql(e))),ql(t)),!1)}),Gl.COMMAND_PRIORITY_CRITICAL)),r&&l.listenersToRemove.add(n.registerCommand(Gl.KEY_TAB_COMMAND,(t=>{var n=Gl.$getSelection();return!!(Gl.$isRangeSelection(n)&&n.isCollapsed()&&gs(n,e))&&(null!==(n=ps(n.anchor.getNode()))&&(ys(t),n=e.getCordsFromCellNode(n,l.grid),cs(l,e,n.x,n.y,t.shiftKey?"backward":"forward"),!0))}),Gl.COMMAND_PRIORITY_CRITICAL)),l.listenersToRemove.add(n.registerCommand(Gl.FOCUS_COMMAND,(()=>e.isSelected()),Gl.COMMAND_PRIORITY_HIGH)),l.listenersToRemove.add(n.registerCommand(Gl.SELECTION_CHANGE_COMMAND,(()=>{let t=Gl.$getSelection(),r=Gl.$getPreviousSelection();if(Gl.$isRangeSelection(t)){let{anchor:r,focus:u}=t;var o=r.getNode(),s=u.getNode();o=ps(o),s=ps(s);var a=o&&e.is(_s(o)),d=s&&e.is(_s(s));let c=a!==d;d=a&&d,a=t.isBackward(),c?((o=t.clone()).focus.set(e.getKey(),a?0:e.getChildrenSize(),"element"),Gl.$setSelection(o),us(n,l)):d&&!o.is(s)&&(l.setAnchorCellForSelection(i(o)),l.setFocusCellForSelection(i(s),!0))}return t&&!t.is(r)&&(Gl.DEPRECATED_$isGridSelection(t)||Gl.DEPRECATED_$isGridSelection(r))&&l.gridSelection&&!l.gridSelection.is(r)?(Gl.DEPRECATED_$isGridSelection(t)&&t.gridKey===l.tableNodeKey?l.updateTableGridSelection(t):!Gl.DEPRECATED_$isGridSelection(t)&&Gl.DEPRECATED_$isGridSelection(r)&&r.gridKey===l.tableNodeKey&&l.updateTableGridSelection(null),!1):(l.hasHijackedSelectionStyles&&!e.isSelected()?function(e,t){t.enableHighlightStyle(),ds(t.grid,(t=>{let n=t.elem;t.highlighted=!1,fs(e,t),n.getAttribute("style")||n.removeAttribute("style")}))}(n,l):!l.hasHijackedSelectionStyles&&e.isSelected()&&us(n,l),!1)}),Gl.COMMAND_PRIORITY_CRITICAL)),l},Ul.getCellFromTarget=ls,Ul.getTableSelectionFromTableElement=function(e){return e.__lexicalTableSelection};var ws=Ul,Rs={},Ds=ni;function ks(e,t=!0){return!e&&(e=Ms(),t&&(e=e.trim()),""===e)}function Ms(){return Ds.$getRoot().getTextContent()}function $s(e){if(!ks(e,!1))return!1;let t=(e=Ds.$getRoot().getChildren()).length;if(1<t)return!1;for(let r=0;r<t;r++){var n=e[r];if(Ds.$isDecoratorNode(n))return!1;if(Ds.$isElementNode(n)){if(!Ds.$isParagraphNode(n)||0!==n.__indent)return!1;let e=(n=n.getChildren()).length;for(let t=0;t<e;t++)if(!Ds.$isTextNode(n[r]))return!1}}return!0}Rs.$canShowPlaceholder=$s,Rs.$canShowPlaceholderCurry=function(e){return()=>$s(e)},Rs.$findTextIntersectionFromCharacters=function(e,t){var n=e.getFirstChild();e=0;e:for(;null!==n;){if(Ds.$isElementNode(n)){var r=n.getFirstChild();if(null!==r){n=r;continue}}else if(Ds.$isTextNode(n)){if(e+(r=n.getTextContentSize())>t)return{node:n,offset:t-e};e+=r}if(null===(r=n.getNextSibling())){for(n=n.getParent();null!==n;){if(null!==(r=n.getNextSibling())){n=r;continue e}n=n.getParent()}break}n=r}return null},Rs.$isRootTextContentEmpty=ks,Rs.$isRootTextContentEmptyCurry=function(e,t){return()=>ks(e,t)},Rs.$rootTextContent=Ms,Rs.registerLexicalTextEntity=function(e,t,n,r){let i=e=>{const t=Ds.$createTextNode(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)},o=e.registerNodeTransform(Ds.TextNode,(e=>{if(e.isSimpleText()){var o=e.getPreviousSibling(),l=e.getTextContent(),s=e;if(Ds.$isTextNode(o)){var a=o.getTextContent(),d=t(a+l);if(o instanceof n){if(null===d||0!==o.getLatest().__mode)return void i(o);if(0<(d=d.end-a.length))return s=a+(s=l.slice(0,d)),o.select(),o.setTextContent(s),void(d===l.length?e.remove():(o=l.slice(d),e.setTextContent(o)))}else if(null===d||d.start<a.length)return}for(;;){if(l=d=null===(e=t(l))?"":l.slice(e.end),""===d){if(a=s.getNextSibling(),Ds.$isTextNode(a)){if(d=s.getTextContent()+a.getTextContent(),null===(d=t(d))){a instanceof n?i(a):a.markDirty();break}if(0!==d.start)break}}else if(null!==(a=t(d))&&0===a.start)break;if(null===e)break;if(0===e.start&&Ds.$isTextNode(o)&&o.isTextEntity())continue;let u;if(0===e.start?[u,s]=s.splitText(e.end):[,u,s]=s.splitText(e.start,e.end),(e=r(u)).setFormat(u.getFormat()),u.replace(e),null==s)break}}}));return e=e.registerNodeTransform(n,(e=>{var r=e.getTextContent();const o=t(r);null===o||0!==o.start?i(e):r.length>o.end?e.splitText(o.end):(r=e.getPreviousSibling(),Ds.$isTextNode(r)&&r.isTextEntity()&&(i(r),i(e)),r=e.getNextSibling(),Ds.$isTextNode(r)&&r.isTextEntity()&&(i(r),e instanceof n&&i(e)))})),[o,e]};var Ps=Rs,Is={},Fs=Ni,Ls=ni;function Bs(e,t){let n=Date.now(),r=0;return(i,o,l,s,a,d)=>{let u=Date.now();if(d.has("historic"))return r=0,n=u,2;let c=function(e,t,n,r,i){if(null===e||0===n.size&&0===r.size&&!i)return 0;var o=t._selection,l=e._selection;if(i)return 1;if(!(Ls.$isRangeSelection(o)&&Ls.$isRangeSelection(l)&&l.isCollapsed()&&o.isCollapsed()))return 0;i=t._nodeMap;let s=[];for(let e of n)void 0!==(n=i.get(e))&&s.push(n);for(let[e,t]of r)t&&(void 0===(r=i.get(e))||Ls.$isRootNode(r)||s.push(r));return 0===s.length?0:1<s.length?(t=(r=t._nodeMap).get(o.anchor.key),l=r.get(l.anchor.key),t&&l&&!e._nodeMap.has(t.__key)&&Ls.$isTextNode(t)&&1===t.__text.length&&1===o.anchor.offset?2:0):(t=s[0],e=e._nodeMap.get(t.__key),Ls.$isTextNode(e)&&Ls.$isTextNode(t)&&e.__mode===t.__mode?(e=e.__text)===(t=t.__text)?0:(o=o.anchor,l=l.anchor,o.key!==l.key||"text"!==o.type?0:(o=o.offset,l=l.offset,1==(e=t.length-e.length)&&l===o-1?2:-1===e&&l===o+1?3:-1===e&&l===o?4:0)):0)}(i,o,s,a,e.isComposing()),g=(()=>{var g=null===l||l.editor===e,h=d.has("history-push");if(!h&&g&&d.has("history-merge"))return 0;if(null===i)return 1;var f=o._selection;if(!(0<s.size||0<a.size))return null!==f?0:2;if(!1===h&&0!==c&&c===r&&u<n+t&&g)return 0;if(1===s.size){{h=Array.from(s)[0],g=i._nodeMap.get(h),h=o._nodeMap.get(h),f=i._selection;let e=o._selection,t=!1;Ls.$isRangeSelection(f)&&Ls.$isRangeSelection(e)&&(t="element"===f.anchor.type&&"element"===f.focus.type&&"text"===e.anchor.type&&"text"===e.focus.type),g=!(t||!Ls.$isTextNode(g)||!Ls.$isTextNode(h))&&(g.__type===h.__type&&g.__text===h.__text&&g.__mode===h.__mode&&g.__detail===h.__detail&&g.__style===h.__style&&g.__format===h.__format&&g.__parent===h.__parent)}if(g)return 0}return 1})();return n=u,r=c,g}}Is.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},Is.registerHistory=function(e,t,n){let r=Bs(e,n);n=({editorState:n,prevEditorState:i,dirtyLeaves:o,dirtyElements:l,tags:s})=>{const a=t.current,d=t.redoStack,u=t.undoStack,c=null===a?null:a.editorState;if(null===a||n!==c){if(1===(i=r(i,n,a,o,l,s)))0!==d.length&&(t.redoStack=[],e.dispatchCommand(Ls.CAN_REDO_COMMAND,!1)),null!==a&&(u.push({...a}),e.dispatchCommand(Ls.CAN_UNDO_COMMAND,!0));else if(2===i)return;t.current={editor:e,editorState:n}}};let i=Fs.mergeRegister(e.registerCommand(Ls.UNDO_COMMAND,(()=>{let n=t.redoStack,r=t.undoStack;if(0!==r.length){let i=t.current,o=r.pop();null!==i&&(n.push(i),e.dispatchCommand(Ls.CAN_REDO_COMMAND,!0)),0===r.length&&e.dispatchCommand(Ls.CAN_UNDO_COMMAND,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:"historic"})}return!0}),Ls.COMMAND_PRIORITY_EDITOR),e.registerCommand(Ls.REDO_COMMAND,(()=>{let n=t.redoStack;var r=t.undoStack;if(0!==n.length){let i=t.current;null!==i&&(r.push(i),e.dispatchCommand(Ls.CAN_UNDO_COMMAND,!0)),r=n.pop(),0===n.length&&e.dispatchCommand(Ls.CAN_REDO_COMMAND,!1),t.current=r||null,r&&r.editor.setEditorState(r.editorState,{tag:"historic"})}return!0}),Ls.COMMAND_PRIORITY_EDITOR),e.registerCommand(Ls.CLEAR_EDITOR_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1)),Ls.COMMAND_PRIORITY_EDITOR),e.registerCommand(Ls.CLEAR_HISTORY_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,e.dispatchCommand(Ls.CAN_REDO_COMMAND,!1),e.dispatchCommand(Ls.CAN_UNDO_COMMAND,!1),!0)),Ls.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n)),o=e.registerUpdateListener(n);return()=>{i(),o()}};var zs=Is;return{get L(){return ni},get a(){return il},get b(){return Hl},get c(){return Jo},get d(){return no},get e(){return Ni},get f(){return ws},get g(){return po},get h(){return e},i:function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e},get j(){return Nl},get k(){return fi},get l(){return Ps},get m(){return zs},n:function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}}}));
SML.dm("errors9aef8741",["shelle48e5956","agegatestandaloneclientjsb13e879d"],(async(e,t)=>{var i,n,s,r,a,o,l,c,h,u,d,p,f,g,m,b;function w(e){window.Sentry?.captureMessage?.(e)}function y(e){return e?.[0]?.message??t.cU.genericErrorMessage()}async function v(i,n){const s=t.bQ.get(i);if(!s)throw new Error(t.cU.unsupportedMimetype(i));const r={mimetype:s},a=n?await async function(t,i){try{const n=await fetch("https://gql-fed.reddit.com",{method:"POST",headers:{Accept:"application/json",Authorization:`bearer ${i}`,"Content-Type":"application/json","X-Reddit-Loid":e.v.get("loid")??""},body:JSON.stringify({extensions:{persistedQuery:{version:1,sha256Hash:"cd9afac180f0cc91f6b6a4be46385de14fc328090a59b2cdc5e9666cb18779f1"}},operationName:e.O.CreateMediaUploadLease,variables:{input:t}})});if(n.ok)return n.json();const s=await n.text();throw w(`Media upload lease request to gql-fed.reddit.com failed with status ${n.status}: ${s}`),new Error(s)}catch(e){throw w(`Unable to complete the media upload lease grant: ${e}`),e}}(r,n):await e.B({operation:e.O.CreateMediaUploadLease,variables:{input:r}});if(a.errors?.length)throw new Error(y(a.errors));const o=a.data.createMediaUploadLease;if(o?.ok)return{mediaId:o.mediaId,uploadLeaseUrl:o.uploadLease.uploadLeaseUrl,uploadLeaseHeaders:o.uploadLease.uploadLeaseHeaders};throw new Error(y(o?.errors))}!function(e){e.Unknown="unknown",e.VOD="vod",e.Gif="gif",e.LiveVideo="live-video",e.Image="image",e.Video="video"}(i||(i={})),function(e){e.Landscape="landscape",e.Portrait="portrait"}(n||(n={})),function(e){e.DirectUpload="direct_upload",e.ScrapedLink="scraped_link",e.ImageOptimizer="image_optimizer"}(s||(s={})),function(e){e.Hls="hls",e.SingleFile="single_file"}(r||(r={})),function(e){e.Hls="hls",e.Mp4="mp4"}(a||(a={})),function(e){e.Autoplay="autoplay",e.Click="click"}(o||(o={})),function(e){e.Buffering="buffering",e.Paused="paused",e.Playing="playing"}(l||(l={})),function(e){e.CommentPlayer="comment_player",e.InFeedPlayer="in_feed_player",e.PostDetailScreen="post_detail_screen",e.GalleryMode="gallery_mode",e.VideoFeedV1="video_feed_v1",e.LiveFeedV1="live_feed_v1",e.TheaterMode="theater_mode",e.DiscoveryUnit="discovery_unit"}(c||(c={})),function(e){e.Videoplayer="videoplayer"}(h||(h={})),function(e){e.Auto="auto",e.Background="background",e.Click="click",e.End="end",e.Error="error",e.Scroll="scroll",e.Served="served",e.Start="start",e.Switch="switch",e.Trace="trace",e.View="view"}(u||(u={})),function(e){e.Autoplay="autoplay",e.Bitrate="bitrate",e.CaptionsDisabled="overflow_captions_disabled",e.CaptionsEnabled="overflow_captions_enabled",e.Download="download",e.Pause="pause",e.Performance="performance",e.Play="play",e.Rebuffer="rebuffer",e.RecommendationOverlay="recommendation_overlay",e.Replay="replay",e.Video="video"}(d||(d={})),function(e){e.Videoplayer="videoplayer"}(p||(p={})),function(e){e.Click="click",e.Continue="continue",e.IsFullyViewable="is_fully_viewable",e.IsViewable="is_viewable",e.Pause="pause",e.PlayExpanded="play_expanded",e.PlayWithSound="play_with_sound",e.Start="start",e.Watch="watch",e.WatchPercent25="watch_25_percent",e.WatchPercent50="watch_50_percent",e.WatchPercent75="watch_75_percent",e.WatchPercent95="watch_95_percent",e.WatchPercent100="watch_100_percent",e.WatchSeconds2="watch_2_seconds",e.WatchSeconds3="watch_3_seconds",e.WatchSeconds5="watch_5_seconds",e.WatchSeconds10="watch_10_seconds"}(f||(f={})),function(e){e.Pause="pause",e.Play="play",e.Seek="seek",e.Mute="mute",e.Unmute="unmute",e.Replay="replay",e.Video="video"}(g||(g={})),function(e){e.Autoplay="autoplay",e.Manual="manual"}(m||(m={})),function(e){e.Auto="auto",e.Buffer="buffer",e.Manual="manual"}(b||(b={}));const k=e=>({error:e||t.cU.uploadErrorMessage()});const T={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5};class _ extends Error{code;line;constructor(e){super(e.reason),this.code=e.code,this.line=e.line}}const x=/\r?\n|\r/gm;class S{writable;readable;constructor(e){const t=new A(e);this.writable=new WritableStream({write(e){t.transform(e)},close(){t.close()}}),this.readable=new ReadableStream({start(e){t.onLine=t=>e.enqueue(t),t.onClose=()=>e.close()}})}}class A{x="";y;onLine;onClose;constructor(e){this.y=new TextDecoder(e)}transform(e){this.x+=this.y.decode(e,{stream:!0});const t=this.x.split(x);this.x=t.pop()||"";for(let e=0;e<t.length;e++)this.onLine(t[e].trim())}close(){this.x&&this.onLine(this.x.trim()),this.x="",this.onClose()}}async function $(e,t){const i=t?.type??"vtt";let n,s;if("string"==typeof i)switch(i){case"srt":n=(await Promise.resolve().then((function(){return Ce}))).default;break;case"ssa":case"ass":n=(await Promise.resolve().then((function(){return He}))).default;break;default:n=(await Promise.resolve().then((function(){return Q}))).default}else n=i;const r=e.getReader(),a=n(),o=!!t?.strict||!!t?.errors;await a.init({strict:!1,...t,errors:o,type:i,cancel(){r.cancel(),s=a.done(!0)}});let l=1;for(;;){const{value:e,done:t}=await r.read();if(t){a.parse("",l),s=a.done(!1);break}a.parse(e,l),l++}return s}async function E(e,{encoding:t="utf-8",...i}={}){return $(e.pipeThrough(new S(t)),i)}class M extends EventTarget{id="";startTime;endTime;text;pauseOnExit=!1;constructor(e,t,i){super(),this.startTime=e,this.endTime=t,this.text=i}addEventListener(e,t,i){super.addEventListener(e,t,i)}removeEventListener(e,t,i){super.removeEventListener(e,t,i)}}const P="undefined"==typeof document,C=P?M:window.VTTCue;class O extends C{region=null;vertical="";snapToLines=!0;line="auto";lineAlign="start";position="auto";positionAlign="auto";size=100;align="center";style}class L{id="";width=100;lines=3;regionAnchorX=0;regionAnchorY=100;viewportAnchorX=0;viewportAnchorY=100;scroll=""}function j(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}function I(e){const t=parseInt(e.replace("%",""),10);return!Number.isNaN(t)&&t>=0&&t<=100?t:null}function N(e){if(!e.includes(","))return null;const[t,i]=e.split(",").map(I);return null!==t&&null!==i?[t,i]:null}function V(e){const t=parseFloat(e);return Number.isNaN(t)?null:t}const B=/[:=]/,z=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,F=/^REGION:?[\s\t]+/,R=/[\s\t]+/,D=/[\s\t]*-->[\s\t]+/,H=/start|center|end|left|right/,U=/start|center|end/,W=/line-(?:left|right)|center|auto/,q=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/;var G=(e=>(e[e.None=0]="None",e[e.Header=1]="Header",e[e.Cue=2]="Cue",e[e.Region=3]="Region",e[e.Note=4]="Note",e))(G||{});class X{f;c=0;g={};h={};j=[];a=null;b=null;k=[];d;l="";async init(e){this.f=e,e.strict&&(this.c=1),e.errors&&(this.d=(await Promise.resolve().then((function(){return We}))).ParseErrorBuilder)}parse(e,t){if(""===e)this.a?(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null):this.b?(this.h[this.b.id]=this.b,this.f.onRegion?.(this.b),this.b=null):1===this.c&&(this.i(e,t),this.f.onHeaderMetadata?.(this.g)),this.c=0;else if(this.c)switch(this.c){case 1:this.i(e,t);break;case 2:if(this.a){const i=this.a.text.length>0;!i&&z.test(e)?this.m(e.split(R),t):this.a.text+=(i?"\n":"")+e}break;case 3:this.n(e.split(R),t)}else if(e.startsWith("NOTE"))this.c=4;else if(e.startsWith("REGION"))this.c=3,this.b=new L,this.n(e.replace(F,"").split(R),t);else if(e.includes("--\x3e")){const i=this.o(e,t);i&&(this.a=new O(i[0],i[1],""),this.a.id=this.l,this.m(i[2],t)),this.c=2}else 1===t&&this.i(e,t);this.l=e}done(){return{metadata:this.g,cues:this.j,regions:Object.values(this.h),errors:this.k}}i(e,t){if(t>1){if(B.test(e)){const[t,i]=e.split(B);t&&(this.g[t]=(i||"").replace(R,""))}}else e.startsWith("WEBVTT")?this.c=1:this.e(this.d?.p())}o(e,t){const[i,n=""]=e.split(D),[s,...r]=n.split(R),a=Y(i),o=Y(s);if(null!==a&&null!==o&&o>a)return[a,o,r];null===a&&this.e(this.d?.q(i,t)),null===o&&this.e(this.d?.r(s,t)),null!=a&&null!==o&&o>a&&this.e(this.d?.s(a,o,t))}n(e,t){let i;for(let n=0;n<e.length;n++)if(B.test(e[n])){i=!1;const[s,r]=e[n].split(B);switch(s){case"id":this.b.id=r;break;case"width":const e=I(r);null!==e?this.b.width=e:i=!0;break;case"lines":const n=j(r);null!==n?this.b.lines=n:i=!0;break;case"regionanchor":const a=N(r);null!==a?(this.b.regionAnchorX=a[0],this.b.regionAnchorY=a[1]):i=!0;break;case"viewportanchor":const o=N(r);null!==o?(this.b.viewportAnchorX=o[0],this.b.viewportAnchorY=o[1]):i=!0;break;case"scroll":"up"===r?this.b.scroll="up":i=!0;break;default:this.e(this.d?.t(s,r,t))}i&&this.e(this.d?.u(s,r,t))}}m(e,t){let i;for(let n=0;n<e.length;n++)if(i=!1,B.test(e[n])){const[s,r]=e[n].split(B);switch(s){case"region":const e=this.h[r];e&&(this.a.region=e);break;case"vertical":"lr"===r||"rl"===r?(this.a.vertical=r,this.a.region=null):i=!0;break;case"line":const[n,a]=r.split(",");if(n.includes("%")){const e=I(n);null!==e?(this.a.line=e,this.a.snapToLines=!1):i=!0}else{const e=V(n);null!==e?this.a.line=e:i=!0}U.test(a)?this.a.lineAlign=a:a&&(i=!0),"auto"!==this.a.line&&(this.a.region=null);break;case"position":const[o,l]=r.split(","),c=I(o);null!==c?this.a.position=c:i=!0,l&&W.test(l)?this.a.positionAlign=l:l&&(i=!0);break;case"size":const h=I(r);null!==h?(this.a.size=h,h<100&&(this.a.region=null)):i=!0;break;case"align":H.test(r)?this.a.align=r:i=!0;break;default:this.e(this.d?.v(s,r,t))}i&&this.e(this.d?.w(s,r,t))}}e(e){if(e){if(this.k.push(e),this.f.strict)throw this.f.cancel(),e;this.f.onError?.(e)}}}function Y(e){const t=e.match(q);if(!t)return null;const i=t[1]?parseInt(t[1],10):0,n=parseInt(t[2],10),s=parseInt(t[3],10),r=t[4]?parseInt(t[4].padEnd(3,"0"),10):0;return i<0||n<0||s<0||r<0||n>59||s>59?null:3600*i+60*n+s+r/1e3}var Q=Object.freeze({__proto__:null,VTTBlock:G,VTTParser:X,default:function(){return new X},parseVTTTimestamp:Y});const J=/[0-9]/,K=/[\s\t]+/,Z={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},ee={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},te=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,ie=new Set(["white","lime","cyan","red","yellow","magenta","blue","black"]),ne=new Set(Object.keys(Z));function se(e){let t,i="",n=1,s=[],r=[];for(let s=0;s<e.text.length;s++){const c=e.text[s];switch(n){case 1:"<"===c?(l(),n=2):i+=c;break;case 2:switch(c){case"\n":case"\t":case" ":a(),n=4;break;case".":a(),n=3;break;case"/":n=5;break;case">":a(),n=1;break;default:!i&&J.test(c)&&(n=6),i+=c}break;case 3:switch(c){case"\t":case" ":case"\n":o(),t&&t.class?.trim(),n=4;break;case".":o();break;case">":o(),t&&t.class?.trim(),n=1;break;default:i+=c}break;case 4:">"===c?(i=i.replace(K," "),"v"===t?.type?t.voice=re(i):"lang"===t?.type&&(t.lang=re(i)),i="",n=1):i+=c;break;case 5:">"===c&&(i="",t=r.pop(),n=1);break;case 6:if(">"===c){const s=Y(i);null!==s&&s>=e.startTime&&s<=e.endTime&&(i="timestamp",a(),t.time=s),i="",n=1}else i+=c}}function a(){if(ne.has(i)){const n=t;t={tagName:Z[e=i],type:e,children:[]},n?(r[r.length-1]!==n&&r.push(n),n.children.push(t)):s.push(t)}var e;i="",n=1}function o(){if(t&&i){const e=i.replace("bg_","");ie.has(e)?t[i.startsWith("bg_")?"bgColor":"color"]=e:t.class=t.class?t.class+" "+i:i}i=""}function l(){if(!i)return;const e={type:"text",data:re(i)};t?t.children.push(e):s.push(e),i=""}return 1===n&&l(),s}function re(e){return e.replace(te,(e=>ee[e]||"'"))}function ae(e,t,i){e.style.setProperty(`--${t}`,i+"")}function oe(e,t,i=!0){e.setAttribute(`data-${t}`,!0===i?"":i+"")}function le(e,t){e.setAttribute("data-part",t)}function ce(e,t=0){return he(se(e),t)}function he(e,t=0){let i,n="";for(const s of e)if("text"===s.type)n+=s.data;else{const e="timestamp"===s.type;i={},i.class=s.class,i.title="v"===s.type&&s.voice,i.lang="lang"===s.type&&s.lang,i["data-part"]="v"===s.type&&"voice",e&&(i["data-part"]="timed",i["data-time"]=s.time,i["data-future"]=s.time>t,i["data-past"]=s.time<t),i.style=`${s.color?`color: ${s.color};`:""}${s.bgColor?`background-color: ${s.bgColor};`:""}`;const r=Object.entries(i).filter((e=>e[1])).map((e=>`${e[0]}="${!0===e[1]?"":e[1]}"`)).join(" ");n+=`<${s.tagName}${r?" "+r:""}>${he(s.children)}</${s.tagName}>`}return n}function ue(e,t){if(!P)for(const i of e.querySelectorAll('[data-part="timed"]')){const e=Number(i.getAttribute("data-time"));Number.isNaN(e)||(e>t?oe(i,"future"):i.removeAttribute("data-future"),e<t?oe(i,"past"):i.removeAttribute("data-past"))}}const de=Symbol(0);function pe(e){return e instanceof HTMLElement?{top:e.offsetTop,width:e.clientWidth,height:e.clientHeight,left:e.offsetLeft,right:e.offsetLeft+e.clientWidth,bottom:e.offsetTop+e.clientHeight}:{...e}}function fe(e,t,i){switch(t){case"+x":e.left+=i,e.right+=i;break;case"-x":e.left-=i,e.right-=i;break;case"+y":e.top+=i,e.bottom+=i;break;case"-y":e.top-=i,e.bottom-=i}}function ge(e,t){for(let s=0;s<t.length;s++)if(i=e,n=t[s],i.left<=n.right&&i.right>=n.left&&i.top<=n.bottom&&i.bottom>=n.top)return t[s];var i,n;return null}function me(e,t){return t.top>=0&&t.bottom<=e.height&&t.left>=0&&t.right<=e.width}function be(e,t,i){switch(i){case"+x":return t.left<0;case"-x":return t.right>e.width;case"+y":return t.top<0;case"-y":return t.bottom>e.height}}function we(e,t){return Math.max(0,Math.min(e.width,t.right)-Math.max(0,t.left))*Math.max(0,Math.min(e.height,t.bottom)-Math.max(0,t.top))/(e.height*e.width)}function ye(e,t){return{top:t.top/e.height,left:t.left/e.width,right:(e.width-t.right)/e.width,bottom:(e.height-t.bottom)/e.height}}function ve(e,t){return t.top=t.top*e.height,t.left=t.left*e.width,t.right=e.width-t.right*e.width,t.bottom=e.height-t.bottom*e.height,t}const ke=["top","left","right","bottom"];function Te(e,t,i,n){const s=ye(t,i);for(const t of ke)ae(e,`${n}-${t}`,100*s[t]+"%")}function _e(e,t,i,n){let s,r=1,a={...t};for(let o=0;o<n.length;o++){for(;be(e,t,n[o])||me(e,t)&&ge(t,i);)fe(t,n[o],1);if(me(e,t))return t;const l=we(e,t);r>l&&(s={...t},r=l),t={...a}}return s||a}const xe=Symbol(0);function Se(e,t,i,n){let s,r=i.firstElementChild,a=function(e){if("auto"===e.line)return e.snapToLines?-1:100;return e.line}(t),o=[];if(i[de]||(i[de]=function(e,t){const i=pe(t),n=function(e){const t={};for(const i of ke)t[i]=parseFloat(e.style.getPropertyValue(`--cue-${i}`));return t}(t);t[xe]=!1,n.top&&(i.top=n.top,i.bottom=n.top+i.height,t[xe]="top");if(n.bottom){const s=e.height-n.bottom;i.top=s-i.height,i.bottom=s,t[xe]="bottom"}n.left&&(i.left=n.left);n.right&&(i.right=e.width-n.right);return ye(e,i)}(e,i)),s=ve(e,{...i[de]}),i[xe])o=["top"===i[xe]?"+y":"-y","+x","-x"];else if(t.snapToLines){let i;switch(t.vertical){case"":o=["+y","-y"],i="height";break;case"rl":o=["+x","-x"],i="width";break;case"lr":o=["-x","+x"],i="width"}let n=parseFloat(getComputedStyle(r).lineHeight)||0,l=n*Math.round(a),c=e[i]+n,h=o[0];Math.abs(l)>c&&(l=l<0?-1:1,l*=Math.ceil(c/n)*n),a<0&&(l+=""===t.vertical?e.height:e.width,o=o.reverse()),fe(s,h,l)}else{const i=""===t.vertical,n=i?"+y":"+x",r=i?s.height:s.width;fe(s,n,(i?e.height:e.width)*a/100),fe(s,n,"center"===t.lineAlign?r/2:"end"===t.lineAlign?r:0),o=i?["-y","+y","-x","+x"]:["-x","+x","-y","+y"]}return s=_e(e,s,n,o),Te(i,e,s,"cue"),s}const Ae=["-y","+y","-x","+x"];function $e(e,t,i,n){let s=Array.from(i.querySelectorAll('[data-part="cue-display"]')),r=0,a=Math.max(0,s.length-t.lines);for(let e=s.length-1;e>=a;e--)r+=s[e].offsetHeight;ae(i,"region-height",r+"px"),i[de]||(i[de]=ye(e,pe(i)));let o={...i[de]};return o=ve(e,o),o.width=i.clientWidth,o.height=r,o.right=o.left+o.width,o.bottom=o.top+r,o=_e(e,o,n,Ae),Te(i,e,o,"region"),o}var Ee=Object.freeze({__proto__:null,CaptionsRenderer:class{overlay;z;A=0;C="ltr";B=[];D=!1;E;h=new Map;j=new Map;get dir(){return this.C}set dir(e){this.C=e,oe(this.overlay,"dir",e)}get currentTime(){return this.A}set currentTime(e){this.A=e,this.update()}constructor(e,t){this.overlay=e,this.dir=t?.dir??"ltr",e.setAttribute("translate","yes"),e.setAttribute("aria-live","off"),e.setAttribute("aria-atomic","true"),le(e,"captions"),this.G(),this.E=new ResizeObserver(this.I.bind(this)),this.E.observe(e)}changeTrack({regions:e,cues:t}){this.reset(),this.J(e);for(const e of t)this.j.set(e,null);this.update()}addCue(e){this.j.set(e,null),this.update()}removeCue(e){this.j.delete(e),this.update()}update(e=!1){this.H(e)}reset(){this.j.clear(),this.h.clear(),this.B=[],this.overlay.textContent=""}destroy(){this.reset(),this.E.disconnect()}I(){this.D=!0,this.K()}K=function(e,t){let i,n=null;function s(){r(),e(...i),i=void 0}function r(){clearTimeout(n),n=null}return function(){i=[].slice.call(arguments),r(),n=setTimeout(s,t)}}((()=>{this.D=!1,this.G();for(const e of this.h.values())e[de]=null;for(const e of this.j.values())e&&(e[de]=null);this.H(!0)}),50);G(){this.z=pe(this.overlay),ae(this.overlay,"overlay-width",this.z.width+"px"),ae(this.overlay,"overlay-height",this.z.height+"px")}H(e=!1){if(!this.j.size||this.D)return;let t,i=[...this.j.keys()].filter((e=>this.A>=e.startTime&&this.A<=e.endTime)).sort(((e,t)=>e.startTime!==t.startTime?e.startTime-t.startTime:e.endTime-t.endTime)),n=i.map((e=>e.region));for(let s=0;s<this.B.length;s++){if(t=this.B[s],i[s]===t)continue;if(t.region&&!n.includes(t.region)){const i=this.h.get(t.region.id);i&&(i.removeAttribute("data-active"),e=!0)}const r=this.j.get(t);r&&(r.remove(),e=!0)}for(let n=0;n<i.length;n++){t=i[n];let s=this.j.get(t);s||this.j.set(t,s=this.L(t));const r=this.F(t)&&this.h.get(t.region.id);r&&!r.hasAttribute("data-active")&&(requestAnimationFrame((()=>oe(r,"active"))),e=!0),s.isConnected||((r||this.overlay).append(s),e=!0)}if(e){const e=[],n=new Set;for(let s=i.length-1;s>=0;s--){if(t=i[s],n.has(t.region||t))continue;const r=this.F(t),a=r?this.h.get(t.region.id):this.j.get(t);r?e.push($e(this.z,t.region,a,e)):e.push(Se(this.z,t,a,e)),n.add(r?t.region:t)}}ue(this.overlay,this.A),this.B=i}J(e){if(e)for(const t of e){const e=this.M(t);this.h.set(t.id,e),this.overlay.append(e)}}M(e){const t=document.createElement("div");return le(t,"region"),oe(t,"id",e.id),oe(t,"scroll",e.scroll),ae(t,"region-width",e.width+"%"),ae(t,"region-anchor-x",e.regionAnchorX),ae(t,"region-anchor-y",e.regionAnchorY),ae(t,"region-viewport-anchor-x",e.viewportAnchorX),ae(t,"region-viewport-anchor-y",e.viewportAnchorY),ae(t,"region-lines",e.lines),t}L(e){const t=document.createElement("div"),i=function(e){if("auto"===e.position)switch(e.align){case"start":case"left":return 0;case"right":case"end":return 100;default:return 50}return e.position}(e),n=function(e,t){if("auto"===e.positionAlign)switch(e.align){case"start":return"ltr"===t?"line-left":"line-right";case"end":return"ltr"===t?"line-right":"line-left";case"center":return"center";default:return`line-${e.align}`}return e.positionAlign}(e,this.C);if(le(t,"cue-display"),""!==e.vertical&&oe(t,"vertical"),ae(t,"cue-text-align",e.align),e.style)for(const i of Object.keys(e.style))t.style.setProperty(i,e.style[i]);if(this.F(e))ae(t,"cue-offset",i-("line-right"===n?100:"center"===n?50:0)+"%");else if(ae(t,"cue-writing-mode",""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl"),!e.style?.["--cue-width"]){let s=i;"line-left"===n?s=100-i:"center"===n&&i<=50?s=2*i:"center"===n&&i>50&&(s=2*(100-i));const r=e.size<s?e.size:s;""===e.vertical?ae(t,"cue-width",r+"%"):ae(t,"cue-height",r+"%")}const s=document.createElement("div");return le(s,"cue"),e.id&&oe(s,"id",e.id),s.innerHTML=ce(e),t.append(s),t}F(e){return e.region&&100===e.size&&""===e.vertical&&"auto"===e.line}},ParseError:_,ParseErrorCode:T,TextCue:M,VTTCue:O,VTTRegion:L,parseByteStream:E,parseResponse:async function(e,t){const i=await e;if(!i.ok||!i.body){let e;return{metadata:{},cues:[],regions:[],errors:[e]}}const n=i.headers.get("content-type")||"",s=n.match(/text\/(.*?)(?:;|$)/)?.[1],r=n.match(/charset=(.*?)(?:;|$)/)?.[1];return E(i.body,{type:s,encoding:r,...t})},parseTextStream:$,parseVTTTimestamp:Y,renderVTTCueString:ce,renderVTTTokensString:he,tokenizeVTTCue:se,updateTimedVTTCueNodes:ue});const Me=/,/g;class Pe extends X{parse(e,t){if(""===e)this.a&&(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null),this.c=G.None;else if(this.c===G.Cue)this.a.text+=(this.a.text?"\n":"")+e;else if(e.includes("--\x3e")){const i=this.o(e,t);i&&(this.a=new O(i[0],i[1],i[2].join(" ")),this.a.id=this.l,this.c=G.Cue)}this.l=e}o(e,t){return super.o(e.replace(Me,"."),t)}}var Ce=Object.freeze({__proto__:null,SRTParser:Pe,default:function(){return new Pe}});const Oe=/^Format:[\s\t]*/,Le=/^Style:[\s\t]*/,je=/^Dialogue:[\s\t]*/,Ie=/[\s\t]*,[\s\t]*/,Ne=/\{[^}]+\}/g,Ve=/\\N/g,Be=/^\[(.*)[\s\t]?Styles\]$/,ze=/^\[(.*)[\s\t]?Events\]$/;class Fe{f;P=0;a=null;j=[];k=[];O=null;d;Q={};async init(e){this.f=e,e.errors&&(this.d=(await Promise.resolve().then((function(){return We}))).ParseErrorBuilder)}parse(e,t){if(this.P)switch(this.P){case 1:if(""===e)this.P=0;else if(Le.test(e))if(this.O){const t=e.replace(Le,"").split(Ie);this.T(t)}else this.e(this.d?.N("Style",t));else Oe.test(e)?this.O=e.replace(Oe,"").split(Ie):ze.test(e)&&(this.O=null,this.P=2);break;case 2:if(""===e)this.R();else if(je.test(e))if(this.R(),this.O){const i=e.replace(je,"").split(Ie),n=this.U(i,t);n&&(this.a=n)}else this.e(this.d?.N("Dialogue",t));else this.a?this.a.text+="\n"+e.replace(Ne,"").replace(Ve,"\n"):Oe.test(e)?this.O=e.replace(Oe,"").split(Ie):Be.test(e)?(this.O=null,this.P=1):ze.test(e)&&(this.O=null)}else""===e||(Be.test(e)?(this.O=null,this.P=1):ze.test(e)&&(this.O=null,this.P=2))}done(){return{metadata:{},cues:this.j,regions:[],errors:this.k}}R(){this.a&&(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null)}T(e){let t,i,n,s,r="Default",a={},o="center",l="bottom",c=1.2,h=3,u=[];for(let d=0;d<this.O.length;d++){const p=this.O[d],f=e[d];switch(p){case"Name":r=f;break;case"Fontname":a["font-family"]=f;break;case"Fontsize":a["font-size"]=`calc(${f} / var(--overlay-height))`;break;case"PrimaryColour":const e=Re(f);e&&(a["--cue-color"]=e);break;case"BorderStyle":h=parseInt(f,10);break;case"BackColour":s=Re(f);break;case"OutlineColour":const d=Re(f);d&&(n=d);break;case"Bold":parseInt(f)&&(a["font-weight"]="bold");break;case"Italic":parseInt(f)&&(a["font-style"]="italic");break;case"Underline":parseInt(f)&&(a["text-decoration"]="underline");break;case"StrikeOut":parseInt(f)&&(a["text-decoration"]="line-through");break;case"Spacing":a["letter-spacing"]=f+"px";break;case"AlphaLevel":a.opacity=parseFloat(f);break;case"ScaleX":u.push(`scaleX(${parseFloat(f)/100})`);break;case"ScaleY":u.push(`scaleY(${parseFloat(f)/100})`);break;case"Angle":u.push(`rotate(${f}deg)`);break;case"Shadow":c=1.2*parseInt(f,10);break;case"MarginL":a["--cue-width"]="auto",a["--cue-left"]=parseFloat(f)+"px";break;case"MarginR":a["--cue-width"]="auto",a["--cue-right"]=parseFloat(f)+"px";break;case"MarginV":i=parseFloat(f);break;case"Outline":t=parseInt(f,10);break;case"Alignment":const p=parseInt(f,10);switch(p>=4&&(l=p>=7?"top":"center"),p%3){case 1:o="start";break;case 2:o="center";break;case 3:o="end"}}}if(a.S=l,a["--cue-white-space"]="normal",a["--cue-line-height"]="normal",a["--cue-text-align"]=o,"center"===l?(a["--cue-top"]="50%",u.push("translateY(-50%)")):a[`--cue-${l}`]=(i||0)+"px",1===h&&(a["--cue-padding-y"]="0"),(1===h||s)&&(a["--cue-bg-color"]=1===h?"none":s),3===h&&n&&(a["--cue-outline"]=`${t}px solid ${n}`),1===h&&"number"==typeof t){const e=s??"#000";a["--cue-text-shadow"]=[n&&De(1.2*t,1.2*c,n),n?De(t*(t/2),c*(t/2),e):De(t,c,e)].filter(Boolean).join(", ")}u.length&&(a["--cue-transform"]=u.join(" ")),this.Q[r]=a}U(e,t){const i=this.V(e),n=this.o(i.Start,i.End,t);if(!n)return;const s=new O(n[0],n[1],""),r={...this.Q[i.Style]||{}},a=i.Name?`<v ${i.Name}>`:"",o=r.S,l=i.MarginL&&parseFloat(i.MarginL),c=i.MarginR&&parseFloat(i.MarginR),h=i.MarginV&&parseFloat(i.MarginV);return l&&(r["--cue-width"]="auto",r["--cue-left"]=l+"px"),c&&(r["--cue-width"]="auto",r["--cue-right"]=c+"px"),h&&"center"!==o&&(r[`--cue-${o}`]=h+"px"),s.text=a+e.slice(this.O.length-1).join(", ").replace(Ne,"").replace(Ve,"\n"),delete r.S,Object.keys(r).length&&(s.style=r),s}V(e){const t={};for(let i=0;i<this.O.length;i++)t[this.O[i]]=e[i];return t}o(e,t,i){const n=Y(e),s=Y(t);if(null!==n&&null!==s&&s>n)return[n,s];null===n&&this.e(this.d?.q(e,i)),null===s&&this.e(this.d?.r(t,i)),null!=n&&null!==s&&s>n&&this.e(this.d?.s(n,s,i))}e(e){if(e){if(this.k.push(e),this.f.strict)throw this.f.cancel(),e;this.f.onError?.(e)}}}function Re(e){const t=parseInt(e.replace("&H",""),16);if(t>=0){return"rgba("+[255&t,t>>8&255,t>>16&255,(t>>24&255^255)/255].join(",")+")"}return null}function De(e,t,i){const n=Math.ceil(2*Math.PI*e);let s="";for(let r=0;r<n;r++){const a=2*Math.PI*r/n;s+=e*Math.cos(a)+"px "+t*Math.sin(a)+"px 0 "+i+(r==n-1?"":",")}return s}var He=Object.freeze({__proto__:null,SSAParser:Fe,default:function(){return new Fe}});const Ue={p:()=>new _({code:T.BadSignature,reason:"missing WEBVTT file header",line:1}),q:(e,t)=>new _({code:T.BadTimestamp,reason:`cue start timestamp \`${e}\` is invalid on line ${t}`,line:t}),r:(e,t)=>new _({code:T.BadTimestamp,reason:`cue end timestamp \`${e}\` is invalid on line ${t}`,line:t}),s:(e,t,i)=>new _({code:T.BadTimestamp,reason:`cue end timestamp \`${t}\` is greater than start \`${e}\` on line ${i}`,line:i}),w:(e,t,i)=>new _({code:T.BadSettingValue,reason:`invalid value for cue setting \`${e}\` on line ${i} (value: ${t})`,line:i}),v:(e,t,i)=>new _({code:T.UnknownSetting,reason:`unknown cue setting \`${e}\` on line ${i} (value: ${t})`,line:i}),u:(e,t,i)=>new _({code:T.BadSettingValue,reason:`invalid value for region setting \`${e}\` on line ${i} (value: ${t})`,line:i}),t:(e,t,i)=>new _({code:T.UnknownSetting,reason:`unknown region setting \`${e}\` on line ${i} (value: ${t})`,line:i}),N:(e,t)=>new _({code:T.BadFormat,reason:`format missing for \`${e}\` block on line ${t}`,line:t})};var We=Object.freeze({__proto__:null,ParseErrorBuilder:Ue});return{get A(){return o},get F(){return a},get M(){return i},get P(){return r},get Q(){return h},get T(){return f},get a(){return n},get b(){return u},get c(){return d},get d(){return l},get e(){return g},get p(){return Ee},u:async function(n,s={}){const{bearerToken:r,trackEvent:a,eventSource:o}=s;try{let s,l;try{s=await v(n.type,r),l=n.type.includes("video")?i.Video:i.Image,a&&o&&a(e.b({source:o,action:"get",noun:"media_lease"},{media:{id:s.mediaId,type:l},action_info:{success:!!s.mediaId}}))}catch(t){throw a&&o&&a(e.b({source:o,action:"get",noun:"media_lease"},{action_info:{success:!1,reason:t?.message}})),new Error(t)}const c=n.size,h=n.type.split("/")[1];a&&o&&a(e.b({source:o,action:"upload_start",noun:l},{media:{id:s.mediaId,type:l,size:c,format:h}}));const u=await t.bP(n,s);return u?{url:u,mediaId:s.mediaId}:k()}catch(e){return l=e.message,window.Sentry?.captureMessage?.(`Media file upload failed with error: ${l}`),k(e.message)}var l}}}));
SML.dm("utils57a7018c",["shelle48e5956","iconc33661e6","textinput9c3f45be"],(async(t,e,i)=>{var n;!function(t){t.BORDERED="bordered",t.SECONDARY="secondary"}(n||(n={}));let r=class extends i.T{constructor(){super(...arguments),this.prefix="",this.type="text",this.appearance=n.SECONDARY,this.persistentTrailingIcon=!1,this.withSelect=!1}static get styles(){return[super.styles,e.a`input{outline:0;background:0 0;border:none;width:100%}:host([appearance=bordered]) .label-container:not(.without-label) .input-container.stateful-input{transform:translateY(0)}::slotted([slot=leadingIcon]){margin-inline-end:var(--spacer-xs);display:flex}.input-prefix{margin-inline-end:var(--spacer-4xs)}.input-suffix{margin-inline-start:var(--spacer-4xs)}.input-prefix,.input-suffix{flex-shrink:0}:host([appearance=bordered]) .label-container{border-radius:20px 20px 0 0;align-items:flex-end;padding-bottom:var(--spacer-2xs)}:host([appearance=bordered]) .input-boundary-box{margin-bottom:var(--rem6);align-items:center;padding:0}:host .label-container.without-label{height:var(--rem40)}:host(:focus-within) .label-container:not(.with-trailing-button) ::slotted([slot=clearButton].has-value),:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) ::slotted([slot=clearButton].has-value){display:inline-block}`]}dispatchFocusin(){}render(){return super.renderInput(e.x`<input aria-labelledby="fp-input-label" ?readonly="${this.readonly}" type="${this.type}" pattern="${e.l(this.pattern)}" @input="${this.onInput}" @change="${this.onChange}" @mouseover="${t=>t.stopPropagation()}" .value="${i.l(this.value)}" name="${e.l(this.withSelect?void 0:this.name)}" minlength="${e.l(this.minLength)}" maxlength="${e.l(this.allowMaxLengthOverflow?void 0:this.maxLength)}" min="${e.l(this.min)}" max="${e.l(this.max)}" placeholder="${e.l(0===this.placeholder.length?void 0:this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${e.l(this.autocomplete)}" inputmode="${e.l(this.inputmode)}" step="${e.l(this.step)}">`)}};return t._([t.n({type:String})],r.prototype,"prefix",void 0),t._([t.n({type:String})],r.prototype,"type",void 0),t._([t.n({type:String})],r.prototype,"pattern",void 0),t._([t.n({converter:t=>"string"==typeof t&&"any"===t.toLowerCase()?"any":isNaN(t)?void 0:Number(t)})],r.prototype,"step",void 0),t._([t.n({type:Number})],r.prototype,"min",void 0),t._([t.n({type:Number})],r.prototype,"max",void 0),t._([t.n({type:String,reflect:!0})],r.prototype,"appearance",void 0),t._([t.n({type:Boolean,attribute:"persistent-trailing-icon"})],r.prototype,"persistentTrailingIcon",void 0),t._([t.n({type:Boolean,attribute:"with-select"})],r.prototype,"withSelect",void 0),r=t._([t.e("faceplate-text-input")],r),{C:class{get active(){return this.duration>0}get timeRemaining(){return`${Math.floor(this.duration/6e4)}:${Math.ceil(this.duration%6e4/1e3).toString().padStart(2,"0")}`}get secondsRemaining(){return Math.ceil(this.duration/1e3).toString()}constructor(t){this.duration=0,this.interval=0,this.update=()=>{this.duration=this.duration-this.interval,this.duration<=0&&this.reset(),this.host.requestUpdate()},this.host=t,this.host.addController(this)}hostDisconnected(){this.reset()}reset(){clearInterval(this.timeout),this.duration=0,this.interval=0}start(t,e=1e3){this.reset(),this.duration=t,this.interval=e,this.timeout=setInterval(this.update,this.interval),this.host.requestUpdate()}},get F(){return r},get T(){return n},g:function(t){const[e,i,n]=t.split("-").map(Number);return new Date(e,i-1,n)},t:function(t){return t<10?`0${t}`:t}}}));
SML.dm("rendersavedresponsetemplatebysubredditidb78cebab",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(e,t,r)=>{var s;!function(e){e.Error="error",e.Success="success",e.Incomplete="incomplete"}(s||(s={}));const o=n(16);function a(e,t){return e-t/100*e}function n(e){return 2*Math.PI*e}let l=class extends t.s{constructor(){super(...arguments),this.value=0,this.status=s.Incomplete}static get styles(){return t.a`:host{--loader-size-base:var(--rem40);display:inline-block;position:relative}:host([status=incomplete]){color:var(--color-neutral-content,var(--color-tone-1))}:host([status=success]){color:var(--color-success-content,var(--color-alert-positive))}:host([status=error]){color:var(--color-danger-content,var(--color-alert-negative))}svg{height:var(--loader-size,var(--loader-size-base));width:var(--loader-size,var(--loader-size-base));fill:none;stroke-width:8;display:block}.bg{stroke:var(--color-neutral-content-disabled,var(--color-tone-3))}.track{stroke:currentColor;transition:.35s stroke-dashoffset;transform:rotate(-90deg);transform-origin:50% 50%}.icon{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}::slotted([slot=error]),::slotted([slot=success]){display:flex}`}render(){const e=this.status===s.Success;return t.x` <svg viewBox="0 0 40 40" class="loader" xmlns="http://www.w3.org/2000/svg"> <circle class="bg" cx="20" cy="20" r="${16}"></circle> <circle class="track ${this.status}" cx="20" cy="20" r="${16}" stroke-dasharray="${o} ${o}" stroke-dashoffset="${a(o,e?100:this.value)}"></circle> </svg> <div class="icon"> <slot name="${this.status}"></slot> </div> `}};e._([e.n({type:Number})],l.prototype,"value",void 0),e._([e.n({type:String,reflect:!0})],l.prototype,"status",void 0),l=e._([e.e("faceplate-progress")],l);var c=Object.freeze({__proto__:null,get FaceplateProgress(){return l},get ProgressState(){return s},calcCircumference:n,calcStokeDashOffset:a});let i=e.B;return{get f(){return c},r:async function({responseId:t,subredditId:s,contentId:o,modmailVariables:a}){const{data:n,errors:l}=await i({operation:e.O.RenderSavedResponseTemplateBySubredditId,variables:{responseId:t,subredditId:s,...o?{removalVariables:{contentId:o}}:{},...a?{variables:{modmailVariables:a}}:{}}});if(l?.length||"Subreddit"!==n.subredditInfoById?.__typename||!n.subredditInfoById?.moderation?.renderSavedResponseTemplate?.templateValidation?.ok)throw new Error(r.am());return n.subredditInfoById.moderation.renderSavedResponseTemplate.response.markdown}}}));
SML.dm("shredditplayer258778bf6",["shelle48e5956","iconc33661e6","errors9aef8741","agegatestandaloneclientjsb13e879d"],(async(e,t,i,s)=>{class o{constructor(e){this.fromReconnect=!1,(this.host=e).addController(this)}async hostConnected(){await this._enableAutoplayIfApplicable()}fullscreenChange(){this.trackEvent(e.i7)}pause(){this.trackEvent(e.i8)}play(){this.trackEvent(e.i9)}timeUpdate(){this.trackEvent(e.id)}volumeChange(){this.trackEvent(e.ia)}seeking(){this.trackEvent(e.ib)}seeked(){this.trackEvent(e.ic)}trackEvent(t){if(!this.host.postPromoted)return;const{currentTime:i,duration:s,muted:o,paused:r,volume:n}=this.host.videoElement,a=this.host.mediaUI?.hasAttribute(e.ig.FULLSCREEN)||!1;let l=!1;t!==e.ic&&t!==e.ib||(l=this.fromReconnect),t===e.ic&&(this.fromReconnect=!1);const h=e.c(t,{currentTime:i,duration:s,fullscreen:a,muted:o,paused:r,timeStamp:Date.now(),volume:n,fromReconnect:l});this.host.dispatchEvent(h)}async _enableAutoplayIfApplicable(){if(!this.host.postPromoted)return;const t=(await e.dv()).isAdblockEnabled;("true"===new URL(e.dO.href).searchParams.get(e.k4)||!t&&this.host.autoplayPref)&&(this.host.autoplay=!0,this.host.volumeController.setInitialVolumeSetting(),this.host.mediaVisibilityController.shouldVideoAutoplay()?this.host.mediaVisibilityController.attemptAutoplay():this.host.checkVisibility?.()&&!this.host.stopLoad&&this.host.load())}}let r=e.B;async function n({postId:t}){if(!t)return;const i=(await r({operation:e.O.MediaAuthInfo,variables:{id:t}})).data.post,s=i?.crosspostRoot?.postInfo;return{streamingAuthInfo:i?.media?.streaming?.authInfo??s?.media?.streaming?.authInfo,packagedMediaAuthInfo:i?.media?.packagedMedia?.authInfo??s?.media?.packagedMedia?.authInfo,richtextAuthInfos:i?.content?.richtextMedia?.map((({authInfo:e,hlsUrl:t})=>({authInfo:e,src:t})))}}const a=new RegExp("(^https://v.redd.it/)([a-zA-Z0-9]+)/");function l(e){const t=e?.match(a);return 3===t?.length?t[2]:""}function h({authToken:t}){return i=>{t&&i.setRequestHeader(e.k5,t)}}function d({msg:e,error:t,debugOverlay:i}){const s=u(e,t);window.Sentry?window.Sentry.captureMessage?.(s):console.log(s),i?.log("logMessage",s)}function c({msg:e,error:t,debugOverlay:i}){const s=u(e,t);window.Sentry?window.Sentry.captureException?.(s):console.error(s),i?.log("logException",s)}function u(e,t){return["shreddit-player-2",e,t].filter(Boolean).join(" | ")}class p{constructor(e){this.hasAuthFailure=!1,this._fetchNewAuthInfo=n,this._logException=c,(this.host=e).addController(this)}hostDisconnected(){this.hasAuthFailure=!1}get authToken(){const{isHls:e,isMp4:t}=this.host;return e?this.host.streamingAuthToken:t?this.host.packagedAuthToken:void 0}get authExpiresAt(){const{isHls:e,isMp4:t}=this.host;return e?this.host.streamingAuthExpiresAt:t?this.host.packagedAuthExpiresAt:void 0}async refreshAuth(e){const{postId:t,isHls:i,isMp4:s}=this.host;if(e||this.authExpiresAt&&(o=this.authExpiresAt,Date.now()+m>new Date(o).getTime()))try{const e=await this._fetchNewAuthInfo({postId:t});if(!e)throw new Error("Failed to fetch new auth info");const{streamingAuthInfo:o,packagedMediaAuthInfo:r,richtextAuthInfos:n}=e??{};if(o?.authTokenExpiresAt&&(this.host.streamingAuthToken=o.authToken,this.host.streamingAuthExpiresAt=o.authTokenExpiresAt),r?.authTokenExpiresAt&&(this.host.packagedAuthToken=r.authToken,this.host.packagedAuthExpiresAt=r.authTokenExpiresAt),!o&&n)for(const{authInfo:e,src:t}of n){t&&t.split("?")[0]===(t??"").split("?")[0]&&e?.authTokenExpiresAt&&(this.host.streamingAuthToken=e?.authToken,this.host.streamingAuthExpiresAt=e?.authTokenExpiresAt)}const a=this.host.hlsController.hls;i&&a&&this.host.streamingAuthToken&&(a.config.xhrSetup=h({authToken:this.host.streamingAuthToken})),s&&this.host.packagedMediaController.updateAuthTokenParam()}catch(e){this._logException({msg:"Failed to fetch new auth info:",error:e,debugOverlay:this.host.debugOverlay}),this.hasAuthFailure=!0}var o}}const m=3e4;function y(t,i){if(!i)return t;const s=new URL(t);return s.searchParams.set(e.k6,i),s.toString()}function v(e){void 0!==window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,0)}class g{constructor(t){this._logException=c,this._logMessage=d,this.setMediaErrorCode=t=>{const i=this.host.mediaUI;i&&(i.setAttr(e.ig.ERROR),i.setPausedState(),i.hideLoadingSpinner(),i.errorOverlay&&(i.errorOverlay.mediaErrorCode=t))},this.handleVideoError=()=>{v((()=>{const e=this.videoElement?.error,{hlsController:t,isHls:i}=this.host;if(e?.code){if(e.code===b.SrcNotSupported&&i&&t.retryCount<5)return t.retryCount+=1,t.initializeHlsJs(),void this._logMessage({msg:`Video error, reinitializing Hls.js: [${e.code}] ${e.message}`,debugOverlay:this.host.debugOverlay});this._logException({msg:`Video error: [${e.code}] ${e.message}`,debugOverlay:this.host.debugOverlay}),this.setMediaErrorCode(e.code),this.host.telemetryController.error()}}))},this.handleHlsError=async(e,t)=>{const{hlsController:i}=this.host,{hls:s}=i;if(s){if(i.retryCount>=5)return this._logException({msg:`HLS error: exceeded max retries: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),void this._handleHlsIrrecoverableError();if(401===t.networkDetails?.status)return await(this.host.authController.refreshAuth?.(!0)),i.retryCount+=1,void s.startLoad();switch(i.retryCount+=1,t.type){case"networkError":(t.networkDetails?.status||0)>=500?(this._logException({msg:`HLS error: network error: [${t.networkDetails?.status}] [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this._handleHlsIrrecoverableError()):403===t.networkDetails?.status?(this._logMessage({msg:`HLS error: network error: [${t.networkDetails?.status}] [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this._handleHlsIrrecoverableError()):(this._logMessage({msg:`HLS error: network error: [${t.networkDetails?.status}] [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this.setMediaErrorCode(b.Network),s.startLoad());break;case"mediaError":"audioTrackLoadError"===t.details?(this._logMessage({msg:`HLS error: audioTrackLoadError, switching to audio track 0: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),s.audioTrack=0):(this._logMessage({msg:`HLS error: mediaError: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),t.fatal&&s.recoverMediaError());break;default:t.fatal&&(this._logException({msg:`HLS error: unknown fatal error: [${t.details}]`,error:t.error,debugOverlay:this.host.debugOverlay}),this._handleHlsIrrecoverableError())}}},(this.host=t).addController(this),this.videoElement=t.videoElement}hostConnected(){this.videoElement.addEventListener("error",this.handleVideoError)}hostDisconnected(){this.videoElement.removeEventListener("error",this.handleVideoError)}_handleHlsIrrecoverableError(){this.host.hlsController.destroyHlsEngine(),this.setMediaErrorCode(b.Network),this.host.telemetryController.errorCode=b.Network,this.host.telemetryController.error()}}var b;!function(e){e[e.Aborted=1]="Aborted",e[e.Network=2]="Network",e[e.Decode=3]="Decode",e[e.SrcNotSupported=4]="SrcNotSupported"}(b||(b={}));class E{constructor(e){this.handleClick=()=>{this.host.isMobile&&!this.host.videoElement?.paused&&this.host.userIdleController?.isIdle||this.host.mediaActionsController?.togglePlay()},this.handleDblClick=()=>{this.host.mediaActionsController?.toggleFullscreen()},(this.host=e).addController(this)}hostConnected(){this.host.gif||(this.host.videoElement.addEventListener("click",this.handleClick),this.host.videoElement.addEventListener("dblclick",this.handleDblClick))}hostDisconnected(){this.host.gif||(this.host.videoElement.removeEventListener("click",this.handleClick),this.host.videoElement.removeEventListener("dblclick",this.handleDblClick))}}const f="@reddit/shreddit-player-media-quality";function _(e){return e>=1080?1080:e>=720?720:e>=540?540:e>=480?480:e>=360?360:e>=240?240:144}function C({hlsEngine:e,mp4Sources:t}){return t?t.some((e=>e.source.dimensions.height>e.source.dimensions.width&&e.source.dimensions.height>768)):!!e&&e.levels.some((e=>e.height>e.width&&e.height>768))}function k(e=[]){return e.sort(((e,t)=>e.quality>t.quality?-1:1))}function w(e,t=[]){for(let i=0;i<t.length;i++)if(e>=t[i].quality)return i;return t.length-1}function A(){const t=e.l.getItem(f);return t?parseInt(t):void 0}let S;class T{constructor(e){this.retryCount=0,(this.host=e).addController(this),this.videoElement=e.videoElement}hostDisconnected(){this.destroyHlsEngine()}get isHlsStream(){return this.host.src.includes(".m3u8")}async initializeHlsJs(){await this._importHlsJs(),S&&S.isSupported()?(this.hls=new S((({authToken:e,cmcdSessionId:t,src:i})=>{const s={capLevelToPlayerSize:!0,cmcd:{sessionId:t,contentId:l(i),useHeaders:!0},maxBufferLength:20,maxMaxBufferLength:20,backBufferLength:3};return s.xhrSetup=h({authToken:e}),s})({authToken:this.host.streamingAuthToken,cmcdSessionId:this.host.subSessionId,src:this.host.src})),this.hls.once(S.Events.MANIFEST_PARSED,(()=>{this.retryCount=0,this.host.qualityLevels=this.createQualityLevels(),this.host.currentQualityLevelIndex=this.getInitialQualityLevel()})),this.hls.on(S.Events.MANIFEST_LOADING,(()=>{this.host.telemetryController.startDownload()})),this.hls.on(S.Events.MANIFEST_LOADED,(()=>{this.host.telemetryController.endDownload()})),this.hls.on(S.Events.FRAG_LOADING,(()=>{this.host.subSessionPlayStartTime=this.host.subSessionPlayStartTime||Date.now()})),this.hls.on(S.Events.FRAG_LOADED,(()=>{this.host.subSessionPlayStartTime&&(this.host.subSessionPlayingStartTime=this.host.subSessionPlayingStartTime||Date.now()),this.retryCount=0})),this.hls.on(S.Events.LEVEL_SWITCHED,(()=>{this.host.telemetryController.switchBitrate()})),this.hls.on(S.Events.BUFFER_APPENDED,(()=>{this.retryCount=0})),this.hls.on(S.Events.LEVEL_LOADED,(()=>{this.retryCount=0})),this.hls.on(S.Events.ERROR,this.host.errorController.handleHlsError),this.hls.loadSource(this.host.src),this.hls.attachMedia(this.videoElement)):this.videoElement.src||(this.videoElement.src=this.host.src)}setQualityLevel(e){this.host.currentQualityLevelIndex=e,this.hls&&(this.hls.nextLevel=e)}createQualityLevels(){if(!this.hls)return[];const e=[],t=C({hlsEngine:this.hls});return(this.hls.levels||[]).map(((e,t)=>({...e,hlsLevelIndex:t}))).sort(((e,t)=>e.bitrate>t.bitrate?-1:1)).forEach((i=>{const s=_(t?i?.width:i?.height);s&&-1===e.map((e=>e.quality)).indexOf(s)&&e.push({hlsLevelIndex:i.hlsLevelIndex,quality:s})})),k(e)}getInitialQualityLevel(){const e=A();if(e&&this.hls){const t=this.host.qualityLevels.filter((t=>t.quality===e))[0]?.hlsLevelIndex;if(void 0!==t)return this.hls.startLevel=t,this.hls.loadLevel=t,t}return-1}updateCmcdSessionId(e){this.hls&&this.hls.cmcdController&&(this.hls.cmcdController.sid=e)}destroyHlsEngine(){this.hls?.destroy(),this.hls=void 0}getCurLevel(){return this.hls?.levels&&void 0!==this.hls?.currentLevel?this.hls.levels[this.hls.currentLevel]:void 0}getCurAudioTrack(){return this.hls?.audioTracks&&void 0!==this.hls?.audioTrack?this.hls.audioTracks[this.hls.audioTrack]:void 0}async _importHlsJs(){void 0===S&&(S=this.host.hlsjs16?(await this._importHlsJs_1_6())?.default:(await this._importHlsJs_1_5())?.default)}async _importHlsJs_1_5(){return SML.di("./hls-f7499958.js",import.meta.url,"hlsf7499958")}async _importHlsJs_1_6(){return SML.di("./hls-d26f8586.js",import.meta.url,"hlsd26f8586")}}var L={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},x=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],P=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],I=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],M="undefined"!=typeof window&&void 0!==window.document?window.document:{},R="fullscreenEnabled"in M&&Object.keys(L)||x[0]in M&&x||P[0]in M&&P||I[0]in M&&I||[],O={requestFullscreen:function(e){return e[R[L.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[R[L.requestFullscreen]]},get exitFullscreen(){return M[R[L.exitFullscreen]].bind(M)},get fullscreenPseudoClass(){return":"+R[L.fullscreen]},addEventListener:function(e,t,i){return M.addEventListener(R[L[e]],t,i)},removeEventListener:function(e,t,i){return M.removeEventListener(R[L[e]],t,i)},get fullscreenEnabled(){return Boolean(M[R[L.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return M[R[L.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return M[("on"+R[L.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return M[("on"+R[L.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return M[("on"+R[L.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return M[("on"+R[L.fullscreenerror]).toLowerCase()]=e}};class ${constructor(t){this._logMessage=d,this._playRequested=!1,this._loadRequested=!1,this.play=async(e=!1)=>{if(this.host.hasHadPlayAttempt=!0,this._playRequested=!0,this.videoElement.paused)if(e?this.host.telemetryController.autoplay():this.host.telemetryController.clickPlay(),this.host.mediaUI?.showLoadingSpinner(),this.host.initializeVideoElement(),this.host.isHls&&!this.host.hlsController.hls&&await(this.host.hlsController?.initializeHlsJs()),this.host.mediaVisibilityController?.isVideoInView()||this.host.playOutOfViewport){this.host.subSessionPlayStartTime=this.host.subSessionPlayStartTime||Date.now();try{await this.videoElement.play(),this.host.debugOverlay?.log("Load time",(Date.now()-(this.host.subSessionInstructionTime??0))/1e3+"s")}catch(e){throw this._logMessage({msg:"Play failed",error:e,debugOverlay:this.host.debugOverlay}),this.host.pause("scroll"),e}}else this.pause("scroll")},this.pause=e=>{if(this._playRequested){if("click"===e)this.host.telemetryController.clickPause();else if("scroll"===e)this.host.telemetryController.scrollPause();else if("background"===e)this.host.telemetryController.backgroundVideo();else if("ended"===e&&(this.host.playCount++,this.host.telemetryController.servedVideo(),this._shouldLoop()))return this.loop();this.host.updateSubSession()}this._playRequested=!1,"click"===e&&this.host.autoplay&&(this.host.autoplay=!1),this.videoElement.pause(),this.host.mediaUI?.setPausedState()},this.loop=()=>{this.host.telemetryController.looped=!0,this.host.updateSubSession(),this.play(!0)},this._shouldLoop=()=>!(!this.host.gif&&!this.host.loop)&&(!this.host.loopLimit||this.host.playCount<=this.host.loopLimit),this.togglePlay=()=>{this.videoElement.paused?this.play(!1):this.pause("click")},this.load=async(t=e.k7.AUTO)=>{this._loadRequested||this._playRequested||this.host.hasHadPlayAttempt||(this._loadRequested=!0,this.host.mediaUI?.showLoadingSpinner(),this.host.initializeVideoElement(),this.host.isHls&&!this.host.hlsController.hls&&await(this.host.hlsController?.initializeHlsJs()),this.videoElement.preload=t,this.videoElement.load())},this.stop=()=>{this.host.stopLoad&&this.host.initialized&&(this.host.stoppedState={currentTime:this.videoElement.currentTime},this.videoElement.pause(),this.host.isHls&&this.host.hlsController.destroyHlsEngine(),this.videoElement.removeAttribute("src"),this.videoElement.load(),this.host.initialized=!1)},this.toggleFullscreen=()=>{if(O.fullscreenElement===this.host)O.exitFullscreen();else{this.host.mediaSyncController.syncPlayback();try{O.fullscreenEnabled?(O.requestFullscreen(this.host),this.host.telemetryController.enterFullscreen()):"function"==typeof this.host.videoElement.webkitSetPresentationMode?(this.host.videoElement.webkitSetPresentationMode?.("fullscreen"),this.host.telemetryController.enterFullscreen()):this._logMessage({msg:"Could not enter fullscreen for device",debugOverlay:this.host.debugOverlay})}catch(e){this._logMessage({msg:"Error entering fullscreen",error:e,debugOverlay:this.host.debugOverlay})}}},this.setQualityLevel=e=>{this.host.isHls?this.host.hlsController.setQualityLevel(e):this.host.isMp4&&this.host.packagedMediaController.setQualityLevel(e)},this.toggleCaptions=()=>this.host.mediaUI?.captionController?.toggleCaptions(),this.setVolume=e=>this.host.volumeController.setVolume(e),this.increaseVolume=()=>this.host.volumeController.increaseVolume(),this.decreaseVolume=()=>this.host.volumeController.decreaseVolume(),this.toggleMute=()=>this.host.volumeController.toggleMute(),(this.host=t).addController(this),this.videoElement=t.videoElement}hostDisconnected(){this._playRequested=!1,this._loadRequested=!1}}class D{constructor(t){this.initializeSubscribers=()=>{this.hotkeyController?.contextualSubscribe(e.k8.TOGGLE_PLAY,this.mediaActionsController?.togglePlay),this.hotkeyController?.contextualSubscribe(e.k8.TOGGLE_FULLSCREEN,this.mediaActionsController?.toggleFullscreen),this.hotkeyController?.contextualSubscribe(e.k8.REWIND_5,(()=>this.timeController?.skipTime(-5))),this.hotkeyController?.contextualSubscribe(e.k8.FAST_FORWARD_5,(()=>this.timeController?.skipTime(5))),this.hotkeyController?.contextualSubscribe(e.k8.INCREASE_VOLUME,this.mediaActionsController?.increaseVolume),this.hotkeyController?.contextualSubscribe(e.k8.DECREASE_VOLUME,this.mediaActionsController?.decreaseVolume),this.hotkeyController?.contextualSubscribe(e.k8.REWIND_10,(()=>this.timeController?.skipTime(-10))),this.hotkeyController?.contextualSubscribe(e.k8.FAST_FORWARD_10,(()=>this.timeController?.skipTime(10))),this.hotkeyController?.contextualSubscribe(e.k8.RESTART,(()=>this.timeController?.setTime(0))),this.hotkeyController?.contextualSubscribe(e.k8.TOGGLE_MUTE,this.mediaActionsController?.toggleMute),this.hotkeyController?.contextualSubscribe(e.k8.TOGGLE_CAPTIONS,this.mediaActionsController?.toggleCaptions)},this.handleKeydown=e=>{const t=this.host.mediaActionsController,i=this.host.mediaUI?.timeController;" "!==e.key&&"k"!==e.key.toLowerCase()||(t?.togglePlay(),V(e)),"f"===e.key.toLowerCase()&&(t?.toggleFullscreen(),V(e)),"ArrowLeft"===e.key&&(i?.skipTime(-5),V(e)),"ArrowRight"===e.key&&(i?.skipTime(5),V(e)),"ArrowUp"===e.key&&(t?.increaseVolume(),V(e)),"ArrowDown"===e.key&&(t?.decreaseVolume(),V(e)),"j"===e.key.toLowerCase()&&(i?.skipTime(-10),V(e)),"l"===e.key.toLowerCase()&&(i?.skipTime(10),V(e)),"0"===e.key&&(i?.setTime(0),V(e)),"m"===e.key.toLowerCase()&&(t?.toggleMute(),V(e)),"c"===e.key.toLowerCase()&&(t?.toggleCaptions(),V(e))},(this.host=t).addController(this)}get mediaActionsController(){return this.host.mediaActionsController}get timeController(){return this.host.mediaUI?.timeController}hostConnected(){"enabled"===window?.CLIENT_EXPERIMENTS?.shreddit_hotkeys_m1?(this.hotkeyController=new e.dx(this.host),this.initializeSubscribers()):this.host.addEventListener("keydown",this.handleKeydown)}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeydown)}}function V(e){e.preventDefault(),e.stopPropagation()}const U="@reddit/shreddit-player-media-volume";let F=!1;class N{constructor(e){this.setVolume=e=>{let t=parseFloat(Math.pow(e,2).toFixed(2));t=Math.min(Math.max(t,0),1),this.videoElement.volume=t,this.videoElement.muted=!t,t>0&&(F=!0),B({volume:t,muted:this.videoElement.muted})},this.increaseVolume=()=>{const e=Math.min(this.sliderPosition+.1,1);this.setVolume(e)},this.decreaseVolume=()=>{const e=Math.max(this.sliderPosition-.1,0);this.setVolume(e)},this.toggleMute=()=>{const e=!this.videoElement.muted;this.videoElement.muted=e,this.host.telemetryController.clickMute(e),e||(F=!0,0===this.videoElement.volume&&(this.videoElement.volume=this.defaultVolumeSetting.volume)),B({volume:this.videoElement.volume,muted:this.videoElement.muted})},(this.host=e).addController(this),this.videoElement=e.videoElement}hostConnected(){}hostDisconnected(){}get defaultVolumeSetting(){return{volume:.25,muted:!1}}setInitialVolumeSetting(){const{autoplay:t,gif:i}=this.host;if(i)return this.videoElement.volume=0,void(this.videoElement.muted=!0);const s=function(){try{return JSON.parse(e.l.getItem(U))}catch(e){return}}(),o={...this.defaultVolumeSetting,...s};t?(F?(this.videoElement.volume=o.volume,this.videoElement.muted=o.muted,this.host.mediaUI?.setAttr(e.ig.MUTED,this.videoElement.muted)):(this.videoElement.volume=o.volume,this.videoElement.muted=!0,this.host.mediaUI?.setAttr(e.ig.MUTED)),this.updateVolumeFillRate()):(this.videoElement.volume=o.volume,this.videoElement.muted=o.muted)}get sliderPosition(){return this.videoElement.muted?0:Math.sqrt(this.videoElement.volume)}updateVolumeFillRate(){this.host.mediaUI?.style.setProperty(e.k9.VOLUME_FILL_RATE,this.sliderPosition.toString())}}function B({volume:t,muted:i}){e.l.setItem(U,JSON.stringify({volume:t,muted:i}))}class H{constructor(t){this.syncPlayback=()=>{this.pubSubController.publish(e.T.MediaSyncPlayback,this.host.subSessionId)},this.handlePlaybackSync=e=>{e!==this.host.subSessionId&&this.host.pause("scroll")},this.syncVolume=()=>{this.pubSubController.publish(e.T.MediaSyncVolume,{volume:this.videoElement.volume,muted:this.videoElement.muted})},this.handleVolumeSync=({volume:e,muted:t})=>{t||function(e=!0){F=e}(!0),this.videoElement.volume===e&&this.videoElement.muted===t||(this.videoElement.volume=e,this.videoElement.muted=t)},(this.host=t).addController(this),this.videoElement=t.videoElement,this.pubSubController=new e.P(this.host)}hostConnected(){this.host.singlePlayback&&(this.videoElement?.addEventListener("playing",this.syncPlayback),this.pubSubController.subscribe(e.T.MediaSyncPlayback,this.handlePlaybackSync)),this.host.gif||v((()=>{this.videoElement?.addEventListener("volumechange",this.syncVolume),this.pubSubController.subscribe(e.T.MediaSyncVolume,this.handleVolumeSync)}))}hostDisconnected(){this.host.singlePlayback&&(this.videoElement?.removeEventListener("playing",this.syncPlayback),this.pubSubController.unsubscribe(e.T.MediaSyncPlayback,this.handlePlaybackSync)),this.host.gif||(this.videoElement?.removeEventListener("volumechange",this.syncVolume),this.pubSubController.unsubscribe(e.T.MediaSyncVolume,this.handleVolumeSync))}}class q{constructor(t){this._isWithinAutoplayThreshold=!1,this._canAutoplay=!0,this._autoplayAttemptFailures=0,this.handleAutoplayAttempt=e=>{this._canAutoplay=!e},this.intersectionCallback=t=>{t.forEach((async t=>{t.target===this.host&&(this._isWithinAutoplayThreshold=t.intersectionRatio>.5,this._isWithinAutoplayThreshold?this.attemptAutoplay():(this.host.playOutOfViewport||(this.host.pause("scroll"),this.pubSubController.publish(e.T.MediaAutoplayAttempt,!1)),this.host.autoplay&&t.intersectionRatio>0&&this.host.load()))}))},this.attemptAutoplay=async()=>{if(this.shouldVideoAutoplay())if(this.host.initializeVideoElement(),this.host.singlePlayback){if(O.fullscreenElement)return;if(this._canAutoplay){this.pubSubController.publish(e.T.MediaAutoplayAttempt,!0);try{await this.host.play(!0),this.pubSubController.publish(e.T.MediaAutoplayAttempt,!1)}catch(t){if(this.pubSubController.publish(e.T.MediaAutoplayAttempt,!1),this._autoplayAttemptFailures++,this._autoplayAttemptFailures<3)return void this.attemptAutoplay();this.host.pause("scroll"),this.host.mediaUI?.showPoster()}}else this.host.mediaUI?.showPoster()}else this.host.play(!0)},(this.host=t).addController(this),this.pubSubController=new e.P(this.host)}hostConnected(){const t={target:this.host,threshold:[0,.5]};this.pubSubController.subscribe(e.T.MediaAutoplayAttempt,this.handleAutoplayAttempt),this.observer=new IntersectionObserver(this.intersectionCallback,t),this.observer.observe(this.host)}hostDisconnected(){this.pubSubController.unsubscribe(e.T.MediaAutoplayAttempt,this.handleAutoplayAttempt),this.observer?.unobserve(this.host),this.observer?.disconnect(),this._isWithinAutoplayThreshold=!1,this._autoplayAttemptFailures=0}isVideoInView(){return"visible"===document.visibilityState&&this._isWithinAutoplayThreshold}shouldVideoAutoplay(){return Boolean(this.host.autoplay&&this.isVideoInView()&&!this.host.mediaUI?.hasAttribute(e.ig.ENDED))}}class z{constructor(e){this._logException=c,(this.host=e).addController(this),this.videoElement=e.videoElement}async hostDisconnected(){this.host.stopLoad&&(this.packagedMedia=void 0)}get hasPackagedMedia(){return!!this.host.packagedMediaJSON}initialize(){if(!this.videoElement)throw new Error("Video element not found");this.hasPackagedMedia&&(this.parsePackagedMedia(),this.host.qualityLevels=this.createQualityLevels(),this.setQualityLevel(this.getInitialQualityLevel()))}parsePackagedMedia(){try{this.packagedMedia=JSON.parse(this.host.packagedMediaJSON)}catch(e){this._logException({msg:"Could not parse packaged-media-json",error:e,debugOverlay:this.host.debugOverlay})}}setQualityLevel(e){this.host.currentQualityLevelIndex=e;const t=this.packagedMedia?.playbackMp4s.permutations[-1===e?function(e){let t=0;const i=navigator?.connection||navigator?.mozConnection||navigator?.webkitConnection,s=i?.effectiveType;return t="4g"===s||(i?.downlink??0)>3?0:w("3g"===s?360:"2g"===s||"slow-2g"===s?144:480,e),e[t].mp4SourceIndex??0}(this.host.qualityLevels):e]?.source.url,i=this.videoElement.currentTime;if(t){const e=new URL(t);i&&(e.hash=`t=${i}`);const s=!this.videoElement.paused;this.videoElement.src=e.toString(),s&&this.host.play()}}updateAuthTokenParam(){this.videoElement.src=y(this.videoElement.src,this.host.packagedAuthToken)}createQualityLevels(){const e=this.packagedMedia?.playbackMp4s.permutations;if(!e)return[];const t=[],i=C({mp4Sources:e});return(e||[]).forEach(((e,s)=>{const o=_(i?e.source.dimensions.width:e.source.dimensions.height);o&&-1===t.map((e=>e.quality)).indexOf(o)&&t.push({mp4SourceIndex:s,quality:o})})),k(t)}getInitialQualityLevel(){const e=A();if(e){const t=this.host.qualityLevels.filter((t=>t.quality===e))[0]?.mp4SourceIndex;if(void 0!==t)return t}return-1}}class j{constructor(e){this.handleVisibilityChange=e=>{e||this.host.playOutOfViewport||this.host.pause("background"),e&&this.host.mediaVisibilityController.attemptAutoplay()},this.onBeforeUnload=()=>{this.host.pause("background")},(this.host=e).addController(this)}hostConnected(){e.cV(this.handleVisibilityChange),e.aS.subscribe(this.onBeforeUnload)}hostDisconnected(){e.cW(this.handleVisibilityChange),e.aS.unsubscribe(this.onBeforeUnload)}}class Q{constructor(){this.firstStartedAt=0,this.startedAt=null,this._laps=[],this._time=0}get paused(){return null===this.startedAt}get time(){if(this.paused)return this._time;const e=Date.now()-this.startedAt;return this._time+e}start(){this.firstStartedAt=this.firstStartedAt||Date.now(),this.paused&&(this.startedAt=Date.now())}pause(){this.paused||(this._time=this.time,this.startedAt=null)}reset(){this._laps=[],this.startedAt=null,this._time=0}lap(){const{_laps:e,time:t}=this,i=e[e.length-1],s={time:i?t-i.cumulativeTime:t,cumulativeTime:t};return e.push(s),s}}const G=[25,50,75,95,100],W=[2,3,5,10];function J(e){const{host:t}=e,{videoElement:s}=t,o=t.isHls?t.src:s.src,{hostname:r,pathname:n,id:a}=function(e){let t,i,s="";try{const o=new URL(e);t=o.hostname,i=o.pathname,"v.redd.it"===t&&(s=i.split("/")[1]||"")}catch{}return{hostname:t,pathname:i,id:s}}(o),{height:l,width:h}=function(e){return{height:e?.videoHeight||0,width:e?.videoWidth||0}}(s),d=h>=l?i.a.Landscape:i.a.Portrait;let c,u,p,m;t.isHls?(u=i.F.Hls,p=!!t.hlsController?.getCurAudioTrack(),c=t.hlsController.hls?.streamController?.fragCurrent?.byteRange):(u=i.F.Mp4,p=s?.mozHasAudio||Boolean(s?.webkitAudioDecodedByteCount)||Boolean(s?.audioTracks?.length)),Array.isArray(c)&&2===c.length&&(m=c[1]-c[0]);const y=O.fullscreenElement===t||"fullscreen"===t.videoElement.webkitPresentationMode;return{duration:Math.round(1e3*s.duration),height:l,width:h,id:a,domain:r,orientation:d,origin:t.mediaOrigin,size:m,type:t.gif?i.M.Gif:i.M.VOD,packaging_format:t.isHls?i.P.Hls:i.P.SingleFile,byte_range:Array.isArray(c)?c.toString():void 0,time:Math.round(1e3*s.currentTime),zoomed:y,format:u,has_audio:p,file_name:n,url:o,captions_present:t.mediaUI?.captionController?.captionsPresent}}function K(e){const{host:t}=e;return{id:t.commentId}}function Y(){return{device_name:navigator.userAgent,os_name:navigator.platform,browser_name:navigator.userAgent,browser_version:navigator.appVersion}}function X(t,{source:s,action:o,noun:r}){const{host:n}=t,{videoElement:a}=n,l=te(t),h=l?`[${l.error_code}] ${l.error_message||l.reason||l.custom_response}`:void 0,d=n.hlsController?.getCurLevel()?.bitrate,c=n.hlsController?.getCurAudioTrack()?.bitrate,{height:u,width:p}=function(e){return{height:e?.clientHeight||0,width:e?.clientWidth||0}}(a),m=s===i.Q.Videoplayer&&o===i.b.Switch&&r===i.c.Bitrate;return{id:n.playbackId,sub_session_id:n.subSessionId,is_live:!1,is_looped:t.looped,state:ie(t),error:h,watch_duration_ms:Math.round(t.stopwatch.time),heartbeat_duration_ms:t.stopwatch.lap().time,playhead_offset_ms:Math.round(1e3*(a.duration-a.currentTime)),timestamp_ms:Math.round(1e3*a.currentTime),start_time_ms:t.stopwatch.firstStartedAt,volume:a.muted?0:Math.round(100*a.volume),total_bitrate:(d??0)+(c??0),video_bitrate:d,audio_bitrate:c,player_type:n.playerType??null,player_width:p,player_height:u,autoplay_setting:n.autoplay?i.A.Autoplay:i.A.Click,sequence_number:t.sequenceNumber+=1,user_bitrate_switch:m&&t.manualQualityChange,captions_enabled:n.mediaUI?.hasAttribute(e.ig.CAPTIONS_ENABLED)}}function Z(t){const{host:i}=t;return{created_timestamp:i.postCreatedAt?e.gk(i.postCreatedAt):void 0,domain:i.postDomain,id:i.postId||"",nsfw:!!i.postNsfw,promoted:!!i.postPromoted,score:i.postScore,spoiler:!!i.postSpoiler,subreddit_name:i.subredditName,subreddit_id:i.subredditId,type:i.postType}}function ee({instructionTimestamp:e}={}){return{event_timestamp:Date.now(),instruction_timestamp:e}}function te(e){const{error:t}=e.host.videoElement;if(!t&&!e.errorCode)return;let i,s;return e.host.authController?.hasAuthFailure&&(i="media_auth_failure",s="Media authentication failed for video"),{reason:i,custom_response:s,error_code:e.errorCode||t?.code,error_message:t?.message}}function ie(t){return t.host.mediaUI?.hasAttribute(e.ig.LOADING)?i.d.Buffering:t.host.mediaUI?.hasAttribute(e.ig.PLAYING)?i.d.Playing:t.host.mediaUI?.hasAttribute(e.ig.PAUSED)?i.d.Paused:i.d.Buffering}class se{get complete(){return 0===this._thresholds.length}constructor(e){const t=Array.isArray(e)?Array.from(e):[e];this._thresholds=t.sort(((e,t)=>e-t))}test(e){const t=[];for(;!this.complete;){const i=this._thresholds[0];if(e<i)return t;this._thresholds.shift(),t.push(i)}return t}}class oe{constructor(e){this.stopwatch=new Q,this.started=!1,this.looped=!1,this.sequenceNumber=-1,this._buffering=!1,this._playedInFullscreen=!1,this._playedWithSound=!1,this.watchPercentThresholdObserver=new se(G),this.watchSecondsThresholdObserver=new se(W),this.manualQualityChange=!1,(this.host=e).addController(this)}hostConnected(){}hostDisconnected(){}autoplay(){this.host.subSessionInstructionTime=Date.now();const t=this.host.mediaUI?.hasAttribute(e.ig.ENDED);t?this.trackEvent({action:i.b.Auto,noun:i.c.Replay}):this.trackEvent({action:i.b.View,noun:i.c.Autoplay})}clickPlay(){this.host.subSessionInstructionTime=Date.now();const t=this.host.mediaUI?.hasAttribute(e.ig.ENDED);t?this.trackEvent({action:i.b.Click,noun:i.c.Replay}):this.trackEvent({action:i.b.Click,noun:i.c.Play})}backgroundVideo(){this.stopwatch.pause(),this.trackEvent({action:i.b.Background,noun:i.c.Video}),this.tracePerformance()}scrollPause(){this.stopwatch.pause(),this.trackEvent({action:i.b.Scroll,noun:i.c.Pause}),this.tracePerformance()}clickPause(){this.stopwatch.pause(),this.trackEvent({action:i.b.Click,noun:i.c.Pause}),this.tracePerformance()}servedVideo(){this.trackEvent({action:i.b.Served,noun:i.c.Video}),this.tracePerformance()}startVideo(){this.stopwatch.start(),this.endRebuffer(),this.started=!0,this.trackEvent({action:i.b.Start,noun:i.c.Video}),this.checkPlayedWithSound()}enterFullscreen(){this.trackEvent({action:i.T.IsFullyViewable,noun:i.e.Video}),this.started&&!this._playedInFullscreen&&this.trackEvent({action:i.T.PlayExpanded,noun:i.e.Video})}clickMute(e){this.trackEvent({action:i.T.Click,noun:e?i.e.Mute:i.e.Unmute}),this.checkPlayedWithSound()}clickCaptions(e){this.trackEvent({action:i.b.Click,noun:e?i.c.CaptionsEnabled:i.c.CaptionsDisabled})}startDownload(){this.trackEvent({action:i.b.Start,noun:i.c.Download})}endDownload(){this.trackEvent({action:i.b.End,noun:i.c.Download})}startRebuffer(){!this._buffering&&this.started&&(this.trackEvent({action:i.b.Start,noun:i.c.Rebuffer}),this._buffering=!0),this.stopwatch.pause()}endRebuffer(){this._buffering&&(this.trackEvent({action:i.b.End,noun:i.c.Rebuffer}),this._buffering=!1)}switchBitrate(){this.trackEvent({action:i.b.Switch,noun:i.c.Bitrate})}clickSeek(){this.trackEvent({action:i.T.Click,noun:i.e.Seek})}error(){const{videoElement:e}=this.host;(this.errorCode||e.error?.code)&&this.trackEvent({action:i.b.Error,noun:i.c.Video})}timeUpdate(){const e=function(e){if(!e.started||e.watchPercentThresholdObserver?.complete)return[];const{currentTime:t,duration:i}=e.host.videoElement,s=100*(i>=t?t/i:0);return e.watchPercentThresholdObserver?.test(s)}(this);for(const t of e||[])this.trackEvent({action:`watch_${t}_percent`,noun:i.e.Video});const t=function(e){if(e.watchSecondsThresholdObserver?.complete)return[];const t=e.stopwatch.time/1e3;return e.watchSecondsThresholdObserver?.test(t)}(this);for(const e of t||[])this.trackEvent({action:`watch_${e}_seconds`,noun:i.e.Video})}checkPlayedWithSound(){this.started&&!this._playedWithSound&&this._isAudible()&&(this._playedWithSound=!0,this.trackEvent({action:i.T.PlayWithSound,noun:i.e.Video}))}viewRecommendationOverlay(){this.trackEvent({action:i.b.View,noun:i.c.RecommendationOverlay})}tracePerformance(){const t=e.b({source:i.Q.Videoplayer,action:i.b.Trace,noun:i.c.Performance},{platform:Y(),video_performance_report:{loading_report:{file_load_started_timestamp:this.host.subSessionPlayStartTime,file_load_completed_timestamp:this.host.subSessionPlayingStartTime},playback_report:{session_id_v2:this.host.subSessionId}}});this.host.trackEvent(t)}trackEvent({source:t=i.Q.Videoplayer,action:s,noun:o}){const r=e.b({source:t,action:s,noun:o},{comment:K(this),media:J(this),media_system_info:ee({instructionTimestamp:this.host.subSessionInstructionTime}),platform:Y(),playback:X(this,{source:t,action:s,noun:o}),post:Z(this),subreddit:{name:this.host.subredditName,id:this.host.subredditId},video_error_report:te(this)});this.host.trackEvent(r)}_isAudible(){const{videoElement:e}=this.host;return!e.muted&&e.volume>0}}const re=e=>"object"==typeof e&&Promise.resolve(e)===e;async function ne(e){let t=!1,i=e&&e.updateComplete;return re(i)&&(await i,t=!0),i=!(!e||!e.componentOnReady)&&e.componentOnReady(),re(i)&&(await i,t=!0),t||await new Promise((e=>{requestAnimationFrame((()=>e()))})),window.ShadyDOM&&"function"==typeof window.ShadyDOM.flush&&window.ShadyDOM.flush(),e}const ae=[];function le(){ae.forEach((e=>{document.body.removeChild(e)})),ae.length=0}try{"afterEach"in window&&afterEach((()=>{le()})),"teardown"in window&&teardown((()=>{le()}))}catch(e){}const he=["click","pointerup","pointermove","focus","keydown","mouseleave"];class de{constructor(e){this.isIdle=!1,this._handleIdleChange=()=>{requestAnimationFrame((()=>{const e=this.host.mediaUI?.progressBar?.hasAttribute("dragging");return this.host.isMobile||this.host.matches(":hover")||e?!this.host.isMobile&&this.host.mediaUI?.controlBar?.matches(":hover")||e?(this._stopIdleTimer(),void this._setIdleState(!1)):void this._startIdleTimer():(this._stopIdleTimer(),void this._setIdleState(!0))}))},(this.host=e).addController(this)}async hostConnected(){he.forEach((e=>{this.host.addEventListener(e,this._handleIdleChange)})),this._startIdleTimer(),await ne(this.host)}hostDisconnected(){he.forEach((e=>{this.host.removeEventListener(e,this._handleIdleChange)})),this._stopIdleTimer()}restartIdleTimer(){this._startIdleTimer()}_startIdleTimer(){this._stopIdleTimer(),this._idleTimeout=window.setTimeout((()=>{this._setIdleState(!0)}),1500)}_stopIdleTimer(){window.clearTimeout(this._idleTimeout),this._idleTimeout=void 0,this._setIdleState(!1)}_setIdleState(t){this.isIdle=t,this.host.mediaUI?.setAttr(e.ig.USER_IDLE,t)}}let ce=s.cV({videoPlayerLabel:()=>"video player"});const ue="@reddit/shreddit-player-media-captions";class pe{constructor(t){this.captionsPresent=!1,this.initializeCaptions=async()=>{if(!this.captionsEnabled())return;const{captionUrl:e,captionOverlay:t}=this.host;if(!e||!t?.captionsTarget)return void this._disableCaptionButton();const i=await this._requestCaptions();if(i?.ok){await async function(){"undefined"==typeof ResizeObserver&&(window.ResizeObserver=(await SML.di("./ResizeObserver.es-e6e4b299.js",import.meta.url,"ResizeObserverese6e4b299"))?.default)}();const{CaptionsRenderer:e,parseResponse:s}=await SML.di("./errors-9aef8741.js",import.meta.url,"errors9aef8741").then((function(e){return e.p})),o=await s(i);o?.cues?.length>0?(this.destroyCaptionsRenderer(),this.captionsRenderer=new e(t.captionsTarget),this.captionsRenderer.changeTrack(o),this.captionsPresent=!0,this._handleTimeUpdate(),this.videoElement?.addEventListener("timeupdate",this._handleTimeUpdate)):this._disableCaptionButton()}else this._disableCaptionButton()},this.captionsEnabled=()=>this.host.hasAttribute(e.ig.CAPTIONS_ENABLED),this.toggleCaptions=async()=>{const t=!this.captionsEnabled();var i;this.host.playerRoot?.telemetryController.clickCaptions(t),this.host.setAttr(e.ig.CAPTIONS_ENABLED,t),i=t,e.l.setItem(ue,i.toString()),t&&this.initializeCaptions()},this._disableCaptionButton=()=>{this.host.captionButton&&(this.host.captionButton.disabled=!0)},this._handleTimeUpdate=()=>{this.captionsRenderer&&(this.captionsRenderer.currentTime=this.videoElement?.currentTime||0)},this._requestCaptions=async()=>{const{captionUrl:t}=this.host;if(!t)return;const i=new Headers,s=this.host.playerRoot?.streamingAuthToken;return s&&i.set(e.k5,s),fetch(t,{headers:i})},(this.host=t).addController(this)}async hostConnected(){this.videoElement=this.host.videoElement,"true"===(e.l.getItem(ue)||"").toLowerCase()&&this.host.setAttr(e.ig.CAPTIONS_ENABLED)}hostDisconnected(){this.videoElement=void 0,this.captionsPresent=!1,this.destroyCaptionsRenderer()}destroyCaptionsRenderer(){this.captionsRenderer?.destroy(),this.captionsRenderer=void 0,this.videoElement?.removeEventListener("timeupdate",this._handleTimeUpdate)}}function me(e,t){return e.toString().padStart(t,"0")}var ye;function ve(e){const t=Math.round(1e3*e)/1e3,i=Math.trunc(t/3600),s=Math.trunc(t%3600/60),o=Math.trunc(t%60),r=Number((t-Math.trunc(t)).toPrecision(3));return{[ye.Hours]:i,[ye.Minutes]:s,[ye.Seconds]:o,[ye.Fraction]:r}}function ge(e,t=!1,i=!1){if(Number.isNaN(e))return"0:00";const{hours:s,minutes:o,seconds:r}=ve(e),n=t?me(s,2):s,a=me(o,2),l=me(r,2);return s>0||i?`${n}:${a}:${l}`:`${o}:${l}`}function be(e){const t=[],{hours:i,minutes:s,seconds:o}=ve(e),r=(e,t)=>1===e?t:`${t}s`;return i>0&&t.push(`${i} ${r(i,"hour")}`),s>0&&t.push(`${s} ${r(s,"minute")}`),(o>0||0===t.length)&&t.push(`${o} ${r(o,"second")}`),t.join(", ")}function Ee(e){return"number"==typeof e&&!Number.isNaN(e)}function fe(e){return Math.round(10*e)/10}!function(e){e.Hours="hours",e.Minutes="minutes",e.Seconds="seconds",e.Fraction="fraction"}(ye||(ye={}));const{ENDED:_e,ERROR:Ce,FULLSCREEN:ke,MUTED:we,PLAYING:Ae,PAUSED:Se,SHOW_POSTER:Te}=e.ig;class Le{constructor(e){this._logException=c,this._started=!1,this.handleWaiting=()=>{this.videoElement&&this.videoElement.readyState<3&&(this.host.showLoadingSpinner(),this._started&&this.host.playerRoot?.telemetryController.startRebuffer())},this.handlePlay=()=>{this.host.setAttr(Te,!1),this.host.setAttr(Se,!1),this.host.setAttr(_e,!1)},this.handlePlaying=()=>{this._started=!0,this.host.hideLoadingSpinner(),this.host.setAttr(Te,!1),this.host.setAttr(Ae),this.host.setAttr(Se,!1),this.host.setAttr(_e,!1),this.host.setAttr(Ce,!1),this.host.recommendationOverlayController.handlePlaying(),this.host.playerRoot?.telemetryController.startVideo(),this.host.playerRoot&&(this.host.playerRoot.subSessionPlayingStartTime=this.host.playerRoot.subSessionPlayingStartTime||Date.now(),this.host.playerRoot.adController.play())},this.handlePause=()=>{this.host.setPausedState(),this.host.playerRoot?.adController.pause()},this.handleEnded=()=>{this.host.hideLoadingSpinner(),this.host.setAttr(_e),this.host.setPausedState(),this.host.recommendationOverlayController.handleEnded(),this.host.playerRoot&&this.host.playerRoot.pause("ended")},this.handleLoadStart=()=>{this.host.setAttr(Ce,!1)},this.handleLoadedData=()=>{this.host.hideLoadingSpinner(),this.host.setAttr(Ce,!1)},this.handleCanPlay=()=>{this.host.hideLoadingSpinner(),this.host.setAttr(Ce,!1)},this.handleError=()=>{this.host.hideLoadingSpinner()},this.handleVolumeChange=()=>{const{muted:e,volume:t}=this.videoElement||{};this.host.setAttr(we,e||0===t),this.host.playerRoot?.volumeController.updateVolumeFillRate(),this.host.playerRoot?.adController.volumeChange()},this.handleFullscreenChange=e=>{e?.target===this.host.playerRoot&&(O.fullscreenElement?this.host.setAttr(ke):this.host.setAttr(ke,!1),this.host.playerRoot?.adController.fullscreenChange())},this.handleTimeUpdate=()=>{Ee(this.videoElement?.currentTime)&&Ee(this.videoElement?.duration)&&(this.videoElement?.currentTime&&this.videoElement?.duration&&fe(this.videoElement.currentTime)>=fe(this.videoElement.duration)?this.host.setAttr(_e):this.host.setAttr(_e,!1),this.host.playerRoot?.telemetryController.timeUpdate(),this.host.playerRoot?.adController.timeUpdate(),this.host.recommendationOverlayController.handleTimeUpdate())},this.handleSeeking=()=>{this.host.playerRoot?.adController.seeking()},this.handleSeeked=()=>{this.host.playerRoot?.adController.seeked()},this.handlePresentationModeChange=()=>{const e="fullscreen"===this.videoElement?.webkitPresentationMode;this.host.setAttr(ke,e),this.host.playerRoot?.adController.fullscreenChange()},(this.host=e).addController(this)}hostConnected(){if(this.videoElement=this.host.videoElement,!this.videoElement){const e="MediaEventsController: videoElement is not defined";throw this._logException({msg:e,debugOverlay:this.host.playerRoot?.debugOverlay}),new Error(e)}this.eventListeners.forEach((({eventName:e,callback:t})=>{this.videoElement?.addEventListener(e,t)})),O.addEventListener("fullscreenchange",this.handleFullscreenChange)}hostDisconnected(){this.eventListeners.forEach((({eventName:e,callback:t})=>{this.videoElement?.removeEventListener(e,t)})),O.removeEventListener("fullscreenchange",this.handleFullscreenChange),this.videoElement=void 0,this._started=!1}get eventListeners(){return[{eventName:"play",callback:this.handlePlay},{eventName:"playing",callback:this.handlePlaying},{eventName:"pause",callback:this.handlePause},{eventName:"ended",callback:this.handleEnded},{eventName:"loadstart",callback:this.handleLoadStart},{eventName:"loadeddata",callback:this.handleLoadedData},{eventName:"canplay",callback:this.handleCanPlay},{eventName:"error",callback:this.handleError},{eventName:"volumechange",callback:this.handleVolumeChange},{eventName:"timeupdate",callback:this.handleTimeUpdate},{eventName:"seeking",callback:this.handleSeeking},{eventName:"seeked",callback:this.handleSeeked},{eventName:"webkitpresentationmodechanged",callback:this.handlePresentationModeChange},{eventName:"waiting",callback:this.handleWaiting},{eventName:"stalled",callback:this.handleWaiting}]}}class xe{constructor(t){this._isActivated=!1,this._activateFeature=e.k,this.handlePlaying=()=>{this.hideRecommendationOverlay()},this.handleEnded=()=>{this.showRecommendationOverlay()},this.handleTimeUpdate=()=>{const{currentTime:e,duration:t}=this.videoElement||{};Ee(e)&&Ee(t)&&this.isPostSupported()&&(t-e<=3&&this._activateRecommendedMediaOverlay(),fe(e)>=fe(t)?this.showRecommendationOverlay():this.hideRecommendationOverlay())},this._activateRecommendedMediaOverlay=async()=>{if(this._isActivated||!this.isPostSupported())return;this._isActivated=!0;const{postId:t,subredditId:i,isMobile:s,playerRoot:o}=this.host,r=this.host.playerRoot?.closest("shreddit-app")?.pageType;try{await this._activateFeature({name:e.ka,routeParams:{postId:t,subredditId:i,limit:s?"1":"4",navigationSessionId:o?.navigationSessionId,pageType:r},renderMode:e.o.Contents,root:o??void 0})}catch(e){this._isActivated=!1}},(this.host=t).addController(this)}hostConnected(){this.videoElement=this.host.videoElement}hostDisconnected(){this.videoElement=void 0}showRecommendationOverlay(){this.host.hasAttribute(e.ig.SHOW_RECOMMENDATION_OVERLAY)||(this.host.setAttr(e.ig.SHOW_RECOMMENDATION_OVERLAY),this.host.playerRoot?.telemetryController?.viewRecommendationOverlay())}hideRecommendationOverlay(){this.host.setAttr(e.ig.SHOW_RECOMMENDATION_OVERLAY,!1)}isPostSupported(){return Boolean(!this.host.playerRoot?.postPromoted&&!this.host.playerRoot?.gif&&!this.host.playerRoot?.loop&&!this.host.playerRoot?.hideControls&&this.host.playerRoot?.postId&&this.host.playerRoot?.subredditId)}}class Pe{constructor(t){this._timeRAF=void 0,this.skipTime=e=>{this.currentTime+=e},this.setTime=e=>{this.currentTime=e},this._updateTimeProperties=()=>{Ee(this.videoElement?.duration)&&(this._updateStyleProperties(),this._updateFormattedTime(),this.host.playerRoot?.adController.timeUpdate())},this._updateStyleProperties=()=>{if(!this.videoElement)return;const t=this.currentTime/this.videoElement.duration||0;this.host.style.setProperty(e.k9.PROGRESS_FILL_RATE,t.toFixed(4))},this._updateFormattedTime=()=>{if(!this.videoElement)return;const e=this.currentTime;if((this.formattedCurrentTime!==ge(e)||this.formattedDuration!==ge(this.videoElement.duration))&&(this.formattedCurrentTime=ge(e),this.formattedDuration=ge(this.videoElement.duration),this.host.currentTimeElement?.requestUpdate(),this.host.progressBar)){this.host.progressBar.ariaValueMax=this.formattedDuration,this.host.progressBar.ariaValueNow=this.formattedCurrentTime;const t=`${be(e)} out of ${be(this.videoElement.duration)}`;this.host.progressBar.ariaValueText=t}},this._cancelTimeUpdates=()=>{Ee(this._timeRAF)&&window.cancelAnimationFrame(this._timeRAF),this._timeRAF=void 0},this._requestTimeUpdates=()=>{this._timeRAF||this._requestTimeUpdate()},this._requestTimeUpdate=()=>{this.videoElement&&(this._updateTimeProperties(),this._timeRAF=window.requestAnimationFrame((()=>{void 0!==this._timeRAF&&this._requestTimeUpdate()})))},(this.host=t).addController(this),this.host.style.setProperty(e.k9.PROGRESS_FILL_RATE,"0")}hostConnected(){this.videoElement=this.host.videoElement,this.host.gif||(this.videoElement?.addEventListener("loadedmetadata",this._updateTimeProperties),this.videoElement?.addEventListener("timeupdate",this._updateTimeProperties),this.videoElement?.addEventListener("playing",this._requestTimeUpdates),this.videoElement?.addEventListener("pause",this._cancelTimeUpdates))}hostDisconnected(){this.host.gif||(this.videoElement?.removeEventListener("loadedmetadata",this._updateTimeProperties),this.videoElement?.removeEventListener("timeupdate",this._updateTimeProperties),this.videoElement?.removeEventListener("playing",this._requestTimeUpdates),this.videoElement?.removeEventListener("pause",this._cancelTimeUpdates)),this._cancelTimeUpdates(),this.videoElement=void 0}get currentTime(){return Math.min(this.videoElement?.currentTime||0,this.videoElement?.duration||0)}set currentTime(e){this.videoElement&&(this.host.playerRoot?.telemetryController?.clickSeek(),this.videoElement.currentTime=e,this._updateTimeProperties())}get duration(){return this.videoElement?.duration||0}}const Ie=({icon:i,onClick:s,disabled:o,ariaLabel:r,ariaKeyshortcuts:n,ariaHidden:a,additionalClasses:l=""})=>t.x` <button class="min-h-[42px] min-w-[42px] p-0 bg-transparent border-none transition-all pointer-events-auto enabled:cursor-pointer enabled:hover:scale-[1.2] disabled:opacity-60${l?` ${l}`:""}" @click="${e=>{s&&(s(e),e.stopPropagation())}}" @keydown="${t=>{!s||"Enter"!==t.key&&" "!==t.key||(s(t),e.kb(t))}}" ?disabled="${o}" aria-label="${r||t.A}" aria-keyshortcuts="${n||t.A}" aria-hidden="${a||t.A}"> ${i} </button> `,Me=({icon:e,additionalClasses:i="",size:s=t.I.Medium})=>e({attributes:{className:`text-white ease duration-150 ${i}`.trim()},size:s});var Re=t.a`:host{--slider-bg:#434343;--slider-fill:#fff;position:absolute;inset:0}.poster-play-button svg{filter:drop-shadow(3px 3px 2px rgba(0, 0, 0, .5));-webkit-filter:drop-shadow(3px 3px 2px rgba(0, 0, 0, .5))}:host(:not([show-poster]):not([gif])) .poster-play-button,:host([gif][playing]) .poster-play-button{display:none}:host(:not([show-poster])) .poster-play-button,:host([loading]) .poster-play-button{display:none}:host(:not([loading])) shreddit-loading-spinner{display:none}:host([show-poster]) .controls{display:none}.scrim{background:linear-gradient(to top,rgba(0,0,0,.4) 40px,transparent 80px)}:host(:not([captions-enabled])) .caption-disabled-icon,:host(:not([fullscreen])) .expand-icon,:host(:not([muted])) .volume-icon,:host(:not([paused])) .pause-icon,:host([captions-enabled]) .caption-enabled-icon,:host([ended]) .refresh-icon,:host([fullscreen]) .collapse-icon,:host([muted]) .mute-icon,:host([paused]:not([ended])) .play-icon{display:inline-block}:host([user-idle]:not([paused])) .disappearing-controls,:host([user-idle]:not([paused])) .scrim{opacity:0;pointer-events:none}:host ::slotted([slot=recommendation-overlay]){transition:opacity .2s}:host([show-rec-overlay]) ::slotted([slot=recommendation-overlay]){opacity:1;visibility:visible;pointer-events:auto}:host(:not([show-rec-overlay])) ::slotted([slot=recommendation-overlay]){opacity:0;visibility:hidden;pointer-events:none}:host([captions-enabled]) shreddit-caption-overlay{display:block}:host(:not([captions-enabled])) shreddit-caption-overlay{display:none}:host([loading]) shreddit-caption-overlay,:host([show-poster]) shreddit-caption-overlay{display:none}:host(:not([error])) shreddit-error-overlay{display:none}`,Oe=t.a`:where([data-part=captions]),:where([part=captions]){--overlay-padding:1%;--cue-color:white;--cue-bg-color:rgba(0, 0, 0, 0.75);--cue-font-size:16px;--cue-line-height:calc(var(--cue-font-size) * 1.2);--cue-padding-x:0.5rem;--cue-padding-y:0.5rem;position:absolute;inset:0;contain:content;margin:var(--overlay-padding);font-size:var(--cue-font-size);font-family:sans-serif;box-sizing:border-box;pointer-events:none;user-select:none;word-spacing:normal;word-break:break-word}:where([data-part=captions]>[data-part=cue-display]),:where([part=captions]>[part=cue-display]){position:absolute;bottom:0;direction:ltr;overflow:visible;contain:content;width:var(--cue-width,auto);height:var(--cue-height,auto);box-sizing:border-box;transform:var(--cue-transform);text-align:var(--cue-text-align);writing-mode:var(--cue-writing-mode,unset);white-space:pre-line;unicode-bidi:plaintext;min-width:min-content;min-height:min-content}:where([data-dir=rtl][data-part=cue-display]),:where([data-dir=rtl][part=cue-display]){direction:rtl}:where([data-part=captions]>[data-part=cue-display]>[data-part=cue]),:where([part=captions]>[part=cue-display]>[part=cue]){display:inline-block;padding:var(--cue-padding-y) var(--cue-padding-x);line-height:var(--cue-line-height);background-color:var(--cue-bg-color);box-sizing:border-box;color:var(--cue-color);box-shadow:var(--cue-box-shadow);white-space:var(--cue-white-space,pre-wrap);outline:var(--cue-outline);text-shadow:var(--cue-text-shadow)}:where([data-part=captions][data-part=cue-display][data-vertical][data-part=cue]),:where([part=captions][part=cue-display][data-vertical][part=cue]){padding:var(--cue-padding-x) var(--cue-padding-y)}`;let $e=class extends t.s{constructor(){super(...arguments),this.captionsTarget=document.createElement("div")}connectedCallback(){super.connectedCallback(),this.captionController?.initializeCaptions()}disconnectedCallback(){super.disconnectedCallback(),this.captionController?.destroyCaptionsRenderer(),this.captionsTarget.innerHTML=""}render(){return t.x`${this.captionsTarget}`}};$e.styles=[e.t,Oe],e._([e.n()],$e.prototype,"captionController",void 0),$e=e._([e.e("shreddit-caption-overlay")],$e);let De=class extends t.s{render(){return t.x` <span class="whitespace-nowrap font-semibold text-white"> <span>${this.timeController?.formattedCurrentTime??"0:00"}</span><span class="embed-m:hidden"> / ${this.timeController?.formattedDuration??"0:00"}</span> </span> `}};De.styles=[e.t],e._([e.n()],De.prototype,"timeController",void 0),De=e._([e.e("shreddit-current-time")],De);let Ve=class extends t.s{render(){if(void 0===this.mediaErrorCode)return;let e;return e=2===this.mediaErrorCode?"This video is no longer available.":"This video cannot be played.",t.x` <p class="h-full w-full flex justify-center items-center text-white">${e}</p> `}};Ve.styles=[e.t],e._([e.n()],Ve.prototype,"mediaErrorCode",void 0),Ve=e._([e.e("shreddit-error-overlay")],Ve);let Ue=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this.loadedPreviewVideo=!1,this._onCanPlay=()=>{this.videoElement.style.display="block"}}disconnectedCallback(){super.disconnectedCallback(),this.videoElement?.removeEventListener("canplay",this._onCanPlay)}loadPreviewVideo(){!this.loadedPreviewVideo&&this.videoElement&&(this.loadedPreviewVideo=!0,this.videoElement.load(),this.videoElement.addEventListener("canplay",this._onCanPlay))}render(){return t.x` ${this.isMobile||!this.preview?t.A:t.x` <video muted playsinline preload="none" src="${this.preview}" class="bg-black border border-1 border-solid rounded-2 mb-2xs hidden w-[130px] max-h-[130px] h-auto"></video> `} <span class="formatted-current-time m-auto text-14 font-semibold px-2xs bg-black bg-opacity-55 text-white rounded-1 whitespace-nowrap">0:00</span> `}};Ue.styles=[t.a`:host{display:inline-block;contain:content}:host(:not([preview])) video,:host([hidden]) video{display:none}`,e.t],e._([e.n({type:String})],Ue.prototype,"preview",void 0),e._([e.n({type:Boolean})],Ue.prototype,"isMobile",void 0),e._([e.d()],Ue.prototype,"loadedPreviewVideo",void 0),e._([e.y("video")],Ue.prototype,"videoElement",void 0),e._([e.y("span.formatted-current-time")],Ue.prototype,"formattedCurrentTime",void 0),Ue=e._([e.e("shreddit-preview-video-lazy")],Ue);let Fe=class extends t.s{constructor(){super(...arguments),this._isPointerDown=!1,this.idleUpdate=!1,this._handlePointerDown=t=>{e.kb(t),this._isPointerDown=!0,this.onPointerDownMove?.(t),this.idleUpdate||this.onChange?.(t),this.dispatchEvent(new Event("slider-dragstart"))},this._handlePointerUp=t=>{this._isPointerDown&&(e.kb(t),this._isPointerDown=!1,this.onChange?.(t),this.dispatchEvent(new Event("slider-dragend")))},this._handlePointerMove=t=>{this._isPointerDown&&(e.kb(t),this.onPointerDownMove?.(t),this.idleUpdate||this.onChange?.(t))}}connectedCallback(){super.connectedCallback(),document.addEventListener("pointerup",this._handlePointerUp),document.addEventListener("pointercancel",this._handlePointerUp),document.addEventListener("pointermove",this._handlePointerMove)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("pointerup",this._handlePointerUp),document.removeEventListener("pointercancel",this._handlePointerUp),document.removeEventListener("pointermove",this._handlePointerMove)}render(){return t.x` <slot class="touch-none flex w-full h-full items-center justify-center cursor-pointer${this.additionalClasses?` ${this.additionalClasses}`:""}" @pointerdown="${this._handlePointerDown}"></slot> `}};Fe.styles=[e.t],e._([e.n({type:Boolean})],Fe.prototype,"idleUpdate",void 0),e._([e.n()],Fe.prototype,"onChange",void 0),e._([e.n()],Fe.prototype,"onPointerDownMove",void 0),e._([e.n()],Fe.prototype,"additionalClasses",void 0),Fe=e._([e.e("shreddit-slider-element")],Fe);let Ne=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this._updateTime=e=>{const{left:t,width:i}=this.getBoundingClientRect(),s=Math.min((e.x-t)/i,1),o=(this.timeController?.duration??0)*s;Number.isNaN(o)||(this.timeController.currentTime=o)},this._handleSliderChange=e=>{this._updateTime(e),this._updatePreviewVideoPosition(e)},this._handleDragStart=()=>{this.setAttribute("dragging","")},this._handleDragEnd=()=>{this.removeAttribute("dragging")},this._handlePointerDownMove=e=>{this._updateSliderBallPosition(e),this._updatePreviewVideoPosition(e)},this._handleMouseEnter=()=>{this.isMobile||this.setAttribute("hovered","")},this._handleMouseLeave=()=>{this.isMobile||this.removeAttribute("hovered")},this._updateSliderBallPosition=t=>{const{left:i,width:s}=this.getBoundingClientRect(),o=Math.max(0,Math.min(t.x-i,s));this.style.setProperty(e.k9.SLIDER_BALL_LEFT_PX,`${o}px`)},this._updatePreviewVideoPosition=t=>{const{left:i,width:s}=this.getBoundingClientRect(),o=Math.max(0,Math.min((t.x-i)/s,1)),r=(this.timeController?.duration||0)*o;this.previewVideoLazy?.loadPreviewVideo(),this.previewVideoLazy?.videoElement&&(this.previewVideoLazy.videoElement.currentTime=r),this.previewVideoLazy?.formattedCurrentTime&&(this.previewVideoLazy.formattedCurrentTime.innerText=ge(r));const n=Math.max(0,Math.min(t.x-i,s));this.previewVideoLazy?.style.setProperty(e.k9.PREVIEW_VIDEO_LEFT_PX,`${n}px`)}}renderPreviewVideo(){return t.x` <shreddit-preview-video-lazy .isMobile="${this.isMobile}" .preview="${this.preview}" class="embed-s:hidden absolute transition-opacity bottom-2xl left-0 -translate-x-1/2 text-center flex-col pointer-events-none" style="left:var(${e.k9.PREVIEW_VIDEO_LEFT_PX});will-change:left"></shreddit-preview-video-lazy> `}render(){return t.x` <shreddit-slider-element class="h-full w-full flex items-center" .onChange="${this._handleSliderChange}" .onPointerDownMove="${this._handlePointerDownMove}" @mouseenter="${this._handleMouseEnter}" @mouseleave="${this._handleMouseLeave}" @mousemove="${this._updatePreviewVideoPosition}" @slider-dragstart="${this._handleDragStart}" @slider-dragend="${this._handleDragEnd}" idleUpdate> <div class="bg-[--slider-bg] h-[4px] w-full relative cursor-pointer"> <div class="bg-[--slider-fill] h-full w-full origin-left cursor-pointer" style="transform:scaleX(var(${e.k9.PROGRESS_FILL_RATE}));will-change:transform"></div> <div class="slider-ball absolute top-1/2 left-0 w-lg h-lg rounded-full cursor-pointer bg-[--slider-fill] -translate-x-1/2 -translate-y-1/2 scale-75" style="will-change:left"></div> </div> </shreddit-slider-element> ${this.renderPreviewVideo()} `}};Ne.styles=[t.a`:host shreddit-preview-video-lazy{display:none}:host([dragging]) shreddit-preview-video-lazy,:host([hovered]) shreddit-preview-video-lazy{display:flex}:host(:not([dragging])) shreddit-slider-element .slider-ball{left:calc(var(--progress-fill-rate) * 100%)}:host([dragging]) shreddit-slider-element .slider-ball{left:var(--slider-ball-left-px)}`,e.t],e._([e.n()],Ne.prototype,"timeController",void 0),e._([e.n({type:String})],Ne.prototype,"preview",void 0),e._([e.n({type:Boolean})],Ne.prototype,"isMobile",void 0),e._([e.y("shreddit-preview-video-lazy")],Ne.prototype,"previewVideoLazy",void 0),Ne=e._([e.e("shreddit-progress-bar")],Ne);let Be=class extends t.s{render(){return t.x` <svg aria-hidden="true" class="w-3xl h-3xl animate-spin" fill="none" viewBox="0 0 120 120"> <circle class="opacity-25" cx="60" cy="60" r="54" stroke="white" stroke-width="8"></circle> <circle class="buffering-track-fill opacity-75" cx="60" cy="60" r="54" stroke="white" stroke-width="10" pathLength="100"></circle> </svg> `}};Be.styles=[t.a`.buffering-track-fill{stroke-dasharray:100;stroke-dashoffset:50}`,e.t],Be=e._([e.e("shreddit-loading-spinner")],Be);let He=class extends t.s{constructor(){super(...arguments),this.autoplayPref=!1,this.isLoggedInUser=!1,this.hideAutoplayToggle=!1,this.qualityLevels=[],this.currentQualityLevelIndex=-1,this.isMenuOpen=!1}showSettings(){this.isMenuOpen=!0}hideSettings(){this.isMenuOpen=!1}handleQualityChange(t,i){t.stopPropagation();const s=i?"hlsLevelIndex"in i?i.hlsLevelIndex:i.mp4SourceIndex:-1;var o;this.mediaActionsController?.setQualityLevel(s),o=i?.quality,o?e.l.setItem(f,o.toString()):e.l.removeItem(f);const r=e.gP(this,"shreddit-player-2");r&&(r.telemetryController.manualQualityChange=!0)}renderSettings(){const i=e=>this.currentQualityLevelIndex===("hlsLevelIndex"in e?e.hlsLevelIndex:e.mp4SourceIndex),s="px-sm py-xs flex justify-center border-none bg-transparent cursor-pointer text-white",o=this.isLoggedInUser&&!this.hideAutoplayToggle,n=t.x` ${o?t.x` <button class="${s}" @click="${()=>async function({newPref:t,dispatchEvent:i,onSuccess:s}){try{await r({operation:e.O.UpdateAccountPreferences,variables:{input:{isVideoAutoplayEnabled:t}}}),s?.()}catch(t){i(e.c("faceplate-alert",{level:e.x.error,cause:"uncategorized",message:"Error changing autoplay preference"}))}}({newPref:!this.autoplayPref,dispatchEvent:this.dispatchEvent,onSuccess:()=>{this.autoplayPref=!this.autoplayPref}})}" data-testid="autoplay-toggle"> ${this.renderCheckmark(this.autoplayPref)} <span> Autoplay</span> </button> <div class="h-[1px] w-[calc(100%-1rem)] bg-[#82959b] opacity-50 mx-auto"></div> `:t.A} `;return t.x` <div class="absolute flex flex-col bg-black bg-opacity-60 bottom-[42px] -left-1/2 min-w-4xl transition-all rounded-1 ${this.isMenuOpen?"opacity-100":"opacity-0 pointer-events-none"}" aria-hidden="${!this.isMenuOpen||t.A}" inert="${!this.isMenuOpen||t.A}"> ${n} ${this.qualityLevels?.map((e=>t.x` <button data-testid="quality-option" class="${s}" @click="${t=>this.handleQualityChange(t,e)}"> ${this.renderCheckmark(i(e))} <span>${e.quality}p</span> </button> `))} <button data-testid="auto-quality-option" class="${s}" @click="${e=>this.handleQualityChange(e)}"> ${this.renderCheckmark(-1===this.currentQualityLevelIndex)} <span> Auto</span> </button> </div> `}renderCheckmark(e){return e?t.x` <span class="pr-2xs" data-testid="checkmark"> ${t.E({size:t.I.ExtraSmall})} </span> `:t.A}render(){return t.x` <div class="embed-s:hidden" @mouseleave="${this.hideSettings}" @blur="${this.hideSettings}"> ${Ie({icon:Me({icon:t.d3}),onClick:()=>this.isMenuOpen?this.hideSettings():this.showSettings(),ariaLabel:"Settings"})} ${this.renderSettings()} </div> `}};He.styles=[t.a`:host{position:relative}`,e.t],e._([e.n()],He.prototype,"mediaActionsController",void 0),e._([e.n({type:Boolean})],He.prototype,"autoplayPref",void 0),e._([e.n({type:Boolean})],He.prototype,"isLoggedInUser",void 0),e._([e.n({type:Boolean,attribute:"hide-autoplay-toggle"})],He.prototype,"hideAutoplayToggle",void 0),e._([e.n()],He.prototype,"qualityLevels",void 0),e._([e.n()],He.prototype,"currentQualityLevelIndex",void 0),e._([e.d()],He.prototype,"isMenuOpen",void 0),He=e._([e.e("shreddit-video-settings")],He);let qe=class extends t.s{constructor(){super(...arguments),this.isMobile=!1,this._updateVolume=t=>{e.kb(t);const{height:i=0,y:s=0}=this.sliderTrack?.getBoundingClientRect()??{};if(!i)return;const o=Math.min(1,Math.max(0,(s+i-t.y)/i));this.mediaActionsController?.setVolume(o)}}render(){const i=this.isMobile?t.A:t.x` <div class="slider-element-wrapper absolute rounded-2 h-[90px] bottom-[44px] py-md px-xs opacity-[--slider-opacity] transition-opacity bg-[rgba(0,0,0,0.6)]"> <shreddit-slider-element class="slider-track flex items-center h-full w-full box-border" additionalClasses="px-[10px]" .onChange="${this._updateVolume}"> <div class="bg-[--slider-bg] w-[2px] h-full relative flex justify-center"> <div class="bg-[--slider-fill] h-full w-full origin-bottom" style="transform:scaleY(var(${e.k9.VOLUME_FILL_RATE}));will-change:transform"></div> <div class="absolute bottom-0 w-md h-md translate-y-1/2 rounded-full bg-white scale-90" style="bottom:calc(var(${e.k9.VOLUME_FILL_RATE}) * 100%);will-change:bottom"></div> </div> </shreddit-slider-element> </div> `;return t.x` <div class="relative flex justify-center"> <slot></slot> ${i} </div> `}};qe.styles=[t.a`:host .slider-element-wrapper{display:none}:host(:hover) .slider-element-wrapper{display:block}`,e.t],e._([e.n()],qe.prototype,"mediaActionsController",void 0),e._([e.n({type:Boolean})],qe.prototype,"isMobile",void 0),e._([e.y(".slider-track")],qe.prototype,"sliderTrack",void 0),qe=e._([e.e("shreddit-volume-slider")],qe);let ze=class extends t.s{constructor(){super(...arguments),this.mediaEventsController=new Le(this),this.timeController=new Pe(this),this.captionController=new pe(this),this.recommendationOverlayController=new xe(this),this.autoplay=!1,this.autoplayPref=!1,this.gif=!1,this.hideControls=!1,this.hideFullscreenButton=!1,this.hideAutoplayToggle=!1,this.isMobile=!1,this.isLoggedInUser=!1,this.qualityLevels=[],this.currentQualityLevelIndex=-1,this.hideGifIcon=!1,this.gifToggle=e=>{this.mediaActionsController?.togglePlay(),e.stopImmediatePropagation(),e.preventDefault()},this.renderGifControls=()=>t.x`${this.autoplay?t.A:t.x`${this.renderPosterPlayButton()} <div class="controls"> ${Ie({icon:t.x` ${Me({icon:t.e3,additionalClasses:"hidden play-icon"})} ${Me({icon:t.e8,additionalClasses:"hidden pause-icon"})} `,additionalClasses:"absolute left-0 bottom-0",onClick:e=>this.gifToggle(e)})} </div>`} ${this.hideGifIcon?t.A:Ie({icon:Me({icon:t.dj}),disabled:!0,ariaHidden:!0,additionalClasses:"absolute right-0 bottom-0"})} ${this.renderErrorOverlay()}`}connectedCallback(){super.connectedCallback(),this.autoplay||this.playerRoot?.hasHadPlayAttempt||(this.showPoster(),this.setPausedState())}disconnectedCallback(){super.disconnectedCallback(),this.hideLoadingSpinner()}get playerRoot(){return e.gP(this,"shreddit-player-2")}renderPosterPlayButton(){return Ie({icon:t.x` ${Me({icon:t.e3,size:t.I.ExtraLarge})} `,onClick:e=>{e?.preventDefault(),e?.stopImmediatePropagation(),this.mediaActionsController?.play()},ariaLabel:"Play",additionalClasses:"poster-play-button absolute inset-0 flex items-center justify-center cursor-pointer pointer-events-auto"})}showPoster(){this.setAttr(e.ig.SHOW_POSTER)}showLoadingSpinner(){this.setAttr(e.ig.LOADING),requestAnimationFrame((()=>{this.loadingSpinner&&(this.loadingSpinner.style.opacity="0.8")}))}hideLoadingSpinner(){this.setAttr(e.ig.LOADING,!1),this.loadingSpinner&&(this.loadingSpinner.style.opacity="0")}renderCaptionOverlay(){return t.x`<shreddit-caption-overlay class="pointer-events-none absolute left-0 right-0 top-0 bottom-[42px]" .captionController="${this.captionController}"></shreddit-caption-overlay>`}renderControls(){if(this.hideControls)return;const e=Ie({icon:t.x` ${Me({icon:t.e3,additionalClasses:"hidden play-icon"})} ${Me({icon:t.e8,additionalClasses:"hidden pause-icon"})} ${Me({icon:t.e9,additionalClasses:"hidden refresh-icon"})} `,onClick:this.mediaActionsController?.togglePlay,ariaLabel:"Toggle playback",ariaKeyshortcuts:"k",additionalClasses:"play-pause-button"}),i=t.x` <shreddit-progress-bar class="embed-s:hidden relative flex items-center h-full w-full mx-md" .timeController="${this.timeController}" ?isMobile="${this.isMobile}" preview="${this.preview}" tabindex="0" aria-label="Media time" aria-valuemin="0"></shreddit-progress-bar> `,s=t.x` <shreddit-current-time class="mr-xs" .timeController="${this.timeController}"></shreddit-current-time> `,o=this.isMobile?t.x``:t.x` <shreddit-video-settings .mediaActionsController="${this.mediaActionsController}" .qualityLevels="${this.qualityLevels}" .currentQualityLevelIndex="${this.currentQualityLevelIndex}" ?hide-autoplay-toggle="${this.hideAutoplayToggle}" ?autoplayPref="${this.autoplayPref}" ?isLoggedInUser="${this.isLoggedInUser}"></shreddit-video-settings>`,r=Ie({icon:t.x` ${Me({icon:t.dD,additionalClasses:"hidden expand-icon"})} ${Me({icon:t.dC,additionalClasses:"hidden collapse-icon"})} `,onClick:this.mediaActionsController?.toggleFullscreen,ariaLabel:"Toggle fullscreen",ariaKeyshortcuts:"f",additionalClasses:"fullscreen-button "+(this.hideFullscreenButton?"invisible":"")}),n=Ie({additionalClasses:"embed-s:hidden caption-button",icon:t.x` ${Me({icon:t.ea,additionalClasses:"hidden caption-enabled-icon"})} ${Me({icon:t.eb,additionalClasses:"hidden caption-disabled-icon"})} `,onClick:this.mediaActionsController?.toggleCaptions,ariaLabel:"Toggle captions",ariaKeyshortcuts:"c"}),a=t.x` <shreddit-volume-slider .mediaActionsController="${this.mediaActionsController}" ?isMobile="${this.isMobile}"> ${Ie({icon:t.x` ${Me({icon:t.ec,additionalClasses:"hidden volume-icon"})} ${Me({icon:t.bS,additionalClasses:"hidden mute-icon"})} `,onClick:this.mediaActionsController?.toggleMute,ariaLabel:"Toggle volume",ariaKeyshortcuts:"m",additionalClasses:"mute-button"})} </shreddit-volume-slider> `;return t.x` <div class="controls absolute inset-0 outline-none" tabindex="-1"> <div class="scrim absolute inset-0 pointer-events-none transition-opacity duration-300"></div> <div class="control-bar flex items-center justify-between absolute bottom-0 w-full h-[${50}px] box-border px-2xs pointer-events-auto"> <div class="disappearing-controls embed-s:justify-between flex items-center w-full h-full transition-opacity duration-300"> ${e} ${i} ${s} ${n} ${o} ${r} </div> <div class="flex items-center h-full">${a}</div> </div> </div> `}renderRecommendationOverlay(){return t.x`<slot name="recommendation-overlay"></slot>`}renderErrorOverlay(){return t.x` <shreddit-error-overlay class="bg-black flex items-center justify-center absolute inset-0"></shreddit-error-overlay> `}setPausedState(){this.setAttr(e.ig.PAUSED),this.setAttr(e.ig.PLAYING,!1)}setAttr(e,t=!0){!1===t?this.removeAttribute(e):this.setAttribute(e,!0===t?"":t)}render(){return t.x` <shreddit-loading-spinner class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300"></shreddit-loading-spinner> ${this.gif?this.renderGifControls():t.x` ${this.renderPosterPlayButton()} ${this.renderCaptionOverlay()} ${this.renderErrorOverlay()} ${this.renderRecommendationOverlay()} ${this.renderControls()} `} `}};ze.styles=[Re,e.t],e._([e.n()],ze.prototype,"videoElement",void 0),e._([e.n()],ze.prototype,"mediaActionsController",void 0),e._([e.n({type:Boolean})],ze.prototype,"autoplay",void 0),e._([e.n({type:Boolean})],ze.prototype,"autoplayPref",void 0),e._([e.n({type:Boolean})],ze.prototype,"gif",void 0),e._([e.n({type:Boolean})],ze.prototype,"hideControls",void 0),e._([e.n({type:Boolean})],ze.prototype,"hideFullscreenButton",void 0),e._([e.n({type:Boolean,attribute:"hide-autoplay-toggle"})],ze.prototype,"hideAutoplayToggle",void 0),e._([e.n({type:Boolean})],ze.prototype,"isMobile",void 0),e._([e.n({type:Boolean})],ze.prototype,"isLoggedInUser",void 0),e._([e.n({type:String,attribute:"caption-url"})],ze.prototype,"captionUrl",void 0),e._([e.n({type:String})],ze.prototype,"preview",void 0),e._([e.n()],ze.prototype,"qualityLevels",void 0),e._([e.n()],ze.prototype,"currentQualityLevelIndex",void 0),e._([e.n()],ze.prototype,"postId",void 0),e._([e.n()],ze.prototype,"subredditId",void 0),e._([e.n({type:Boolean})],ze.prototype,"hideGifIcon",void 0),e._([e.y(".control-bar")],ze.prototype,"controlBar",void 0),e._([e.y("shreddit-loading-spinner")],ze.prototype,"loadingSpinner",void 0),e._([e.y("shreddit-current-time")],ze.prototype,"currentTimeElement",void 0),e._([e.y("shreddit-progress-bar")],ze.prototype,"progressBar",void 0),e._([e.y("shreddit-video-settings")],ze.prototype,"videoSettings",void 0),e._([e.y("shreddit-caption-overlay")],ze.prototype,"captionOverlay",void 0),e._([e.y(".caption-button")],ze.prototype,"captionButton",void 0),e._([e.y("shreddit-error-overlay")],ze.prototype,"errorOverlay",void 0),ze=e._([e.e("shreddit-media-ui")],ze);let je=class extends t.s{constructor(){super(...arguments),this.debugLogs=[]}log(e,t){this.debugLogs.push({key:e,value:t}),this.requestUpdate()}render(){return t.x` <div class="flex flex-col bg-black-opacity-80 text-white p-sm"> <h3>Debug info</h3> <div class="grid grid-cols-[1fr_4fr] gap-xs" data-testid="debug-logs"> ${this.debugLogs.map((e=>t.x` <div>${e.key}</div> <div>${e.value}</div> `))} </div> </div> `}};je.styles=[e.t,t.a`:host{position:absolute;top:0;left:0;right:0;bottom:50px;max-height:100%;overflow-y:auto}`],e._([e.n({type:Array})],je.prototype,"debugLogs",void 0),je=e._([e.e("shreddit-player-debug-overlay")],je);let Qe=class extends(e.g(t.s)){constructor(){super(...arguments),this.playbackId=e.aj(),this.subSessionId=e.aj(),this.navigationSessionId=e.aj(),this.videoElement=document.createElement("video"),this.initialized=!1,this.hasHadPlayAttempt=!1,this.playCount=0,this._disconnected=!1,this.authController=new p(this),this.errorController=new g(this),this.hlsController=new T(this),this.mediaActionsController=new $(this),this.mediaSyncController=new H(this),this.mediaVisibilityController=new q(this),this.packagedMediaController=new z(this),this.telemetryController=new oe(this),this.adController=new o(this),this.userIdleController=new de(this),this.volumeController=new N(this),this.gestureController=new E(this),this.mediaHotkeyController=new D(this),this.pageController=new j(this),this.src="",this.autoplay=!1,this.autoplayPref=!1,this.hideAutoplayToggle=!1,this.gif=!1,this.loop=!1,this.hideControls=!1,this.hideFullscreenButton=!1,this.isMobile=!1,this.poster="",this.isLoggedInUser=!1,this.singlePlayback=!1,this.playOutOfViewport=!1,this.objectFit="contain",this.shouldRoundBackground=!1,this.hlsjs16=!1,this.stopLoad=!1,this.hideGifIcon=!1,this.debug=!1,this.qualityLevels=[],this.currentQualityLevelIndex=-1}connectedCallback(){super.connectedCallback(),this.videoElement.poster=this.poster,this._disconnected&&this.reconnect(),this.stopLoad||this.initializeVideoElement()}disconnectedCallback(){this.stop(),this._disconnected=!0,this.initialized=!1,this.stopLoad||(this.stoppedState={currentTime:this.videoElement.currentTime}),super.disconnectedCallback()}firstUpdated(){this.volumeController.setInitialVolumeSetting()}reconnect(){this.adController.fromReconnect=!0,this.autoplay||this.mediaUI?.setPausedState(),!this.stopLoad&&this.hasHadPlayAttempt&&(this._restoreVideoTime(),this.load(e.k7.METADATA)),this._disconnected=!1}get isMp4(){return this.packagedMediaController.hasPackagedMedia}get isHls(){return this.hlsController.isHlsStream&&!this.isMp4}shouldUseFakePosterImage(){return this.gif&&!this.autoplay&&!this.poster}initializeVideoElement(){if(this.initialized)return;this.initialized=!0,this.isMp4&&this.packagedMediaController.initialize(),this.isMp4||this.isHls||(this.videoElement.src=this.src),this._restoreVideoTime(),this.videoElement.playsInline=!0;this.shouldUseFakePosterImage()?(this.videoElement.preload=e.k7.AUTO,this.videoElement.src=this.videoElement.src.concat("#t=.01")):this.videoElement.preload=e.k7.NONE,this.videoElement.tabIndex=-1,this.videoElement.setAttribute("aria-label",String(ce.videoPlayerLabel())),this.videoElement.style.objectFit=this.objectFit,this.shouldRoundBackground&&this.videoElement.classList.add("rounded-4"),this.stoppedState=void 0}async play(e=!1){return this.mediaActionsController.play(e)}async load(t=e.k7.AUTO){return this.mediaActionsController.load(t)}pause(e){return this.mediaActionsController.pause(e)}stop(){this.mediaActionsController.stop()}updateSubSession(){this.subSessionId=e.aj(),this.hlsController.updateCmcdSessionId(this.subSessionId),this.subSessionInstructionTime=void 0,this.subSessionPlayStartTime=void 0,this.subSessionPlayingStartTime=void 0}hideRecommendationOverlay(){this.mediaUI?.recommendationOverlayController?.hideRecommendationOverlay()}_restoreVideoTime(){!this.videoElement.currentTime&&this.stoppedState?.currentTime&&(this.videoElement.currentTime=this.stoppedState?.currentTime)}render(){return t.x` ${this.videoElement} <shreddit-media-ui class="pointer-events-none" .videoElement="${this.videoElement}" .mediaActionsController="${this.mediaActionsController}" .qualityLevels="${this.qualityLevels}" .currentQualityLevelIndex="${this.currentQualityLevelIndex}" .postId="${this.postId}" .subredditId="${this.subredditId}" ?autoplay="${this.autoplay}" ?autoplayPref="${this.autoplayPref}" ?hide-autoplay-toggle="${this.hideAutoplayToggle}" ?gif="${this.gif}" ?hideControls="${this.hideControls}" ?hideFullscreenButton="${this.hideFullscreenButton}" ?isLoggedInUser="${this.isLoggedInUser}" ?isMobile="${this.isMobile}" caption-url="${this.captionUrl}" preview="${this.preview?y(this.preview,this.streamingAuthToken):t.A}" ?hideGifIcon="${this.hideGifIcon}"> <slot name="recommendation-overlay" slot="recommendation-overlay"></slot> </shreddit-media-ui> ${this.debug?t.x`<shreddit-player-debug-overlay></shreddit-player-debug-overlay>`:t.A} `}};return Qe.styles=[t.a`:host{display:block;position:relative;height:100%;width:100%;max-height:100%;max-width:100%}video{height:100%;width:100%;background:#000;outline:0}`,e.t],e._([e.n()],Qe.prototype,"src",void 0),e._([e.n({type:Boolean,reflect:!0})],Qe.prototype,"autoplay",void 0),e._([e.n({type:Boolean,attribute:"autoplay-pref"})],Qe.prototype,"autoplayPref",void 0),e._([e.n({type:Boolean,attribute:"hide-autoplay-toggle"})],Qe.prototype,"hideAutoplayToggle",void 0),e._([e.n({type:Boolean})],Qe.prototype,"gif",void 0),e._([e.n({type:Boolean,attribute:"loop"})],Qe.prototype,"loop",void 0),e._([e.n({type:Number,attribute:"loop-limit"})],Qe.prototype,"loopLimit",void 0),e._([e.n({type:Boolean,attribute:"hide-controls"})],Qe.prototype,"hideControls",void 0),e._([e.n({type:Boolean,attribute:"hide-fullscreen-button"})],Qe.prototype,"hideFullscreenButton",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],Qe.prototype,"isMobile",void 0),e._([e.n({type:String})],Qe.prototype,"poster",void 0),e._([e.n({type:String,attribute:"post-id"})],Qe.prototype,"postId",void 0),e._([e.n({type:String,attribute:"comment-id"})],Qe.prototype,"commentId",void 0),e._([e.n({type:String})],Qe.prototype,"preview",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in-user"})],Qe.prototype,"isLoggedInUser",void 0),e._([e.n({type:Boolean,attribute:"single-playback"})],Qe.prototype,"singlePlayback",void 0),e._([e.n({type:Boolean,attribute:"play-out-of-viewport"})],Qe.prototype,"playOutOfViewport",void 0),e._([e.n({type:String,attribute:"object-fit"})],Qe.prototype,"objectFit",void 0),e._([e.n({type:Boolean,attribute:"should-round-background"})],Qe.prototype,"shouldRoundBackground",void 0),e._([e.n({type:String,attribute:"packaged-media-json"})],Qe.prototype,"packagedMediaJSON",void 0),e._([e.n({type:String,attribute:"packaged-auth-token",reflect:!0})],Qe.prototype,"packagedAuthToken",void 0),e._([e.n({type:String,attribute:"packaged-auth-expires-at",reflect:!0})],Qe.prototype,"packagedAuthExpiresAt",void 0),e._([e.n({type:String,attribute:"streaming-auth-token",reflect:!0})],Qe.prototype,"streamingAuthToken",void 0),e._([e.n({type:String,attribute:"streaming-auth-expires-at",reflect:!0})],Qe.prototype,"streamingAuthExpiresAt",void 0),e._([e.n({type:String,attribute:"caption-url"})],Qe.prototype,"captionUrl",void 0),e._([e.n({attribute:"media-origin"})],Qe.prototype,"mediaOrigin",void 0),e._([e.n({attribute:"player-type"})],Qe.prototype,"playerType",void 0),e._([e.n({attribute:"post-created-at"})],Qe.prototype,"postCreatedAt",void 0),e._([e.n({attribute:"post-domain"})],Qe.prototype,"postDomain",void 0),e._([e.n({type:Boolean,attribute:"post-nsfw"})],Qe.prototype,"postNsfw",void 0),e._([e.n({type:Boolean,attribute:"post-promoted"})],Qe.prototype,"postPromoted",void 0),e._([e.n({type:Boolean,attribute:"post-spoiler"})],Qe.prototype,"postSpoiler",void 0),e._([e.n({type:Number,attribute:"post-score"})],Qe.prototype,"postScore",void 0),e._([e.n({attribute:"post-type"})],Qe.prototype,"postType",void 0),e._([e.n({attribute:"subreddit-name"})],Qe.prototype,"subredditName",void 0),e._([e.n({attribute:"subreddit-id"})],Qe.prototype,"subredditId",void 0),e._([e.n({type:Boolean,attribute:"hlsjs-16"})],Qe.prototype,"hlsjs16",void 0),e._([e.n({type:Boolean,attribute:"stop-load"})],Qe.prototype,"stopLoad",void 0),e._([e.n({type:Boolean,attribute:"hide-gif-icon"})],Qe.prototype,"hideGifIcon",void 0),e._([e.n({type:Boolean,attribute:"debug"})],Qe.prototype,"debug",void 0),e._([e.d()],Qe.prototype,"qualityLevels",void 0),e._([e.d()],Qe.prototype,"currentQualityLevelIndex",void 0),e._([e.y("shreddit-media-ui")],Qe.prototype,"mediaUI",void 0),e._([e.y("shreddit-player-debug-overlay")],Qe.prototype,"debugOverlay",void 0),Qe=e._([e.e("shreddit-player-2")],Qe),{get ShredditPlayer2(){return Qe},setUiStrings:e=>{ce=e}}}));
SML.dm("mentionnode393853ec",["lexicaldeebab1b","shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d","errors9aef8741","utils57a7018c","rendersavedresponsetemplatebysubredditidb78cebab","shredditplayer258778bf6"],(async(e,t,i,r,o)=>{const n={},a={},s=new WeakMap;function d(e,t){const i=t.split(".");let r=function(e){return s.get(e)}(e);if(!r)throw new Error("No config found for the given Editor instance.");for(const e of i){if(!r||!(e in r))return;r=r[e]}return r}function l(e,t){return e.getNodes().some((e=>t(e)||e.getParents().some(t)))}function c(e,t,i){const r=t.getType?.(),{validChildren:o}=d(e.getEditor(),`nodes.${r}`)??{};return!!o&&(o.includes(i.getType())||o.includes("*"))}function p(t,i){const r=e.L.$getSelection(),o=t[0];let n=o;const a=(t,i)=>{if(e.c.$isListItemNode(t)){const e=t.getPreviousSibling();e?e.insertAfter(i):t.getParent()?.insertBefore(i)}else t?.insertBefore(i)};return t.forEach((t=>{if(t.is(o)){if(e.L.$isRangeSelection(r)){const o=r.focus.getNode();if(r.isCollapsed()&&e.L.$isParagraphNode(r.focus.getNode())&&0===r.focus.getNode().getChildrenSize())o.replace(t);else if(e.L.$isTextNode(o)){const e=o.getParent();0!==r.focus.offset&&o.getTextContent()?(r.focus.offset===o.getTextContent().length&&e?.getNextSibling()||!c(i,e,t))&&e?.insertAfter(t):a(e,t)}else a(o,t)}t.isAttached()||e.e.$insertNodeToNearestRoot(t)}else n.insertAfter(t);n=t})),n instanceof e.L.ElementNode?n.selectEnd():(n.getNextSibling()||n.insertAfter(e.L.$createParagraphNode()),n.selectNext()),n}class u extends e.L.ElementNode{constructor(){super(...arguments),this._canBeEmpty=!0}static getType(){return"spoiler"}isInline(){return!0}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme?.spoiler||""),t}updateDOM(){return!1}static importDOM(){return{span:e=>e instanceof HTMLSpanElement&&"isSpoiler"in e.dataset?{conversion:()=>({node:h()}),priority:1}:null}}exportDOM(){const e=document.createElement("span");return e.setAttribute("data-is-spoiler",""),{element:e}}static importJSON(e){const t=h();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{type:u.getType(),children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),version:1}}insertNewAfter(t,i=!0){const r=this.getParentOrThrow().insertNewAfter(t,i);if(e.L.$isElementNode(r)){const e=h();return e._canBeEmpty=!1,r.append(e),e}return null}canBeEmpty(){return!1===this._canBeEmpty?(this._canBeEmpty=!0,!1):this._canBeEmpty}static clone(e){return new u(e.getKey())}}function h(){return new u}var m="top",f="bottom",g="right",_="left",y="auto",v=[m,f,g,_],b="start",x="end",w="viewport",E="popper",S=v.reduce((function(e,t){return e.concat([t+"-"+b,t+"-"+x])}),[]),T=[].concat(v,[y]).reduce((function(e,t){return e.concat([t,t+"-"+b,t+"-"+x])}),[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function O(e){return e?(e.nodeName||"").toLowerCase():null}function L(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function N(e){return e instanceof L(e).Element||e instanceof Element}function $(e){return e instanceof L(e).HTMLElement||e instanceof HTMLElement}function k(e){return"undefined"!=typeof ShadowRoot&&(e instanceof L(e).ShadowRoot||e instanceof ShadowRoot)}var I={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];$(o)&&O(o)&&(Object.assign(o.style,i),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},n=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});$(r)&&O(r)&&(Object.assign(r.style,n),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function C(e){return e.split("-")[0]}var A=Math.max,D=Math.min,U=Math.round;function R(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function P(){return!/^((?!chrome|android).)*safari/i.test(R())}function j(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r=e.getBoundingClientRect(),o=1,n=1;t&&$(e)&&(o=e.offsetWidth>0&&U(r.width)/e.offsetWidth||1,n=e.offsetHeight>0&&U(r.height)/e.offsetHeight||1);var a=(N(e)?L(e):window).visualViewport,s=!P()&&i,d=(r.left+(s&&a?a.offsetLeft:0))/o,l=(r.top+(s&&a?a.offsetTop:0))/n,c=r.width/o,p=r.height/n;return{width:c,height:p,top:l,right:d+c,bottom:l+p,left:d,x:d,y:l}}function H(e){var t=j(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function B(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&k(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function W(e){return L(e).getComputedStyle(e)}function z(e){return["table","td","th"].indexOf(O(e))>=0}function K(e){return((N(e)?e.ownerDocument:e.document)||window.document).documentElement}function V(e){return"html"===O(e)?e:e.assignedSlot||e.parentNode||(k(e)?e.host:null)||K(e)}function F(e){return $(e)&&"fixed"!==W(e).position?e.offsetParent:null}function J(e){for(var t=L(e),i=F(e);i&&z(i)&&"static"===W(i).position;)i=F(i);return i&&("html"===O(i)||"body"===O(i)&&"static"===W(i).position)?t:i||function(e){var t=/firefox/i.test(R());if(/Trident/i.test(R())&&$(e)&&"fixed"===W(e).position)return null;var i=V(e);for(k(i)&&(i=i.host);$(i)&&["html","body"].indexOf(O(i))<0;){var r=W(i);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return i;i=i.parentNode}return null}(e)||t}function G(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function q(e,t,i){return A(e,D(t,i))}function Y(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function X(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}var Q={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,r=e.name,o=e.options,n=i.elements.arrow,a=i.modifiersData.popperOffsets,s=C(i.placement),d=G(s),l=[_,g].indexOf(s)>=0?"height":"width";if(n&&a){var c=function(e,t){return Y("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:X(e,v))}(o.padding,i),p=H(n),u="y"===d?m:_,h="y"===d?f:g,y=i.rects.reference[l]+i.rects.reference[d]-a[d]-i.rects.popper[l],b=a[d]-i.rects.reference[d],x=J(n),w=x?"y"===d?x.clientHeight||0:x.clientWidth||0:0,E=y/2-b/2,S=c[u],T=w-p[l]-c[h],M=w/2-p[l]/2+E,O=q(S,M,T),L=d;i.modifiersData[r]=((t={})[L]=O,t.centerOffset=O-M,t)}},effect:function(e){var t=e.state,i=e.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&B(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Z(e){return e.split("-")[1]}var ee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function te(e){var t,i=e.popper,r=e.popperRect,o=e.placement,n=e.variation,a=e.offsets,s=e.position,d=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,p=e.isFixed,u=a.x,h=void 0===u?0:u,y=a.y,v=void 0===y?0:y,b="function"==typeof c?c({x:h,y:v}):{x:h,y:v};h=b.x,v=b.y;var w=a.hasOwnProperty("x"),E=a.hasOwnProperty("y"),S=_,T=m,M=window;if(l){var O=J(i),N="clientHeight",$="clientWidth";if(O===L(i)&&"static"!==W(O=K(i)).position&&"absolute"===s&&(N="scrollHeight",$="scrollWidth"),o===m||(o===_||o===g)&&n===x)T=f,v-=(p&&O===M&&M.visualViewport?M.visualViewport.height:O[N])-r.height,v*=d?1:-1;if(o===_||(o===m||o===f)&&n===x)S=g,h-=(p&&O===M&&M.visualViewport?M.visualViewport.width:O[$])-r.width,h*=d?1:-1}var k,I=Object.assign({position:s},l&&ee),C=!0===c?function(e,t){var i=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:U(i*o)/o||0,y:U(r*o)/o||0}}({x:h,y:v},L(i)):{x:h,y:v};return h=C.x,v=C.y,d?Object.assign({},I,((k={})[T]=E?"0":"",k[S]=w?"0":"",k.transform=(M.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",k)):Object.assign({},I,((t={})[T]=E?v+"px":"",t[S]=w?h+"px":"",t.transform="",t))}var ie={passive:!0};var re={left:"right",right:"left",bottom:"top",top:"bottom"};function oe(e){return e.replace(/left|right|bottom|top/g,(function(e){return re[e]}))}var ne={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,(function(e){return ne[e]}))}function se(e){var t=L(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function de(e){return j(K(e)).left+se(e).scrollLeft}function le(e){var t=W(e),i=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+o+r)}function ce(e){return["html","body","#document"].indexOf(O(e))>=0?e.ownerDocument.body:$(e)&&le(e)?e:ce(V(e))}function pe(e,t){var i;void 0===t&&(t=[]);var r=ce(e),o=r===(null==(i=e.ownerDocument)?void 0:i.body),n=L(r),a=o?[n].concat(n.visualViewport||[],le(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(pe(V(a)))}function ue(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function he(e,t,i){return t===w?ue(function(e,t){var i=L(e),r=K(e),o=i.visualViewport,n=r.clientWidth,a=r.clientHeight,s=0,d=0;if(o){n=o.width,a=o.height;var l=P();(l||!l&&"fixed"===t)&&(s=o.offsetLeft,d=o.offsetTop)}return{width:n,height:a,x:s+de(e),y:d}}(e,i)):N(t)?function(e,t){var i=j(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):ue(function(e){var t,i=K(e),r=se(e),o=null==(t=e.ownerDocument)?void 0:t.body,n=A(i.scrollWidth,i.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=A(i.scrollHeight,i.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+de(e),d=-r.scrollTop;return"rtl"===W(o||i).direction&&(s+=A(i.clientWidth,o?o.clientWidth:0)-n),{width:n,height:a,x:s,y:d}}(K(e)))}function me(e,t,i,r){var o="clippingParents"===t?function(e){var t=pe(V(e)),i=["absolute","fixed"].indexOf(W(e).position)>=0&&$(e)?J(e):e;return N(i)?t.filter((function(e){return N(e)&&B(e,i)&&"body"!==O(e)})):[]}(e):[].concat(t),n=[].concat(o,[i]),a=n[0],s=n.reduce((function(t,i){var o=he(e,i,r);return t.top=A(o.top,t.top),t.right=D(o.right,t.right),t.bottom=D(o.bottom,t.bottom),t.left=A(o.left,t.left),t}),he(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function fe(e){var t,i=e.reference,r=e.element,o=e.placement,n=o?C(o):null,a=o?Z(o):null,s=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2;switch(n){case m:t={x:s,y:i.y-r.height};break;case f:t={x:s,y:i.y+i.height};break;case g:t={x:i.x+i.width,y:d};break;case _:t={x:i.x-r.width,y:d};break;default:t={x:i.x,y:i.y}}var l=n?G(n):null;if(null!=l){var c="y"===l?"height":"width";switch(a){case b:t[l]=t[l]-(i[c]/2-r[c]/2);break;case x:t[l]=t[l]+(i[c]/2-r[c]/2)}}return t}function ge(e,t){void 0===t&&(t={});var i=t,r=i.placement,o=void 0===r?e.placement:r,n=i.strategy,a=void 0===n?e.strategy:n,s=i.boundary,d=void 0===s?"clippingParents":s,l=i.rootBoundary,c=void 0===l?w:l,p=i.elementContext,u=void 0===p?E:p,h=i.altBoundary,_=void 0!==h&&h,y=i.padding,b=void 0===y?0:y,x=Y("number"!=typeof b?b:X(b,v)),S=u===E?"reference":E,T=e.rects.popper,M=e.elements[_?S:u],O=me(N(M)?M:M.contextElement||K(e.elements.popper),d,c,a),L=j(e.elements.reference),$=fe({reference:L,element:T,strategy:"absolute",placement:o}),k=ue(Object.assign({},T,$)),I=u===E?k:L,C={top:O.top-I.top+x.top,bottom:I.bottom-O.bottom+x.bottom,left:O.left-I.left+x.left,right:I.right-O.right+x.right},A=e.modifiersData.offset;if(u===E&&A){var D=A[o];Object.keys(C).forEach((function(e){var t=[g,f].indexOf(e)>=0?1:-1,i=[m,f].indexOf(e)>=0?"y":"x";C[e]+=D[i]*t}))}return C}function _e(e,t){void 0===t&&(t={});var i=t,r=i.placement,o=i.boundary,n=i.rootBoundary,a=i.padding,s=i.flipVariations,d=i.allowedAutoPlacements,l=void 0===d?T:d,c=Z(r),p=c?s?S:S.filter((function(e){return Z(e)===c})):v,u=p.filter((function(e){return l.indexOf(e)>=0}));0===u.length&&(u=p);var h=u.reduce((function(t,i){return t[i]=ge(e,{placement:i,boundary:o,rootBoundary:n,padding:a})[C(i)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}var ye={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=i.mainAxis,n=void 0===o||o,a=i.altAxis,s=void 0===a||a,d=i.fallbackPlacements,l=i.padding,c=i.boundary,p=i.rootBoundary,u=i.altBoundary,h=i.flipVariations,v=void 0===h||h,x=i.allowedAutoPlacements,w=t.options.placement,E=C(w),S=d||(E===w||!v?[oe(w)]:function(e){if(C(e)===y)return[];var t=oe(e);return[ae(e),t,ae(t)]}(w)),T=[w].concat(S).reduce((function(e,i){return e.concat(C(i)===y?_e(t,{placement:i,boundary:c,rootBoundary:p,padding:l,flipVariations:v,allowedAutoPlacements:x}):i)}),[]),M=t.rects.reference,O=t.rects.popper,L=new Map,N=!0,$=T[0],k=0;k<T.length;k++){var I=T[k],A=C(I),D=Z(I)===b,U=[m,f].indexOf(A)>=0,R=U?"width":"height",P=ge(t,{placement:I,boundary:c,rootBoundary:p,altBoundary:u,padding:l}),j=U?D?g:_:D?f:m;M[R]>O[R]&&(j=oe(j));var H=oe(j),B=[];if(n&&B.push(P[A]<=0),s&&B.push(P[j]<=0,P[H]<=0),B.every((function(e){return e}))){$=I,N=!1;break}L.set(I,B)}if(N)for(var W=function(e){var t=T.find((function(t){var i=L.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return $=t,"break"},z=v?3:1;z>0;z--){if("break"===W(z))break}t.placement!==$&&(t.modifiersData[r]._skip=!0,t.placement=$,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ve(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function be(e){return[m,g,f,_].some((function(t){return e[t]>=0}))}var xe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,r=e.name,o=i.offset,n=void 0===o?[0,0]:o,a=T.reduce((function(e,i){return e[i]=function(e,t,i){var r=C(e),o=[_,m].indexOf(r)>=0?-1:1,n="function"==typeof i?i(Object.assign({},t,{placement:e})):i,a=n[0],s=n[1];return a=a||0,s=(s||0)*o,[_,g].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(i,t.rects,n),e}),{}),s=a[t.placement],d=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=a}};var we={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name,o=i.mainAxis,n=void 0===o||o,a=i.altAxis,s=void 0!==a&&a,d=i.boundary,l=i.rootBoundary,c=i.altBoundary,p=i.padding,u=i.tether,h=void 0===u||u,y=i.tetherOffset,v=void 0===y?0:y,x=ge(t,{boundary:d,rootBoundary:l,padding:p,altBoundary:c}),w=C(t.placement),E=Z(t.placement),S=!E,T=G(w),M="x"===T?"y":"x",O=t.modifiersData.popperOffsets,L=t.rects.reference,N=t.rects.popper,$="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,k="number"==typeof $?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,U={x:0,y:0};if(O){if(n){var R,P="y"===T?m:_,j="y"===T?f:g,B="y"===T?"height":"width",W=O[T],z=W+x[P],K=W-x[j],V=h?-N[B]/2:0,F=E===b?L[B]:N[B],Y=E===b?-N[B]:-L[B],X=t.elements.arrow,Q=h&&X?H(X):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=ee[P],ie=ee[j],re=q(0,L[B],Q[B]),oe=S?L[B]/2-V-re-te-k.mainAxis:F-re-te-k.mainAxis,ne=S?-L[B]/2+V+re+ie+k.mainAxis:Y+re+ie+k.mainAxis,ae=t.elements.arrow&&J(t.elements.arrow),se=ae?"y"===T?ae.clientTop||0:ae.clientLeft||0:0,de=null!=(R=null==I?void 0:I[T])?R:0,le=W+ne-de,ce=q(h?D(z,W+oe-de-se):z,W,h?A(K,le):K);O[T]=ce,U[T]=ce-W}if(s){var pe,ue="x"===T?m:_,he="x"===T?f:g,me=O[M],fe="y"===M?"height":"width",_e=me+x[ue],ye=me-x[he],ve=-1!==[m,_].indexOf(w),be=null!=(pe=null==I?void 0:I[M])?pe:0,xe=ve?_e:me-L[fe]-N[fe]-be+k.altAxis,we=ve?me+L[fe]+N[fe]-be-k.altAxis:ye,Ee=h&&ve?function(e,t,i){var r=q(e,t,i);return r>i?i:r}(xe,me,we):q(h?xe:_e,me,h?we:ye);O[M]=Ee,U[M]=Ee-me}t.modifiersData[r]=U}},requiresIfExists:["offset"]};function Ee(e,t,i){void 0===i&&(i=!1);var r,o,n=$(t),a=$(t)&&function(e){var t=e.getBoundingClientRect(),i=U(t.width)/e.offsetWidth||1,r=U(t.height)/e.offsetHeight||1;return 1!==i||1!==r}(t),s=K(t),d=j(e,a,i),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!i)&&(("body"!==O(t)||le(s))&&(l=(r=t)!==L(r)&&$(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:se(r)),$(t)?((c=j(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=de(s))),{x:d.left+l.scrollLeft-c.x,y:d.top+l.scrollTop-c.y,width:d.width,height:d.height}}function Se(e){var t=new Map,i=new Set,r=[];function o(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||o(e)})),r}var Te={placement:"bottom",modifiers:[],strategy:"absolute"};function Me(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Oe(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,r=void 0===i?[]:i,o=t.defaultOptions,n=void 0===o?Te:o;return function(e,t,i){void 0===i&&(i=n);var o,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Te,n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},d=[],l=!1,c={state:s,setOptions:function(i){var o="function"==typeof i?i(s.options):i;p(),s.options=Object.assign({},n,s.options,o),s.scrollParents={reference:N(e)?pe(e):e.contextElement?pe(e.contextElement):[],popper:pe(t)};var a,l,u=function(e){var t=Se(e);return M.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((a=[].concat(r,s.options.modifiers),l=a.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return s.orderedModifiers=u.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,r=void 0===i?{}:i,o=e.effect;if("function"==typeof o){var n=o({state:s,name:t,instance:c,options:r}),a=function(){};d.push(n||a)}})),c.update()},forceUpdate:function(){if(!l){var e=s.elements,t=e.reference,i=e.popper;if(Me(t,i)){s.rects={reference:Ee(t,J(i),"fixed"===s.options.strategy),popper:H(i)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var o=s.orderedModifiers[r],n=o.fn,a=o.options,d=void 0===a?{}:a,p=o.name;"function"==typeof n&&(s=n({state:s,options:d,name:p,instance:c})||s)}else s.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(e){c.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(o())}))}))),a}),destroy:function(){p(),l=!0}};if(!Me(e,t))return c;function p(){d.forEach((function(e){return e()})),d=[]}return c.setOptions(i).then((function(e){!l&&i.onFirstUpdate&&i.onFirstUpdate(e)})),c}}var Le=Oe({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,r=e.options,o=r.scroll,n=void 0===o||o,a=r.resize,s=void 0===a||a,d=L(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&l.forEach((function(e){e.addEventListener("scroll",i.update,ie)})),s&&d.addEventListener("resize",i.update,ie),function(){n&&l.forEach((function(e){e.removeEventListener("scroll",i.update,ie)})),s&&d.removeEventListener("resize",i.update,ie)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=fe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,r=i.gpuAcceleration,o=void 0===r||r,n=i.adaptive,a=void 0===n||n,s=i.roundOffsets,d=void 0===s||s,l={placement:C(t.placement),variation:Z(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,te(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:d})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,te(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},I,xe,ye,we,Q,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,r=t.rects.reference,o=t.rects.popper,n=t.modifiersData.preventOverflow,a=ge(t,{elementContext:"reference"}),s=ge(t,{altBoundary:!0}),d=ve(a,r),l=ve(s,o,n),c=be(d),p=be(l);t.modifiersData[i]={referenceClippingOffsets:d,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}}]});const Ne=e=>{var i;return e.attributes??(e.attributes={}),(i=e.attributes).type??(i.type="button"),t.r(e)};let $e=r.cV({emoji:()=>"Emoji",emojis:()=>"Emojis",gif:()=>"GIF",reload:()=>"Reload",noResults:()=>"No results",searchGiphy:()=>"Search GIPHY",clearInput:()=>"Clear input",poweredByGiphy:()=>"Powered by GIPHY",missingMediaMessage:()=>"Unable to display image. If this issue persists, try removing and reuploading.",richTextEditorImageAlt:()=>"rich text editor image",addImageButton:()=>"Image",invalidNodePlacementWithinTableErrorMessageVideo:()=>"Unable to insert video inside a table",invalidNodePlacementGenericErrorMessageVideo:()=>"Unable to insert video here",uploadErrorMessageVideo:()=>"Video failed to upload",mediaNotAllowedErrorMessageVideo:()=>"Videos are not allowed",overMediaLimitErrorMessageVideo:e=>t.h({one:`Unable to add more than ${e} video`,other:`Unable to add more than ${e} videos`,count:e}),invalidNodePlacementWithinTableErrorMessage:()=>"Unable to insert image inside a table",invalidNodePlacementGenericErrorMessage:()=>"Unable to insert image here",uploadErrorMessage:()=>"Image failed to upload",mediaNotAllowedErrorMessage:()=>"Images are not allowed",overAttachmentLimitErrorMessage:e=>t.h({one:`Unable to add more than ${e} attachment`,other:`Unable to add more than ${e} attachments`,count:e}),overMediaLimitErrorMessageImage:e=>t.h({one:`Unable to add more than ${e} image`,other:`Unable to add more than ${e} images`,count:e}),unableToReadImageError:()=>"Unable to read the provided image.",invalidUrl:()=>"Invalid URL",editLink:()=>"Edit Link",addLink:()=>"Add Link",closeLinkModal:()=>"Close link modal",text:()=>"Text",link:()=>"Link",cancel:()=>"Cancel",save:()=>"Save",addLinkButton:()=>"Link",linkOptions:()=>"Link Options",editLinkWithUrl:e=>`Edit link: ${e}`,removeLinkWithUrl:e=>`Remove link: ${e}`,bulletList:()=>"Bullet List",numberList:()=>"Number List",captionPlaceholder:()=>"Optional: add a short caption for your image or video",addCaptionPlaceholder:()=>"Add a caption",fileSelectorDragAndDrop:()=>"drag and drop,",fileSelectorAddAnImage:()=>"add an image",fileSelectorOr:()=>", or",fileSelectorAddAVideo:()=>"add a video",unableToUpload:()=>"Unable to upload",remove:()=>"Remove",retry:()=>"Retry",bold:()=>"Bold",italic:()=>"Italic",strikethrough:()=>"Strikethrough",superscript:()=>"Superscript",tableActionsMenu:()=>"Table actions menu",removeHeaderRowStyle:()=>"Remove header row style",makeHeaderRow:()=>"Make header row",insertRowAbove:()=>"Insert row above",insertRowBelow:()=>"Insert row below",deleteRow:()=>"Delete row",insertColumnBefore:()=>"Insert column before",insertColumnAfter:()=>"Insert column after",deleteColumn:()=>"Delete column",alignLeft:()=>"Align left",alignCenter:()=>"Align center",alignRight:()=>"Align right",deleteTable:()=>"Delete table",table:()=>"Table",video:()=>"Video",unableToReadVideoError:()=>"Unable to read the provided video.",unableToDisplayVideoError:()=>"Unable to display video. If this issue persists, try removing and reuploading.",richTextEditorVideoAlt:()=>"rich text editor video",thereAreSomeErrors:()=>"There are some errors",hideFormattingOptions:()=>"Hide formatting options",showFormattingOptions:()=>"Show formatting options",textFormattingToolbar:()=>"text formatting toolbar"}),ke=class extends i.s{constructor(e){super(),this.shown=!1,this.editor=e}static get styles(){return[t.t]}connectedCallback(){super.connectedCallback(),this.classList.add("z-[1001]")}isShown(){return this.shown}show(e){this.shown=!0,this.link=e}hide(){this.shown=!1}onRemove(t){t.preventDefault();let i=this.link?.currentSelection;this.editor.getEditorState().read((()=>{const t=this.link?.nodeKey?e.L.$getNodeByKey(this.link.nodeKey):void 0;return e.L.$isRangeSelection(i)&&l(i,(e=>!!t?.is(e)))}))||this.editor.update((()=>{const t=e.L.$getNodeByKey(this.link.nodeKey)?.getLastChild();t&&(i=e.L.$createRangeSelection(),i.setTextNodeRange(t,t?.getTextContentSize(),t,t.getTextContentSize()))}));const r={currentSelection:i};this.editor?.dispatchCommand(a,r),this.hide()}onEdit(e){e.preventDefault(),this.editor?.dispatchCommand(n,this.link),this.hide()}setEditor(e){this.editor=e}render(){return i.x`<article role="dialog" class="rte-tooltip bg-neutral-background w-fit p-sm flex flex-none flex-nowrap flex-row justify-start items-center box-border rounded-4 shadow-md z-10 absolute left-0 top-0 ${this.shown?"":"hidden"}" aria-labelledby="rte-tooltip-title"> <p class="sr-only" id="rte-tooltip-title">${$e.linkOptions()}</p> <a href="${this.link?.url}" style="max-width:302px" target="_blank" class="truncate inline-block mr-sm"> ${this.link?.url} </a> <div class="mr-sm"> ${Ne({attributes:{onclick:this.onEdit},shape:"pill",appearance:"plain",size:t.s.Small,leadingIcon:i.G({size:i.I.Small}),screenReaderContent:$e.editLinkWithUrl(this.link?.url??"")})} </div> ${Ne({attributes:{onclick:this.onRemove,"data-testid":"remove-link-button"},shape:"pill",appearance:"plain",size:t.s.Small,leadingIcon:i.ab({size:i.I.Small}),screenReaderContent:$e.removeLinkWithUrl(this.link?.url??"")})} </article>`}};t._([t.d()],ke.prototype,"shown",void 0),t._([t.d()],ke.prototype,"link",void 0),ke=t._([t.e("rte-link-tooltip")],ke);const Ie=Symbol("mixins/with-link-tooltip");function Ce(i){if(t.ea(i,Ie))return i;const r=new Map,o=new Map;class n extends i{constructor(){super(...arguments),this.updateTooltipState=t.aB((({forceToHide:t,editor:i}={})=>{const o=this.getKey(),{tooltip:n,popper:a}=r.get(o)??{};n&&i?.getEditorState().read((()=>{const i=e.L.$getSelection(),r=function(t,i){if(!t)return!1;if(!e.L.$isRangeSelection(i))return!1;if(i.anchor.key!==i.focus.key)return!1;return l(i,(e=>e===t))}(e.L.$getNodeByKey(o),i);!t&&r?(n.show({text:this.getTextContent(),url:this.getURL(),nodeKey:this.getKey(),currentSelection:e.L.$isRangeSelection(i)?i:void 0}),a?.update()):n.hide()}))}),100)}remove(...e){this.removeTooltip(this.getKey()),o.get(this.getKey())?.forEach((e=>e())),super.remove(...e)}removeTooltip(e){const{popper:t,tooltip:i}=r.get(e)??{};t?.destroy(),i?.remove()}createDOM(t,i){const n=super.createDOM(t);if(i&&!r.has(this.getKey())){const t=new ke(i),a=Le(n,t),s=i.getRootElement()?.assignedSlot?.getRootNode();s.append(t),r.set(this.getKey(),{popper:a,tooltip:t});const d=[];d.push(i.registerUpdateListener((()=>this.updateTooltipState({editor:i})))),d.push(i.registerCommand(e.L.KEY_ESCAPE_COMMAND,(()=>!!t.isShown()&&(this.updateTooltipState({editor:i,forceToHide:!0}),!0)),e.L.COMMAND_PRIORITY_HIGH));const l=((e,t,i)=>r=>{r.composedPath().includes(t)||e.updateTooltipState({editor:i,forceToHide:!0})})(this,t,i);window.addEventListener("pointerdown",l),d.push((()=>window.removeEventListener("pointerdown",l)));const c=i.getRootElement()?.parentElement,p=()=>{this.updateTooltipState({editor:i,forceToHide:!0})};c?.addEventListener("blur",p),d.push((()=>c?.removeEventListener("blur",p))),o.set(this.getKey(),d)}else if(r.has(this.getKey())){const e=r.get(this.getKey());e.popper=Le(n,e.tooltip)}return n}}return n[Ie]=!0,n}class Ae extends(Ce(e.g.AutoLinkNode)){static getType(){return"reddit-autolink"}static clone(e){return new Ae(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()},e.getKey())}static importJSON(t){return e.g.AutoLinkNode.importJSON(t)}static importDOM(){return e.g.AutoLinkNode.importDOM()}exportJSON(){return{...super.exportJSON(),type:"reddit-autolink",version:1}}}var De;!function(e){e.Small="small",e.Large="large"}(De||(De={}));function Ue(e){if(e instanceof HTMLImageElement){return{node:Pe({src:e.getAttribute("src")??"",mediaId:e.dataset.mediaId??"",mimetype:e.dataset.mimetype??""})}}return null}class Re extends e.L.TextNode{static getType(){return"emote"}static getTheme(e=!1){return["emote","align-text-bottom","[font-size:var(--emote-size)]","[color:transparent]","[caret-color:var(--color-tone-1)]","leading-[--emote-line-height]","before:absolute",...e?["before:bg-[size:--emote-size]","before:w-[--emote-size]","before:h-[--emote-size]"]:["before:origin-top-left","before:scale-[--emote-scale]"],"selection:text-transparent"].join(" ")}static mediaIdToCssClass(e){return`rte-${e.replace(Re.mediaIdReplaceRE,"-")}`}static isEmoji(e){return!!e.match(Re.emojiMediaIdRE)}static addEmoteUrl(e,t){this._styles||(this._styles=new CSSStyleSheet),this._emoteUrls.set(e,t);const i=Re.isEmoji(e),r=Array.from(this._emoteUrls.entries()).map((([e,t])=>i?`.${this.mediaIdToCssClass(e)}::before { background-image: url(${t}); content: ""; }`:`.${this.mediaIdToCssClass(e)}::before { content: url(${t}); }`)).join("\n");this._styles.replaceSync(r),document.adoptedStyleSheets=[...document.adoptedStyleSheets,this._styles]}constructor({src:e,mediaId:t,mimetype:i},r){super("☃",r),this.__src=e,this.__mediaId=t,this.__mimetype=i}get src(){return this.__src}get mediaId(){return this.__mediaId}get mimetype(){return this.__mimetype}createDOM(){const e=super.createDOM({theme:{}});return e.classList.add(...Re.getTheme(Re.isEmoji(this.mediaId)).split(" ")),e.classList.add(Re.mediaIdToCssClass(this.__mediaId)),Re.addEmoteUrl(this.__mediaId,this.__src),e}updateDOM(){return!1}static importDOM(){return{img:e=>e instanceof HTMLImageElement&&e.dataset.mediaId?.startsWith(r.bJ)?{conversion:Ue,priority:1}:null}}static importJSON(e){return Pe({src:e.src,mediaId:e.mediaId,mimetype:e.mimetype})}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("data-media-id",this.__mediaId),e.setAttribute("data-mimetype",this.__mimetype),{element:e}}exportJSON(){return{...super.exportJSON(),type:"emote",src:this.__src,mediaId:this.__mediaId,mimetype:this.__mimetype,version:1}}static clone(e){const{__src:t,__mediaId:i,__mimetype:r,__key:o}=e;return new Re({src:t,mediaId:i,mimetype:r},o)}}function Pe({src:t,mediaId:i,mimetype:r}){const o=new Re({src:t,mediaId:i,mimetype:r}).setMode("token").toggleUnmergeable();return e.L.$applyNodeReplacement(o)}Re._emoteUrls=new Map,Re.mediaIdReplaceRE=/[|:]/g,Re.emojiMediaIdRE=/^:[\w-]+:$/;const je="image-error";async function He(e,t){let i={};try{i=await o.u(e,{bearerToken:t})}catch{}if(i.error)throw new Error(i.error);return i}var Be;!function(e){e[e.Pending=0]="Pending",e[e.Ready=1]="Ready"}(Be||(Be={}));const We="rte-node-ready-state-change-event",ze="rte-node-error-event",Ke="rte-node-error-resolve-event",Ve={type:"REQUEST_FOCUS_COMMAND"},Fe="history-merge";class Je extends e.L.DecoratorNode{constructor({src:e,width:t,height:i,mediaId:r,mimetype:o,uploadStatus:n,file:a,uploadMethod:s,bearerToken:d,caption:l,uploadedUrl:c},p){super(p),this.__src=e,this.__width=t,this.__height=i,this.__mediaId=r,this.__mimetype=o,this.__uploadStatus=n,this.__file=a,this.__uploadedUrl=c,this.__uploadMethod=s,this.__bearerToken=d,this.__caption=l}updateProperties(e){const t=this.getWritable();Object.keys(e).forEach((i=>{t[i]=e[i]}))}upload(e){e.getRootElement()?.dispatchEvent(t.c(We,{resolveReadyState:new Promise(((t,i)=>{this.handleUpload(e).then(t).catch(i)}))},!0))}async uploadPoster(){}async handleUpload(e){try{if(!this.__file)throw new Error(this.missingSourceErrorMessage);e.update((()=>{this.updateProperties({uploadStatus:"inprogress",uploadedUrl:void 0})}),{tag:Fe});const i=Date.now(),r=await this.uploadPoster(),o=await He(this.__file,this.__bearerToken),n=Date.now()-i,a=o?.mediaId??"";e.update((()=>{this.updateProperties({uploadStatus:void 0,uploadTime:n,uploadedUrl:o?.url,...r?{posterUploadedUrl:r}:{},mediaId:a});const i={...this.metadata,mediaId:a,mediaUploadDuration:n};e.getRootElement()?.dispatchEvent(t.c(this.uploadEventKey,i,!0))}),{tag:Fe})}catch(i){throw e.update((()=>{this.updateProperties({uploadStatus:"failed"})}),{tag:Fe}),e.getRootElement()?.dispatchEvent(t.c(this.errorEventKey,{reason:"ERROR"})),new Error(this.uploadErrorMessage)}}set file(e){this.__file=e}set height(e){this.__height=e}set mediaId(e){this.__mediaId=e}set mimetype(e){this.__mimetype=e}set src(e){this.__src=e}set uploadStatus(e){this.__uploadStatus=e}set uploadTime(e){this.__uploadTime=e}set width(e){this.__width=e}set caption(e){this.__caption=e}set uploadedUrl(e){this.__uploadedUrl=e}set posterUploadedUrl(e){this.__posterUploadedUrl=e}get height(){return this.__height}get mediaId(){return this.__mediaId}get mimetype(){return this.__mimetype}get src(){return this.__src}get uploadStatus(){return this.__uploadStatus}get width(){return this.__width}get caption(){return this.__caption}get uploadedUrl(){return this.__uploadedUrl}get posterUploadedUrl(){return this.__posterUploadedUrl}isInline(){return!1}updateDOM(){return!1}}class Ge extends i.s{constructor(){super(...arguments),this.key="",this.allowCaption=!1,this.caption="",this.selected=!1,this.unregisterCallbacks=[],this.handleClick=e=>{e.stopPropagation(),e.shiftKey?this.setSelected(!this.selected):(this.clearSelection(),this.setSelected(!0))}}get captionPlaceholder(){return $e.addCaptionPlaceholder()}get readonly(){return this.editor&&!this.editor.isEditable()}clearSelection(){this.editor?.update((()=>{const t=e.L.$getSelection();e.L.$isNodeSelection(t)&&t.clear()}))}setSelected(t){this.editor?.update((()=>{let i=e.L.$getSelection();e.L.$isNodeSelection(i)||(i=e.L.$createNodeSelection(),e.L.$setSelection(i)),t?i.add(this.key):i.delete(this.key)}))}executeOnNode(t){this.editor?.getEditorState().read((()=>{const i=e.L.$getNodeByKey(this.key);i&&this.isMatchingNodeType(i)&&this.editor?.update((()=>{t(i)}))}))}deleteNode(){this.executeOnNode((e=>{const i=e.getParent(),r=e?.getIndexWithinParent();this.editor?.update((()=>{e.getPreviousSibling()?e.selectPrevious():e.getNextSibling()?e.selectNext():i?.select(r,r),e.remove()})),this.dispatchEvent(t.c(Ke,this.key,!0)),this.dispatchEvent(t.c(this.removeEvent,e.metadata,!0))}))}onDeleteNode(t){return t.stopPropagation(),this.editor?.getEditorState().read((()=>{this.selected&&e.L.$isNodeSelection(e.L.$getSelection())&&this.deleteNode()})),!1}connectedCallback(){super.connectedCallback(),this.readonly||this.mediaElement.then((e=>{e.addEventListener("click",this.handleClick),this.unregisterCallbacks.push((()=>{e.removeEventListener("click",this.handleClick)}))})),this.editor&&!this.readonly&&this.unregisterCallbacks.push(e.e.mergeRegister(this.editor.registerUpdateListener((({editorState:t})=>{t.read((()=>{this.selected=!!e.L.$getNodeByKey(this.key)?.isSelected()}))})),this.editor.registerCommand(e.L.KEY_DELETE_COMMAND,this.onDeleteNode.bind(this),e.L.COMMAND_PRIORITY_LOW),this.editor.registerCommand(e.L.KEY_BACKSPACE_COMMAND,this.onDeleteNode.bind(this),e.L.COMMAND_PRIORITY_LOW)))}disconnectedCallback(){super.disconnectedCallback(),this.unregisterCallbacks.forEach((e=>e()))}onCaptionInput(e){const t=e.target;t.value=t.value.replace(/\n/g,""),t.style.height="",t.style.height=t.scrollHeight+"px"}onCaptionChange(e){const t=e.target;this.executeOnNode((e=>{e.updateProperties({caption:t.value})}))}onKeyUp(t){"Enter"===t.key&&(t.preventDefault(),this.executeOnNode((t=>{t.getNextSibling()||t.insertAfter(e.L.$createParagraphNode()),t.selectNext()})))}updated(t){t.get("selected")&&this.editor?.dispatchCommand(e.L.SELECTION_CHANGE_COMMAND,void 0),super.updated(t)}renderCaptionInput(){const e="font-sans text-12 border-none text-center resize-none w-full box-border outline-none";return this.readonly?this.caption?i.x`<figcaption class="mt-xs ${e}">${this.caption}</figcaption>`:"":i.x`<div class="flex flex-col items-center mt-xs"> <input type="text" class="absolute -left-[99999px]"> <textarea type="text" rows="1" class="${e} rounded-2" placeholder="${this.captionPlaceholder}" ?readonly="${this.readonly}" @input="${this.onCaptionInput}" @change="${this.onCaptionChange}" @click="${e=>{e.stopImmediatePropagation();const t=e.target;t.previousElementSibling&&(t.previousElementSibling.focus(),setTimeout((()=>{t.focus()})))}}" @focus="${e=>{e.stopImmediatePropagation(),this.setSelected(!1)}}" @keyup="${this.onKeyUp}">
${this.caption}</textarea> </div>`}renderDeleteButton(){return i.x`${Ne({size:t.s.Small,shape:"pill",appearance:"media",attributes:{className:"absolute top-xs right-xs z-1",onclick:this.onDeleteNode},leadingIcon:i.ab({size:i.I.Small})})}`}}Ge.styles=[t.t],t._([t.n({type:String})],Ge.prototype,"key",void 0),t._([t.n({type:Boolean,attribute:"allow-caption"})],Ge.prototype,"allowCaption",void 0),t._([t.n({type:String})],Ge.prototype,"caption",void 0),t._([t.n({type:Object})],Ge.prototype,"editor",void 0),t._([t.d()],Ge.prototype,"selected",void 0);class qe extends Ge{constructor(){super(...arguments),this.key="",this.src="",this.mediaId="",this.width=0,this.height=0,this.hasMediaLoadError=!1}getMediaSrc(){return this.src&&!this.hasMediaLoadError?this.src:this.getSrcPlaceholder()}onMediaLoadError(){this.hasMediaLoadError=!0}updated(e){const i=e.get("uploadStatus");void 0!==i&&("failed"===this.uploadStatus?this.dispatchEvent(t.c(ze,this.key,!0)):"failed"===i&&this.dispatchEvent(t.c(Ke,this.key,!0))),super.updated(e)}getAdditionalContainerClassNames(){return""}renderLoading(){return i.x`<div class="absolute top-xs right-xs w-md h-md flex items-center justify-center p-xs bg-secondary-background rounded-full"> <faceplate-progress value="20" class="animate-spin"></faceplate-progress> </div>`}renderMissingMediaMessage(){return i.x`<div class="h-0 basis-100"></div> <div class="flex items-center text-danger-content gap-xs py-xs"> ${i.$({size:i.I.Small})} <div> <div>${this.missingMediaMessage}</div> </div> </div>`}renderFailed(){return i.x`<div class="h-0 basis-100"></div> <div class="flex grow flex-wrap"> <div class="flex grow items-center text-danger-content gap-xs"> ${i.$({size:i.I.Small})} <p class="text-12 leading-4 m-0">${$e.unableToUpload()}</p> </div> <div class="flex gap-s"> ${Ne({appearance:"plain",size:t.s.Small,children:$e.remove(),attributes:{onclick:()=>{this.deleteNode()}}})} ${Ne({appearance:"plain",size:t.s.Small,children:$e.retry(),attributes:{onclick:()=>{this.executeOnNode((e=>{e.upload(this.editor)}))}}})} </div> </div>`}render(){const e="contain-paint box-border";return this.readonly?i.x` <figure class="flex flex-col m-0 ${e} ${this.getAdditionalContainerClassNames()}"> ${this.renderMedia(this.getMediaSrc(),this.onMediaLoadError)} ${this.allowCaption?this.renderCaptionInput():""} </figure> `:i.x` <div class="flex flex-col relative ${this.getAdditionalContainerClassNames()}"> ${"inprogress"===this.uploadStatus?this.renderLoading():this.selected?this.renderDeleteButton():""} <div class="${e} rounded-2 h-full w-full ${this.selected?"shadow-[0_0_0_4px_var(--color-primary-background)]":"hover:shadow-[0_0_0_2px_var(--color-primary-background)]"}"> ${this.renderMedia(this.getMediaSrc(),this.onMediaLoadError)} </div> ${this.allowCaption?this.renderCaptionInput():""} </div> ${"failed"===this.uploadStatus?this.renderFailed():""} ${!this.src||this.hasMediaLoadError?this.renderMissingMediaMessage():""}`}}qe.styles=[i.a`:host{--loader-size:1rem;display:flex;flex-wrap:wrap;position:relative}.contain-paint{contain:paint}`,t.t],t._([t.n({type:String})],qe.prototype,"key",void 0),t._([t.n({type:String})],qe.prototype,"src",void 0),t._([t.n({type:String,attribute:"media-id"})],qe.prototype,"mediaId",void 0),t._([t.n({type:Number})],qe.prototype,"width",void 0),t._([t.n({type:Number})],qe.prototype,"height",void 0),t._([t.n({type:String,attribute:"upload-status"})],qe.prototype,"uploadStatus",void 0),t._([t.n({type:Object})],qe.prototype,"editor",void 0),t._([t.d()],qe.prototype,"hasMediaLoadError",void 0);const Ye=()=>`${window?.CLIENT_CONFIG?.STATIC_BASE_URL}assets/posts-and-comments/broken-image.svg`;let Xe=class extends qe{constructor(){super(...arguments),this.alt="",this.mediaElement=this.image,this.missingMediaMessage=$e.missingMediaMessage(),this.removeEvent="image-remove",this.getSrcPlaceholder=Ye,this.isMatchingNodeType=tt,this.renderMedia=(e,t)=>{const r=[this.height?`max-height: max(20px, ${this.height}px)`:"",this.width?`max-width: max(20px, min(100%, ${this.width}px))`:""],o=this.caption||this.alt||$e.richTextEditorImageAlt();return i.x` <div> <img src="${e}" data-media-id="${this.mediaId}" class="rounded-2 box-border max-w-full max-h-[600px] min-w-[20px] min-h-[20px] block ${"inprogress"===this.uploadStatus||"failed"===this.uploadStatus?"opacity-50":""}" style="${i.l(r.length?r.join(";"):void 0)}" alt="${o}" @error="${t}"> </div> `}}};function Qe(e){if(e instanceof HTMLImageElement){const{src:t,width:i,height:r,alt:o}=e,n=e.dataset.mediaId,a=e.dataset.mimetype??"",s=e.dataset.uploadStatus,d=e.dataset.caption;if(!n)return null;return{node:et({width:i,height:r,src:t,alt:o,mediaId:n,uploadStatus:s,mimetype:a,caption:d})}}return null}t._([t.n({type:String})],Xe.prototype,"alt",void 0),t._([t.g0("img")],Xe.prototype,"image",void 0),Xe=t._([t.e("rte-image")],Xe);class Ze extends Je{get alt(){return this.__alt}static getType(){return"image"}constructor({alt:e,...t},i){super(t,i),this.missingSourceErrorMessage="Image has no provided source",this.uploadErrorMessage="Image failed to upload",this.errorEventKey=je,this.uploadEventKey="image-upload",this.__alt=e??"rich text editor image"}get isGiphy(){return this.__mediaId.startsWith(r.cX)||/giphy\.com/.test(this.__src)}get metadata(){return{mediaWidth:this.__width,mediaHeight:this.__height,mediaId:this.__mediaId,mediaMimetype:this.__mimetype,mediaSize:this.__file?.size,mediaUrl:this.__src,mediaSource:this.__uploadMethod,mediaUploadDuration:this.__uploadTime,mediaFileName:this.__file?.name,mediaCaption:this.__caption,mediaType:"image"}}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme.image||""),t}decorate(e){return i.x`<div> <rte-image src="${this.__src}" media-id="${this.__mediaId}" key="${this.__key}" width="${this.__width}" height="${this.__height}" upload-status="${i.l(this.__uploadStatus)}" .editor="${e}" alt="${this.__alt}" ?allow-caption="${d(e,"plugins.media.allowCaptions")}" caption="${i.l(this.__caption)}"></rte-image> </div> `}updateDOM(){return!1}static importDOM(){return{img:()=>({conversion:Qe,priority:0})}}static importJSON(e){return et({src:e.src,alt:e.alt,height:e.height,width:e.width,mediaId:e.mediaId,mimetype:e.mimetype,uploadStatus:e.uploadStatus,caption:e.caption})}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__alt),e.setAttribute("width",`${this.__width}`),e.setAttribute("height",`${this.__height}`),e.setAttribute("data-media-id",this.__mediaId),e.setAttribute("data-mimetype",this.__mimetype),this.__uploadStatus&&e.setAttribute("data-upload-status",`${this.__uploadStatus}`),e.setAttribute("data-allow-caption",`${this.__allowCaption}`),this.__caption&&e.setAttribute("data-caption",this.__caption),{element:e}}exportJSON(){return{type:"image",src:this.__src,width:this.__width,height:this.__height,alt:this.__alt,mediaId:this.__mediaId,mimetype:this.__mimetype,uploadStatus:this.__uploadStatus,caption:this.__caption,version:1}}static clone(e){const{__src:t,__alt:i,__width:r,__height:o,__mediaId:n,__uploadStatus:a,__file:s,__uploadMethod:d,__key:l,__mimetype:c,__caption:p,__uploadedUrl:u}=e;return new Ze({src:t,alt:i,width:r,height:o,mediaId:n,mimetype:c,uploadStatus:a,file:s,uploadMethod:d,caption:p,uploadedUrl:u},l)}}function et(e){return new Ze(e)}function tt(e){return e instanceof Ze}class it extends(Ce(e.g.LinkNode)){static getType(){return"reddit-link"}static clone(e){return new it(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()},e.getKey())}static importJSON(t){return e.g.LinkNode.importJSON(t)}static importDOM(){return e.g.LinkNode.importDOM()}exportJSON(){return{...super.exportJSON(),type:"reddit-link",version:1}}}const rt="video-error";let ot=class extends qe{constructor(){super(...arguments),this.type="",this.playerUi="desktop",this.mediaElement=this.shredditPlayer,this.missingMediaMessage=$e.unableToDisplayVideoError(),this.removeEvent="video-remove",this.getSrcPlaceholder=()=>this.src,this.isMatchingNodeType=dt,this.getAdditionalContainerClassNames=()=>"w-100",this.renderMedia=(e,t)=>{const r=`\n      --aspect-ratio: ${this.width&&this.height?Math.max(this.width/this.height,1):1};\n      --max-height: 450px;\n    `,o=this.caption||$e.richTextEditorVideoAlt();return i.x` <shreddit-aspect-ratio style="${r}"> <shreddit-player-2 autoplay-pref ?is-mobile="${"mobile"===this.playerUi}" src="${e}" data-media-id="${this.mediaId}" class="rounded-2 h-full w-full max-w-full max-h-[600px] min-w-[20px] min-h-[20px] box-border object-cover block ${"inprogress"===this.uploadStatus||"failed"===this.uploadStatus?"opacity-50":""}" ?hide-controls="${"failed"===this.uploadStatus}" @error="${t}" poster="${this.poster}" poster-alt="${o}"> <source src="${e}" type="${this.type}"> </shreddit-player-2> </shreddit-aspect-ratio> `}}};function nt(e){if(e instanceof HTMLVideoElement){const{width:t,height:i}=e,r=e.dataset.mediaId,o=e.querySelector("source"),n=o?.getAttribute("src")??"",a=o?.getAttribute("type")??"",s=o?.getAttribute("posterUploadedUrl")??"",d=o?.getAttribute("uploadedUrl")??"",l=e.dataset.uploadStatus,c=e.dataset.playerUi??"desktop",p=e.dataset.caption,u=e.poster;if(!r)return null;return{node:st({width:t,height:i,src:n,mediaId:r,uploadStatus:l,mimetype:a,playerUi:c,caption:p,poster:u,posterUploadedUrl:s,uploadedUrl:d})}}return null}t._([t.n({type:String})],ot.prototype,"type",void 0),t._([t.n({type:String})],ot.prototype,"playerUi",void 0),t._([t.n({type:String})],ot.prototype,"poster",void 0),t._([t.g0("shreddit-player-2")],ot.prototype,"shredditPlayer",void 0),ot=t._([t.e("rte-video")],ot);class at extends Je{constructor({playerUi:e,poster:t,posterBlob:i,posterUploadedUrl:r,...o},n){super(o,n),this.missingSourceErrorMessage="Video has no provided source",this.uploadErrorMessage="Video failed to upload",this.errorEventKey=rt,this.uploadEventKey="video-upload",this.__playerUi=e??"desktop",this.__poster=t,this.__posterBlob=i,this.__posterUploadedUrl=r}static clone(e){const{__src:t,__width:i,__height:r,__mediaId:o,__uploadStatus:n,__file:a,__uploadMethod:s,__key:d,__mimetype:l,__playerUi:c,__caption:p,__poster:u,__posterBlob:h,__uploadedUrl:m,__posterUploadedUrl:f}=e;return new at({src:t,width:i,height:r,mediaId:o,mimetype:l,uploadStatus:n,file:a,playerUi:c,uploadMethod:s,caption:p,poster:u,posterBlob:h,uploadedUrl:m,posterUploadedUrl:f},d)}static getType(){return"video"}async getPosterFile(){const e=this.__posterBlob;return e?new File([e],"video-poster"+(this.mediaId?`-${this.mediaId}`:""),{type:e.type}):null}async uploadPoster(){if(!this.poster)throw new Error("Poster not defined for video node");const e=await this.getPosterFile();if(!e)throw new Error("Could not get poster file");const t=await He(e,this.__bearerToken);if(t?.error)throw new Error(`Could not get poster lease: ${t.error}`);return t.url}static importDOM(){return{video:()=>({conversion:nt,priority:0})}}static importJSON(e){return st({src:e.src,height:e.height,width:e.width,mediaId:e.mediaId,mimetype:e.mimetype,playerUi:e.playerUi,uploadStatus:e.uploadStatus,caption:e.caption,poster:e.poster,posterUploadedUrl:e.posterUploadedUrl})}get playerUi(){return this.__playerUi}get poster(){return this.__poster}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme.video||""),t}decorate(e){return i.x` <div> <rte-video src="${this.__src}" media-id="${this.__mediaId}" key="${this.__key}" width="${this.__width}" height="${this.__height}" playerUi="${this.__playerUi}" upload-status="${i.l(this.__uploadStatus)}" ?allow-caption="${d(e,"plugins.media.allowCaptions")}" caption="${i.l(this.__caption)}" poster="${i.l(this.__poster)}" .editor="${e}"></rte-video> </div> `}exportDOM(){const e=document.createElement("video"),t=document.createElement("source");return e.setAttribute("width",`${this.__width}`),e.setAttribute("height",`${this.__height}`),e.setAttribute("data-media-id",this.__mediaId),e.setAttribute("data-player-ui",this.__playerUi),this.__caption&&e.setAttribute("data-caption",this.__caption),this.__poster&&e.setAttribute("poster",this.__poster),t.setAttribute("src",this.__src),t.setAttribute("type",this.__mimetype),e.appendChild(t),{element:e}}exportJSON(){return{type:"video",src:this.__src,width:this.__width,height:this.__height,mediaId:this.__mediaId,mimetype:this.__mimetype,playerUi:this.__playerUi,uploadStatus:this.__uploadStatus,caption:this.__caption,poster:this.__poster,posterUploadedUrl:this.__posterUploadedUrl,version:1}}get metadata(){return{mediaWidth:this.__width,mediaHeight:this.__height,mediaId:this.__mediaId,mediaMimetype:this.__mimetype,mediaSize:this.__file?.size,mediaUrl:this.__src,mediaSource:this.__uploadMethod,mediaUploadDuration:this.__uploadTime,mediaFileName:this.__file?.name,mediaCaption:this.__caption,mediaType:"video"}}}function st({src:e,width:t,height:i,mediaId:r,mimetype:o,uploadStatus:n,file:a,playerUi:s,uploadMethod:d,bearerToken:l,caption:c,poster:p,posterBlob:u}){return new at({src:e,width:t,height:i,mediaId:r,mimetype:o,uploadStatus:n,file:a,playerUi:s,uploadMethod:d,bearerToken:l,caption:c,poster:p,posterBlob:u})}function dt(e){return e instanceof at}const lt=[Ze.getType(),at.getType()];class ct extends Error{constructor(e,t){super(e),this.reason=t}}const pt={};let ut=class extends Ge{constructor(){super(...arguments),this.key="",this.helperText="",this.mediaElement=this.mediaPlaceholder,this.removeEvent="media-placeholder-remove",this.isMatchingNodeType=ft}get captionPlaceholder(){return $e.captionPlaceholder()}focusOnMediaPlaceholderNode(){this.editor?.dispatchCommand(Ve,{}),this.editor?.update((()=>{const t=e.L.$createNodeSelection();t.add(this.key),e.L.$setSelection(t)}))}get metadata(){return{mediaPlaceholderCaption:this.caption,mediaPlaceholderHelperText:this.helperText}}onImageInputClick(){this.dispatchEvent(t.c("media-placeholder-upload-image-click",this.metadata,!0)),this.focusOnMediaPlaceholderNode(),this.editor?.dispatchCommand(pt,{type:"image"})}onVideoInputClick(){this.dispatchEvent(t.c("media-placeholder-upload-video-click",this.metadata,!0)),this.focusOnMediaPlaceholderNode(),this.editor?.dispatchCommand(pt,{type:"video"})}render(){return i.x` <div class="flex flex-col h-full w-full"> <div class="overflow-hidden rounded-4 text-center ${this.readonly?"":this.selected?"shadow-[0_0_0_4px_var(--color-primary-background)]":"hover:shadow-[0_0_0_2px_var(--color-primary-background)]"}" data-is-media-placeholder=""> <div class="border border-coolgray-350 border-dashed pb-2xl pt-2xl rounded-4"> <div class="flex flex-col h-4xl justify-center"> <h4 class="font-semibold m-0 mb-2xs">${this.helperText}</h4> <span class="text-secondary-weak">${$e.fileSelectorDragAndDrop()} <button class="bg-transparent border-none cursor-pointer p-0 text-global-alienblue text-inherit" @click="${this.onImageInputClick}"> ${$e.fileSelectorAddAnImage()}</button>${$e.fileSelectorOr()} <button class="bg-transparent border-none cursor-pointer p-0 text-global-alienblue text-inherit" @click="${this.onVideoInputClick}"> ${$e.fileSelectorAddAVideo()} </button> </span> ${this.selected?this.renderDeleteButton():""} </div> </div> </div> ${this.allowCaption?this.renderCaptionInput():""} </div> `}};function ht(e){if(e instanceof HTMLSpanElement&&"isMediaPlaceholder"in e.dataset){return{node:gt({caption:e.getAttribute("caption")??void 0,helperText:e.getAttribute("helper-text")??void 0})}}return null}ut.styles=[i.a`:host{--loader-size:1rem;display:flex;flex-wrap:wrap;position:relative}`,t.t],t._([t.n({type:String})],ut.prototype,"key",void 0),t._([t.n({type:String,attribute:"helper-text"})],ut.prototype,"helperText",void 0),t._([t.n({type:Object})],ut.prototype,"editor",void 0),t._([t.g0("div[data-is-media-placeholder]")],ut.prototype,"mediaPlaceholder",void 0),ut=t._([t.e("rte-media-placeholder")],ut);class mt extends e.L.DecoratorNode{static getType(){return"mediaplaceholder"}constructor({caption:e,helperText:t},i){super(i),this.__caption=e,this.__helperText=t}updateProperties(e){const t=this.getWritable();Object.keys(e).forEach((i=>{t[i]=e[i]}))}get caption(){return this.__caption}get helperText(){return this.__helperText}get metadata(){return{mediaPlaceholderCaption:this.__caption,mediaPlaceholderHelperText:this.__helperText}}set caption(e){this.__caption=e}set helperText(e){this.__helperText=e}createDOM(e){const t=document.createElement("span");return t.setAttribute("class",e.theme?.mediaplaceholder||""),t}updateDOM(){return!1}static importDOM(){return{span:e=>e instanceof HTMLSpanElement&&"isMediaPlaceholder"in e.dataset?{conversion:ht,priority:1}:null}}exportDOM(){const e=document.createElement("span");return e.setAttribute("data-is-media-placeholder",""),e.setAttribute("caption",this.__caption??""),e.setAttribute("helper-text",this.__helperText??""),{element:e}}static importJSON(e){return gt({caption:e.caption,helperText:e.helperText})}decorate(e){return i.x` <rte-media-placeholder ?allow-caption="${d(e,"plugins.media.allowCaptions")}" caption="${i.l(this.__caption)}" helper-text="${i.l(this.__helperText)}" key="${this.__key}" .editor="${e}"></rte-media-placeholder> `}exportJSON(){return{type:"mediaplaceholder",caption:this.__caption,helperText:this.__helperText,version:1}}static clone(e){return new mt({caption:e.caption,helperText:e.helperText},e.getKey())}isInline(){return!1}}const ft=e=>e instanceof mt;function gt({caption:e,helperText:t}){return new mt({caption:e,helperText:t})}e.L.LineBreakNode.prototype.isInline=()=>!0;const _t=[e.b.HeadingNode,e.c.ListNode,e.c.ListItemNode,e.b.QuoteNode,e.d.CodeNode,e.d.CodeHighlightNode,e.f.TableNode,e.f.TableCellNode,e.f.TableRowNode,it,{replace:e.g.LinkNode,with:e=>new it(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()})},Ae,{replace:e.g.AutoLinkNode,with:e=>new Ae(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()})},u,Ze,Re,at,mt];let yt=class extends i.s{beforeCreateEditor(e){return"function"==typeof this.beforeCreateEditorCallback?this.beforeCreateEditorCallback?.(e):e}createEditor(e){this._rte=e,this._editor=e.getEditor(),"function"==typeof this.createEditorCallback&&this.createEditorCallback?.(e)}};function vt(e){if(e.startsWith("/")){const[,t,i]=e.split("/");return[t.toLowerCase(),i]}const[t,i]=e.split("/");return[t.toLowerCase(),i]}function bt(e){let t=e;0===e.search(/^@[A-Za-z0-9]/)&&(t=e.replace("@","u/"));const[i,r]=vt(t);return[t,i,r]}function xt(e){return{node:Et(e.innerText)}}yt=t._([t.e("rte-plugin")],yt);class wt extends e.L.TextNode{static getType(){return"reddit-mention"}static clone(e){return new wt(e.__text,e.__key)}static importJSON(e){const t=Et(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}constructor(e,t){const[i,r,o]=bt(e);super(i,t),this.__mentionType=r,this.__mentionName=o}moveCursorToTextEnd(){const t=e.L.$getSelection();if(e.L.$isRangeSelection(t)){const e=this.getWritable(),i=e.getTextContentSize();t.setTextNodeRange(e,i,e,i)}}exportJSON(){return{...super.exportJSON(),mentionType:this.getMentionType(),mentionName:this.getMentionName(),type:"reddit-mention",version:1}}getMentionType(){return this.getLatest().__mentionType}getMentionName(){return this.getLatest().__mentionName}setTextContent(e){if(this.__text===e)return this;const[t,i,r]=bt(e),o=super.setTextContent(t);return o.__mentionName=r,o.__mentionType=i,o}createDOM(e){const t=document.createElement("a");return t.textContent=this.__text,t.className="u"===this.getMentionType()?"user-mention":"subreddit-mention",t}updateDOM(e,t){return t.innerText=this.__text,!1}static importDOM(){return{a:e=>e instanceof HTMLAnchorElement&&"isMention"in e.dataset?{conversion:xt,priority:2}:null}}exportDOM(){const e=document.createElement("a");return e.setAttribute("data-is-mention",""),e.innerText=this.__text,{element:e}}canInsertTextBefore(){return!1}isTextEntity(){return!0}}function Et(t){const i=new wt(t);return i.setDetail(2),t.startsWith("@")&&i.moveCursorToTextEnd(),e.L.$applyNodeReplacement(i)}return{$:Pe,A:function(t,i,r){return t.registerNodeTransform(e.L.TextNode,(e=>{try{!i()&&e.hasFormat(r)&&e.toggleFormat(r)}catch(e){}}))},B:function(t,i,r={}){const{collapseBlock:o=!1,fixUpNode:n,nodeHandlers:a}=r,{validChildren:s}=d(i.getEditor(),`nodes.${t.getType()}`);if(s.includes("*"))return()=>{};const l=new Set(s),c=i.getEditor(),p=[c.registerNodeTransform(t,(t=>{!function(t,i,r=[],o){for(const n of r){const a=n.getParentOrThrow();if(o?.[n.getType()])return void o?.[n.getType()]({parent:a,child:n});if(!t.has(n.getType())||i&&r.length>1&&n instanceof e.L.ElementNode&&!n.isInline()){if(e.L.$isLineBreakNode(n))return void n.replace(e.L.$createTextNode(" "));if(n instanceof e.L.ElementNode){const t=!(n.isInline()||n.getFirstChild()instanceof e.L.ElementNode);a.append(...n.getChildren());const i=n===r[r.length-1];t&&!i&&a.append(e.L.$createTextNode(" "))}n.remove()}}}(l,o,t.getChildren(),a)}))];return n&&p.push(c.registerNodeTransform(t,(e=>{e.isDirty()||n(e)}))),e.e.mergeRegister(...p)},C:p,D:pt,E:Re,F:lt,G:je,H:ct,I:Ze,J:rt,K:"open-video-tooltip",L:function(t,i){const r=t.getChildren(),o=r.findIndex((t=>e.L.$isLineBreakNode(t)));if(o>-1){if(r[o].remove(),o===r.length-1){const i=e.L.$createParagraphNode();return t.insertAfter(i),void i.select()}if(0===o){const i=e.L.$createParagraphNode();return void t.insertBefore(i)}if(o>0){const e=i();for(let t=o+1;t<r.length;t++)e.append(r[t]);t.insertAfter(e),e.selectStart()}}},M:mt,N:{},O:"open-image-tooltip",P:function(t,i,r){const o=i.splitText(t.anchor.offset);o[1]||e.k.$isAtNodeEnd(t.focus)?o[0].insertAfter(r):i.insertBefore(r)},Q:{},get R(){return yt},S:_t,T:{},U:a,V:at,W:n,X:{},get Y(){return ke},Z:function(t,i){return i.getEditor()?.registerNodeTransform(t,(r=>{try{r.getTextContent()&&!c(i,r.getParentOrThrow(),t)&&(r.insertBefore(new e.L.TextNode(r.getTextContent())),r.remove(!0))}catch(e){}}))},_:function(e,t){return s.set(e,t)},a:Ve,a0:d,a1:class{constructor(){this.nodeSetMap=new Map}count(){let e=0;for(const[,t]of this.nodeSetMap)e+=t.size;return e}add(e,t){return this.nodeSetMap.has(e)||this.nodeSetMap.set(e,new Set),this.nodeSetMap.get(e).add(t),!0}delete(e,t){return!!this.nodeSetMap.has(e)&&this.nodeSetMap.get(e).delete(t)}countOf(e){return this.nodeSetMap.get(e)?.size??0}},a2:function e(t=document){const i=t.activeElement;return i?i.shadowRoot?e(i.shadowRoot):i:null},a3:We,a4:ze,a5:Ke,get b(){return De},c:function(e){return e instanceof wt},d:c,e:{small:20,large:60},f:128,g:{small:"inherit",large:"1.2em"},h:Ae,i:e=>e instanceof u,j:it,k:wt,l:u,m:gt,n:st,o:et,p:vt,q:Et,r:Ne,s:h,t:"rte-ready-state-change",get u(){return $e},get v(){return Be},w:l,get x(){return Le},y:function(e,...t){return t.some((t=>e.getType()===t.getType()))},z:function(t,i,{isValidPlacement:r=()=>!0,handleFiles:o=()=>{},shouldMergeSameNodeType:n=!1}={}){return function(a){const[s,d]=e.b.eventFiles(a);if(s)return o(a,d),!1;if(n){const t=e.L.$getSelection();if(e.L.$isRangeSelection(t)){const r=t.focus.getNode();if(e.L.$isElementNode(r)&&r.getType()===i.getType()||!e.L.$isElementNode(r)&&r.getTopLevelElement()?.getType()===i.getType())return!1}}let l=null;if(a instanceof DragEvent?l=a.dataTransfer:a instanceof ClipboardEvent&&(l=a.clipboardData),l){const o=l.getData("application/x-lexical-editor");if(o)try{const n=JSON.parse(o);if(Array.isArray(n.nodes)){if(n.nodes.filter((e=>e.type===i.getType())).length){const i=e.j.$generateNodesFromSerializedNodes(n.nodes);return r(i)&&p(i,t),!0}}return!1}catch(e){window.Sentry?.captureMessage?.(`Error importing Lexical string via paste or drop: ${e?.message}`)}const n=l.getData("text/html");if(n)try{const o=(new DOMParser).parseFromString(n,"text/html"),a=e.a.$generateNodesFromDOM(t.getEditor(),o);if(a.some((e=>e.getType()===i.getType()))){if(r(a)){p(a.filter(e.L.$isBlockElementNode),t)}return!0}}catch(e){window.Sentry?.captureMessage?.(`Error importing HTML string via paste or drop: ${e?.message}`)}}return!1}}}}));
SML.dm("unicodeutils36cdbab7",[],(async()=>{var t;!function(t){t[t.bold=1]="bold",t[t.italic=2]="italic",t[t.underline=4]="underline",t[t.strikethrough=8]="strikethrough",t[t.subscript=16]="subscript",t[t.superscript=32]="superscript",t[t.monospace=64]="monospace"}(t||(t={}));const e={LEFT:"L",RIGHT:"R",CENTER:"C"};function o(t){let e=0,o=0;const r=[];for(const n of t)r[e]=o,e++,o+=n.length;return r[e]=o,r}return{A:"gif",B:"blockquote",C:"code",E:"emoji",get F(){return t},H:"h",I:"img",L:"link",P:"par",R:"raw",S:"spoilertext",T:"table",U:"u/",V:"video",a:"text",b:"r/",c:"li",d:"list",e:function(t){let e=0,o=0;const r=[];for(const n of t){for(let t=0;t<n.length;t++)r[o]=e,o++;e++}return r[o]=e,r},f:"br",g:e,h:o,i:"L",j:"C",k:"R",l:"embed",m:"@",n:"p/",o:"c/",p:"hr",q:function(t,e=[]){const r=o(t),n=[];let i=0;for(const[o,s,c]of e){const e=s+c,u=r[s]??s,l=r[e]??e;i<u&&n.push({text:t.substring(i,u),isFormatted:!1}),n.push({text:t.substring(u,l),isFormatted:!0,bitfield:o}),i=l}return i<t.length&&n.push({text:t.slice(i),isFormatted:!1}),n}}}));
SML.dm("index79ae944f",[],(async()=>{var e=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t=/[\0-\x1F\x7F-\x9F]/,i=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,s=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;function a(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e}function r(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===r(e)}function n(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const u={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};const c={"http:":{validate:function(e,t,i){const s=e.slice(t);return i.re.http||(i.re.http=new RegExp("^\\/\\/"+i.re.src_auth+i.re.src_host_port_strict+i.re.src_path,"i")),i.re.http.test(s)?s.match(i.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,i){const s=e.slice(t);return i.re.no_http||(i.re.no_http=new RegExp("^"+i.re.src_auth+"(?:localhost|(?:(?:"+i.re.src_domain+")\\.)+"+i.re.src_domain_root+")"+i.re.src_port+i.re.src_host_terminator+i.re.src_path,"i")),i.re.no_http.test(s)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:s.match(i.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,i){const s=e.slice(t);return i.re.mailto||(i.re.mailto=new RegExp("^"+i.re.src_email_name+"@"+i.re.src_host_strict,"i")),i.re.mailto.test(s)?s.match(i.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function _(a){const u=a.re=function(a){const r={};a=a||{},r.src_Any=e.source,r.src_Cc=t.source,r.src_Z=s.source,r.src_P=i.source,r.src_ZPCc=[r.src_Z,r.src_P,r.src_Cc].join("|"),r.src_ZCc=[r.src_Z,r.src_Cc].join("|");const o="[><｜]";return r.src_pseudo_letter="(?:(?![><｜]|"+r.src_ZPCc+")"+r.src_Any+")",r.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",r.src_auth="(?:(?:(?!"+r.src_ZCc+"|[@/\\[\\]()]).)+@)?",r.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",r.src_host_terminator="(?=$|[><｜]|"+r.src_ZPCc+")(?!"+(a["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+r.src_ZPCc+"))",r.src_path="(?:[/?#](?:(?!"+r.src_ZCc+"|"+o+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+r.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+r.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+r.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+r.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+r.src_ZCc+"|[']).)+\\'|\\'(?="+r.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+r.src_ZCc+"|[.]|$)|"+(a["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+r.src_ZCc+"|$)|;(?!"+r.src_ZCc+"|$)|\\!+(?!"+r.src_ZCc+"|[!]|$)|\\?(?!"+r.src_ZCc+"|[?]|$))+|\\/)?",r.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',r.src_xn="xn--[a-z0-9\\-]{1,59}",r.src_domain_root="(?:"+r.src_xn+"|"+r.src_pseudo_letter+"{1,63})",r.src_domain="(?:"+r.src_xn+"|(?:"+r.src_pseudo_letter+")|(?:"+r.src_pseudo_letter+"(?:-|"+r.src_pseudo_letter+"){0,61}"+r.src_pseudo_letter+"))",r.src_host="(?:(?:(?:(?:"+r.src_domain+")\\.)*"+r.src_domain+"))",r.tpl_host_fuzzy="(?:"+r.src_ip4+"|(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%)))",r.tpl_host_no_ip_fuzzy="(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%))",r.src_host_strict=r.src_host+r.src_host_terminator,r.tpl_host_fuzzy_strict=r.tpl_host_fuzzy+r.src_host_terminator,r.src_host_port_strict=r.src_host+r.src_port+r.src_host_terminator,r.tpl_host_port_fuzzy_strict=r.tpl_host_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_port_no_ip_fuzzy_strict=r.tpl_host_no_ip_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+r.src_ZPCc+"|>|$))",r.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+r.src_ZCc+")("+r.src_email_name+"@"+r.tpl_host_fuzzy_strict+")",r.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+r.src_ZPCc+"))((?![$+<=>^`|｜])"+r.tpl_host_port_fuzzy_strict+r.src_path+")",r.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+r.src_ZPCc+"))((?![$+<=>^`|｜])"+r.tpl_host_port_no_ip_fuzzy_strict+r.src_path+")",r}(a.__opts__),c=a.__tlds__.slice();function l(e){return e.replace("%TLDS%",u.src_tlds)}a.onCompile(),a.__tlds_replaced__||c.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),c.push(u.src_xn),u.src_tlds=c.join("|"),u.email_fuzzy=RegExp(l(u.tpl_email_fuzzy),"i"),u.link_fuzzy=RegExp(l(u.tpl_link_fuzzy),"i"),u.link_no_ip_fuzzy=RegExp(l(u.tpl_link_no_ip_fuzzy),"i"),u.host_fuzzy_test=RegExp(l(u.tpl_host_fuzzy_test),"i");const _=[];function h(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}a.__compiled__={},Object.keys(a.__schemas__).forEach((function(e){const t=a.__schemas__[e];if(null===t)return;const i={validate:null,link:null};if(a.__compiled__[e]=i,"[object Object]"===r(t))return!function(e){return"[object RegExp]"===r(e)}(t.validate)?o(t.validate)?i.validate=t.validate:h(e,t):i.validate=function(e){return function(t,i){const s=t.slice(i);return e.test(s)?s.match(e)[0].length:0}}(t.validate),void(o(t.normalize)?i.normalize=t.normalize:t.normalize?h(e,t):i.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===r(e)}(t)?h(e,t):_.push(e)})),_.forEach((function(e){a.__compiled__[a.__schemas__[e]]&&(a.__compiled__[e].validate=a.__compiled__[a.__schemas__[e]].validate,a.__compiled__[e].normalize=a.__compiled__[a.__schemas__[e]].normalize)})),a.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};const d=Object.keys(a.__compiled__).filter((function(e){return e.length>0&&a.__compiled__[e]})).map(n).join("|");a.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+u.src_ZPCc+"))("+d+")","i"),a.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+u.src_ZPCc+"))("+d+")","ig"),a.re.schema_at_start=RegExp("^"+a.re.schema_search.source,"i"),a.re.pretest=RegExp("("+a.re.schema_test.source+")|("+a.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(a)}function h(e,t){const i=e.__index__,s=e.__last_index__,a=e.__text_cache__.slice(i,s);this.schema=e.__schema__.toLowerCase(),this.index=i+t,this.lastIndex=s+t,this.raw=a,this.text=a,this.url=a}function d(e,t){const i=new h(e,t);return e.__compiled__[i.schema].normalize(i,e),i}function p(e,t){if(!(this instanceof p))return new p(e,t);var i;t||(i=e,Object.keys(i||{}).reduce((function(e,t){return e||u.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=a({},u,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=a({},c,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},_(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,_(this),this},p.prototype.set=function(e){return this.__opts__=a(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,i,s,a,r,o,n,u,c;if(this.re.schema_test.test(e))for(n=this.re.schema_search,n.lastIndex=0;null!==(t=n.exec(e));)if(a=this.testSchemaAt(e,t[2],n.lastIndex),a){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&null!==(i=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=i.index+i[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=i.index+i[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&null!==(s=e.match(this.re.email_fuzzy))&&(r=s.index+s[1].length,o=s.index+s[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=o))),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,i){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,i,this):0},p.prototype.match=function(e){const t=[];let i=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(d(this,i)),i=this.__last_index__);let s=i?e.slice(i):e;for(;this.test(s);)t.push(d(this,i)),s=s.slice(this.__last_index__),i+=this.__last_index__;return t.length?t:null},p.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const i=this.testSchemaAt(e,t[2],t[0].length);return i?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i,d(this,0)):null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,i){return e!==i[t-1]})).reverse(),_(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,_(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){};const m=/\s/,f=(e,t)=>(i,s)=>{if(s>e.length){const t=i[s-e.length-1];if(!t.match(m)){if("/"!==t)return 0;{const t=s-e.length-2;if(t>=0&&!i[t].match(m))return 0}}}const a=i.slice(s);return""===a&&"@"!==e||(t.test(a)?a?.match(t)[0].length??0:0)};var g,b;!function(e){e.All="all",e.Here="here"}(g||(g={})),function(e){e.subreddit="r/",e.subredditFull="/r/",e.profile="u/",e.profileFull="/u/",e.mention="@"}(b||(b={}));const D=new RegExp("^[A-Za-z0-9][A-Za-z0-9_]{0,20}\\b"),y=new RegExp("^[A-Za-z0-9_-]{0,20}"),F=new RegExp("^[A-Za-z0-9_-]{1,20}");b.subreddit;const x={subreddit:{prefix:b.subreddit,config:{validate:f(b.subreddit,D)}},profile:{prefix:b.profile,config:{validate:f(b.profile,y)}},mention:{prefix:b.mention,config:{validate:f(b.mention,F)}},subredditFullUrl:{prefix:b.subreddit,config:{validate:f(b.subreddit,D)}}},k={subredditFull:{prefix:b.subredditFull,config:x.subreddit.config},profileFull:{prefix:b.profileFull,config:x.profile.config}},z={...x,...k},v=["//","ftp:","http:","https:","mailto:"],w=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","اتصالات","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"];var E;!function(e){e.Prefix="{{",e.Suffix="}}",e.PrefixReplacement="{REDDIT_MACRO_START}",e.SuffixReplacement="{REDDIT_MACRO_END}"}(E||(E={}));const A=e=>e.replaceAll(E.Prefix,E.PrefixReplacement).replaceAll(E.Suffix,E.SuffixReplacement),C=e=>e.replaceAll(E.PrefixReplacement,E.Prefix).replaceAll(E.SuffixReplacement,E.Suffix),j=e=>{const t=C(e.raw);return{...e,lastIndex:e.index+t.length,raw:t,text:C(e.text),url:C(e.url)}},B=(new p).tlds(w).set({fuzzyIP:!0}),Z=(new p).tlds(w).set({fuzzyIP:!0,fuzzyLink:!0});var R;return{a:e=>{const t=Z.match(A(e));return t&&1===t.length?t[0].text.search(/http/i)>0?null:j(t[0]):null},b:(R=new p,((e,t)=>(t.forEach((t=>e.add(t,null))),e))(R,v)).set({fuzzyLink:!1,fuzzyEmail:!1}).add(z.mention.prefix,z.mention.config).add(z.subreddit.prefix,z.subreddit.config).add(z.subredditFull.prefix,z.subreddit.config).add(z.profile.prefix,z.profile.config).add(z.profileFull.prefix,z.profile.config),t:e=>{const t=A(e),i=B.match(t);if(i&&1===i.length&&0===i[0].index){const e=i[0];if(e.lastIndex===t.length)return j(e)}return null}}}));
SML.dm("rtjsonToLexical7751b259",["unicodeutils36cdbab7","lexicaldeebab1b","agegatestandaloneclientjsb13e879d","mentionnode393853ec","shelle48e5956","iconc33661e6","index79ae944f"],(async(e,t,n,r,s,o)=>{let i=class extends o.s{constructor(e,t,n){super(),this.unsubscribeFn=[],this.options=[],this.selectedIndex=-1,this.updateOptions=s.aB((async e=>{this.searchOperationAbortController?.abort("Redundant request"),this.searchOperationAbortController=new AbortController;try{this.options=await this.filter(e,{signal:this.searchOperationAbortController.signal}),this.selectedIndex=0}catch(e){if("AbortError"===e.name)throw e}}),128),this.handlePointerDown=e=>{e.preventDefault()},this.handleClick=e=>{const t=e.currentTarget;this.selectedIndex=parseInt(t.dataset.index??"-1"),this.applyCurrentSelection()},this.handlePointerEnter=e=>{const t=e.currentTarget;this.selectedIndex=parseInt(t.dataset.index??"-1")},this.editor=e,this.filter=n,this.mentionNode=t}connectedCallback(){super.connectedCallback();const e=this.editor.registerCommand(t.L.KEY_ARROW_DOWN_COMMAND,(e=>(e.preventDefault(),e.stopImmediatePropagation(),this.incrementSelectedIndex(),!0)),t.L.COMMAND_PRIORITY_HIGH);this.unsubscribeFn.push(e);const n=this.editor.registerCommand(t.L.KEY_ARROW_UP_COMMAND,(e=>(e.preventDefault(),e.stopImmediatePropagation(),this.decrementSelectedIndex(),!0)),t.L.COMMAND_PRIORITY_HIGH);this.unsubscribeFn.push(n);const r=e=>!!this.options.at(this.selectedIndex)&&(e?.preventDefault(),e?.stopImmediatePropagation(),this.applyCurrentSelection(),!0),s=this.editor.registerCommand(t.L.KEY_ENTER_COMMAND,r,t.L.COMMAND_PRIORITY_HIGH);this.unsubscribeFn.push(s);const o=this.editor.registerCommand(t.L.KEY_TAB_COMMAND,r,t.L.COMMAND_PRIORITY_HIGH);this.unsubscribeFn.push(o);const i=this.editor.registerCommand(t.L.KEY_ESCAPE_COMMAND,(e=>(e?.preventDefault(),e?.stopImmediatePropagation(),this.resetOptions(),!0)),t.L.COMMAND_PRIORITY_HIGH);this.unsubscribeFn.push(i)}disconnectedCallback(){this.unsubscribeFn.forEach((e=>e())),super.disconnectedCallback()}scrollToSelectedItem(){const e=this.shadowRoot.querySelector(`[data-index="${this.selectedIndex}"]`);e?.scrollIntoView({block:"end",behavior:"auto"})}static get styles(){return[s.t]}incrementSelectedIndex(){this.selectedIndex=(this.selectedIndex+1)%this.options.length,this.scrollToSelectedItem()}decrementSelectedIndex(){this.selectedIndex=(this.selectedIndex-1+this.options.length)%this.options.length,this.scrollToSelectedItem()}resetOptions(){this.selectedIndex=-1,this.options=[]}applyCurrentSelection(){const e=this.options.at(this.selectedIndex);e&&this.editor.update((()=>{this.mentionNode.setTextContent(e.text);const n=t.L.$createTextNode(" ");this.mentionNode.insertAfter(n);const r=t.L.$createRangeSelection();r.anchor.type="text",r.focus.type="text",r.anchor.key=n.getKey(),r.focus.key=n.getKey(),r.anchor.offset=1,r.focus.offset=1,t.L.$setSelection(r)}))}async setQuery(e){this.updateOptions(e)}renderListOption(e,t){const n=t===this.selectedIndex;return o.x` <li tabindex="-1" class="cursor-pointer m-0 px-md py-sm text-14 leading-5 truncate ${n?"bg-neutral-background-selected text-secondary-onBackground":"text-secondary"}" role="option" aria-selected="${n.toString()}" data-index="${t}" @pointerenter="${this.handlePointerEnter}" @pointerdown="${this.handlePointerDown}" @click="${this.handleClick}"> <span>${e.text}</span> </li> `}renderListOptions(){return o.x` <ul class="list-none m-0 p-0"> ${o.R(this.options,(e=>e.id),((e,t)=>this.renderListOption(e,t)))} </ul> `}render(){return 0===this.options.length?o.x``:o.x` <div aria-label="Mentions autocomplete list" role="listbox" class="overflow-y-auto w-[200px] max-h-[336px] py-xs rounded-2 bg-neutral-background shadow-md"> ${this.renderListOptions()} </div> `}};s._([s.d()],i.prototype,"options",void 0),s._([s.d()],i.prototype,"selectedIndex",void 0),i=s._([s.e("rte-mention-list")],i);const c=/^:.+:$/;var a;function d(n){if(!h(n))return[];switch(n.type){case t.f.TableNode.getType():return function(n){let r=n.children;const s=r[0].children[0].headerState===t.f.TableCellHeaderStates.ROW,o=s?r[0].children.map((t=>{const n=t.children[0],r=function(t){switch(t){case"right":return e.g.RIGHT;case"center":return e.g.CENTER;case"left":return e.g.LEFT;default:return}}(n?.format??null),s={};return s.c=g(t)?f(t.children[0]):[],r&&(s.a=r),s})).filter((e=>null!=e)):[];s&&(r=r.slice(1));return[o,r.map((e=>e.children.map((e=>({c:g(e)?f(e.children[0]):[]})))))]}(n);case t.d.CodeNode.getType():return function(t){const n=t.children.map((e=>p(e,t))).filter(Boolean);return T(n).filter(((t,n,r)=>t.e!==e.f||(n===r.length-1||r[n+1].e===e.f))).map((t=>t.e===e.f?{e:e.R,t:""}:{e:e.R,t:t.t}))}(n);default:return f(n)}}!function(e){e[e.bold=1]="bold",e[e.italic=2]="italic",e[e.strikethrough=4]="strikethrough",e[e.underline=8]="underline",e[e.monospace=16]="monospace",e[e.subscript=32]="subscript",e[e.superscript=64]="superscript"}(a||(a={}));const l=[t.g.AutoLinkNode.getType(),t.g.LinkNode.getType(),r.h.getType(),r.j.getType()];function u(n,r){const s=n.text;return"\0"===s?null:[t.b.HeadingNode.getType(),t.d.CodeNode.getType()].some((e=>r?.type===e))?{e:e.R,t:s}:{e:e.a,t:s,f:s.trim().length>0?m(n):void 0}}function p(n,s){if("linebreak"===n.type)return{e:"br"};const o=d(n);switch(n.type){case r.I.getType():case r.E.getType():{if(n.mediaId.match(c)){const t=n;return{e:e.E,a:t.mediaId,u:t.src}}const t=n;return{e:"image/gif"===t.mimetype?e.A:e.I,id:t.mediaId,c:t.caption}}case r.V.getType():{const t=n;return{e:e.V,id:t.mediaId,c:t.caption}}case t.L.ParagraphNode.getType():return N(o);case t.d.CodeNode.getType():return{e:e.C,c:o};case t.d.CodeHighlightNode.getType():return n.text;case t.b.QuoteNode.getType():{const t=N(o);return{e:e.B,c:[t]}}case r.l.getType():return{e:e.S,c:o};case t.c.ListNode.getType():{const t="number"===n.listType;return{e:e.d,o:t,c:o}}case t.c.ListItemNode.getType():{const t=[e.a,e.S,e.L,e.U,e.b],n=[];let r;for(const s of o)t.includes(s.e)?(r??(r={e:e.P,c:[]})).c.push(s):(r&&(n.push({...r}),r=void 0),n.push(s));r&&n.push(r);return{e:e.c,c:n}}case t.b.HeadingNode.getType():return{e:e.H,l:1,c:o};case t.g.AutoLinkNode.getType():case t.g.LinkNode.getType():case r.h.getType():case r.j.getType():{const t=T(o).find((t=>t.e===e.a));return{e:e.L,t:t?t.t:"",u:n.url,f:t?t.f:void 0}}case r.k.getType():{const e=n,[t,o]=r.p(e.text);return!o||s&&function(e){return l.includes(e.type)}(s)?u(n,s):{e:`${t}/`,t:o,l:!1}}case t.f.TableNode.getType():{const[t,n]=o;return{e:e.T,h:t,c:n}}case t.L.TextNode.getType():case t.L.TabNode.getType():return u(n,s);case r.M.getType():return null;default:return window.Sentry?.captureMessage?.(`Lexical to RTJSON: unimplemented node type: ${n.type}`),null}}const h=e=>!!e?.children;function g(e){const n=e?.children??[];return 0!==n.length&&(1!==n.length||n[0].type!==t.L.ParagraphNode.getType()||0!==(n[0]?.children?.length??0)&&n[0]?.children[0]?.type!==t.L.LineBreakNode.getType())}function m(t,n=!1){const r=t,s=e.e(r.text);return[[y(n?16|r.format:r.format),s[(o=r.text,o.length-o.trimStart().length)],s[r.text.trim().length]]];var o}function f(e){return T(e.children.map((t=>p(t,e))).filter(Boolean))}function T(t){const n=[];let r=null;for(const s of t)s.e===e.a?r?L(r,s):(n.push(s),r=s):(r=null,n.push(s));return n.forEach((t=>{if(t.e===e.a&&t.f){const e=t.f.filter((e=>e[0]>0));t.f=e.length>0?e:void 0}})),n}function N(t){return{e:e.P,c:t?.length?t:[{e:e.a,t:""}]}}function y(t){let n=0;for(const r in a){if(!t)break;if(isNaN(Number(r)))continue;const s=Number(r);if(s===a.underline)continue;if(s&t){const t=a[r];n|=e.F[t]}t&=~s}return n}function L(t,n){const r=e.e(t.t)[t.t.length];t.t+=n.t;const[s,o,i]=n.f?.[0]??[0,0,0];return i>0&&(t.f??(t.f=[])).push([s,o+r,i]),t}function I(s,o){switch(s.e){case e.P:{const e=t.L.$createParagraphNode(),n=b(s,o);return 1===n.length&&"image"===n[0].getType()?n[0]:(e.append(...n),e)}case e.a:return x(s);case e.R:return t.L.$createTextNode(s.t);case e.L:{const e=s.u===s.t?t.g.$createAutoLinkNode(s.u):t.g.$createLinkNode(s.u),n=x(s),r=Array.isArray(n)?n:[n];return e.append(...r),e}case e.S:{const e=r.s();return e.append(...b(s,o)),e}case e.C:{const e=t.d.$createCodeNode();return e.append(...function(e){const n=e.c.reduce(((n,r,s)=>(r.t?.length>0&&n.push(t.L.$createTextNode(r.t)),(0===r.t?.length||s<e.c.length-1)&&n.push(t.L.$createLineBreakNode()),n)),[]);0===e.c[e.c.length-1].t.length&&n.splice(n.length-1,1);return n}(s)),e}case e.f:return t.L.$createLineBreakNode();case e.U:case e.b:return r.q(`${s.e}${s.t}`);case e.B:{const n=t.b.$createQuoteNode();return s.c[0]?.e===e.P?n.append(...b(s.c[0],o)):n.append(...b(s,o)),n}case e.d:{const e=t.c.$createListNode(s.o?"number":"bullet");return e.append(...b(s,o)),e}case e.c:{const e=t.c.$createListItemNode();return e.append(...b(s,o)),e}case e.H:{const e=t.b.$createHeadingNode(`h${s.l}`);return e.append(...b(s,o)),e}case e.I:case e.A:{const t=o[s.id],i=s.e===e.A?"image/gif":t?.mimetype??"";return s.id.startsWith(n.bJ)?r.$({mediaId:s.id,src:t?.src??"",mimetype:i}):r.o({mediaId:s.id,src:t?.src??"",width:t?.width??0,height:t?.height??0,mimetype:i,caption:s?.c})}case e.V:{const e=o[s.id];return r.n({mediaId:s.id,src:e?.src??"",width:e?.width??0,height:e?.height??0,mimetype:e?.mimetype??"",caption:s?.c})}case e.T:return function(e,n){const r=t.f.$createTableNode(),s=e.h.map(E),o=e.h.filter((e=>e.c)).map(((e,r)=>{const o=t.f.$createTableCellNode(t.f.TableCellHeaderStates.ROW),i=b(e,n),c=t.L.$createParagraphNode();return c.append(...i),c.setFormat(s[r]),o.append(c),o})),i=e.c.map((e=>{const r=t.f.$createTableRowNode(),o=e.map(((e,r)=>{const o=t.f.$createTableCellNode(t.f.TableCellHeaderStates.NO_STATUS),i=b(e,n),c=t.L.$createParagraphNode();return c.append(...i),c.setFormat(s[r]),o.append(c),o}));return r.append(...o),r}));if(o.length>0){const e=t.f.$createTableRowNode();e.append(...o),i.splice(0,0,e)}return r.append(...i),r}(s,o);case e.E:return r.$({mediaId:s.a,src:s?.u,mimetype:"image/png"});case"mediaplaceholder":return r.m({caption:s.c,helperText:s.h});default:return window.Sentry?.captureMessage?.(`Lexical to RTJSON: unimplemented node type in rtjson->lexical conversion: ${s.e}`),[]}}function b(e,t){return e.c?.map((e=>I(e,t))).flat()??[]}function x(n){const r=n.f;if(!r)return t.L.$createTextNode(n.t);const s=n.t,o=e.h(s),i=function(e,t){const n=[];let r=0,s=0;for(;r<t;)if(e[s]){const[t,o,i]=e[s];o>r?(n.push([0,r,o-r]),r=o):o===r&&(n.push([t,o,i]),r=o+i,s++)}else n.push([0,r,t-r]),r=t;return n}(r,o.length);return i.flatMap((n=>{const[r,i,c]=n,d=o[i],l=o[i+c],u=s.substring(d,l),p=t.L.$createTextNode(u);return p.setFormat(function(t){let n=0;for(const r in e.F){if(!t)break;if(isNaN(Number(r)))continue;const s=Number(r);if(s&t){const t=e.F[r];n|=a[t]}t&=~s}return n}(r)),p}))}function E(t){switch(t.a){case e.k:return"right";case e.j:return"center";case e.i:return"left";default:return""}}return{B:"\0",R:function(e,n){const r=t.L.$getRoot();r.clear();for(const t of e.document){const e=I(t,n);r.append(...Array.isArray(e)?e:[e])}},get a(){return i},l:function(e){const t={document:[]};for(const n of e.root.children){const e=p(n);e&&t.document.push(e)}return t}}}));
SML.dm("flaireditordb5888e1",["shelle48e5956","iconc33661e6","mentionnode393853ec","rtjsonToLexical7751b259","unicodeutils36cdbab7","communitypickerf331f77f","lexicaldeebab1b"],(async(e,t,i,o,r,s,a)=>{function n(e){let t="";for(const i of e.root.children)t+=l(i);return t}function l(e){switch(e.type){case a.L.ParagraphNode.getType():return e.children.map(l).join("");case a.L.TextNode.getType():{const t=e.text;return t===o.B?"":t}case i.E.getType():return e.mediaId;default:throw new Error("unimplemented type: "+e.type)}}var E;!function(e){e.EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI="EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI",e.EMPTY_CONTENT_REQUIRE_TEXT="EMPTY_CONTENT_REQUIRE_TEXT",e.EMPTY_CONTENT_REQUIRE_EMOJI="EMPTY_CONTENT_REQUIRE_EMOJI",e.MAX_FLAIR_LENGTH_EXCEEDED="MAX_FLAIR_LENGTH_EXCEEDED",e.MAX_EMOJI_COUNT_EXCEEDED="MAX_EMOJI_COUNT_EXCEEDED",e.ONLY_EMOJIS_ALLOWED="ONLY_EMOJIS_ALLOWED",e.EMOJIS_NOT_ALLOWED="EMOJIS_NOT_ALLOWED"}(E||(E={}));const d=(e,t)=>({reason:e,message:c(e,t)}),c=(t,i)=>{switch(t){case E.EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI:return"Text or emoji is required";case E.EMPTY_CONTENT_REQUIRE_TEXT:return"Text is required";case E.EMPTY_CONTENT_REQUIRE_EMOJI:return"Emoji is required";case E.MAX_FLAIR_LENGTH_EXCEEDED:return"Character limit exceeded";case E.ONLY_EMOJIS_ALLOWED:return"Only emojis allowed";case E.EMOJIS_NOT_ALLOWED:return"Emojis aren't allowed";case E.MAX_EMOJI_COUNT_EXCEEDED:{const t=i?.maxEmojiCount??0;return e.h({one:`Exceeds ${t} emoji limit`,other:`Exceeds ${t} emojis limit`,count:t})}}},m=t=>t===e.dZ.Emoji||t===e.dZ.All,h=(t,o)=>{const{allowableContent:r,maxEmojiCount:s=0}=o,l=t.getEditorState(),c=n(l.toJSON()).length,h=(t=>t===e.dZ.Text||t===e.dZ.All)(r),T=m(r);if(0===c)return d(h&&T?E.EMPTY_CONTENT_REQUIRE_TEXT_OR_EMOJI:T?E.EMPTY_CONTENT_REQUIRE_EMOJI:E.EMPTY_CONTENT_REQUIRE_TEXT);if(c>64)return d(E.MAX_FLAIR_LENGTH_EXCEEDED);const _=l.read((()=>a.L.$nodesOfType(i.E).length)),p=l.read((()=>a.L.$nodesOfType(a.L.TextNode).length>0));return!h&&p?d(E.ONLY_EMOJIS_ALLOWED):!T&&_>0?d(E.EMOJIS_NOT_ALLOWED):_>s?d(E.MAX_EMOJI_COUNT_EXCEEDED,{maxEmojiCount:s}):null};function T(){return!0}let _=class extends t.s{constructor(){super(...arguments),this.validateAfterInputChange=!1,this.flairText="",this.validationError=null,this.isEmojiPickerOpen=!1,this.isDirty=!1,this.debouncedValidateUserInput=e.aB(this.validateUserInput,100),this.clearFlairEditor=e=>{e?.preventDefault(),e?.stopPropagation(),this.editor?.update((()=>{const e=a.L.$getRoot();e.clear(),e.append(a.L.$createParagraphNode())})),this.closeEmojiPickerIfOutside(e)},this.onEmojiPickerButtonClick=async e=>{e.preventDefault(),e.stopPropagation(),this.isEmojiPickerOpen=!0,await(this.emojiPickers[0]?.show())},this.closeEmojiPicker=()=>{this.emojiPickers[0]?.close()},this.closeEmojiPickerIfOutside=e=>{const t=this.emojiPickers[0];if(!t||!this.isEmojiPickerOpen)return;const i=t.modal;if(!i)return;const o=e.composedPath();if(!o.includes(i))if(t.close(),o.includes(this))setTimeout((()=>this.editor?.focus()),0);else{const e=o[0];setTimeout((()=>e.focus()),0)}},this.markEmojiPickerAsClosed=()=>{this.isEmojiPickerOpen=!1,document.removeEventListener("click",this.closeEmojiPickerIfOutside)},this.getFlairHtml=()=>this.editor?.getEditorState().read((()=>{const e=a.a.$generateHtmlFromNodes(this.editor),t=(new DOMParser).parseFromString(e,"text/html").body.querySelector("p");return t?.querySelectorAll("span").forEach((e=>{e.style.removeProperty("white-space"),""===e.getAttribute("style")&&e.removeAttribute("style")})),t?.outerHTML??""})),this.getDescriptionText=()=>this.allowableContent===e.dZ.All?s.p(this.maxEmojiCount||0):this.allowableContent===e.dZ.Emoji?s.d(this.maxEmojiCount||0):"Allows text",this.getFlairText=()=>this.flairText}get editorRoot(){return this.editorRoots?.[0]}firstUpdated(){this.initLexicalEditor()}updated(e){if(e.has("text")||e.has("richtext"))return void this.updateLexicalEditorContent();const t=e.has("isEmojiPickerOpen");this.isEmojiPickerOpen&&t&&this.loadAndInitEmojis();const i=e.has("allowableContent")&&!!this.allowableContent,o=e.has("maxEmojiCount")&&!!this.maxEmojiCount;(i||o)&&this.validateUserInput()}disconnectedCallback(){this.emojiPickers[0]?.removeEventListener("faceplate-close",this.markEmojiPickerAsClosed),document.removeEventListener("click",this.closeEmojiPickerIfOutside),super.disconnectedCallback()}validateUserInput(){if(!this.allowableContent||!this.editor)return;if(!(!this.validateAfterInputChange||this.isDirty))return;const e={allowableContent:this.allowableContent,maxEmojiCount:this.maxEmojiCount};this.validationError=h(this.editor,e);const t=this.validationError?"flair-input-invalid":"flair-input-valid";this.dispatchEvent(new CustomEvent(t))}initLexicalEditor(){if(!this.editorRoot)throw new Error("A single child div should be passed into FlairEditor. e.g: <flair-editor><div></div></flair-editor>");this.editorRoot.setAttribute("contenteditable","true"),this.editorRoot.setAttribute("role","textbox"),this.editorRoot.setAttribute("class","outline-none relative"),this.editorRoot.setAttribute("tabindex","1");const t={onError:console.error,editable:!0,nodes:[i.E],namespace:`flair-editor-${this.namespace||Math.random()}`,theme:{paragraph:"m-0"}},o=a.L.createEditor(t);o.setRootElement(this.editorRoot),a.b.registerRichText(o),o.registerUpdateListener((()=>{const t=this.editor?.getEditorState().toJSON(),i=t?n(t):"";this.isDirty=this.isDirty||this.flairText!==i,this.flairText=i,this.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.debouncedValidateUserInput(),t&&this.dispatchEvent(e.c("flair-editor-value-change-event",{flair_text:this.flairText}))})),o.registerCommand(a.L.INSERT_LINE_BREAK_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.INSERT_PARAGRAPH_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.KEY_ENTER_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.FORMAT_ELEMENT_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.FORMAT_TEXT_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.DRAGSTART_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.DRAGOVER_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.DROP_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),o.registerCommand(a.L.INSERT_TAB_COMMAND,T,a.L.COMMAND_PRIORITY_CRITICAL),this.editor=o,this.clearFlairEditor()}setRichText(e){this.editor?.update((()=>{try{o.R({document:[{e:r.P,c:JSON.parse(e)}]},{}),a.L.$setSelection(null)}catch{}}))}setPlainText(e=""){this.editor?.update((()=>{a.L.$getRoot().clear();const t=a.L.$createParagraphNode();t.append(a.L.$createTextNode(e)),a.L.$getRoot().append(t),a.L.$setSelection(null)}))}updateLexicalEditorContent(){this.richtext?this.setRichText(this.richtext):this.setPlainText(this.text||""),this.loadAndInitEmojis()}async loadAndInitEmojis(){await(this.emojiPartials[0]?.load()),this.editor&&this.emojiPickers.length>0&&(this.emojiPickers[0]?.setEditor(this.editor),this.emojiPickers[0]?.addEventListener("faceplate-close",this.markEmojiPickerAsClosed),document.addEventListener("click",this.closeEmojiPickerIfOutside),this.emojiTypeaheads[0]?.setEditor(this.editor))}render(){const i=64-this.flairText.length,o=this.allowableContent&&m(this.allowableContent),r="flex-initial";return t.x` <div class="relative pl-md pr-2xs py-[3px] box-border min-h-[40px] rounded-5 border-sm border-solid ${this.validationError?"border-danger-content":"border-secondary-background"}"> <div class="flex flex-row flex-nowrap items-center focus-within:border-neutral-border-strong cursor-text"> <slot class="block py-2xs text-16 text-tone-1 flex-1" name="editor"></slot> ${this.validationError?t.a1({attributes:{className:"text-danger-content p-xs"},size:t.I.Small}):""} ${this.isEmojiPickerOpen?t.x``:e.r({appearance:"plain",attributes:{className:`emoji-picker-button ${o?"":"hidden"} ${r}`,type:"button","aria-label":"Open emoji picker",disabled:this.isEmojiPickerOpen,onclick:this.onEmojiPickerButtonClick},size:e.s.Small,screenReaderContent:"open emoji picker",leadingIcon:t.b8({size:t.I.Small})})} ${e.r({appearance:"plain",attributes:{className:`clear-button ${r}`,type:"button","aria-label":"Clear",disabled:0===this.flairText.length,onclick:this.clearFlairEditor},size:e.s.Small,screenReaderContent:"clear",leadingIcon:t.a6({size:t.I.Small})})} <slot ?hidden="${!o}" name="emojis"></slot> </div> </div> <div class="flex justify-between items-center pt-2xs px-md"> ${this.validationError?t.x` <span class="text-12 error-message text-danger-content">${this.validationError.message}</span> `:t.x`<span class="text-12">${this.getDescriptionText()}</span>`} <div class="flair-length flex-1 text-right ${i<0?"text-danger-content":"text-secondary-weak"}"> ${i} </div> </div> `}};return _.styles=[t.a`:host{--emote-size:20px;--emote-line-height:inherit}.border-danger-content{border-color:var(--color-danger-content)}`,e.t],e._([e.n({type:String})],_.prototype,"namespace",void 0),e._([e.n({type:String})],_.prototype,"text",void 0),e._([e.n({type:String})],_.prototype,"richtext",void 0),e._([e.n({type:String,attribute:"allowable-content"})],_.prototype,"allowableContent",void 0),e._([e.n({type:Number,attribute:"max-emoji-count"})],_.prototype,"maxEmojiCount",void 0),e._([e.n({type:Boolean,attribute:"validate-after-input-change"})],_.prototype,"validateAfterInputChange",void 0),e._([e.d()],_.prototype,"flairText",void 0),e._([e.d()],_.prototype,"validationError",void 0),e._([e.d()],_.prototype,"isEmojiPickerOpen",void 0),e._([e.j({slot:"editor",flatten:!0,selector:"div"})],_.prototype,"editorRoots",void 0),e._([e.j({slot:"emojis",selector:"faceplate-partial"})],_.prototype,"emojiPartials",void 0),e._([e.j({slot:"emojis",selector:"emoji-picker"})],_.prototype,"emojiPickers",void 0),e._([e.j({slot:"emojis",selector:"emoji-typeahead"})],_.prototype,"emojiTypeaheads",void 0),e._([e.y(".emoji-picker-button")],_.prototype,"emojiPickerButton",void 0),_=e._([e.e("flair-editor")],_),{get F(){return _}}}));
SML.dm("communityauthorflairf5fb1d4d",["shelle48e5956","faceplateradioinput3de18d3b","faceplateformcff507f5","communitypickerf331f77f","flaireditordb5888e1","iconc33661e6"],(async(t,e,i,r,a,s)=>{function l(t){return!!t&&"editable"in t.dataset}let o=class extends(t.C(i.F)){static get styles(){return[i.F.styles,s.a`:host{--styled-scrollbar-background:var(--color-neutral-background-weak)}:host([is-desktop]) slot[name=toggle]{display:none}:host([is-desktop]) .author:hover slot[name=toggle]{display:block}:host(:focus) slot[name=toggle]{display:block}`,t.t]}get flair(){return this.querySelector("div.flair")}get flairTemplateRadioButtons(){return this.querySelectorAll('faceplate-radio-input[name="flairTemplateId"]')}get flairTemplateRadioButton(){return this.querySelector(`faceplate-radio-input[name="flairTemplateId"][value="${this.templateId}"]`)}get clearFlairButton(){return this.querySelector("button.clear-flair")}get submitButton(){return this.querySelector('button[type="submit"]')}get flairEnabledCheckbox(){return this.querySelector('faceplate-checkbox-input[name="flairEnabled"]')}get editorPrompts(){return this.querySelectorAll('div[slot^="flair-edit-prompt-"]')}get editorPrompt(){return this.querySelector(`div[slot^="flair-edit-prompt-${this.templateId}"]`)}get editor(){return this.querySelector("flair-editor")}constructor(){super(),this.isDesktop=!1,this.isMod=!1,this.isOpen=!1,this.handleKeyDown=t=>{const e=t;"Enter"===e.key||" "===e.key?(e.preventDefault(),this.toggleSelector()):"Escape"===e.key&&this.isOpen&&(e.preventDefault(),this.isOpen=!1)},this.onInvalidFlairInput=()=>{this.enableDisableButtons(!1)},this.onValidFlairInput=()=>{this.enableDisableButtons(!0)},this.convertFormDataToGql=e=>{const{flairTemplateId:i,flairText:r,isOwnFlairEnabled:a}=this.currentUserFlairSetting||{},s=this.templateId||void 0,l=Boolean(this.flairEnabledCheckbox?.checked),o=this.isSelectedFlairTemplateEditable()?this.editor?.getFlairText():void 0,n=o&&r!==o||i!==s,d=a!==l,h={subredditId:this.subredditId??"",isEnabled:l,flairTemplateId:s??null,text:o??null,shouldUpdateUserFlair:n,shouldUpdateUserFlairEnabledStatus:d,username:this.username??""};return JSON.stringify({operation:t.O.UpdateUserFlairAndEnabledStatus,variables:h,csrf_token:e.get("csrf_token")})},this.onFaceplateRequest=t=>{t.target===this&&this.enableDisableButtons(!1)},this.onFaceplateResponse=t=>{t.target===this&&this.handleFormResponse(t.detail.response)},this.handleFormResponse=async e=>{this.enableDisableButtons(!0);try{await this.checkSuccessfulResponse(e)?(this.propagateCurrentFlair(),this.showSuccessToast(),this.isOpen=!1):this.showErrorToast(t.ag.QueryBadResponse)}catch(e){this.showErrorToast(t.aI(e))}},this.onFaceplateError=t=>{t.target===this&&this.enableDisableButtons(!0)},this.clearFlair=()=>{this.querySelectorAll('faceplate-radio-input[name="flairTemplateId"][checked]')?.forEach((t=>{t.checked=!1})),this.templateId=void 0,this.flair?.replaceChildren("")},this.clearFlairOnKeyDown=t=>{"Enter"!==t.key&&"Space"!==t.key||this.clearFlair()},this.selectFlairTemplate=t=>{if(!(t.target instanceof e.FaceplateRadioInput)||"string"!=typeof t.target.value)return;this.templateId=t.target.value;const i=l(t.target),r=i?this.editor?this.getEditableFlairContent(this.editor):null:this.getReadonlyFlairContent(t.target);r&&this.updateCurrentFlairDraft(r),i&&this.editor&&(this.editor.richtext=t.target.dataset.richtext,this.editor.text=t.target.dataset.text,this.editor.allowableContent=t.target.dataset.allowableContent?t.target.dataset.allowableContent:void 0,this.editor.maxEmojiCount=t.target.dataset.maxEmojiCount?parseInt(t.target.dataset.maxEmojiCount):void 0)},this.onEditorInput=t=>{if(!this.templateId)return;if(!this.isSelectedFlairTemplateEditable())return;if(!(t.target instanceof a.F))return;const e=this.getEditableFlairContent(t.target);e&&this.updateCurrentFlairDraft(e)},this.encoders={...this.encoders,"application/json":this.convertFormDataToGql}}connectedCallback(){this.clearFlairButton?.addEventListener("click",this.clearFlair),this.clearFlairButton?.addEventListener("keydown",this.clearFlairOnKeyDown),this.flairTemplateRadioButtons.forEach((t=>{t.addEventListener("input",this.selectFlairTemplate)})),this.editor?.addEventListener("input",this.onEditorInput),this.editor?.addEventListener("flair-input-valid",this.onValidFlairInput),this.editor?.addEventListener("flair-input-invalid",this.onInvalidFlairInput),this.addEventListener("faceplate-error",this.onFaceplateError),this.addEventListener("faceplate-request",this.onFaceplateRequest),this.addEventListener("faceplate-response",this.onFaceplateResponse),super.connectedCallback()}disconnectedCallback(){this.removeEventListener("keydown",this.handleKeyDown),this.clearFlairButton?.removeEventListener("click",this.clearFlair),this.clearFlairButton?.removeEventListener("keydown",this.clearFlairOnKeyDown),this.flairTemplateRadioButtons.forEach((t=>{t.removeEventListener("input",this.selectFlairTemplate)})),this.editor?.removeEventListener("input",this.onEditorInput),this.editor?.removeEventListener("flair-input-valid",this.onValidFlairInput),this.editor?.removeEventListener("flair-input-invalid",this.onInvalidFlairInput),this.removeEventListener("faceplate-error",this.onFaceplateError),this.removeEventListener("faceplate-request",this.onFaceplateRequest),this.removeEventListener("faceplate-response",this.onFaceplateResponse),super.disconnectedCallback()}enableDisableButtons(t){this.clearFlairButton&&(this.clearFlairButton.disabled=!t),this.submitButton&&(this.submitButton.disabled=!t)}async checkSuccessfulResponse(t){const e=(await t.json()).data;let i=!0;return e?.updateUserFlair&&(i=i&&e?.updateUserFlair?.ok),e?.updateUserSubredditFlairEnabledStatus&&(i=i&&e?.updateUserSubredditFlairEnabledStatus?.ok),i}showErrorToast(e){this.showAlert("Something went wrong",t.x.error,e)}showSuccessToast(){this.showAlert("User flair updated",t.x.success)}showAlert(e,i,r){this.dispatchEvent(t.c("faceplate-alert",{level:i,message:e,cause:r}))}toggleSelector(){this.isOpen=!this.isOpen,this.setAttribute("aria-expanded",String(this.isOpen))}toggleSelectorOnKeyDown(t){"Enter"!==t.key&&"Space"!==t.key||this.toggleSelector()}getEditableFlairContent(t){const e=t.getFlairHtml();if(!e)return;const i=(new DOMParser).parseFromString(e,"text/html").body.querySelector("p");i?.querySelectorAll("img").forEach((t=>{t.classList.add("flair-image","m-0","h-md","w-md")}));const r=this.querySelector(`faceplate-radio-input[name="flairTemplateId"][value="${this.templateId}"]`)?.querySelector("data")?.cloneNode(!0);return r?.querySelector(".flair-content")?.replaceChildren(...Array.from(i?.childNodes||[])),Array.from(r?.childNodes||[])}getReadonlyFlairContent(t){const e=t.querySelector("data")?.childNodes;if(e)return Array.from(e).map((t=>t.cloneNode(!0)))}updateCurrentFlairDraft(t){this.flair?.replaceChildren(...t)}propagateCurrentFlair(){this.userId&&this.subredditId&&this.publish(t.T.CommunityAuthorFlairUpdated,{userId:this.userId,subredditId:this.subredditId,html:this.flair?.innerHTML.trim()??"",isEnabled:Boolean(this.flairEnabledCheckbox?.checked)||this.isMod})}isSelectedFlairTemplateEditable(){return l(this.flairTemplateRadioButton)}render(){return s.x` <div class="author flex flex-row flex-nowrap items-center gap-xs" tabindex="0" role="button" aria-haspopup="true" aria-expanded="${this.isOpen}" @keydown="${this.handleKeyDown}"> <slot class="block overflow-hidden w-full"></slot> ${this.isOpen?"":s.x`<slot class="toggle" name="toggle" part="toggle-slot" @click="${this.toggleSelector}" @keydown="${this.toggleSelectorOnKeyDown}"></slot>`} </div> ${this.isOpen||this.isMod?s.x` <slot name="selector"></slot> <slot name="divider"></slot> ${this.isSelectedFlairTemplateEditable()?s.x`<slot name="flair-editor-label"></slot><slot name="flair-editor"></slot>`:""} <slot name="settings"></slot> <slot name="actions"></slot> `:""} `}};t._([t.n({type:Boolean,attribute:"is-desktop"})],o.prototype,"isDesktop",void 0),t._([t.n({type:String,attribute:"template-id"})],o.prototype,"templateId",void 0),t._([t.n({type:String,attribute:"user-id"})],o.prototype,"userId",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],o.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],o.prototype,"subredditName",void 0),t._([t.n({type:Object,attribute:"current-user-flair-setting"})],o.prototype,"currentUserFlairSetting",void 0),t._([t.n({type:String,attribute:"username"})],o.prototype,"username",void 0),t._([t.n({type:Boolean,attribute:"is-mod"})],o.prototype,"isMod",void 0),t._([t.d()],o.prototype,"isOpen",void 0),o=t._([t.e("community-author-flair")],o),r.r(o)}));
SML.dm("faceplatebottomsheetheadere0488abf",["shelle48e5956","iconc33661e6"],(async(e,t)=>{let r=class extends t.s{constructor(){super(...arguments),this.hasDivider=!1,this.render=()=>t.x` <slot name="leading"></slot> <slot></slot> <slot name="trailing"></slot> `}static get styles(){return t.a`:host{align-items:center;box-sizing:border-box;display:flex;font-weight:700;height:var(--rem64);min-height:var(--rem64);padding:0 var(--spacer-md);position:relative;width:100%}:host([has-divider])::after{border-bottom:1px solid var(--color-neutral-border);bottom:0;content:'';position:absolute;inset-inline-end:var(--spacer-md);inset-inline-start:var(--spacer-md)}:host>slot:not([name]){display:flex;flex-grow:1;padding:0 var(--spacer-sm);font-size:1rem}`}};return e._([e.n({type:Boolean,reflect:!0,attribute:"has-divider"})],r.prototype,"hasDivider",void 0),r=e._([e.e("faceplate-bottom-sheet-header")],r),{get F(){return r}}}));
SML.dm("usermodactions8edc4734",["shelle48e5956","usermanagement71adb426","iconc33661e6","index5445b738","faceplatetooltipf30979fb","userflairfe275854","agegatestandaloneclientjsb13e879d"],(async(t,e,s,o)=>{const i="user-mod-actions-button";let a=class extends s.s{constructor(){super(...arguments),this.active=!1,this.isSmall=!1,this.isPlain=!1}static get styles(){return[t.t,t.z(".button-caution {\n  --button-color-background-default: var(--color-button-caution-background);\n  --button-color-background-hover: var(--color-button-caution-background-hover);\n  --button-color-background-disabled: var(--color-button-caution-background-disabled);\n  --button-color-text-default: var(--color-button-caution-text);\n}\n")]}getTooltipText(){if(!this.action)return s.x``;const o={[e.o.Ban]:this.active?"Unban":"Ban",[e.o.Mute]:this.active?"Unmute":"Mute"}[this.action];let i;this.active&&(void 0!==this.daysTotal?i={[e.o.Ban]:t.h({one:`${this.daysTotal} day ban.`,other:`${this.daysTotal} days ban.`,count:this.daysTotal||0}),[e.o.Mute]:t.h({one:`${this.daysTotal} day mute.`,other:`${this.daysTotal} days mute.`,count:this.daysTotal||0})}[this.action]:this.action===e.o.Ban&&(i="Permanent ban"));let a="";return i&&void 0!==this.daysLeft&&(a=this.active&&!this.daysLeft?"":t.h({one:` ${this.daysLeft} day left.`,other:` ${this.daysLeft} days left.`,count:this.daysLeft||0})),s.x` <div class="font-semibold">${o}</div> ${i}${a} `}render(){return s.x`<faceplate-tracker source="moderator" action="click" noun="${s.l(this.action&&(o=this.action,i=this.active,(i?{[e.o.Mute]:"unmute",[e.o.Ban]:"unban"}:{[e.o.Mute]:"mute_flow",[e.o.Ban]:"ban_flow"})[o]))}"><faceplate-tooltip enter-delay="${50}" appearance="inverted" position="top"> ${t.r({appearance:this.isPlain||this.active?"plain":"secondary",size:this.isSmall?t.s.Small:t.s.Medium,attributes:{slot:"trigger"},leadingIcon:s.x`<slot name="${this.active?"icon-active":"icon"}"></slot>`})} ${this.getTooltipText()} </faceplate-tooltip></faceplate-tracker>`;var o,i}};t._([t.n({type:Boolean})],a.prototype,"active",void 0),t._([t.n({type:String})],a.prototype,"action",void 0),t._([t.n({attribute:"days-total",type:Number})],a.prototype,"daysTotal",void 0),t._([t.n({attribute:"days-left",type:Number})],a.prototype,"daysLeft",void 0),t._([t.n({type:Boolean,attribute:"is-small"})],a.prototype,"isSmall",void 0),t._([t.n({type:Boolean,attribute:"is-plain"})],a.prototype,"isPlain",void 0),a=t._([t.e(i)],a);const n=(t,e)=>t.operation===e;class r{constructor(s,i){this.userModActions=s,this.action=i,this.handleUserUnrestricted=async t=>{t&&t.subredditId===this.userModActions.subredditId&&t.userId===this.userModActions.userId&&(t.acked||(t.acked=!0,this.showStateChangeNotification(!1)),this.handleStateChange(!1))},this.resetUserRestriction=async()=>{const{userModActions:s,userModActions:{requestClientGQL:o,userId:i,subredditId:a}}=this;if(s.requestPending)return;s.requestPending=!0;const r=await o({operation:{[e.o.Ban]:t.O.UnbanSubredditUser,[e.o.Mute]:t.O.UnmuteMember}[this.action],variables:{input:{userId:i,subredditId:a}}}),d={[e.o.Ban]:n(r,t.O.UnbanSubredditUser)&&r.data.unbanSubredditUser?.ok,[e.o.Mute]:n(r,t.O.UnmuteMember)&&r.data.unmuteMember?.ok}[this.action]&&!r.errors.length;s.requestPending=!1,d&&this.userModActions.publish({[e.o.Ban]:t.T.UserModActionsUnban,[e.o.Mute]:t.T.UserModActionsUnmute}[this.action],{subredditId:this.userModActions.subredditId,userId:this.userModActions.userId})},this.openModal=async()=>{const{modOverlayDisplay:t}=this.userModActions,s={[e.o.Ban]:o.a,[e.o.Mute]:o.b}[this.action];t?.setAttribute("overlay-id",s),await(t?.updateComplete);const{banModal:i,muteModal:a}=this.userModActions,n={[e.o.Ban]:i,[e.o.Mute]:a}[this.action];n&&(this.showModalAndListenForDismissal(n),await this.loadModal(n),this.showModalContent(n))},this.handleUserRestricted=t=>{t&&t.subredditId===this.userModActions.subredditId&&t.userId===this.userModActions.userId&&(t.acked||(t.acked=!0,this.showStateChangeNotification(!0)),{[e.o.Ban]:this.userModActions.handleBanModalDismiss,[e.o.Mute]:this.userModActions.handleMuteModalDismiss}[this.action](),this.handleStateChange(!0,t?.daysTotal))},this.handleFailure=()=>{this.showStateChangeNotification(!1,!0)},this.showModalAndListenForDismissal=t=>{const{handleBanModalDismiss:s,handleMuteModalDismiss:o,banModalCloseButton:i,muteModalCloseButton:a}=this.userModActions,[n,r]={[e.o.Ban]:[s,i],[e.o.Mute]:[o,a]}[this.action];setTimeout((()=>{t.showModal()})),r?.addEventListener("click",n)},this.loadModal=async t=>{const{subredditId:s,userName:i,thingId:a,isDesktop:n}=this.userModActions,r={[e.o.Ban]:o.c,[e.o.Mute]:o.d}[this.action],d={[e.o.Ban]:()=>`Ban u/${i}`,[e.o.Mute]:()=>`Mute u/${i}`}[this.action],l={[e.o.Ban]:e.p,[e.o.Mute]:e.q}[this.action];t.querySelector(`#${l}`).textContent=d();const u=t.querySelector("faceplate-partial");if(!u)return;u.src=`${r}/${s}/${i}/`,this.action===e.o.Ban&&(u.src=`${r}/${s}/${i}/${a}`);const c=t.querySelector("shreddit-async-loader");await Promise.allSettled([c?.load(),u?.load()]),n||setTimeout((()=>{t.recalculateCachedHeight()}))},this.showModalContent=t=>{const[s,o]={[e.o.Ban]:[e.r,e.s],[e.o.Mute]:[e.t,e.u]}[this.action],i=t.querySelector(`#${s}`),a=t.querySelector(`#${o}`);i?.classList.add("hidden"),a?.classList.remove("hidden")},this.hideModalContent=t=>{const[s,o]={[e.o.Ban]:[e.r,e.s],[e.o.Mute]:[e.t,e.u]}[this.action],i=t.querySelector(`#${s}`),a=t.querySelector(`#${o}`);i?.classList.remove("hidden"),a?.classList.add("hidden")}}setButtonState(t,s){const a=this.userModActions.actionElements.get(this.action)?.element;if(!a)return;const n=a.closest(i)??void 0;n&&(n.active=t,n.daysTotal=s,n.daysLeft=s);const r=(t?{[e.o.Ban]:"Unban",[e.o.Mute]:"Unmute"}:{[e.o.Ban]:"Ban",[e.o.Mute]:"Mute"})[this.action],d=a.querySelector(`#${o.e}`)??void 0;d&&(d.textContent=r)}showStateChangeNotification(s,o){const{userModActions:i,userModActions:{userName:a}}=this;o?i.dispatchEvent(t.c("faceplate-alert",{level:t.x.error,message:"Something went wrong",cause:t.ag.QueryBadResponse})):i.dispatchEvent(t.c("faceplate-alert",{level:t.x.info,message:{[e.o.Ban]:s?`u/${a} was banned successfully`:`u/${a} was unbanned successfully`,[e.o.Mute]:s?`u/${a} was muted successfully`:`u/${a} was unmuted successfully`}[this.action]}))}handleStateChange(t,s){this.userModActions[{[e.o.Ban]:"userIsBanned",[e.o.Mute]:"userIsMuted"}[this.action]]=t,this.setButtonState(t,s)}}const d=t.C(s.s);let l=class extends d{get modOverlayDisplay(){return document.querySelector(`${this.isDesktop?"shreddit-overlay-display":"div"}[id="${t.g_}"]`)}get muteModal(){const t=`${this.isDesktop?"faceplate-dialog":"faceplate-bottom-sheet"}[id="${e.c}"]`;return this.isDesktop?this.modOverlayDisplay?.shadowRoot?.querySelector(t):this.modOverlayDisplay?.querySelector(t)}get banModal(){const t=`${this.isDesktop?"faceplate-dialog":"faceplate-bottom-sheet"}[id="${e.a}"]`;return this.isDesktop?this.modOverlayDisplay?.shadowRoot?.querySelector(t):this.modOverlayDisplay?.querySelector(t)}get muteModalCloseButton(){return this.muteModal?.querySelector(`button[id=${e.g}]`)}get banModalCloseButton(){return this.banModal?.querySelector(`button[id=${e.f}]`)}async firstUpdated(t){await this.loadLastNote()}assignActionElementsAndEventHandlers(){for(const[t,s]of[[e.o.Ban,this.handleClickBan],[e.o.Mute,this.handleClickMute],[e.o.SendModMail,this.handleModmailClick],[e.o.AddModNote,this.handleClickAddModNote],[e.o.EditUserFlair,this.handleClickUserFlair],[e.o.UserModLog,this.handleClickUserModLog],[e.o.ReportUser,this.handleReportClick],[e.o.OpenDetailedView,this.handleOpenUserProfileClick]]){const e=this.querySelector(`[data-mod-action=${t}]`)??void 0;e?.addEventListener("click",s),this.actionElements.set(t,{element:e,clickHandler:s})}}handleReportClick(){window.open("https://support.reddithelp.com/hc/articles/360043479851-How-do-I-report-a-user-","_blank")}setupTopicSubscriptions(){Object.entries(this.topicSubscriptions).forEach((([t,e])=>this.subscribe(t,e)))}teardownTopicSubscriptions(){Object.entries(this.topicSubscriptions).forEach((([t,e])=>this.unsubscribe(t,e)))}constructor(){super(),this.subredditName="",this.userIsBanned=!1,this.userIsMuted=!1,this.userName="",this.userId="",this.subredditId="",this.postId="",this.thingId="",this.isDesktop=!1,this.requestPending=!1,this.actionElements=new Map,this.muteController=new r(this,e.o.Mute),this.banController=new r(this,e.o.Ban),this.requestClientGQL=t.B,this.loadLastNote=async()=>{const t=this.querySelector('faceplate-partial[id="last-mod-note-partial"]'),e=this.querySelector('shreddit-async-loader[id="last-mod-note-async-loader"]');t&&e&&(await e.load(),await t.load())},this.handleClickMute=()=>this.userIsMuted?this.muteController.resetUserRestriction():this.muteController.openModal(),this.handleUserMuted=this.muteController.handleUserRestricted,this.handleUserUnmuted=this.muteController.handleUserUnrestricted,this.handleBanFailure=this.muteController.handleFailure,this.handleMuteFailure=this.muteController.handleFailure,this.handleMuteModalDismiss=()=>{this.muteModalCloseButton?.removeEventListener("click",this.handleMuteModalDismiss),this.muteModal&&(this.muteController.hideModalContent(this.muteModal),this.muteModal.close())},this.handleClickBan=()=>this.userIsBanned?this.banController.resetUserRestriction():this.banController.openModal(),this.handleUserBanned=this.banController.handleUserRestricted,this.handleUserUnbanned=this.banController.handleUserUnrestricted,this.handleBanModalDismiss=()=>{this.banModalCloseButton?.removeEventListener("click",this.handleBanModalDismiss),this.banModal&&(this.banController.hideModalContent(this.banModal),this.banModal.close())},this.handleClickUserFlair=()=>{this.publish(t.T.ModNotesOpenUserFlairEdditor)},this.handleModmailClick=()=>{window.open(`https://mod.reddit.com/mail/create?toSubredditName=${this.subredditName}&toUserName=${this.userName}`,"_blank")},this.handleOpenUserProfileClick=()=>{window.open(`https://www.reddit.com/user/${this.userName}`,"_blank")},this.handleClickAddModNote=()=>{this.publish(t.T.ModNotesOpenLogFocus)},this.handleClickUserModLog=()=>{this.publish(t.T.ModNotesOpenLog)},this.topicSubscriptions={[t.T.UserModActionsMute]:this.handleUserMuted,[t.T.UserModActionsMuteCancel]:this.handleMuteModalDismiss,[t.T.UserModActionsUnmute]:this.handleUserUnmuted,[t.T.UserModActionsBan]:this.handleUserBanned,[t.T.UserModActionsBanCancel]:this.handleBanModalDismiss,[t.T.UserModActionsUnban]:this.handleUserUnbanned,[t.T.UserModActionsBanFailure]:this.handleBanFailure,[t.T.UserModActionsMuteFailure]:this.handleMuteFailure,[t.T.ModNotesDeleted]:this.loadLastNote,[t.T.ModNotesCreated]:this.loadLastNote},new t.ar(this,this,{rootMargin:"0px"}),this.addEventListener("faceplate-enter",(()=>{t.a(this,t.b({source:"moderator",action:"hover",noun:"user_profile"}))}))}connectedCallback(){super.connectedCallback(),this.assignActionElementsAndEventHandlers(),this.setupTopicSubscriptions()}disconnectedCallback(){super.disconnectedCallback();for(const[,{element:t,clickHandler:e}]of this.actionElements.entries())e&&t?.removeEventListener("click",e);this.teardownTopicSubscriptions()}createRenderRoot(){return this}};return t._([t.n({attribute:"subreddit-name"})],l.prototype,"subredditName",void 0),t._([t.n({attribute:"user-is-banned",type:Boolean})],l.prototype,"userIsBanned",void 0),t._([t.n({attribute:"user-is-muted",type:Boolean})],l.prototype,"userIsMuted",void 0),t._([t.n({attribute:"user-name"})],l.prototype,"userName",void 0),t._([t.n({attribute:"user-id"})],l.prototype,"userId",void 0),t._([t.n({attribute:"subreddit-id"})],l.prototype,"subredditId",void 0),t._([t.n({attribute:"post-id"})],l.prototype,"postId",void 0),t._([t.n({attribute:"thing-id"})],l.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"is-desktop"})],l.prototype,"isDesktop",void 0),t._([t.d()],l.prototype,"requestPending",void 0),l=t._([t.e("user-mod-actions")],l),{get UserModActions(){return l}}}));
SML.dm("usermodactionsbottomsheet2c4961b6",["shelle48e5956","iconc33661e6","appselectorclientjs9964d0b0","faceplatebottomsheetheadere0488abf","tablepagination77cf692d","usermodactions8edc4734"],(async(t,e)=>{let o=class extends e.s{constructor(){super(...arguments),this.openBottomSheet=async t=>{t.stopPropagation(),this.partial&&await(this.partial?.load()),this.bottomSheet.showModal()},this.close=()=>{this.bottomSheet.close()}}get partial(){return this.shadowRoot?.querySelector('slot[name="content"]')?.assignedNodes({flatten:!0})[0].querySelector("faceplate-partial")}render(){return e.x`<slot @touchstart="${this.openBottomSheet}"></slot><faceplate-bottom-sheet> <faceplate-bottom-sheet-header slot="header" has-divider> <span slot="trailing"> ${t.r({appearance:"secondary",leadingIcon:e.C({size:e.I.Small,attributes:{className:"inline-flex"}}),size:t.s.Small,attributes:{onclick:this.close}})}</span> Mod actions</faceplate-bottom-sheet-header> <slot @click="${this.close}" name="content"></slot> <input autofocus type="hidden"> </faceplate-bottom-sheet>`}};o.styles=[t.t],t._([t.y("faceplate-bottom-sheet")],o.prototype,"bottomSheet",void 0),o=t._([t.e("user-mod-actions-bottom-sheet")],o)}));
SML.dm("modnotesopener281d7fc7",["shelle48e5956","modnotesf373dea5","iconc33661e6"],(async(e,t,s)=>{const r=e.C(s.s);let i=class extends r{constructor(){super(...arguments),this.subredditName="",this.userName="",this.thingId="",this.subredditId="",this.userId="",this.forceOpen=!1,this.postId="",this.isUserDeleted=!1,this.triggerSource=t.d.USERNAME,this.openModNotes=async t=>{const{subredditName:s,userName:r,thingId:i,subredditId:o,userId:d,triggerSource:n,postId:u}=this,p=t??n;this.publish(e.T.ModNotesRailOpen,{subredditName:s,userName:this.isUserDeleted?"deleted":r,thingId:i,subredditId:o,userId:this.isUserDeleted?"deleted":d,triggerSource:p,postId:u})},this.handleAnchorClick=e=>{e instanceof MouseEvent&&0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),this.openModNotes())},this.preventAnchorClick=e=>{const t=e.target;if(t instanceof HTMLSlotElement){t.assignedElements().forEach((e=>{(e instanceof HTMLAnchorElement||this.forceOpen||this.isUserDeleted)&&(e.onclick=this.handleAnchorClick,e.ontouchstart=this.handleAnchorClick)}))}}}render(){return this.isUserDeleted||this.subredditName&&this.subredditId&&this.userName&&this.userId?s.x` <slot @slotchange="${this.preventAnchorClick}"></slot> `:s.x`<slot></slot>`}};return e._([e.n({type:String,attribute:"subreddit-name"})],i.prototype,"subredditName",void 0),e._([e.n({type:String,attribute:"user-name"})],i.prototype,"userName",void 0),e._([e.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],i.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"user-id"})],i.prototype,"userId",void 0),e._([e.n({type:Boolean,attribute:"force-open"})],i.prototype,"forceOpen",void 0),e._([e.n({type:String,attribute:"post-id"})],i.prototype,"postId",void 0),e._([e.n({type:Boolean,attribute:"is-user-deleted"})],i.prototype,"isUserDeleted",void 0),e._([e.n({type:String,attribute:"trigger-source"})],i.prototype,"triggerSource",void 0),i=e._([e.e("mod-notes-opener")],i),{get ModNotesOpener(){return i}}}));
SML.dm("customfeedfollowbutton473f2bc6",["shelle48e5956","iconc33661e6","rendersavedresponsetemplatebysubredditidb78cebab"],(async(t,e)=>{let o=class extends(t.g(e.s)){constructor(){super(...arguments),this.label="",this.isFollowing=!1,this.trackingSource="custom_feeds",this.preventDefaultClick=!1,this.followRequestInProgress=!1,this.onToggleFollow=async e=>{try{this.preventDefaultClick&&(e.preventDefault(),e.stopPropagation()),this.trackEvent(t.b({source:this.trackingSource,action:"click",noun:this.isFollowing?"unfollow":"follow"},{customFeed:{id:this.label}})),this.followRequestInProgress=!0;const o=await t.B({operation:t.O.CustomFeedUpdateSubscriptionState,variables:{label:this.label,subscribeState:this.isFollowing?"NONE":"SUBSCRIBED"}});if(o.data.updateMultiredditSubscriptionState?.ok&&!o.data.updateMultiredditSubscriptionState?.errors)return void(this.isFollowing=!this.isFollowing);throw new Error(o.data.updateMultiredditSubscriptionState?.errors?.[0].message??"Error updating follow status")}catch(e){window.Sentry?.captureError?.(e);const o=t.c("faceplate-alert",{level:t.x.error,cause:"uncategorized",message:this.isFollowing?"Unable to unfollow custom feed":"Unable to follow custom feed"});this.dispatchEvent(o)}finally{this.followRequestInProgress=!1}}}render(){return t.r({appearance:this.isFollowing?"bordered":"primary",size:t.s.Small,shape:"pill",attributes:{"data-testid":"follow-button",className:"relative",onclick:this.onToggleFollow},children:e.x`${this.followRequestInProgress?e.x` <faceplate-progress value="20" class="animate-spin loading-icon absolute left-0 right-0 m-auto w-md" style="--loader-size:1rem"></faceplate-progress>`:e.A} <span class="${this.followRequestInProgress?"invisible":""}"> ${this.isFollowing?this.unfollowText||"Unfollow":this.followText||"Follow"}</span>`})}};o.styles=[t.t],t._([t.n({type:String})],o.prototype,"label",void 0),t._([t.n({type:Boolean,attribute:"following",reflect:!0})],o.prototype,"isFollowing",void 0),t._([t.n({type:String,attribute:"follow-text"})],o.prototype,"followText",void 0),t._([t.n({type:String,attribute:"unfollow-text"})],o.prototype,"unfollowText",void 0),t._([t.n({type:String,attribute:"tracking-source"})],o.prototype,"trackingSource",void 0),t._([t.n({type:Boolean,attribute:"prevent-default-click"})],o.prototype,"preventDefaultClick",void 0),t._([t.d()],o.prototype,"followRequestInProgress",void 0),o=t._([t.e("custom-feed-follow-button")],o)}));
SML.dm("shredditstoppropagation501a95b3",["shelle48e5956","iconc33661e6"],(async(t,e)=>{let o=class extends e.s{constructor(){super(...arguments),this.shouldPreventDefault=!1,this.handleStopPropagation=t=>{this.shouldPreventDefault&&t.preventDefault(),t.stopPropagation()}}render(){return e.x`<slot @keypress="${this.handleStopPropagation}" @click="${this.handleStopPropagation}"></slot>`}};t._([t.n({type:Boolean,attribute:"should-prevent-default"})],o.prototype,"shouldPreventDefault",void 0),o=t._([t.e("shreddit-stop-propagation")],o)}));
SML.dm("allchatspagerecommendationsclientjs6f0a19fc",["shelle48e5956","agegatestandaloneclientjsb13e879d","iconc33661e6"],(async(e,t)=>{class i extends HTMLElement{constructor(){super(),this.childAnchor=null,this.chatUrl=null,this.mobilePermalink=null,this.handleAnchorClick=async e=>{if(!this.chatUrl)return;if(e.preventDefault(),this.mobilePermalink){const e=new URL(this.mobilePermalink,window.location.href).searchParams.get("r"),i=document.querySelector(`faceplate-modal[name="${t.cL}"]`),a=i?.querySelector("a.app-link");if(a?.href){const t=new URL(a.href);e&&t.searchParams.set("r",e),t.searchParams.set("$android_deeplink_path",`reddit${this.mobilePermalink}`),t.searchParams.set("$deeplink_path",this.mobilePermalink),t.searchParams.set("$og_redirect",`${CLIENT_CONFIG.ORIGIN}${this.mobilePermalink}`),t.searchParams.set("base_url",this.mobilePermalink),a.setAttribute("href",t.toString())}return void this.dispatchEvent(new CustomEvent(t.cL,{bubbles:!0}))}let i=document.querySelector("reddit-chat-host");i||(await this.activateFeature(),i=document.querySelector("reddit-chat-host")),i.openChatUrl(this.chatUrl)}}async activateFeature(){try{await e.k({name:e.dz})}catch(t){if(!t.message?.endsWith(`${e.dz} not found`))throw t}}connectedCallback(){const e=this.querySelector(":scope > a, :scope > li > a"),i=e?.href;this.mobilePermalink=this.getAttribute("permalink");((e,i=!1)=>!!e&&(e.startsWith(t.ai)||e.startsWith(t.cK)||i&&e.startsWith("/c/")))(i||this.mobilePermalink||void 0,!!this.mobilePermalink)&&(this.childAnchor=e,!i&&this.mobilePermalink?this.chatUrl=this.mobilePermalink:i&&i.startsWith(t.ai)?this.chatUrl="/"+i.replace(t.ai,""):i&&(this.chatUrl="/"+i.replace(t.cK,"")),this.childAnchor?.addEventListener("click",this.handleAnchorClick))}disconnectedCallback(){this.childAnchor?.removeEventListener("click",this.handleAnchorClick)}}return customElements.define("reddit-chat-anchor",i),{a:e=>`${t.ai}room/${e}`,g:(e,i)=>`${t.ai}room/${e}/event/${i}`}}));
SML.dm("productdetailsinsightsmentionsfeedpageclientjs4954e8c1",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(e,t,n)=>{let s=class extends t.s{constructor(){super(...arguments),this.country="",this.cookieDomain="",this._events=new e.E(this),this._onLayoutViewChange=this._events.define("layout-view-change",(t=>{const{selected:s}=t.detail;e.$({country:this.country,name:e.fP,value:n.cp(s)?"true":"false",options:{...e.a0,domain:this.cookieDomain||void 0}})}))}static get styles(){return t.a`:host{display:flex;align-items:center}`}render(){return t.x` <slot></slot>`}};e._([e.n({type:String})],s.prototype,"country",void 0),e._([e.n({type:String,attribute:"cookie-domain"})],s.prototype,"cookieDomain",void 0),s=e._([e.e("shreddit-layout-event-setter")],s)}));
SML.dm("faceplatetooltipf30979fb",["shelle48e5956","iconc33661e6","userflairfe275854","agegatestandaloneclientjsb13e879d"],(async(t,e,o,a)=>{let i=class extends e.s{constructor(){super(...arguments),this.position="bottom",this.mouseEnterDelay=750,this.triggerEvent="hover",this.appearance="neutral",this.emitter=a.J(this),this._timeoutID=null,this._popperController=new o.P(this,{position:this.position,variantFlipOrder:{start:"s",middle:"m",end:"e"},referenceElementKey:"referenceElement",popperElementKey:"_tooltip"}),this._eventUsedMap=new WeakMap,this.updated=t=>{t.has("position")&&this._popperController.updateOptions({position:this.position})},this.handleDocumentClick=t=>{if(!(t.target instanceof HTMLElement)||this.hidden)return;if(t.target.closest(this.tagName.toLowerCase())===this)return;this._eventUsedMap.has(t)||this.close()},this.handleEscape=t=>{"Escape"===t.key&&this.close()},this.addListenersWhileOpened=()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("keydown",this.handleEscape)},this.cleanupListenersWhileOpened=()=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleEscape)}}get referenceElement(){return this.triggers[0]??this}static get styles(){return[e.a`:host{display:inline-block;position:relative;color:var(--tooltip-content)}:host([appearance=neutral]){--tooltip-background:var(--color-tooltip-bg-neutral);--tooltip-content:var(--color-tooltip-text-neutral)}:host([appearance=inverted]){--tooltip-background:var(--color-tooltip-bg-inverted);--tooltip-content:var(--color-tooltip-text-inverted)}:host([appearance=primary]){--tooltip-background:var(--color-tooltip-bg-primary);--tooltip-content:var(--color-tooltip-text-primary)}#faceplate-tooltip{font:var(--font-12-16-semibold);background-color:var(--tooltip-background);color:var(--tooltip-content);border-radius:.25rem;box-shadow:var(--boxshadow-tooltip);justify-content:center;align-items:center;padding:.5rem;display:inline-flex;width:max-content;isolation:isolate;z-index:var(--faceplate-tooltip-z-index,1)}article{display:flex;gap:.375rem}#faceplate-tooltip::after{display:block;content:'';width:8px;height:8px;position:absolute;background-color:var(--tooltip-background)}#faceplate-tooltip[position=bottom-end]::after,#faceplate-tooltip[position=bottom-start]::after,#faceplate-tooltip[position=top-end]::after,#faceplate-tooltip[position=top-start]::after{--max-arrow-x-travel-tooltip:calc(var(--tooltip-width, 2rem) - 1rem);--max-arrow-x-travel-target:calc(var(--target-width, 1rem) / 2);--max-arrow-x-distance:max(
            min(var(--max-arrow-x-travel-target), var(--max-arrow-x-travel-tooltip)),
            0.5rem
          )}#faceplate-tooltip[position=bottom-start]::after,#faceplate-tooltip[position=top-start]::after{left:var(--max-arrow-x-distance)}#faceplate-tooltip[position=bottom-end]::after,#faceplate-tooltip[position=top-end]::after{right:var(--max-arrow-x-distance)}#faceplate-tooltip[position=left-end]::after,#faceplate-tooltip[position=left-start]::after,#faceplate-tooltip[position=right-end]::after,#faceplate-tooltip[position=right-start]::after{--max-arrow-y-travel-tooltip:calc(var(--tooltip-height, 2rem) - 1rem);--max-arrow-y-travel-target:calc(var(--target-height, 2rem) / 2);--max-arrow-y-distance:max(
            min(var(--max-arrow-y-travel-target), var(--max-arrow-y-travel-tooltip)),
            0.5rem
          )}#faceplate-tooltip[position=left-start]::after,#faceplate-tooltip[position=right-start]::after{top:var(--max-arrow-y-distance)}#faceplate-tooltip[position=left-end]::after,#faceplate-tooltip[position=right-end]::after{bottom:var(--max-arrow-y-distance)}#faceplate-tooltip[position|=bottom]::after{top:0;transform:translateY(-50%) rotate(45deg);box-shadow:-1px -1px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=top]::after{bottom:0;transform:translateY(50%) rotate(45deg);box-shadow:1px 1px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=right]::after{left:0;transform:translateX(-38%) rotate(45deg);box-shadow:-2px 0 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=left]::after{right:0;transform:translateX(38%) rotate(45deg);box-shadow:0 -2px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position^=auto]::after{display:none}`,o.P.defaultPopperContentStyles]}get hidden(){return"closed"===this._popperController.currentState.state}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.cleanupListenersWhileOpened()}updateCustomProperties(){if("faceplate-tooltip"!==this.tagName.toLocaleLowerCase())return;const{clientHeight:t=null,clientWidth:e=null}=this.referenceElement,{clientHeight:o=null,clientWidth:a=null}=this._tooltip;t&&e&&o&&a&&(this.style.setProperty("--target-width",`${Math.round(e)}px`),this.style.setProperty("--target-height",`${Math.round(t)}px`),this.style.setProperty("--tooltip-width",`${Math.round(a)}px`),this.style.setProperty("--tooltip-height",`${Math.round(o)}px`))}show(){this.emitter.dispatch("open"),this.updateCustomProperties(),this._popperController.open().then((()=>{this.hidden||(this.addListenersWhileOpened(),this.emitter.dispatch("opened"))}))}close(){return this.cleanupListenersWhileOpened(),this.emitter.dispatch("close"),this._popperController.close().then((()=>{this.hidden&&this.emitter.dispatch("closed")}))}handleClick(t){this._eventUsedMap.set(t,!0),"click"===this.triggerEvent&&(this.hidden?this.show():this.close())}handleMouseenter(){"hover"===this.triggerEvent&&(this.cleanupTooltips(),this._timeoutID=window.setTimeout((()=>{this.querySelector(":focus, :hover")&&this.show()}),this.mouseEnterDelay))}handleMouseleave(){this.close(),this.cleanupTooltips()}cleanupTooltips(){this._timeoutID&&(window.clearTimeout(this._timeoutID),this._timeoutID=null)}render(){const t=this._popperController.actualPosition||this.position;return e.x` <slot name="trigger" aria-describedby="faceplate-tooltip" faceplate-popper-trigger @click="${this.handleClick}" @mouseenter="${this.handleMouseenter}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <article id="faceplate-tooltip" role="tooltip" position="${t}" faceplate-popper-content> <slot class="icon" name="icon"></slot> <span> <slot></slot> </span> </article> `}};return t._([t.n({type:String})],i.prototype,"position",void 0),t._([t.n({type:Number,attribute:"enter-delay"})],i.prototype,"mouseEnterDelay",void 0),t._([t.n({type:String,attribute:"trigger-event"})],i.prototype,"triggerEvent",void 0),t._([t.n({type:String,reflect:!0})],i.prototype,"appearance",void 0),t._([t.aP({slot:"trigger",flatten:!0})],i.prototype,"triggers",void 0),t._([t.aP({slot:"icon",flatten:!0})],i.prototype,"icons",void 0),t._([t.y("#faceplate-tooltip")],i.prototype,"_tooltip",void 0),i=t._([t.e("faceplate-tooltip")],i),{get FaceplateTooltip(){return i}}}));
SML.dm("awards2379b181",["shelle48e5956","agegatestandaloneclientjsb13e879d"],(async(o,n)=>{var e;!function(o){o.Comment="t1",o.Profile="t2",o.Post="t3",o.Message="t4",o.Subreddit="t5",o.Trophy="t6"}(e||(e={}));const r=o=>{const n=o.split("_").shift();return Object.values(e).includes(n)?n:void 0},t=o=>r(o)===e.Comment,i=o=>r(o)===e.Post,a="new_awards";function s({thingId:o,awardId:n,groupId:e,subredditId:r,postId:a,pageType:s,paneName:c,position:d,recipientId:u,isAnonymous:_,hasMessage:l,awardPrice:m,topAwardIconUrl:p,animatedAwardIconUrls:w,reason:f,correlationId:b,postType:g,postScore:h,score:I,numberComments:v,referrerCorrelationId:y}){const k={new_award:{}};return n&&(k.new_award.id=n),e&&(k.new_award.group_id=e),u&&(k.new_award.recipient_id=u),null!=_&&(k.new_award.is_anonymous=_),null!=l&&(k.new_award.has_message=l),void 0!==m&&(k.new_award.listing_price=m),p&&(k.new_award.top_award_icon_url=p),w&&(k.new_award.animated_awards_ids=w),r&&(k.subreddit={id:r}),o&&(i(o)?k.post={id:o,type:g,score:I,number_comments:v}:t(o)&&(k.comment={id:o,score:I},a&&(k.post={id:a,type:g,score:h,number_comments:v}))),(s||c||d||f)&&(k.action_info={...s&&{page_type:s},...c&&{pane_name:c},...d&&{position:d},...f&&{reason:f}}),b&&(k.correlation_id=b),y&&(k.feed={referrer_correlation_id:y}),k}let c=o.B;return{A:()=>o.b({source:"removal_reasons",action:"click",noun:"cancel"}),N:a,get T(){return e},a:t,b:o=>/^award_.+\|t\d_.+$/.test(o),c:function(n){return o.b({source:a,action:"view",noun:"leaderboard_tile"},s(n))},d:s,e:function(n){return o.b({source:a,action:"view",noun:"award_info"},s(n))},f:function(n){return o.b({source:a,action:"click",noun:"overflow_menu"},s(n))},g:function(n){return o.b({source:a,action:"view",noun:"gold_info"},s(n))},h:function(n){return o.b({source:a,action:"view",noun:"leaderboard"},s(n))},i,j:function(n){return o.b({source:a,action:"filter",noun:"leaderboard"},s(n))},k:(n,e)=>o.b({source:"moderator",action:"highlight",noun:"post"},{post:{id:n},...e?{action_info:{page_type:e}}:{}}),l:function(n,e){return o.b({source:a,action:"click",noun:`leaderboard_${e}`},s(n))},m:function(n){return o.b({source:a,action:o.aA.Click,noun:"confirm_award_option"},s(n))},n:function(n){return o.b({source:a,action:o.aA.View,noun:"award_options_sheet"},s(n))},o:function(n){const e=o.im();return o.b({source:a,action:"click",noun:"entry_point"},s({...n,pageType:o.X(),...e&&{referrerCorrelationId:e}}))},p:()=>o.b({source:"post",action:"click",noun:"ignore_reports"}),q:()=>o.b({source:"post",action:"click",noun:"restore_reports"}),r:async function(e){const r={input:e},{data:t,errors:i}=await c({operation:o.O.RemoveHighlightedPost,variables:r});if(i?.length)throw new Error(n.am());const{removeHighlightedPost:a}=t;if(!a?.ok)throw new Error(n.am())},s:function(n){return o.b({source:a,action:o.aA.Click,noun:"award_option"},s(n))},t:()=>o.b({source:"comment",action:"click",noun:"ignore_reports"}),u:(n,e)=>o.b({source:"moderator",action:"unhighlight",noun:"post"},{post:{id:n},...e?{action_info:{page_type:e}}:{}}),v:function(n,{isSuccessful:e}){const r=e?"completed_fe":"failed_fe";return o.b({source:a,action:"award_given",noun:r},s(n))},w:()=>o.b({source:"comment",action:"click",noun:"restore_reports"}),x:r,y:n=>{const{authorId:e,subredditId:r,postId:a,commentId:s,subredditName:c,thingId:d,action:u,noun:_="removal_reasons_flow",type:l,reason:m,isLocked:p,sendAs:w,notificationMethod:f}=n;return o.b({source:"moderator",action:u,noun:_},{user:{id:e},subreddit:{id:r,name:c},post:{id:a??""},comment:{id:s},action_info:{source_name:"removal_reasons",type:l,reason:m},mod_action:{removalreason:{is_locked:p,send_as:w,notify:f}},...d&&i(d)&&{post:{id:d}},...d&&t(d)&&{comment:{id:d}}})},z:(n,e,r)=>o.b({source:"removal_reasons",action:"click",noun:"submit"},{mod_action:{removalreason:n},action_info:{reason:e},subreddit:{id:r?.subredditId},post:{id:r?.postId??""},comment:{id:r?.commentId}})}}));
SML.dm("overflowmenuactionsf8d12b95",["distinguishedtags1c4757ea","shelle48e5956"],(async(t,e)=>{var o;!function(t){t.follow="follow",t.hide="hide",t.save="save",t.delete="delete",t.markAsSpoiler="mark_as_spoiler",t.markAsNsfw="mark_as_nsfw",t.markAsCommercialCommunication="mark_as_commercial_communication",t.distinguishAsMod="distinguish_as_mod",t.distinguishAsAdmin="distinguish_as_admin",t.updatePostFlair="update_post_flair",t.lock="lock",t.sticky="sticky",t.addRemovalReason="add_removal_reason",t.edit="edit",t.updateContent="update_content",t.updatePostBodyPending="update_post_body_pending",t.approve="approve",t.remove="remove",t.removeAsSpam="remove_as_spam",t.ignoreReports="ignore_reports",t.confirmRemoval="confirm_removal",t.updateSendReplies="update_send_replies",t.snoozeReporter="snooze_reporter",t.unsnoozeReporter="unsnooze_reporter",t.updateHighlightedPost="update_highlighted_post",t.approveOptimistic="approve_optimistic",t.removeOptimistic="remove_optimistic",t.removeAsSpamOptimistic="remove_as_spam_optimistic",t.confirmRemovalOptimistic="confirm_removal_optimistic",t.shareToModChat="share_to_mod_chat"}(o||(o={}));const i={isPostFollowed:o.follow,isPostHidden:o.hide,isPostSaved:o.save,isPostSpoiler:o.markAsSpoiler,isPostNsfw:o.markAsNsfw,isPostCommercialCommunication:o.markAsCommercialCommunication,isPostDistinguishedAsAdmin:o.distinguishAsAdmin,isPostStickied:void 0,isReceivingPostReplies:o.updateSendReplies,[t.M.Distinguish]:o.distinguishAsMod,[t.M.Undistinguish]:o.distinguishAsMod,[t.M.Lock]:o.lock,[t.M.Unlock]:o.lock,[t.M.Sticky]:o.sticky,[t.M.Unsticky]:o.sticky,[t.M.AddRemovalReason]:o.addRemovalReason,[t.M.ApproveContent]:o.approve,[t.M.RemoveContent]:o.remove,[t.M.RemoveContentAsSpam]:o.removeAsSpam,[t.M.ConfirmRemoval]:o.confirmRemoval,[t.M.IgnoreReports]:o.ignoreReports,[t.M.UnignoreReports]:o.ignoreReports,[t.M.SnoozeReporter]:o.snoozeReporter,[t.M.UnsnoozeReporter]:o.unsnoozeReporter,[t.M.RemoveHighlightedPost]:o.updateHighlightedPost,[t.A.Distinguish]:o.distinguishAsAdmin,[t.A.Undistinguish]:o.distinguishAsAdmin,[t.M.ApproveContentOptimistic]:o.approveOptimistic,[t.M.RemoveContentOptimistic]:o.removeOptimistic,[t.M.RemoveContentAsSpamOptimistic]:o.removeAsSpamOptimistic,[t.M.ConfirmRemovalOptimistic]:o.confirmRemovalOptimistic};o.hide,o.markAsSpoiler,o.markAsNsfw,o.markAsCommercialCommunication;var r;!function(t){t[t.Follow=5]="Follow",t[t.Edit=10]="Edit",t[t.Report=20]="Report",t[t.Save=30]="Save",t[t.TranslationSetting=35]="TranslationSetting",t[t.TranslationFeedback=40]="TranslationFeedback",t[t.Delete=70]="Delete",t[t.AdminDistinguish=80]="AdminDistinguish",t[t.BrandAffiliate=90]="BrandAffiliate",t[t.Notifs=100]="Notifs",t[t.Reply=110]="Reply",t[t.Award=120]="Award",t[t.Insights=130]="Insights",t[t.ShareAsPost=140]="ShareAsPost"}(r||(r={}));const s="429";function a(t){return t?.[0]?.message??"Something went wrong"}return{get C(){return r},E:"post__click_unrsvp",P:["isPostFollowed","isPostHidden","isPostSaved","isPostSpoiler","isPostNsfw","isPostCommercialCommunication","isPostDistinguishedAsAdmin","isPostStickied","isReceivingPostReplies"],R:s,S:i,get a(){return o},b:"post__click_rsvp",c:"edit",d:async function(t){const o={input:t},{data:i,errors:r}=await e.B({operation:e.O.DeletePost,variables:o});if(r?.length)throw new Error(a(r));const{deletePost:s}=i;if(!s?.ok)throw new Error(a(s?.errors))},e:"overflow__click_comments",f:"overflow__click_share",g:async function(t,o){const i={input:{postId:t,saveState:o?e.hq.None:e.hq.Saved}},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostSaveState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostSaveState?.ok)return!o;throw new Error(a(r?.updatePostSaveState?.errors))},h:async function(t,o){const i={input:{postId:t,followState:o?e.hr.Unfollowed:e.hr.Followed}},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostFollowState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostFollowState?.ok)return!o;throw new Error(a(r?.updatePostFollowState?.errors))},i:async function(t,o){const i={input:{postId:t,distinguishState:o?e.eW.None:e.eW.Distinguished,distinguishType:o?e.eU.None:e.eU.AdminDistinguished}},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostDistinguishedState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostDistinguishState?.ok)return r.updatePostDistinguishState.distinguishType===e.eU.AdminDistinguished;throw new Error(a(r?.updatePostDistinguishState?.errors))},j:async function(t,o){const i={input:{postId:t,spoilerState:o?e.ho.None:e.ho.Spoiler}},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostSpoilerState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostSpoilerState?.ok)return r.updatePostSpoilerState.spoilerState===e.ho.Spoiler;throw new Error(a(r?.updatePostSpoilerState?.errors))},k:async function(t,o){const i={input:{postId:t,nsfwState:o?e.hp.None:e.hp.Nsfw}},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostNsfwState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostNsfwState?.ok)return r.updatePostNsfwState.nsfwState===e.hp.Nsfw;throw new Error(a(r?.updatePostNsfwState?.errors))},l:async function(t,o){const i={input:{thingId:t,commercialCommunicationState:!o}},{data:r,errors:s}=await e.B({operation:e.O.UpdateCommercialCommunicationState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updateCommercialCommunicationState?.ok)return!o;throw new Error(a(r?.updateCommercialCommunicationState?.errors))},m:async function(t,o){const i={postId:t,sendRepliesState:o?e.fJ.DoNotSend:e.fJ.Send},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostSendRepliesState,variables:{input:i}});if(s?.length)throw new Error(a(s));if(r?.updatePostSendRepliesState?.ok)return r.updatePostSendRepliesState?.sendRepliesState===e.fJ.Send;throw new Error(a(r?.updatePostSendRepliesState?.errors))},n:async function(t,o){const i={input:{postId:t,hideState:o?e.hn.None:e.hn.Hidden}},{data:r,errors:s}=await e.B({operation:e.O.UpdatePostHideState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostHideState?.ok)return r.updatePostHideState.hideState===e.hn.Hidden;throw new Error(a(r?.updatePostHideState?.errors))},o:async function(t){const o={input:t},{data:i,errors:r}=await e.B({operation:e.O.UpdatePostStickyState,variables:o});if(r?.length)throw new Error(a(r));if(!i?.updatePostStickyState?.ok)throw new Error(a(i?.updatePostStickyState?.errors))},u:async function(t){const o={input:t},{data:i,errors:r}=await e.B({operation:e.O.UpdateAdHideState,variables:o});if(r?.length)throw new Error(a(r));if(i?.updateAdHideState?.ok)return i.updateAdHideState.hideState===e.hn.Hidden;if(i?.updateAdHideState?.errors&&(i?.updateAdHideState?.errors[0]).code===s)throw new Error(s);throw new Error(a(i?.updateAdHideState?.errors))}}}));
SML.dm("rplfilterchip3ad19f7c",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(r,e,o)=>{var l=e.a`${r.V}button{background:0 0;color:inherit;border:none;padding:0;margin:inherit;font:inherit;cursor:pointer;outline:inherit;display:inherit;width:inherit;height:inherit}`;class t extends r.Q{constructor(){super(...arguments),this.disabled=!1,this.selected=!1}renderLeadingContent(){return e.x`<slot name="leading"></slot> `}renderTrailingContent(){return e.x`<slot name="trailing"></slot> `}render(){return e.x`<button ?disabled="${this.disabled}" aria-pressed="${this.selected}"> ${this.renderLeadingContent()} <slot></slot> ${this.renderTrailingContent()} </button>`}}t.styles=l,r._([r.n({type:Boolean})],t.prototype,"disabled",void 0),r._([r.n({type:Boolean,reflect:!0})],t.prototype,"selected",void 0);var i=e.a`${r.V}:host{display:inline-flex;border:1px solid transparent;cursor:pointer}.container{display:inherit;align-items:center}slot:not([name]){display:inline-flex;line-height:var(--rem16);font-size:var(--rem12)}`;class a extends t{}a.styles=[t.styles,i];var c=e.a`${r.V}::slotted([slot=leading]),[icon-name=checkmark-fill]{display:inline-flex;margin-right:var(--spacer-xs)}button{padding:calc(var(--spacer-xs) - var(--rem1))}:host([appearance=bordered]){--rpl-filter-chip-border-color:var(--color-neutral-border);--rpl-filter-chip-text-color:var(--color-secondary-plain);--rpl-filter-chip-disabled-background-color:var(--color-interactive-content-disabled);--rpl-filter-chip-disabled-text-color:var(--color-interactive-content-disabled);--rpl-filter-chip-disabled-border-color:var(--color-neutral-border-weak);--rpl-filter-chip-selected-background-color:var(--color-secondary-background-selected);--rpl-filter-chip-selected-border-color:var(--color-neutral-border);--rpl-filter-chip-hover-background-color:var(--color-secondary-background-hover)}:host([appearance=media]){--rpl-filter-chip-border-color:var(--color-media-border-weak);--rpl-filter-chip-background-color:var(--color-media-background);--rpl-filter-chip-text-color:var(--color-media-onbackground);--rpl-filter-chip-disabled-text-color:var(--color-media-onbackground-disabled);--rpl-filter-chip-disabled-background-color:var(--color-media-background);--rpl-filter-chip-disabled-border-color:var(--color-media-border-weak);--rpl-filter-chip-hover-background-color:var(--color-media-background-hover);--rpl-filter-chip-selected-background-color:var(--color-media-background-selected);--rpl-filter-chip-selected-border-color:var(--color-media-border-selected)}:host{border:1px solid var(--rpl-filter-chip-border-color);color:var(--rpl-filter-chip-text-color);background:var(--rpl-filter-chip-background-color);border-radius:var(--rem8);font-weight:600}:host(.hover:not([disabled])),:host(:hover:not([disabled])){background:var(--rpl-filter-chip-hover-background-color)}:host([selected]){--rpl-filter-chip-background-color:var(--rpl-filter-chip-selected-background-color);--rpl-filter-chip-border-color:var(--rpl-filter-chip-selected-border-color)}:host([disabled]){--rpl-filter-chip-background-color:var(--rpl-filter-chip-disabled-background-color);--rpl-filter-chip-border-color:var(--rpl-filter-chip-disabled-border-color);--rpl-filter-chip-text-color:var(--rpl-filter-chip-disabled-text-color)}`;const d="bordered";let n=class extends a{constructor(){super(...arguments),this.appearance=d}static get styles(){return[a.styles,c]}renderLeadingContent(){return this.selected?o.L({size:"sm"}):super.renderLeadingContent()}};r._([r.n({type:String})],n.prototype,"appearance",void 0),n=r._([r.e("rpl-filter-chip")],n)}));
SML.dm("utils93db03dd",["shelle48e5956","iconc33661e6"],(async(t,e)=>{const o=Math.min,n=Math.max,i=Math.round,r=Math.floor,a=t=>({x:t,y:t}),s={left:"right",right:"left",bottom:"top",top:"bottom"},l={start:"end",end:"start"};function c(t,e,i){return n(t,o(e,i))}function p(t,e){return"function"==typeof t?t(e):t}function f(t){return t.split("-")[0]}function d(t){return t.split("-")[1]}function u(t){return"x"===t?"y":"x"}function h(t){return"y"===t?"height":"width"}function m(t){return["top","bottom"].includes(f(t))?"y":"x"}function y(t){return u(m(t))}function g(t){return t.replace(/start|end/g,(t=>l[t]))}function b(t){return t.replace(/left|right|bottom|top/g,(t=>s[t]))}function v(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function w(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function x(t,e,o){let{reference:n,floating:i}=t;const r=m(e),a=y(e),s=h(a),l=f(e),c="y"===r,p=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,g=n[s]/2-i[s]/2;let b;switch(l){case"top":b={x:p,y:n.y-i.height};break;case"bottom":b={x:p,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y:u};break;case"left":b={x:n.x-i.width,y:u};break;default:b={x:n.x,y:n.y}}switch(d(e)){case"start":b[a]-=g*(o&&c?-1:1);break;case"end":b[a]+=g*(o&&c?-1:1)}return b}async function P(t,e){var o;void 0===e&&(e={});const{x:n,y:i,platform:r,rects:a,elements:s,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=p(e,t),m=v(h),y=s[u?"floating"===d?"reference":"floating":d],g=w(await r.getClippingRect({element:null==(o=await(null==r.isElement?void 0:r.isElement(y)))||o?y:y.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:l})),b="floating"===d?{...a.floating,x:n,y:i}:a.reference,x=await(null==r.getOffsetParent?void 0:r.getOffsetParent(s.floating)),P=await(null==r.isElement?void 0:r.isElement(x))&&await(null==r.getScale?void 0:r.getScale(x))||{x:1,y:1},E=w(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:x,strategy:l}):b);return{top:(g.top-E.top+m.top)/P.y,bottom:(E.bottom-g.bottom+m.bottom)/P.y,left:(g.left-E.left+m.left)/P.x,right:(E.right-g.right+m.right)/P.x}}const E=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var o,n;const{placement:i,middlewareData:r,rects:a,initialPlacement:s,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:E=!0,...S}=p(t,e);if(null!=(o=r.arrow)&&o.alignmentOffset)return{};const R=f(i),T=f(s)===s,A=await(null==l.isRTL?void 0:l.isRTL(c.floating)),L=v||(T||!E?[b(s)]:function(t){const e=b(t);return[g(t),e,g(e)]}(s));v||"none"===x||L.push(...function(t,e,o,n){const i=d(t);let r=function(t,e,o){const n=["left","right"],i=["right","left"],r=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return o?e?i:n:e?n:i;case"left":case"right":return e?r:a;default:return[]}}(f(t),"start"===o,n);return i&&(r=r.map((t=>t+"-"+i)),e&&(r=r.concat(r.map(g)))),r}(s,E,x,A));const z=[s,...L],O=await P(e,S),_=[];let $=(null==(n=r.flip)?void 0:n.overflows)||[];if(u&&_.push(O[R]),m){const t=function(t,e,o){void 0===o&&(o=!1);const n=d(t),i=y(t),r=h(i);let a="x"===i?n===(o?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=b(a)),[a,b(a)]}(i,a,A);_.push(O[t[0]],O[t[1]])}if($=[...$,{placement:i,overflows:_}],!_.every((t=>t<=0))){var k,C;const t=((null==(k=r.flip)?void 0:k.index)||0)+1,e=z[t];if(e)return{data:{index:t,overflows:$},reset:{placement:e}};let o=null==(C=$.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:C.placement;if(!o)switch(w){case"bestFit":{var B;const t=null==(B=$.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:B[0];t&&(o=t);break}case"initialPlacement":o=s}if(i!==o)return{reset:{placement:o}}}return{}}}};const S=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var o,n;const{x:i,y:r,placement:a,middlewareData:s}=e,l=await async function(t,e){const{placement:o,platform:n,elements:i}=t,r=await(null==n.isRTL?void 0:n.isRTL(i.floating)),a=f(o),s=d(o),l="y"===m(o),c=["left","top"].includes(a)?-1:1,u=r&&l?-1:1,h=p(e,t);let{mainAxis:y,crossAxis:g,alignmentAxis:b}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return s&&"number"==typeof b&&(g="end"===s?-1*b:b),l?{x:g*u,y:y*c}:{x:y*c,y:g*u}}(e,t);return a===(null==(o=s.offset)?void 0:o.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},R=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:i,rects:r,platform:a,elements:s}=e,{apply:l=()=>{},...c}=p(t,e),u=await P(e,c),h=f(i),y=d(i),g="y"===m(i),{width:b,height:v}=r.floating;let w,x;"top"===h||"bottom"===h?(w=h,x=y===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,w="end"===y?"top":"bottom");const E=v-u[w],S=b-u[x],R=!e.middlewareData.shift;let T=E,A=S;if(g){const t=b-u.left-u.right;A=y||R?o(S,t):t}else{const t=v-u.top-u.bottom;T=y||R?o(E,t):t}if(R&&!y){const t=n(u.left,0),e=n(u.right,0),o=n(u.top,0),i=n(u.bottom,0);g?A=b-2*(0!==t||0!==e?t+e:n(u.left,u.right)):T=v-2*(0!==o||0!==i?o+i:n(u.top,u.bottom))}await l({...e,availableWidth:A,availableHeight:T});const L=await a.getDimensions(s.floating);return b!==L.width||v!==L.height?{reset:{rects:!0}}:{}}}};function T(t){return z(t)?(t.nodeName||"").toLowerCase():"#document"}function A(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function L(t){var e;return null==(e=(z(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function z(t){return t instanceof Node||t instanceof A(t).Node}function O(t){return t instanceof Element||t instanceof A(t).Element}function _(t){return t instanceof HTMLElement||t instanceof A(t).HTMLElement}function $(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof A(t).ShadowRoot)}function k(t){const{overflow:e,overflowX:o,overflowY:n,display:i}=F(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function C(t){return["table","td","th"].includes(T(t))}function B(t){const e=D(),o=F(t);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!e&&!!o.backdropFilter&&"none"!==o.backdropFilter||!e&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some((t=>(o.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(o.contain||"").includes(t)))}function D(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function N(t){return["html","body","#document"].includes(T(t))}function F(t){return A(t).getComputedStyle(t)}function I(t){return O(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function H(t){if("html"===T(t))return t;const e=t.assignedSlot||t.parentNode||$(t)&&t.host||L(t);return $(e)?e.host:e}function M(t){const e=H(t);return N(e)?t.ownerDocument?t.ownerDocument.body:t.body:_(e)&&k(e)?e:M(e)}function W(t,e,o){var n;void 0===e&&(e=[]),void 0===o&&(o=!0);const i=M(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),a=A(i);return r?e.concat(a,a.visualViewport||[],k(i)?i:[],a.frameElement&&o?W(a.frameElement):[]):e.concat(i,W(i,[],o))}function V(t){const e=F(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=_(t),a=r?t.offsetWidth:o,s=r?t.offsetHeight:n,l=i(o)!==a||i(n)!==s;return l&&(o=a,n=s),{width:o,height:n,$:l}}function j(t){return O(t)?t:t.contextElement}function q(t){const e=j(t);if(!_(e))return a(1);const o=e.getBoundingClientRect(),{width:n,height:r,$:s}=V(e);let l=(s?i(o.width):o.width)/n,c=(s?i(o.height):o.height)/r;return l&&Number.isFinite(l)||(l=1),c&&Number.isFinite(c)||(c=1),{x:l,y:c}}const U=a(0);function Y(t){const e=A(t);return D()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:U}function X(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1);const i=t.getBoundingClientRect(),r=j(t);let s=a(1);e&&(n?O(n)&&(s=q(n)):s=q(t));const l=function(t,e,o){return void 0===e&&(e=!1),!(!o||e&&o!==A(t))&&e}(r,o,n)?Y(r):a(0);let c=(i.left+l.x)/s.x,p=(i.top+l.y)/s.y,f=i.width/s.x,d=i.height/s.y;if(r){const t=A(r),e=n&&O(n)?A(n):n;let o=t.frameElement;for(;o&&n&&e!==t;){const t=q(o),e=o.getBoundingClientRect(),n=F(o),i=e.left+(o.clientLeft+parseFloat(n.paddingLeft))*t.x,r=e.top+(o.clientTop+parseFloat(n.paddingTop))*t.y;c*=t.x,p*=t.y,f*=t.x,d*=t.y,c+=i,p+=r,o=A(o).frameElement}}return w({width:f,height:d,x:c,y:p})}function J(t){return X(L(t)).left+I(t).scrollLeft}function Q(t,e,o){let i;if("viewport"===e)i=function(t,e){const o=A(t),n=L(t),i=o.visualViewport;let r=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){r=i.width,a=i.height;const t=D();(!t||t&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:r,height:a,x:s,y:l}}(t,o);else if("document"===e)i=function(t){const e=L(t),o=I(t),i=t.ownerDocument.body,r=n(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=n(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-o.scrollLeft+J(t);const l=-o.scrollTop;return"rtl"===F(i).direction&&(s+=n(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:l}}(L(t));else if(O(e))i=function(t,e){const o=X(t,!0,"fixed"===e),n=o.top+t.clientTop,i=o.left+t.clientLeft,r=_(t)?q(t):a(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:i*r.x,y:n*r.y}}(e,o);else{const o=Y(t);i={...e,x:e.x-o.x,y:e.y-o.y}}return w(i)}function G(t,e){const o=H(t);return!(o===e||!O(o)||N(o))&&("fixed"===F(o).position||G(o,e))}function K(t,e,o){const n=_(e),i=L(e),r="fixed"===o,s=X(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=a(0);if(n||!n&&!r)if(("body"!==T(e)||k(i))&&(l=I(e)),n){const t=X(e,!0,r,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else i&&(c.x=J(i));return{x:s.left+l.scrollLeft-c.x,y:s.top+l.scrollTop-c.y,width:s.width,height:s.height}}function Z(t,e){return _(t)&&"fixed"!==F(t).position?e?e(t):t.offsetParent:null}function tt(t,e){const o=A(t);if(!_(t))return o;let n=Z(t,e);for(;n&&C(n)&&"static"===F(n).position;)n=Z(n,e);return n&&("html"===T(n)||"body"===T(n)&&"static"===F(n).position&&!B(n))?o:n||function(t){let e=H(t);for(;_(e)&&!N(e);){if(B(e))return e;e=H(e)}return null}(t)||o}const et={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const i=_(o),r=L(o);if(o===r)return e;let s={scrollLeft:0,scrollTop:0},l=a(1);const c=a(0);if((i||!i&&"fixed"!==n)&&(("body"!==T(o)||k(r))&&(s=I(o)),_(o))){const t=X(o);l=q(o),c.x=t.x+o.clientLeft,c.y=t.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-s.scrollLeft*l.x+c.x,y:e.y*l.y-s.scrollTop*l.y+c.y}},getDocumentElement:L,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:r,strategy:a}=t;const s=[..."clippingAncestors"===i?function(t,e){const o=e.get(t);if(o)return o;let n=W(t,[],!1).filter((t=>O(t)&&"body"!==T(t))),i=null;const r="fixed"===F(t).position;let a=r?H(t):t;for(;O(a)&&!N(a);){const e=F(a),o=B(a);o||"fixed"!==e.position||(i=null),(r?!o&&!i:!o&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||k(a)&&!o&&G(t,a))?n=n.filter((t=>t!==a)):i=e,a=H(a)}return e.set(t,n),n}(e,this._c):[].concat(i),r],l=s[0],c=s.reduce(((t,i)=>{const r=Q(e,i,a);return t.top=n(r.top,t.top),t.right=o(r.right,t.right),t.bottom=o(r.bottom,t.bottom),t.left=n(r.left,t.left),t}),Q(e,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:tt,getElementRects:async function(t){let{reference:e,floating:o,strategy:n}=t;const i=this.getOffsetParent||tt,r=this.getDimensions;return{reference:K(e,await i(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return V(t)},getScale:q,isElement:O,isRTL:function(t){return"rtl"===F(t).direction}};function ot(t,e,i,a){void 0===a&&(a={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:p="function"==typeof IntersectionObserver,animationFrame:f=!1}=a,d=j(t),u=s||l?[...d?W(d):[],...W(e)]:[];u.forEach((t=>{s&&t.addEventListener("scroll",i,{passive:!0}),l&&t.addEventListener("resize",i)}));const h=d&&p?function(t,e){let i,a=null;const s=L(t);function l(){clearTimeout(i),a&&a.disconnect(),a=null}return function c(p,f){void 0===p&&(p=!1),void 0===f&&(f=1),l();const{left:d,top:u,width:h,height:m}=t.getBoundingClientRect();if(p||e(),!h||!m)return;const y={rootMargin:-r(u)+"px "+-r(s.clientWidth-(d+h))+"px "+-r(s.clientHeight-(u+m))+"px "+-r(d)+"px",threshold:n(0,o(1,f))||1};let g=!0;function b(t){const e=t[0].intersectionRatio;if(e!==f){if(!g)return c();e?c(!1,e):i=setTimeout((()=>{c(!1,1e-7)}),100)}g=!1}try{a=new IntersectionObserver(b,{...y,root:s.ownerDocument})}catch(t){a=new IntersectionObserver(b,y)}a.observe(t)}(!0),l}(d,i):null;let m,y=-1,g=null;c&&(g=new ResizeObserver((t=>{let[o]=t;o&&o.target===d&&g&&(g.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame((()=>{g&&g.observe(e)}))),i()})),d&&!f&&g.observe(d),g.observe(e));let b=f?X(t):null;return f&&function e(){const o=X(t);!b||o.x===b.x&&o.y===b.y&&o.width===b.width&&o.height===b.height||i();b=o,m=requestAnimationFrame(e)}(),i(),()=>{u.forEach((t=>{s&&t.removeEventListener("scroll",i),l&&t.removeEventListener("resize",i)})),h&&h(),g&&g.disconnect(),g=null,f&&cancelAnimationFrame(m)}}const nt=(t,e,o)=>{const n=new Map,i={platform:et,...o},r={...i.platform,_c:n};return(async(t,e,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:a}=o,s=r.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:f}=x(c,n,l),d=n,u={},h=0;for(let o=0;o<s.length;o++){const{name:r,fn:m}=s[o],{x:y,y:g,data:b,reset:v}=await m({x:p,y:f,initialPlacement:n,placement:d,strategy:i,middlewareData:u,rects:c,platform:a,elements:{reference:t,floating:e}});p=null!=y?y:p,f=null!=g?g:f,u={...u,[r]:{...u[r],...b}},v&&h<=50&&(h++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(c=!0===v.rects?await a.getElementRects({reference:t,floating:e,strategy:i}):v.rects),({x:p,y:f}=x(c,d,l))),o=-1)}return{x:p,y:f,placement:d,strategy:i,middlewareData:u}})(t,e,{...i,platform:r})};function it(t){return function(t){for(let e=t;e;e=rt(e))if(e instanceof Element&&"none"===getComputedStyle(e).display)return null;for(let e=rt(t);e;e=rt(e)){if(!(e instanceof Element))continue;const t=getComputedStyle(e);if("contents"!==t.display){if("static"!==t.position||"none"!==t.filter)return e;if("BODY"===e.tagName)return e}}return null}(t)}function rt(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}var at=e.a`${t.V}:host{--arrow-color:var(--color-neutral-background-strong);--arrow-size:6px;--arrow-size-diagonal:calc(var(--arrow-size) * 0.7071);--arrow-padding-offset:calc(var(--arrow-size-diagonal) - var(--arrow-size));display:contents}.popup{position:absolute;isolation:isolate;max-width:var(--auto-size-available-width,none);max-height:var(--auto-size-available-height,none)}.popup--fixed{position:fixed}.popup:not(.popup--active){display:none}.popup--arrow{position:absolute;width:calc(var(--arrow-size-diagonal) * 2);height:calc(var(--arrow-size-diagonal) * 2);rotate:45deg;background:var(--arrow-color)}.popup-safe-area:not(.popup-safe-area--visible){display:none}.popup-safe-area{position:fixed;z-index:calc(var(--faceplate-tooltip-z-index,1) - 1);top:0;right:0;bottom:0;left:0;clip-path:polygon(var(--safe-area-top-left-x,0) var(--safe-area-top-left-y,0),var(--safe-area-top-right-x,0) var(--safe-area-top-right-y,0),var(--safe-area-bottom-right-x,0) var(--safe-area-bottom-right-y,0),var(--safe-area-bottom-left-x,0) var(--safe-area-bottom-left-y,0))}`;const st={Top:"top",TopStart:"top-start",TopEnd:"top-end",Bottom:"bottom",BottomStart:"bottom-start",BottomEnd:"bottom-end",Right:"right",RightStart:"right-start",RightEnd:"right-end",Left:"left",LeftStart:"left-start",LeftEnd:"left-end"},lt="anchor";class ct extends t.Q{constructor(){super(...arguments),this.anchorEl=null,this.active=!1,this.placement=st.Top,this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement=lt,this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.safeArea=!1,this.updateSafeArea=()=>{if(!this.safeArea||!this.anchorEl)return;const t=this.anchorEl.getBoundingClientRect(),e=this.popup.getBoundingClientRect();let o=0,n=0,i=0,r=0,a=0,s=0,l=0,c=0;this.placement.includes("top")||this.placement.includes("bottom")?t.top<e.top?(o=t.left,n=t.bottom,i=t.right,r=t.bottom,a=e.left,s=e.top,l=e.right,c=e.top):(o=e.left,n=e.bottom,i=e.right,r=e.bottom,a=t.left,s=t.top,l=t.right,c=t.top):t.left<e.left?(o=t.right,n=t.top,i=e.left,r=e.top,a=t.right,s=t.bottom,l=e.left,c=e.bottom):(o=e.right,n=e.top,i=t.left,r=t.top,a=e.right,s=e.bottom,l=t.left,c=t.bottom),this.style.setProperty("--safe-area-top-left-x",`${o}px`),this.style.setProperty("--safe-area-top-left-y",`${n}px`),this.style.setProperty("--safe-area-top-right-x",`${i}px`),this.style.setProperty("--safe-area-top-right-y",`${r}px`),this.style.setProperty("--safe-area-bottom-left-x",`${a}px`),this.style.setProperty("--safe-area-bottom-left-y",`${s}px`),this.style.setProperty("--safe-area-bottom-right-x",`${l}px`),this.style.setProperty("--safe-area-bottom-right-y",`${c}px`)}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(t){super.updated(t),t.has("active")&&(this.active?this.start():this.stop()),t.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&"string"==typeof this.anchor){const t=this.getRootNode();this.anchorEl=t.getElementById(this.anchor)}else this.anchor instanceof Element||null!==(t=this.anchor)&&"object"==typeof t&&"getBoundingClientRect"in t?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');var t;this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.start()}start(){this.anchorEl&&(this.cleanup=ot(this.anchorEl,this.popup,(()=>{this.reposition()})))}async stop(){return new Promise((t=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame((()=>t()))):t()}))}reposition(){if(!this.active||!this.anchorEl)return;const t=[S({mainAxis:this.distance,crossAxis:this.skidding})];var e;this.sync?t.push(R({apply:({rects:t})=>{const e="width"===this.sync||"both"===this.sync,o="height"===this.sync||"both"===this.sync;this.popup.style.width=e?`${t.reference.width}px`:"",this.popup.style.height=o?`${t.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&t.push(E({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&t.push((void 0===(e={boundary:this.shiftBoundary,padding:this.shiftPadding})&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:n,placement:i}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:s={fn:t=>{let{x:e,y:o}=t;return{x:e,y:o}}},...l}=p(e,t),d={x:o,y:n},h=await P(t,l),y=m(f(i)),g=u(y);let b=d[g],v=d[y];if(r){const t="y"===g?"bottom":"right";b=c(b+h["y"===g?"top":"left"],b,b-h[t])}if(a){const t="y"===y?"bottom":"right";v=c(v+h["y"===y?"top":"left"],v,v-h[t])}const w=s.fn({...t,[g]:b,[y]:v});return{...w,data:{x:w.x-o,y:w.y-n}}}})),this.autoSize?t.push(R({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:t,availableHeight:e})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${e}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${t}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&t.push((t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:s,elements:l,middlewareData:f}=e,{element:u,padding:m=0}=p(t,e)||{};if(null==u)return{};const g=v(m),b={x:n,y:i},w=y(r),x=h(w),P=await s.getDimensions(u),E="y"===w,S=E?"top":"left",R=E?"bottom":"right",T=E?"clientHeight":"clientWidth",A=a.reference[x]+a.reference[w]-b[w]-a.floating[x],L=b[w]-a.reference[w],z=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let O=z?z[T]:0;O&&await(null==s.isElement?void 0:s.isElement(z))||(O=l.floating[T]||a.floating[x]);const _=A/2-L/2,$=O/2-P[x]/2-1,k=o(g[S],$),C=o(g[R],$),B=k,D=O-P[x]-C,N=O/2-P[x]/2+_,F=c(B,N,D),I=!f.arrow&&null!=d(r)&&N!=F&&a.reference[x]/2-(N<B?k:C)-P[x]/2<0,H=I?N<B?N-B:N-D:0;return{[w]:b[w]+H,data:{[w]:F,centerOffset:N-F-H,...I&&{alignmentOffset:H}},reset:I}}}))({element:this.arrowEl,padding:this.arrowPadding}));const n="absolute"===this.strategy?t=>et.getOffsetParent(t,it):et.getOffsetParent;nt(this.anchorEl,this.popup,{placement:this.placement,middleware:t,strategy:this.strategy,platform:{...et,getOffsetParent:n}}).then((({x:t,y:e,middlewareData:o,placement:n})=>{const i="rtl"===getComputedStyle(this).direction,r={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];if(this.setAttribute("data-current-placement",n),Object.assign(this.popup.style,{left:`${t}px`,top:`${e}px`}),!this.arrow)return;const a=o.arrow.x,s=o.arrow.y;let l="",c="",p="",f="";if("start"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";l="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",c=i?t:"",f=i?"":t}else if("end"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=i?"":t,f=i?t:"",p="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(f="number"==typeof a?"calc(50% - var(--arrow-size-diagonal))":"",l="number"==typeof s?"calc(50% - var(--arrow-size-diagonal))":""):(f="number"==typeof a?`${a}px`:"",l="number"==typeof s?`${s}px`:"");Object.assign(this.arrowEl.style,{top:l,right:c,bottom:p,left:f,[r]:"calc(var(--arrow-size-diagonal) * -1)"})})),requestAnimationFrame((()=>this.updateSafeArea())),this.emitter.dispatch("reposition")}render(){return e.x` <slot name="anchor" @slotchange="${this.handleAnchorChange}"></slot> <span part="safe-area" class="${t.U({"popup-safe-area":!0,"popup-safe-area--visible":this.safeArea&&this.active})}"></span> <div part="popup" class="${t.U({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}"> <slot></slot> ${this.arrow?e.x`<div part="arrow" class="popup--arrow" role="presentation"></div>`:""} </div> `}}ct.styles=at,t._([t.y(".popup")],ct.prototype,"popup",void 0),t._([t.y(".popup--arrow")],ct.prototype,"arrowEl",void 0),t._([t.n()],ct.prototype,"anchor",void 0),t._([t.n({type:Boolean,reflect:!0})],ct.prototype,"active",void 0),t._([t.n({reflect:!0})],ct.prototype,"placement",void 0),t._([t.n({reflect:!0})],ct.prototype,"strategy",void 0),t._([t.n({type:Number})],ct.prototype,"distance",void 0),t._([t.n({type:Number})],ct.prototype,"skidding",void 0),t._([t.n({type:Boolean})],ct.prototype,"arrow",void 0),t._([t.n({attribute:"arrow-placement"})],ct.prototype,"arrowPlacement",void 0),t._([t.n({attribute:"arrow-padding",type:Number})],ct.prototype,"arrowPadding",void 0),t._([t.n({type:Boolean})],ct.prototype,"flip",void 0),t._([t.n({attribute:"flip-fallback-placements",converter:{fromAttribute:t=>t.split(" ").map((t=>t.trim())).filter((t=>""!==t))}})],ct.prototype,"flipFallbackPlacements",void 0),t._([t.n({attribute:"flip-fallback-strategy"})],ct.prototype,"flipFallbackStrategy",void 0),t._([t.n({type:Object})],ct.prototype,"flipBoundary",void 0),t._([t.n({attribute:"flip-padding",type:Number})],ct.prototype,"flipPadding",void 0),t._([t.n({type:Boolean})],ct.prototype,"shift",void 0),t._([t.n({type:Object})],ct.prototype,"shiftBoundary",void 0),t._([t.n({attribute:"shift-padding",type:Number})],ct.prototype,"shiftPadding",void 0),t._([t.n({attribute:"auto-size"})],ct.prototype,"autoSize",void 0),t._([t.n()],ct.prototype,"sync",void 0),t._([t.n({type:Object})],ct.prototype,"autoSizeBoundary",void 0),t._([t.n({attribute:"auto-size-padding",type:Number})],ct.prototype,"autoSizePadding",void 0),t._([t.n({attribute:"safe-area",type:Boolean})],ct.prototype,"safeArea",void 0);let pt=class extends ct{};pt=t._([t.e("rpl-popper")],pt);const ft=t=>!!t&&!!t.startsWith("r/"),dt=(e,o,n,i)=>t.b(e,{...o?{post:{id:o,...ft(n)?{subreddit_name:n}:{}}}:{},...ft(n)?{subreddit:{name:n}}:{},...i?{ad_account:{id:i}}:{}});function ut(e){const o=new URLSearchParams(t.dO.search),n=new URL(e,t.dO.origin);return o.forEach(((t,e)=>{n.searchParams.has(e)||n.searchParams.set(e,t)})),n.href}return{P:st,a:dt,b:(t,e,{postId:o,subredditName:n,adAccountId:i}={})=>dt({source:"boost_post_page",action:t,noun:e},o,n,i),c:{activateAndOpenPromotePostModal:async({postId:e,postType:o,subredditName:n,identity:i})=>{let r=document.getElementById(t.hb);r||(await t.k({name:t.hc}),r=document.getElementById(t.hb)),r?.showModal({postId:e,postType:o,subredditName:n,identity:i})},activatePromotePostInsights:async({authorId:e,postId:o,postType:n,subredditName:i,adAccounts:r})=>{const a=document.querySelector(`faceplate-loader[name="${t.hd}"]`),s=document.querySelector(`faceplate-partial#${t.hd}-${o}`);a&&s&&(s.src+=`?postId=${o}`,s.src+=e?`&authorId=${e}`:"",s.src+=n?`&postType=${n}`:"",s.src+=i?`&subredditName=${i}`:"",s.src+=r?`&promotedAdAccounts=${encodeURI(JSON.stringify(r))}`:"",await Promise.all([a.load(),s.load()]))}},d:(t,e,o,n)=>dt({source:"boost_post",action:t,noun:e},o,n),g:t=>{const e=t.data?.adInsights,o=t.data?.identity,n=o?.email??"",i=t.data?.adAccountsByProfileId||[];return{adInsights:e,email:n,isOnboarded:i.length>0,adAccounts:i}},i:ft,p:ut,v:function(e){const o=ut(`/boost-post/${e.startsWith("t3_")?e.slice(3):e}`);t.dO.assign(o)}}}));
SML.dm("tooltipbaseaa9651a3",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d","utils93db03dd"],(async(e,t,i,o)=>{const s={Neutral:"neutral",Inverted:"inverted",Primary:"primary"};class n extends e.Q{constructor(){super(...arguments),this.contentSlotRef=e.aq(),this.defaultSlotRef=e.aq(),this.bodyRef=e.aq(),this.popperRef=e.aq(),this.interactionController=new i.aS(this,{isInteractedWith:e=>e.open,hoverDelayStart:t=>e.cD(getComputedStyle(t).getPropertyValue("--show-delay")),hoverDelayEnd:t=>e.cD(getComputedStyle(t).getPropertyValue("--hide-delay"))}),this.appearance=s.Neutral,this.content="",this.placement=o.P.Top,this.disabled=!1,this.distance=4,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.noAnimate=!1,this.eventUsedMap=new WeakMap,this.handleDocumentKeyDown=e=>{"Escape"===e.key&&(e.stopPropagation(),this.hide())},this.handleDocumentClick=e=>{if(!(e.target instanceof HTMLElement)||this.hidden)return;this.eventUsedMap.has(e)||i.aT(this,e.target)||this.hide()}}disconnectedCallback(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick)}willUpdate(e){e.has("open")&&this.hasUpdated&&this.handleOpenChange(),e.has("disabled")&&this.handleDisabledChange(),(e.has("content")||e.has("distance")||e.has("hoist")||e.has("placement")||e.has("skidding"))&&this.handleOptionsChange()}firstUpdated(){this.bodyRef.value&&(this.bodyRef.value.hidden=!this.open),this.open&&(document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),this.popperRef.value&&(this.popperRef.value.active=!0,this.popperRef.value.reposition()))}startInteraction(e){this.eventUsedMap.set(e,!0),this.show()}finishInteraction(e){this.eventUsedMap.set(e,!0),this.hide()}async handleOpenChange(){if(!this.disabled&&this.contentSlotRef.value&&this.bodyRef.value&&this.popperRef.value)if(this.open){this.emitter.dispatch("show"),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),await e.cE(this.bodyRef.value),this.bodyRef.value.hidden=!1,this.popperRef.value.active=!0;const{keyframes:t,options:i}=e.cF(this,"tooltip.show");await e.cG(this.popperRef.value.popup,t,i),this.popperRef.value.reposition(),this.emitter.dispatch("after-show")}else{this.emitter.dispatch("hide"),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick),await e.cE(this.bodyRef.value);const{keyframes:t,options:i}=e.cF(this,"tooltip.hide");await e.cG(this.popperRef.value.popup,t,i),this.popperRef.value.active=!1,this.bodyRef.value.hidden=!0,this.emitter.dispatch("after-hide")}}async handleOptionsChange(){this.hasUpdated&&this.popperRef.value&&(await this.updateComplete,this.popperRef.value.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,e.cH(this,this.emitter.eventId("after-show"))}async hide(){if(this.open)return this.open=!1,e.cH(this,this.emitter.eventId("after-hide"))}render(){return t.x` <rpl-popper part="popper" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${e.U({tooltip:!0,"tooltip--open":this.open})}" placement="${this.placement}" distance="${this.distance}" skidding="${this.skidding}" strategy="${this.hoist?"fixed":"absolute"}" flip shift arrow safe-area @mouseenter="${this.interactionController.handleMouseEnter}" @mouseleave="${this.interactionController.handleMouseLeave}" @mousedown="${this.interactionController.handleMouseDown}" @mouseup="${this.interactionController.handleMouseUp}" @focusin="${this.interactionController.handleFocus}" @focusout="${this.interactionController.handleBlur}" ${e.as(this.popperRef)}> <slot slot="anchor" aria-describedby="tooltip" @click="${this.interactionController.handleClick}" ${e.as(this.defaultSlotRef)}></slot> <div part="body" id="tooltip" class="tooltip-body" role="tooltip" aria-live="${this.open?"polite":"off"}" ${e.as(this.bodyRef)}> <slot name="content" ${e.as(this.contentSlotRef)}>${this.content}</slot> <slot name="shortcut"></slot> </div> </rpl-popper> `}}return e._([e.n({type:String,reflect:!0})],n.prototype,"appearance",void 0),e._([e.n()],n.prototype,"content",void 0),e._([e.n()],n.prototype,"placement",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"disabled",void 0),e._([e.n({type:Number})],n.prototype,"distance",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"open",void 0),e._([e.n({type:Number})],n.prototype,"skidding",void 0),e._([e.n()],n.prototype,"trigger",void 0),e._([e.n({type:Boolean})],n.prototype,"hoist",void 0),e._([e.n({type:Boolean,attribute:"no-animate"})],n.prototype,"noAnimate",void 0),e.cC("tooltip.show",{keyframes:[{visibility:"visible",opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}}),e.cC("tooltip.hide",{keyframes:[{scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}}),{T:n,a:s}}));
SML.dm("headeractionitemchatclientjsb3335fba",["shelle48e5956","iconc33661e6","tooltipbaseaa9651a3","agegatestandaloneclientjsb13e879d","utils93db03dd"],(async(o,t,r)=>{var a=t.a`${o.V}:host{--max-width:20rem;--hide-delay:0ms;--show-delay:750ms;display:contents}:host,:host([appearance=neutral]){--rpl-tooltip-code-background-color:var(--color-neutral-background-hover);--rpl-tooltip-background-color:var(--color-neutral-background);--rpl-tooltip-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-tooltip-code-background-color:var(--color-inverted-neutral-background-hover);--rpl-tooltip-background-color:var(--color-inverted-neutral-background);--rpl-tooltip-color:var(--color-inverted-neutral-content-strong)}:host([appearance=primary]){--rpl-tooltip-background-color:var(--color-tooltip-bg-primary);--rpl-tooltip-color:var(--color-tooltip-text-primary)}.tooltip{--arrow-size:var(--rpl-tooltip-arrow-size, 4px);--arrow-color:var(--rpl-tooltip-background-color)}.tooltip[placement^=top]::part(arrow){box-shadow:1px 1px 2px rgba(0,0,0,.05)}.tooltip[placement^=bottom]::part(arrow){box-shadow:-1px -1px 2px rgba(0,0,0,.05)}.tooltip[placement^=left]::part(arrow){box-shadow:0 -2px 2px rgba(0,0,0,.05)}.tooltip[placement^=right]::part(arrow){box-shadow:-2px 0 2px rgba(0,0,0,.05)}.tooltip::part(popup){z-index:var(--rpl-z-index-tooltip,var(--faceplate-tooltip-z-index,1))}.tooltip[placement^=top]::part(popup){transform-origin:bottom}.tooltip[placement^=bottom]::part(popup){transform-origin:top}.tooltip[placement^=left]::part(popup){transform-origin:right}.tooltip[placement^=right]::part(popup){transform-origin:left}.tooltip-body{display:flex;justify-content:center;align-items:center;width:max-content;max-width:var(--max-width);border-radius:var(--rpl-tooltip-border-radius,.25rem);box-shadow:var(--rpl-tooltip-box-shadow,var(--boxshadow-tooltip));background-color:var(--rpl-tooltip-background-color);font:var(--rpl-tooltip-font,var(--font-12-16-semibold));color:var(--rpl-tooltip-color);padding:var(--rpl-tooltip-padding,.5rem);pointer-events:none;user-select:none;-webkit-user-select:none;gap:var(--rem4)}::slotted([slot=shortcut]),::slotted(code[slot=shortcut]){font:var(--rpl-tooltip-font,var(--font-12-16-semibold))!important;color:var(--rpl-tooltip-color)!important;background-color:var(--rpl-tooltip-code-background-color)!important;border:none!important;border-radius:calc(var(--rpl-tooltip-border-radius,.25rem) - var(--rem2))!important;padding:var(--rem4)!important}`;let l=class extends r.T{};return l.styles=a,l=o._([o.e("rpl-tooltip")],l),{get R(){return l}}}));
SML.dm("faceplateselecttextinputbad79e01",["shelle48e5956","communitypickerf331f77f","iconc33661e6","selectcontroller4c63b3e8","constants9e09f052","utils57a7018c","tablepagination77cf692d"],(async(e,t,i,l,a,s)=>{let r=class extends a.F{constructor(){super(...arguments),this.appearance=s.T.SECONDARY,this.label="",this.clearable=!1,this.multiple=!1,this.required=!1,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.readonly=!1,this.inputRef=e.aq(),this._selectController=new l.S(this),this.focus=()=>{this.inputRef.value?.focus()},this.syncInputValidation=(e=!1)=>{const t=this.options.map((e=>e.value)),i=this.inputRef?.value?.value,l=this.value||this.arbitrary&&i||!this.arbitrary&&t.includes(i);if(this.required&&!l){const t=this.inputRef?.value?._internals.validationMessage;this.dropdownMenu?.hidden&&t&&(e?this.form?.invalidateFieldWithMessage(this.name,t):this.setCustomValidity(t))}else this.form?.invalidateFieldWithMessage(this.name,"")},this.resetFaceplateDirty=()=>{this.removeAttribute("faceplate-dirty")},this.matchOptionsToInput=e=>{if(this.autocomplete&&!this.multiple){const t=e.currentTarget?.value;this.options.forEach((e=>{const i=e.displayText?.toLowerCase().trim();if(this.onFilterOption?this.onFilterOption?.(t,e):i?.startsWith(t.toLowerCase())){if(!t)return e.removeAttribute("hidden"),void(e.matchedText="");e.hasAttribute("hidden")&&e.removeAttribute("hidden"),e.matchedText=e.displayText?.slice(0,t.length)}else e.setAttribute("hidden","")})),this._selectController.focusedIndex=0}},this.clear=e=>{e.preventDefault(),e.stopPropagation(),this._selectController.selectedOptions.forEach((e=>{e.resetSelection()})),this.inputRef.value&&(this.inputRef.value.value="")},this.handleKeyBindings=e=>{this.readonly||this.multiple?e.preventDefault():"Backspace"!==e.key||this.multiple||(this._selectController.value="")},this.getTextField=()=>i.x`<faceplate-text-input ?disabled="${this.disabled}" novalidate ${e.as(this.inputRef)} appearance="${this.appearance}" role="combobox" aria-controls="menu" aria-expanded="${!this.hidden}" id="trigger" faceplate-popper-trigger aria-label="${this.label}" value="${this._selectController.getSelectedOptionsAsStr()}" ?required="${this.required}" @input="${this.matchOptionsToInput}" suppress-internal-clicks persistent-trailing-icon with-select helper-text-aria-live="${i.l(this.helperTextAriaLive??void 0)}" helper-text-message="${i.l(this.helperTextMessage)}" helper-text-level="${i.l(this.helperTextLevel??void 0)}" helper-text-placeholder="${i.l(this.helperTextPlaceholder)}" helper-text-screen-reader-msg="${i.l(this.helperTextScreenReaderMsg)}" aria-autocomplete="list" name="${this.name}"> <span slot="label">${this.label}</span> <slot name="clearButton" slot="clearButton" @click="${this.clear}"></slot> <span slot="trailingIconButton">${i.N({attributes:{"aria-hidden":"true"}})}</span> </faceplate-text-input>`}get referenceElement(){return this.inputRef.value}get selectedOptions(){return this._selectController.selectedOptions}get selectedIndex(){return this._selectController.selectedIndex}get value(){return this._selectController.value}set value(e){e!==this.value&&(this._selectController.value=e)}connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.resetFaceplateDirty),this.addEventListener("keydown",this.handleKeyBindings)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this.resetFaceplateDirty),this.removeEventListener("keydown",this.handleKeyBindings)}async firstUpdated(){super.firstUpdated(),this.setupValidationSync()}async setupValidationSync(){const e=await t.c(this);e&&this.isConnected&&(this.inputRef.value?.hasValidationHelpers||this.inputRef.value?.setFormValidationHelpers(e),this.syncInputValidation(),this.addEventListener(e.validationTrigger,(()=>this.syncInputValidation(!0))),e.addEventListener("faceplate-submit",(()=>this.syncInputValidation(!0))))}static get styles(){return i.a`:host{display:inline-block}:host([disabled]){cursor:not-allowed}faceplate-text-input{flex:1}:host([readonly]){caret-color:transparent}faceplate-menu{height:var(--faceplate-select-menu-height,auto);width:var(--faceplate-select-menu-width,auto);max-height:var(--faceplate-select-menu-max-height,auto);max-width:var(--faceplate-select-menu-max-width,auto);overflow:auto}`}render(){return i.x` <faceplate-dropdown-menu ?disabled="${this.disabled}" position="bottom-start" manual-trigger-focus> ${this.getTextField()} <faceplate-menu part="menu" slot="menu" id="menu" ariarole="listbox" faceplate-popper-content disable-auto-focus> <slot></slot> </faceplate-menu> </faceplate-dropdown-menu> `}};e._([e.n({type:String})],r.prototype,"appearance",void 0),e._([e.n({type:String})],r.prototype,"label",void 0),e._([e.n({type:Boolean})],r.prototype,"clearable",void 0),e._([e.n({type:Boolean})],r.prototype,"multiple",void 0),e._([e.n({type:Boolean})],r.prototype,"required",void 0),e._([e.n({type:String})],r.prototype,"autocomplete",void 0),e._([e.n({type:Boolean})],r.prototype,"arbitrary",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-level"})],r.prototype,"helperTextLevel",void 0),e._([e.n({type:String,attribute:"helper-text-placeholder"})],r.prototype,"helperTextPlaceholder",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-aria-live"})],r.prototype,"helperTextAriaLive",void 0),e._([e.n({type:String,attribute:"helper-text-message"})],r.prototype,"helperTextMessage",void 0),e._([e.n({type:String,attribute:"helper-text-screen-reader-msg"})],r.prototype,"helperTextScreenReaderMsg",void 0),e._([e.n()],r.prototype,"onFilterOption",void 0),e._([e.n({type:Boolean})],r.prototype,"readonly",void 0),e._([e.j()],r.prototype,"options",void 0),e._([e.j({selector:"faceplate-option:not([hidden])"})],r.prototype,"visibleOptions",void 0),e._([e.j()],r.prototype,"triggerSlot",void 0),e._([e.y("faceplate-dropdown-menu")],r.prototype,"dropdownMenu",void 0),r=e._([e.e("faceplate-select-text-input")],r)}));
SML.dm("faceplateoption7a297e33",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(e,t,s)=>{class i extends(function(e){var t;return(t=class extends e{}).VERSION="unreleased",t}(t.s)){}let a=class extends i{constructor(){super(...arguments),this.selected=!1,this.disabled=!1,this.current=!1,this.emitter=s.J(this),this.trustedUpdate=!1,this.handleSelection=e=>{e.stopPropagation(),this.disabled||this.dispatchSelectRequest(!this.selected)},this.onClick=e=>{this.handleSelection(e)},this.dispatchSelectRequest=(e=this.selected,t)=>{this.emitter.dispatch("select",{bubbles:!0,composed:!0,detail:{option:this,selected:e,allowSingleDeselection:t}})},this.resetSelection=()=>{this.matchedText="",this.removeAttribute("hidden"),this.selected=!1,this.dispatchSelectRequest()},this.visualFocus=e=>{this.current=e}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener(this.emitter.eventId("update"),this.onUpdateFromSelect),this.setAttribute("role","option")}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener(this.emitter.eventId("update"),this.onUpdateFromSelect)}updated(e){e.has("selected")&&this.setAttribute("aria-selected",`${this.selected}`),e.has("disabled")&&this.setAttribute("tabindex",this.disabled?"-1":"0"),this.trustedUpdate&&(this.trustedUpdate=!1)}willUpdate(e){e.has("selected")&&!this.trustedUpdate&&this.dispatchSelectRequest(this.selected,!0)}onUpdateFromSelect(e){const{selected:t}=e.detail??{};t!==this.selected&&(this.selected=t,this.trustedUpdate=!0)}static get styles(){return t.a`:host{color:var(--color-secondary-plain);cursor:pointer;display:flex;align-items:center;gap:var(--spacer-xs);padding:var(--spacer-xs);min-width:var(--select-width, 'auto');box-sizing:border-box;outline-offset:-1px}:host([hidden]){display:none}:host(:hover){background:var(--color-neutral-background-strong-hover)}:host([selected]){background:var(--color-neutral-background-selected)}:host([current]){outline:1px auto var(--color-global-focus)}:host([disabled]){color:var(--color-interactive-content-disabled);pointer-events:none}slot[name=leading]{width:var(--size-xl);height:var(--size-xl);align-items:center}::slotted([slot=leading]){display:inline-flex}slot:not([name]){display:inline-block;width:100%;line-height:var(--rem20)}.matched-text{font-weight:700}`}render(){const e=this.matchedText?.length||0;return t.x`<slot name="leading"></slot> <slot> <span class="matched-text">${this.matchedText}</span><span>${this.displayText?.slice(e)}</span> </slot> <span>${this.selected?t.E():t.A}</span>`}};e._([e.n({type:Boolean})],a.prototype,"selected",void 0),e._([e.n({type:Boolean})],a.prototype,"disabled",void 0),e._([e.n({type:String})],a.prototype,"value",void 0),e._([e.n({type:String,attribute:"matched-text",reflect:!0})],a.prototype,"matchedText",void 0),e._([e.n({type:String,attribute:"display-text"})],a.prototype,"displayText",void 0),e._([e.n({type:Boolean,reflect:!0})],a.prototype,"current",void 0),e._([e.aP({flatten:!0})],a.prototype,"defaultSlot",void 0),a=e._([e.e("faceplate-option")],a)}));
SML.dm("rplcoachmark4e17786a",["shelle48e5956","iconc33661e6","tooltipbaseaa9651a3","utils93db03dd","agegatestandaloneclientjsb13e879d"],(async(r,o,t,a)=>{class e extends t.T{constructor(){super(...arguments),this.variant="plain",this.placement=a.P.Bottom,this.disabled=!1,this.label="",this.distance=8,this.animationNames={show:"coachmark.show",hide:"coachmark.hide",denyClose:"coachmark.denyClose",overlayShow:"coachmark.overlay.show",overlayHide:"coachmark.overlay.hide"}}connectedCallback(){super.connectedCallback(),this.addEventListener("rpl-coachmark-card:close-button-clicked",this.hide)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("rpl-coachmark-card:close-button-clicked",this.hide)}render(){return o.x` <rpl-popper ?active="${this.open}" strategy="${this.hoist?"fixed":"absolute"}" .anchor="${this.anchor}" flip shift arrow safe-area distance="${this.distance}" skidding="${this.skidding}" placement="${o.l(this.placement)}" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${r.U({coachmark:!0,"coachmark--open":this.open})}" ${r.as(this.popperRef)}> <slot slot="anchor" ${r.as(this.defaultSlotRef)}></slot> <slot name="content" ${r.as(this.bodyRef)} ${r.as(this.contentSlotRef)}></slot> </rpl-popper> `}}r._([r.n({type:String,reflect:!0})],e.prototype,"variant",void 0),r._([r.n({type:String,reflect:!0})],e.prototype,"placement",void 0),r._([r.n({type:Boolean,reflect:!0})],e.prototype,"disabled",void 0),r._([r.n({type:String,reflect:!0})],e.prototype,"label",void 0),r._([r.n()],e.prototype,"anchor",void 0);var p=o.a`${r.V}:host{--transition-duration:250ms;display:contents}:host,:host([appearance=neutral]){--rpl-coachmark-background-color:var(--color-neutral-background);--rpl-coachmark-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-coachmark-background-color:var(--color-inverted-neutral-background);--rpl-coachmark-color:var(--color-inverted-neutral-content-strong)}.coachmark{--arrow-size:var(--rpl-coachmark-arrow-size, 4px);--arrow-color:var(--rpl-coachmark-background-color)}rpl-popper{--arrow-size:8px}rpl-popper[placement^=top]::part(arrow){box-shadow:1px 1px 2px rgba(0,0,0,.05)}rpl-popper[placement^=bottom]::part(arrow){box-shadow:-1px -1px 2px rgba(0,0,0,.05)}rpl-popper[placement^=left]::part(arrow){box-shadow:0 -2px 2px rgba(0,0,0,.05)}rpl-popper[placement^=right]::part(arrow){box-shadow:-2px 0 2px rgba(0,0,0,.05)}rpl-popper::part(popup){z-index:var(--rpl-z-index-tooltip,var(--faceplate-tooltip-z-index,1))}rpl-popper[placement^=top]::part(popup){transform-origin:bottom}rpl-popper[placement^=bottom]::part(popup){transform-origin:top}rpl-popper[placement^=left]::part(popup){transform-origin:right}rpl-popper[placement^=right]::part(popup){transform-origin:left}`;let l=class extends e{};return l.styles=p,l=r._([r.e("rpl-coachmark")],l),{get RPLCoachmark(){return l}}}));
SML.dm("rplcoachmarkcard5c5498b1",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(t,e,o)=>{const a="title-icon",s="close-button",l="primary-button",r="secondary-button",n="tertiary-button";class i extends t.Q{constructor(){super(...arguments),this.appearance="neutral",this.autoClose=!1,this.emitCloseButtonClickEvent=()=>{this.emitter.dispatch("close-button-clicked",{bubbles:!0,composed:!0})},this.handleCloseButtonClick=t=>{t.stopPropagation(),this.autoClose&&this.emitCloseButtonClickEvent()},this.handleCloseButtonKeydown=t=>{this.autoClose&&"Enter"===t.key&&this.emitCloseButtonClickEvent()}}render(){const t=o.O(this,a),i=o.O(this,s),d=o.O(this,l),c=o.O(this,r),h=o.O(this,n),m=d||c||h;return e.x`<div> <slot name="${"title-graphic"}"></slot> <div class="main"> <div class="content"> <div class="title-row"> <slot name="${a}" class="${t?"has-slotted":""}"></slot> <slot name="${"title"}"></slot> <slot name="${s}" part="close-button" class="${i?"has-slotted":""}" @click="${this.handleCloseButtonClick}" @keydown="${this.handleCloseButtonKeydown}"></slot> </div> <div class="body"><slot></slot></div> </div> <div class="footer ${m?"has-slotted":""}"> <slot name="${n}" class="${h?"has-slotted":""}"></slot> <div class="footer-right"> <slot name="${r}"></slot> <slot name="${l}"></slot> </div> </div> </div> </div>`}}t._([t.n({type:String,reflect:!0})],i.prototype,"appearance",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"auto-close"})],i.prototype,"autoClose",void 0);var d=e.a`${t.V}:host{display:flex;flex-direction:column;border-radius:var(--rem16);overflow:hidden;box-shadow:var(--boxshadow-modal);gap:var(--rem8);background-color:var(--color-neutral-background);color:var(--color-neutral-content-strong)}:host([appearance=inverted]){background-color:var(--color-inverted-neutral-background);color:var(--color-inverted-neutral-content-strong)}.main{display:flex;flex-direction:column;padding:var(--rem8) var(--rem8) var(--rem8) var(--rem16)}slot[name=title-graphic]{display:flex}.title-row{display:flex}.body{padding-right:var(--rem8)}slot[name=title-icon].has-slotted{display:flex;padding-top:var(--rem8);padding-right:var(--rem12)}slot[name=title]{display:flex;align-items:center;flex-grow:1;flex-shrink:1;min-width:0;overflow:hidden;font-size:var(--rem14);font-weight:700}slot:not([name]){white-space:wrap}slot[name=close-button].has-slotted{display:flex;padding-left:var(--rem4)}slot[name=primary-button]{display:flex;padding-right:var(--rem8)}slot[name=tertiary-button].has-slotted{font-size:var(--rem12);flex-shrink:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:var(--rem8)}.footer{display:flex;align-items:center;justify-content:end;padding-right:var(--rem8)}.footer.has-slotted{padding-top:var(--rem8)}.footer:has(slot[name=tertiary-button].has-slotted){justify-content:space-between}.footer-right{display:flex}`;let c=class extends i{};return c.styles=d,c=t._([t.e("rpl-coachmark-card")],c),{get RPLCoachmarkCard(){return c}}}));
SML.dm("smartescalationsproviderclientjs1b1b1602",["shelle48e5956","iconc33661e6","communityonboardingcompletedmodalclientjsf4f5192c","huiuserdrawerclientjs91e856a7","TinyGesture26737d23","agegatestandaloneclientjsb13e879d"],(async(s,t)=>{var a;!function(s){s.SUCCESS="success"}(a||(a={}));let i=class extends t.s{constructor(){super(...arguments),this.pubsub=new s.P(this),this.requestClientGQL=s.B,this.isDesktop=!0,this.isDismiss=!1,this.subredditId="",this.authorId="",this._activateFeature=async t=>s.k(t),this.initSmartEscalations=async({thingId:t,removalReasonId:a,authorId:i,subredditId:e,removalReasonDisplayText:o})=>{this.subredditId=e,this.authorId=i,await this._activateFeature({name:s.gN,renderMode:s.o.Contents,queryParams:{thing_id:t,author_id:i,subreddit_id:e,is_moderator:!0,removal_reason_id:a,removal_reason_display_text:o,is_desktop:!!this.isDesktop}})},this.performAction=()=>{this.addRemovalReasonStatus===a.SUCCESS&&void 0!==this.smartEscalationsStatus&&(this.pubsub.publish(s.T.AddRemovalReasonClose),this.smartEscalationsStatus===s.fc.READY&&this.openSmartEscalations(),this.addRemovalReasonStatus=void 0,this.smartEscalationsStatus=void 0)},this.updateRemovalReasonStatus=s=>{this.addRemovalReasonStatus=s},this.updateSmartEscalationStatus=s=>{this.smartEscalationsStatus=s},this.openSmartEscalations=async()=>{await(this.rplDialogSheet?.showModal())},this.closeSmartEscalations=async s=>{this.isDismiss=s?.isDismiss??!1,await(this.rplDialogSheet?.hide())},this.dismissSmartEscalations=async()=>{try{if(!this.isDismiss)return;const t={input:{subredditID:this.subredditId,userID:this.authorId}};this.requestClientGQL({operation:s.O.DismissSmartEscalation,variables:t})}finally{this.isDismiss&&(this.isDismiss=!1),this.subredditId="",this.authorId=""}}}get rplDialogSheet(){return this.querySelector("rpl-dialog-sheet")}get featureRoot(){return document.querySelector("#smart-escalations-content-modal rpl-modal-card")}updated(s){(s.has("addRemovalReasonStatus")||s.has("smartEscalationsStatus"))&&this.performAction()}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(s.T.SmartEscalationsInit,this.initSmartEscalations,!1),this.pubsub.subscribe(s.T.SmartEscalationsDismiss,this.dismissSmartEscalations,!1),this.pubsub.subscribe(s.T.SmartEscalationsClose,this.closeSmartEscalations,!1),this.pubsub.subscribe(s.T.SmartEscalationsOpen,this.openSmartEscalations,!1),this.pubsub.subscribe(s.T.RemovalReasonStatus,this.updateRemovalReasonStatus,!1),this.pubsub.subscribe(s.T.SmartEscalationsStatus,this.updateSmartEscalationStatus,!1)}disconnectedCallback(){this.pubsub.unsubscribe(s.T.SmartEscalationsInit,this.initSmartEscalations),this.pubsub.unsubscribe(s.T.SmartEscalationsDismiss,this.dismissSmartEscalations),this.pubsub.unsubscribe(s.T.SmartEscalationsClose,this.closeSmartEscalations),this.pubsub.unsubscribe(s.T.SmartEscalationsOpen,this.openSmartEscalations),this.pubsub.unsubscribe(s.T.RemovalReasonStatus,this.updateRemovalReasonStatus),this.pubsub.unsubscribe(s.T.SmartEscalationsStatus,this.updateSmartEscalationStatus),super.disconnectedCallback()}render(){return t.x` <slot></slot>`}};return s._([s.n({type:Boolean,attribute:"is-desktop"})],i.prototype,"isDesktop",void 0),s._([s.d()],i.prototype,"addRemovalReasonStatus",void 0),s._([s.d()],i.prototype,"smartEscalationsStatus",void 0),i=s._([s.e("smart-escalations-provider")],i),{get R(){return a}}}));
SML.dm("modremovalreasonformclientjsba8e4d27",["shelle48e5956","iconc33661e6","rendersavedresponsetemplatebysubredditidb78cebab","awards2379b181","agegatestandaloneclientjsb13e879d","faceplateformcff507f5","communitypickerf331f77f","comment5b02ad76","overflowmenuactionsf8d12b95","links22118b0c","headeractionitemchatclientjsb3335fba","utils93db03dd","tooltipbaseaa9651a3","constants9e09f052","smartescalationsproviderclientjs1b1b1602","rplfilterchip3ad19f7c","faceplateselecttextinputbad79e01","faceplateoption7a297e33","rplcoachmark4e17786a","rplcoachmarkcard5c5498b1","chatmobilexpromoclientjs5e1c145c","faceplatetextareainput29f541e5","distinguishedtags1c4757ea","tablepagination77cf692d","selectcontroller4c63b3e8","userflairfe275854","utils57a7018c","textinput9c3f45be","communityonboardingcompletedmodalclientjsf4f5192c","huiuserdrawerclientjs91e856a7","TinyGesture26737d23"],(async(e,t,a,s,o,n,i,l,r,d,c,m,u,p,h)=>{const v="dont-notify-tooltip-close",g="removal-reason-input-changed",{svg:E}=t.g();var R=t.d(E`<path d="M17.153 6.75H15.9A2.753 2.753 0 0 0 13.153 4V2.75A2.753 2.753 0 0 0 15.9 0h1.25a2.752 2.752 0 0 0 2.75 2.75V4a2.752 2.752 0 0 0-2.747 2.75ZM15.3 3.375c.494.316.914.735 1.23 1.23a4.02 4.02 0 0 1 1.23-1.23 4.02 4.02 0 0 1-1.23-1.23 4.033 4.033 0 0 1-1.23 1.23ZM9.216 20h-1.33l-.085-.526c-.725-4.557-2.684-6.521-7.224-7.248l-.526-.084v-1.284l.527-.084c4.54-.727 6.5-2.691 7.224-7.248L7.886 3h1.33l.084.526c.725 4.557 2.684 6.521 7.225 7.248l.526.084v1.284l-.526.084c-4.541.727-6.5 2.691-7.225 7.248L9.216 20Zm-6.234-8.5a7.858 7.858 0 0 1 5.569 5.634 7.858 7.858 0 0 1 5.57-5.634 7.859 7.859 0 0 1-5.57-5.634A7.858 7.858 0 0 1 2.98 11.5Z"></path>`,"0 0 20 20","ai-outline");class b extends CustomEvent{constructor(e){super(b.eventName,{detail:e,bubbles:!0,composed:!0})}}b.eventName="select-suggested-removal-reason";let S=class extends t.s{constructor(){super(...arguments),this.reasons=[],this.suggestions=[],this.eventContext={}}getReasonNumber(e){const t=this.reasons.findIndex((t=>t.id===e));return t>=0?t+1:0}getSelectedChip(){return this.shadowRoot?.querySelector('rpl-filter-chip[name="removal-reason-suggestion"][selected]')??null}render(){return t.x` <div class="my-xs w-fit"> ${R({size:t.I.ExtraSmall})} Suggested <rpl-tooltip appearance="inverted" trigger="hover focus" placement="right" @click="${e=>e.preventDefault()}"> ${t.$({size:t.I.ExtraSmall})} <span slot="content" class="pointer-events-auto"> Suggestions based on the content, your rules, and your removal reasons. <a href="https://support.reddithelp.com/hc/articles/15484471320980-Saved-Responses" target="_blank" class="text-inverted-neutral-content-strong" @click="${e=>e.stopPropagation()}"> Learn more </a> </span> </rpl-tooltip> <div class="flex flex-col gap-xs mt-xs"> ${this.suggestions.map((e=>{const a=this.getReasonNumber(e.id);return t.x` <faceplate-tracker source="moderator" action="click" noun="removal_reason_recommendation" data-faceplate-tracking-context="${JSON.stringify({action_info:{reason:e.id},subreddit:{id:this.eventContext.subredditId},post:{id:this.eventContext.postId},comment:{id:this.eventContext.commentId}})}" @click="${e=>{e.preventDefault(),e.stopPropagation()}}"> <rpl-filter-chip name="removal-reason-suggestion" class="max-w-fit" appearance="bordered" data-removal-reason-id="${e.id}" ?selected="${this.value===e.id}" @click="${()=>{this.dispatchEvent(new b({reasonId:e.id}))}}">${a?`${a}. `:""}${e.title}</rpl-filter-chip> </faceplate-tracker> `}))} </div> </div> `}};S.styles=[e.t],e._([e.n({type:Array})],S.prototype,"reasons",void 0),e._([e.n({type:Array})],S.prototype,"suggestions",void 0),e._([e.n({type:Object,attribute:"event-context"})],S.prototype,"eventContext",void 0),e._([e.n()],S.prototype,"value",void 0),S=e._([e.e("removal-reason-suggestions")],S);let y=class extends t.s{constructor(){super(...arguments),this._showCoachmark=!localStorage.getItem(this.getLocalStorageKey()),this.closeCoachmark=e=>{e.stopPropagation(),this._showCoachmark=!1},this.handleLearnMore=e=>{e.stopPropagation(),window.open("https://support.reddithelp.com/hc/articles/15484471320980-Saved-Responses","_blank")}}getLocalStorageKey(){return e.L.RemovalReasonSuggestionsCoachmarkSeen}connectedCallback(){super.connectedCallback();localStorage.getItem(this.getLocalStorageKey())?this._showCoachmark=!1:(localStorage.setItem(this.getLocalStorageKey(),"true"),this._showCoachmark=!0)}disconnectedCallback(){super.disconnectedCallback()}render(){return t.x`<rpl-coachmark placement="${m.P.Bottom}" appearance="${u.a.Inverted}" ?open="${this._showCoachmark}" class="w-[270px]"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${u.a.Inverted}" class="w-[270px]"> <div slot="title" class="pt-xs pb-2xs"> <div> Save time with suggested removal reasons </div> </div> ${e.r({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark(e)}},appearance:"plainInverted",size:e.s.Small,leadingIcon:t.C({size:t.I.Small})})} <div class="text-12 mb-sm"> Based on the content, your rules, and your removal reasons, we\u2019ll suggest the most likely removal reasons. </div> ${e.r({attributes:{slot:"secondary-button",onclick:this.handleLearnMore},children:"Learn More",appearance:"plainInverted",size:e.s.Small})} ${e.r({attributes:{slot:"primary-button",onclick:this.closeCoachmark},children:"Got It",appearance:"plainInverted",size:e.s.Small})} </rpl-coachmark-card> </rpl-coachmark>`}};y.styles=[e.t],e._([e.d()],y.prototype,"_showCoachmark",void 0),y=e._([e.e("removal-reason-suggestions-coachmark")],y);class f extends p.F{constructor(){super(...arguments),this.isInputDirty=!1,this.required=!1,this.handleSubmit=()=>{this.isInputDirty=!0},this.handleInvalid=e=>{e.preventDefault()}}get value(){const e=this._internals.getFormValue();return e?e.toString():null}set value(e){e!==this.value&&(this._internals.setFormValue(e),this.updateValidity(),this.dispatchEvent(new CustomEvent(g,{detail:{value:e},bubbles:!0})))}connectedCallback(){super.connectedCallback(),i.c(this).then((e=>{e?.addEventListener("faceplate-submit",this.handleSubmit)})),this.addEventListener("invalid",this.handleInvalid),this.updateValidity()}disconnectedCallback(){super.disconnectedCallback(),this.form?.removeEventListener("faceplate-submit",this.handleSubmit),this.removeEventListener("invalid",this.handleInvalid)}updateValidity(){this.required&&!this.value?this._internals.setValidity({valueMissing:!0},this.getValueMissingValidationMessage()):this._internals.setValidity(),this.requestUpdate()}getValueMissingValidationMessage(){return""}renderValidationState(){return this.isInputDirty&&this.validationMessage?t.x`<span class="text-12 text-danger-content px-md">${this.validationMessage}</span>`:null}}e._([e.d()],f.prototype,"isInputDirty",void 0),e._([e.n({type:Boolean})],f.prototype,"required",void 0);class _ extends CustomEvent{constructor(e){super(_.eventName,{detail:e,bubbles:!0,composed:!0})}}_.eventName="select-removal-reason";let I=class extends f{constructor(){super(...arguments),this.isSitewide=!1,this.selectedRemovalReason=this.value,this.handleSelectSuggestedRemovalReason=e=>{this.selectReasonById(e.detail.reasonId,!1)},this.handleSelect=e=>{const t=e.target;this.selectReasonById(t.value)}}get displayText(){return this.reasons?.find((e=>e.id===this.value))?.title||""}static get styles(){return[e.t,t.a`:host{display:flex;flex-direction:column}`]}getValueMissingValidationMessage(){return"Removal reason is required."}getPlatformRuleOption(){return{id:"default-removal-reason",title:"Breaking platform rules",message:""}}selectReasonById(e,t=!0){const a=(this.includePlatformRuleOption?[...this.reasons||[],this.getPlatformRuleOption()]:this.reasons||[]).find((t=>t.id===e));a&&this.selectedRemovalReason!==a.id&&(this.selectedRemovalReason=a.id,this.value=a.id,this.dispatchEvent(new _({...a,isSitewide:this.isSitewide,trackEvent:t})))}getDropdownPlaceholder(){return this.isSitewide?"Select a platform rule":"Select a removal reason"}connectedCallback(){super.connectedCallback(),this.addEventListener(b.eventName,this.handleSelectSuggestedRemovalReason)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(b.eventName,this.handleSelectSuggestedRemovalReason)}render(){return t.x` <label class="text-16 text-neutral-content-strong"> ${super.render()} </label> <faceplate-select-text-input label="${this.getDropdownPlaceholder()}" value="${this.selectedRemovalReason}" readonly="readonly" style="--faceplate-select-menu-max-height:350px;-faceplate-select-menu-max-width:80vw" @faceplate-select-text-input:change="${this.handleSelect}"> ${this.reasons?.map(((e,a)=>t.x`<faceplate-option value="${e.id}" display-text="${e.title}" ?selected="${e.id===this.selectedRemovalReason}"><span slot="leading" class="whitespace-nowrap text-16">${a+1}</span></faceplate-option>`))} ${this.includePlatformRuleOption&&t.x`<faceplate-option value="default-removal-reason" display-text="${this.getPlatformRuleOption().title}"></faceplate-option>`} ${this.includeAddRemovalReasonOption&&t.x`<faceplate-option value="add-removal-reason"> <slot name="link"></slot> </faceplate-option>`} </faceplate-select-text-input> ${this.renderValidationState()} ${this.removalReasonSuggestionsContext?.predictedRemovalSavedResponses&&this.removalReasonSuggestionsContext?.predictedRemovalSavedResponses.length>0?t.x` <removal-reason-suggestions-coachmark> <removal-reason-suggestions class="block w-fit" reasons="${JSON.stringify(this.reasons)}" suggestions="${JSON.stringify(this.removalReasonSuggestionsContext.predictedRemovalSavedResponses)}" event-context="${JSON.stringify(this.removalReasonSuggestionsContext.eventContext)}" value="${this.selectedRemovalReason}"></removal-reason-suggestions> </removal-reason-suggestions-coachmark> `:""} `}};e._([e.n({type:Array})],I.prototype,"reasons",void 0),e._([e.n({type:Boolean,attribute:"is-sitewide"})],I.prototype,"isSitewide",void 0),e._([e.n({type:Boolean,attribute:"include-platform-rule-option"})],I.prototype,"includePlatformRuleOption",void 0),e._([e.n({type:Boolean,attribute:"include-add-removal-reason-option"})],I.prototype,"includeAddRemovalReasonOption",void 0),e._([e.n({type:Object,attribute:"removal-reason-suggestions-context"})],I.prototype,"removalReasonSuggestionsContext",void 0),e._([e.d()],I.prototype,"selectedRemovalReason",void 0),I=e._([e.e("removal-reason-input")],I);const{svg:T}=t.g();var M=t.d(T`<path d="m16.784 9.5 2.558 2.558-.884.884-2.558-2.558-2.558 2.558-.884-.884L15.016 9.5l-2.558-2.558.884-.884L15.9 8.616l2.558-2.558.884.884L16.784 9.5Zm-6.427 10.248A1.128 1.128 0 0 0 11 18.715V1.286a1.131 1.131 0 0 0-.643-1.034A1.091 1.091 0 0 0 9.19.405L3.815 5.056H2.108A1.124 1.124 0 0 0 1 6.194v7.613a1.124 1.124 0 0 0 1.108 1.138h1.707L9.2 19.608a1.084 1.084 0 0 0 1.157.14ZM2.25 6.306h2.031l5.47-4.733v16.855L4.28 13.7h-2.03V6.306Z"></path>`,"0 0 20 20","mute-outline");let D=class extends c.R{constructor(){super(),this.tooltipVisible=!1,this.trigger="manual",this.placement="top",this.appearance="neutral"}connectedCallback(){super.connectedCallback(),this.initializeTooltip(),this.addEventListener(v,this.hideTooltip)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(v,this.hideTooltip)}async initializeTooltip(){e.l.getItem(e.L.RemovalReasonDontNotifyDismissed)||setTimeout((()=>this.showTooltip()),750)}showTooltip(){this.show()}hideTooltip(t){t.stopPropagation(),e.l.setItem(e.L.RemovalReasonDontNotifyDismissed,"true"),this.hide()}};e._([e.d()],D.prototype,"tooltipVisible",void 0),D=e._([e.e("dont-notify-tooltip")],D);let C=class extends t.s{constructor(){super(...arguments),this.isAIModEnabledForSubreddit=!1}handleClose(){this.dispatchEvent(new CustomEvent(v,{bubbles:!0}))}render(){return t.x` <div class="pointer-events-auto py-xs pl-xs w-[200px]"> <div class="flex flex-row"> <div> <div class="text-14 font-bold text-neutral-content-strong"> Don't want to notify? </div> <div class="text-12 font-normal text-neutral-content-strong"> ${this.isAIModEnabledForSubreddit?"Use removal reasons to train automations and track mod actions without notifying users.":"Use removal reasons to track mod actions without notifying users."} </div> </div> ${e.r({appearance:"secondary",leadingIcon:t.C({size:t.I.Small}),size:e.s.Small,screenReaderContent:"Close tooltip",attributes:{type:"button",className:"flex-shrink-0 -mt-xs",onclick:this.handleClose}})} </div> <div class="flex justify-end mt-md"> ${e.r({appearance:"plain",size:e.s.Small,children:"Okay",attributes:{type:"button",onclick:this.handleClose}})} </div> </div> `}};var L;C.styles=[e.t],e._([e.n({type:Boolean,attribute:"is-ai-mod-enabled-for-subreddit"})],C.prototype,"isAIModEnabledForSubreddit",void 0),C=e._([e.e("dont-notify-tooltip-content")],C),function(e){e.Comment="Comment",e.Modmail="Modmail",e.DontNotify="DontNotify"}(L||(L={}));let x=class extends f{constructor(){super(...arguments),this.isModmailAllowed=!1,this.isAIModEnabledForSubreddit=!1}static get styles(){return[e.t,t.a`:host{display:flex;flex-direction:column;gap:var(--spacer-xs)}`]}connectedCallback(){super.connectedCallback(),this.value=L.Comment}getValueMissingValidationMessage(){return"Please select the notification method."}render(){return t.x` <label class="text-16 text-neutral-content-strong"> ${this._internals.input} Notify user via </label> <div class="flex flex-row gap-xs"> ${e.r({appearance:"bordered",children:"Comment",leadingIcon:t.a8({size:t.I.Small}),selected:this.value===L.Comment,attributes:{type:"button",onclick:()=>{this.value=L.Comment,this.requestUpdate()}}})} ${this.isModmailAllowed?e.r({appearance:"bordered",children:"Mod Mail",leadingIcon:t.aO({size:t.I.Small}),selected:this.value===L.Modmail,attributes:{type:"button",onclick:()=>{this.value=L.Modmail,this.requestUpdate()}}}):t.A} <dont-notify-tooltip> ${e.r({appearance:"bordered",children:"Don't Notify",leadingIcon:M({size:t.I.Small}),selected:this.value===L.DontNotify,attributes:{type:"button",onclick:()=>{this.value=L.DontNotify,this.requestUpdate()}}})} <dont-notify-tooltip-content ?is-ai-mod-enabled-for-subreddit="${this.isAIModEnabledForSubreddit}" slot="content"></dont-notify-tooltip-content> </dont-notify-tooltip> </div> ${this.renderValidationState()} `}};var A;e._([e.n({type:Boolean,attribute:"is-mod-mail-allowed"})],x.prototype,"isModmailAllowed",void 0),e._([e.n({type:Boolean,attribute:"is-ai-mod-enabled-for-subreddit"})],x.prototype,"isAIModEnabledForSubreddit",void 0),x=e._([e.e("removal-reason-notification-method")],x),function(e){e.User="User",e.Mod="Mod"}(A||(A={}));let k=class extends f{static get styles(){return[e.t,t.a`:host{display:flex;flex-direction:column;gap:var(--spacer-xs)}`]}connectedCallback(){super.connectedCallback(),this.value=A.Mod}getValueMissingValidationMessage(){return"Please select the notification sender."}render(){return t.x` <label class="text-16 text-neutral-content-strong"> ${this._internals.input} Send message as </label> <div class="flex flex-row gap-xs"> ${e.r({appearance:"bordered",children:"Mod Team",leadingIcon:t.x`<slot name="mod-icon"></slot>`,selected:this.value===A.Mod&&!this.disabled,attributes:{type:"button",disabled:this.disabled,onclick:()=>{this.value=A.Mod,this.requestUpdate()}}})} ${e.r({appearance:"bordered",children:this.user,leadingIcon:t.x`<slot name="user-icon"></slot>`,selected:this.value===A.User&&!this.disabled,attributes:{type:"button",disabled:this.disabled,onclick:()=>{this.value=A.User,this.requestUpdate()}}})} </div> ${this.renderValidationState()} `}};e._([e.n()],k.prototype,"user",void 0),k=e._([e.e("removal-reason-notification-sender")],k);class O extends CustomEvent{constructor(e){super(O.eventName,{bubbles:!0,composed:!0,cancelable:!0,detail:e})}}O.eventName="mod-removal-reason-added";class w extends CustomEvent{constructor(e){super(w.eventName,{bubbles:!0,composed:!0,cancelable:!0,detail:e})}}w.eventName="removal-reason-form-element-clicked";let N=class extends(e.C(n.F)){constructor(){super(),this._eventController=new e.E(this),this.handleFormElementClicked=e=>{e.target?.name&&this.dispatchEvent(new w({formElement:e.target.name}))},this.handleRemovalReasonInputChanged=e=>{if(e.target instanceof x){const t=e.target.value!==L.DontNotify;this.toggleNotificationSender(t),this.toggleMessageInput(t)}e.target instanceof I&&"removal-reason"===e.target.name&&this.toggleDefaultPolicyInput("default-removal-reason"===e.target.value)},this.convertFormDataToGql=e=>{const t=e.get("notification-method"),a=e.get("notification-sender"),s={reasonId:this.getRemovalReasonId(e),type:this.parseRemovalReasonMessageType(t,a),message:t===L.DontNotify?null:e.get("message"),isLockComment:e.has("lock")},o=e.get("modNote")||void 0,n={itemId:e.get("thing")?.toString()||"",removalReason:s,modNote:o};return this.lastSubmittedData=n,JSON.stringify({...n,csrf_token:e.get("csrf_token")})},this.encoders={...this.encoders,"application/json":this.convertFormDataToGql}}connectedCallback(){super.connectedCallback(),this._eventController.define(g,this.handleRemovalReasonInputChanged),this._eventController.define("click",this.handleFormElementClicked)}toggleNotificationSender(e){const t=this.elements["notification-sender"];t&&(e?t.removeAttribute("disabled"):t.setAttribute("disabled",""))}toggleField(e,t){e&&(t?(e.classList.remove("hidden"),e.setAttribute("required","")):(e.classList.add("hidden"),e.removeAttribute("required")))}toggleMessageInput(e){const t=this.elements.message;t&&this.toggleField(t,e)}toggleDefaultPolicyInput(e){const t=this.elements["default-removal-reason"];t&&this.toggleField(t,e)}showError(){const t={level:e.x.error,message:"Something went wrong",cause:e.ag.QueryBadResponse};this.dispatchEvent(e.c("faceplate-alert",t))}async handleResponse(t){if(!t.ok)return this.dispatchEvent(e.c($.eventName)),this.showError();try{const a=await t.text(),s={level:e.x.success,message:"Removal reason added"},o=this.lastSubmittedData?.itemId||"";if(d.l(o)){const t={postId:o,action:r.a.addRemovalReason,value:!0};this.publish(e.T.PostUpdated,t)}else{const t={commentId:o,action:l.C.addRemovalReason,value:!0};this.publish(e.T.CommentUpdated,t)}if(a){const t={parentThingId:o,body:a};this.publish(e.T.CommentCreated,t)}this.dispatchEvent(e.c($.eventName)),this.dispatchEvent(e.c("faceplate-alert",s)),this.lastSubmittedData&&this.dispatchEvent(new O(this.lastSubmittedData))}catch{this.showError()}}parseRemovalReasonMessageType(t,a){return t===L.Comment?a===A.Mod?e.gM.CommentAsSubreddit:e.gM.CommentAsMod:t===L.Modmail?a===A.Mod?e.gM.MessageAsSubreddit:e.gM.MessageAsMod:null}getRemovalReasonId(e){const t=e.get("removal-reason");return"default-removal-reason"===t?e.get("default-removal-reason"):t}};N=e._([e.e("removal-reason-form")],N),i.r(N);const P={"removal-reason":"subreddit_removal_reason","default-removal-reason":"default_removal_reason",message:"message_to_user","notification-method":"notification_method","notification-sender":"notification_sender",modNote:"mod_note"};class H extends CustomEvent{constructor(e){super(H.eventName,{detail:e,bubbles:!0,composed:!0})}}H.eventName="mod-add-removal-reason-show-modal";class $ extends CustomEvent{constructor(){super($.eventName)}}$.eventName="mod-add-removal-reason-toggle-loading";let j=class extends t.s{constructor(){super(...arguments),this.pubsub=new e.P(this),this.getInputValue=e=>this.removalReasonForm?.querySelector(`input[name="${e}"]`)?.value,this.buildAndTrackEvent=t=>{const a={action:"click",...t,authorId:this.getInputValue("authorId"),subredditId:this.getInputValue("subredditId"),subredditName:this.subredditName,thingId:this.thingId};e.a(this,s.y(a))},this.firstUpdated=()=>{this.isSmartEscalationsCommunityRulesEnabled&&this.updateComplete.then((()=>{this.primaryButton?.addEventListener("click",(()=>{this.removalReasonForm?.isValid&&(this.toggleButtonLoadingIndicator(),this.initSmartEscalations())}))}))},this.handleAddRemovalReasonEvent=({detail:e})=>{""!==e?this.show(e):this.thingId=void 0},this.handleFormElementClicked=e=>{const t={type:P[e.detail.formElement]||e.detail.formElement},a=this.removalReasonForm?.elements[e.detail.formElement]?.value||this.getInputValue(e.detail.formElement);if("lock"===e.detail.formElement&&(t.isLocked="on"===a),"notification-method"===e.detail.formElement){if(!a)return;t.notificationMethod=a}if("notification-sender"===e.detail.formElement){if(!a)return;t.sendAs=a}this.buildAndTrackEvent(t)},this.handleSelectRemovalReason=async e=>{const t=this.removalReasonInput?.removalReasonSuggestionsContext;e.detail.trackEvent&&this.buildAndTrackEvent({type:e.detail.isSitewide?"default_removal_reason":"subreddit_removal_reason",reason:e.detail.id,noun:"removal_reason_select",subredditId:t?.eventContext?.subredditId,postId:t?.eventContext?.postId,commentId:t?.eventContext?.commentId});const a=this.removalReasonForm,s=this.shadowRoot?.querySelector("faceplate-textarea-input");s&&e.detail.message&&(s.value=await this.renderRemovalReasonMessage(e.detail.id,e.detail.message),await s.updateComplete,s.syncInputValidity(),a?.notifyObservers(s))},this.renderRemovalReasonMessage=async(e,t)=>{try{return await this.renderRemovalReasonAsSavedResponseTemplate(e)}catch{return t}},this.renderSavedResponseTemplateBySubredditId=a.r,this.renderRemovalReasonAsSavedResponseTemplate=e=>this.renderSavedResponseTemplateBySubredditId({responseId:e,subredditId:this.getInputValue("subredditId")||"",contentId:this.thingId}),this.handleAddedRemovalReason=t=>{let a=function(t){let a;a=t.type===e.gM.CommentAsMod||t.type===e.gM.CommentAsSubreddit?"comment":t.type===e.gM.MessageAsMod||t.type===e.gM.MessageAsSubreddit?"modmail":"no message";const s=t.type===e.gM.CommentAsSubreddit||t.type===e.gM.MessageAsSubreddit?"subreddit":"self";return{is_locked:t.isLockComment,notify:a,send_as:s}}(t.detail.removalReason);const o=this.removalReasonInput?.removalReasonSuggestionsContext?.predictedRemovalSavedResponses?.map((e=>e.id));o&&(a={...a,suggestion_list:o}),e.a(this,s.z(a,this.removalReasonInput?.value??void 0,this.removalReasonInput?.removalReasonSuggestionsContext?.eventContext)),this.isSmartEscalationsCommunityRulesEnabled&&!this.isExpandSuggestedActionsEnabled?(this.buildAndTrackEvent({type:"submit_button",reason:"default-removal-reason"===this.removalReasonInput?.value?this.defaultRemovalReasonInput?.value??void 0:this.removalReasonInput?.value??void 0,notificationMethod:this.removalReasonForm?.elements["notification-method"]?.value,sendAs:this.removalReasonForm?.elements["notification-sender"]?.value,isLocked:"on"===this.getInputValue("lock"),modNote:this.getInputValue("modNote"),message:this.getInputValue("message")}),this.pubsub.publish(e.T.RemovalReasonStatus,h.R.SUCCESS)):this.close()},this.handleCancel=t=>{t.stopImmediatePropagation(),this.buildAndTrackEvent({type:"close_button"}),e.a(this,s.A()),this.close()},this.toggleButtonLoadingIndicator=()=>{this.primaryButton?.querySelector("faceplate-progress")?.classList.toggle("hidden"),this.primaryButton?.querySelector("span.submit-button-content")?.classList.toggle("opacity-0")},this.showHideSubmitButton=()=>{this.removalReasonInput?this.primaryButton?.classList.remove("hidden"):this.primaryButton?.classList.add("hidden")},this.close=()=>{this.modal?.open&&(this.modal?.close(),document.body.style.overflow="auto",document.body.style.pointerEvents="auto")},this.initSmartEscalations=()=>{const t=this.getInputValue("authorId"),a=this.getInputValue("subredditId"),s=t&&a&&this.thingId;s&&this.pubsub.publish(e.T.SmartEscalationsInit,{thingId:this.thingId,authorId:t,subredditId:a,removalReasonId:(this.defaultRemovalReasonInput?.value||this.removalReasonInput?.value)??"",removalReasonDisplayText:(this.defaultRemovalReasonInput?.displayText||this.removalReasonInput?.displayText)??""}),!s&&this.close()}}get removalReasonInput(){return this.shadowRoot?.querySelector('[name="removal-reason"]')}get defaultRemovalReasonInput(){return this.shadowRoot?.querySelector('[name="default-removal-reason"]')}get removalReasonForm(){return this.shadowRoot?.querySelector("removal-reason-form")}get primaryButton(){return this.shadowRoot?.querySelector('faceplate-modal [slot=primaryButton] button[type="submit"]')}get selectedSuggestionValue(){const e=this.removalReasonInput?.shadowRoot?.querySelector("removal-reason-suggestions"),t=e?.getSelectedChip();return t?.dataset.removalReasonId}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.AddRemovalReasonClose,this.close,!1),this.addEventListener(_.eventName,this.handleSelectRemovalReason),this.addEventListener(O.eventName,this.handleAddedRemovalReason),this.addEventListener($.eventName,this.toggleButtonLoadingIndicator),this.addEventListener(w.eventName,this.handleFormElementClicked),window.addEventListener(H.eventName,this.handleAddRemovalReasonEvent)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub.unsubscribe(e.T.AddRemovalReasonClose,this.close),window.removeEventListener(H.eventName,this.handleAddRemovalReasonEvent),this.removeEventListener(_.eventName,this.handleSelectRemovalReason),this.removeEventListener(O.eventName,this.handleAddedRemovalReason),this.removeEventListener($.eventName,this.toggleButtonLoadingIndicator),this.addEventListener(w.eventName,this.handleFormElementClicked)}async show(e){e&&(this.thingId=e,await this.updateComplete),this.modal?.showModal(),await(this.partial?.load()),this.buildAndTrackEvent({action:"view"}),this.primaryButton?.querySelector("faceplate-progress")?.classList.add("hidden"),this.primaryButton?.querySelector("span.submit-button-content")?.classList.remove("opacity-0"),this.showHideSubmitButton()}render(){return t.x` <removal-reason-form class="mb-0" enctype="application/json" method="POST" action="/svc/shreddit/mod/removal-reason"> <faceplate-modal class="max-w-[540px] w-[90v w] z-30"> <div slot="closeButton"> ${e.r({appearance:"secondary",leadingIcon:t.C({size:t.I.Small}),size:e.s.Small,attributes:{type:"button",onclick:this.handleCancel}})} </div> <input type="hidden" name="thing" value="${this.thingId}"> ${o.aa(this.thingId,t.x` <faceplate-partial class="w-100" src="/svc/shreddit/removal-reason-form/${this.thingId}" loading="${e.I.Programmatic}"> <div class="w-100 h-4xl flex items-center justify-center"> <faceplate-progress value="20" class="animate-spin"></faceplate-progress> </div> </faceplate-partial> `)} <div slot="primaryButton"> ${e.r({children:t.x`<faceplate-progress value="20" class="animate-spin loading-icon hidden absolute left-0 right-0 m-auto w-[16px]" style="--loader-size:1rem"></faceplate-progress> <span class="submit-button-content"> Submit</span>`,appearance:"primary",attributes:{type:"submit",className:"w-100 relative"}})} </div> <div slot="secondaryButton"> ${e.r({children:"Cancel",appearance:"plain",attributes:{className:"w-100",type:"button",onclick:this.handleCancel}})} </div> </faceplate-modal> </removal-reason-form> `}};return j.styles=[e.t],e._([e.n({type:Boolean,attribute:"is-smart-escalations-community-rules-enabled"})],j.prototype,"isSmartEscalationsCommunityRulesEnabled",void 0),e._([e.n({type:Boolean,attribute:"is-expand-suggested-actions-enabled"})],j.prototype,"isExpandSuggestedActionsEnabled",void 0),e._([e.n({type:String})],j.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"subreddit-name"})],j.prototype,"subredditName",void 0),e._([e.y("faceplate-modal")],j.prototype,"modal",void 0),e._([e.y("faceplate-partial")],j.prototype,"partial",void 0),j=e._([e.e("add-removal-reason-modal")],j),{A:H}}));
SML.dm("modbulkactionsb972488b",["distinguishedtags1c4757ea","shelle48e5956"],(async(a,o)=>{var t;!function(a){a.approve="approve",a.remove="remove",a.confirmRemoval="confirm_removal"}(t||(t={}));const r={[a.M.ApproveContent]:t.approve,[a.M.ConfirmRemoval]:t.confirmRemoval,[a.M.RemoveContent]:t.remove};let e=o.B;return{get A(){return t},M:class{async modBulkApprove(a){const{data:t}=await e({operation:o.O.ModBulkApprove,variables:{input:{ids:a}}});return t.modApproveBulk}async modBulkRemove(a,t=!1){const{data:r}=await e({operation:o.O.ModBulkRemove,variables:{input:{ids:a,isSpam:t}}});return r.modRemoveBulk}async modBulkRemoveAsSpam(a){const{data:t}=await e({operation:o.O.ModBulkRemove,variables:{input:{ids:a,isSpam:!0}}});return t.modRemoveBulk}async modBulkIgnore(a){const{data:t}=await e({operation:o.O.ModBulkIgnore,variables:{input:{ids:a}}});return t.modIgnoreBulk}async modBulkLock(a){const{data:t}=await e({operation:o.O.ModBulkLock,variables:{input:{ids:a}}});return t.modLockBulk}async modBulkMarkNSFW(a){const{data:t}=await e({operation:o.O.ModBulkMarkNSFW,variables:{input:{ids:a}}});return t.modMarkNsfwBulk}async modBulkMarkSpoiler(a){const{data:t}=await e({operation:o.O.ModBulkMarkSpoiler,variables:{input:{ids:a}}});return t.modMarkSpoilerBulk}async modBulkUnignore(a){const{data:t}=await e({operation:o.O.ModBulkUnignore,variables:{input:{ids:a}}});return t.modUnignoreBulk}async modBulkUnlock(a){const{data:t}=await e({operation:o.O.ModBulkUnlock,variables:{input:{ids:a}}});return t.modUnlockBulk}async modBulkUnmarkNSFW(a){const{data:t}=await e({operation:o.O.ModBulkUnmarkNSFW,variables:{input:{ids:a}}});return t.modUnmarkNsfwBulk}async modBulkUnmarkSpoiler(a){const{data:t}=await e({operation:o.O.ModBulkUnmarkSpoiler,variables:{input:{ids:a}}});return t.modUnmarkSpoilerBulk}async modBulkUpdatePostFlair(a,t,r,n){const{data:i}=await e({operation:o.O.ModBulkUpdatePostFlair,variables:{input:{postIds:a,cssClassId:t,flairTemplateId:r,text:n}}});return i.modUpdatePostFlairBulk}},S:r}}));
SML.dm("moderation461324fc",["shelle48e5956","awards2379b181","modbulkactionsb972488b","comment5b02ad76","overflowmenuactionsf8d12b95"],(async(a,t,e,o,n)=>{function s(e){switch(!0){case t.b(e):return a.a9.Award;case t.a(e):return a.a9.Comment;case t.i(e):return a.a9.Post;default:return null}}return{g:function(a){return a.closest("[mod-tools-host]")},i:s,p:function(t,m,r,i=!1){switch(s(t)){case a.a9.Award:m in e.S&&a.p(a.T.AwardOnContentUpdated,{awardOnContentId:t,action:e.S[m],value:r,isRealtimeUpdate:i});break;case a.a9.Comment:m in o.S&&a.p(a.T.CommentUpdated,{commentId:t,action:o.S[m],value:r,isRealtimeUpdate:i});break;case a.a9.Post:(n.P.includes(m)||m in n.S)&&a.p(a.T.PostUpdated,{postId:t,action:n.S[m],value:r,isRealtimeUpdate:i});break}}}}));
SML.dm("postFlair51562697",["shelle48e5956"],(async t=>{const e=/(\.|\/\/)(reddit\.com|snoo\.dev|redditstatic\.com|redd\.it|redditmedia\.com)$/;class i extends t.bC{constructor(e,i){super(e),this.events=new t.E(this,(()=>this._host)),this.handleMouseClick=(t,e)=>{if(t.isLinkClickHandled)return;const i=t.composedPath();for(const n of i){if(!(n instanceof HTMLAnchorElement))continue;const i=n.getAttribute("href")||"";if(this.isOutboundUrl(i))return this.trackOutboundLinkClick(i,e),void(t.isLinkClickHandled=!0)}},this.events.define("click",(t=>{this.handleMouseClick(t,i())}))}isOutboundUrl(t){if(t.startsWith("/"))return!1;try{return null==new URL(t).origin.match(e)}catch(t){return!1}}trackOutboundLinkClick(t,e){this._host.trackEvent(this.outboundLinkClickEvent(t,e))}outboundLinkClickEvent(e,i){return t.b({source:"link",action:"click",noun:"outbound_link"},{outbound:{url:e},action_info:{page_type:i.pageType},...i.postId?{post:{id:i.postId}}:{},...i.subredditId?{subreddit:{id:i.subredditId}}:{},...i.commentId?{comment:{id:i.commentId}}:{}})}}var n,r;!function(t){t.FocusSearchBar="focusSearchBar",t.RegisterAuth="registerAuth",t.UpvoteAuth="upvoteAuth"}(n||(n={})),function(t){t.Sort="sort",t.Filter="filter",t.EntityFilterId="entityFilterId",t.InlineRefresh="inline-refresh",t.SctTopLevelComment="sct-top-level-comment"}(r||(r={}));return{get M(){return n},O:i,get P(){return r},R:"remove-flair",S:"#subreddit-right-rail-tabs",a:"right-rail-entity-panel-root",b:"pdp-chained-right-rail-related-posts",g:function(t){return`update-post-flair-modal-${t}`}}}));
SML.dm("previousactionsclientjs3044bbd0",["shelle48e5956","iconc33661e6","expandablesectionheader41e0cfd1","selectcontroller4c63b3e8","tablepagination77cf692d","userflairfe275854","agegatestandaloneclientjsb13e879d"],(async(e,t,r)=>{const o=t.s;let a=class extends o{constructor(){super(...arguments),this.hasRemovalReasonAdded=!1,this._feedbackSubmitted=!1,this._trackingContext={}}get reportKey(){return`post-guidance-feedback-${this.reportId}`}getShredditPostData(){const e=this.getRootNode();if(e instanceof ShadowRoot){const t=e.host;if(t&&"SHREDDIT-POST"===t.tagName)return{id:t.id,postTitle:t.getAttribute("post-title"),contentHref:t.getAttribute("content-href"),authorId:t.getAttribute("author-id")}}return null}connectedCallback(){super.connectedCallback(),this._feedbackSubmitted="true"===sessionStorage.getItem(this.reportKey);const e=this.getShredditPostData();e&&(this._trackingContext={action_info:{post_id:e.id,post_title:e.postTitle,post_url:e.contentHref,author_id:e.authorId}})}handleFeedbackSubmit(t){if(t.target&&t.target instanceof HTMLElement){const r=t.target.closest("button"),o="yes"===r?.value,a=e.b({source:"moderator",action:"click",noun:o?"filter_is_correct":"filter_is_incorrect",...this._trackingContext});e.a(this,a),this._feedbackSubmitted=!0,sessionStorage.setItem(this.reportKey,"true")}}handleFeedbackUndo(){this._feedbackSubmitted=!1;const t=e.b({source:"moderator",action:"click",noun:"undo_filter",...this._trackingContext});e.a(this,t),sessionStorage.removeItem(this.reportKey)}renderFeedbackForm(){return t.x`<div class="border border-solid border-neutral-border p-sm flex flex-col gap-xs rounded-2 flex-1"> <div class="text-14 w-full"> Was this automation accurate? </div> <div class="flex gap-2xs"> ${e.r({children:"Yes",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"yes"}})} ${e.r({children:"No",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"no"}})} </div> </div>`}renderFeedbackSubmitted(){return t.x` <div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-2 flex-1 items-center"> <div class="text-14 w-full"> Got it. You helped train your automation. </div> <faceplate-dropdown-menu id="post-guidance-feedback-dropdown-menu"> ${e.r({appearance:"plain",attributes:{type:"button"},leadingIcon:t.ai({size:t.I.ExtraSmall}),screenReaderContent:"More options"})} <faceplate-menu slot="menu" dropdown> ${r.l({label:"Undo",attributes:{role:"option",onclick:this.handleFeedbackUndo}})} </faceplate-menu> </faceplate-dropdown-menu> </div>`}renderRemovalReasonAdded(){return t.x`<div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-2 flex-1 items-center"> <div class="text-14 w-full"> Your removal reason helped train your automation. </div> </div>`}render(){return this.hasRemovalReasonAdded?this.renderRemovalReasonAdded():this._feedbackSubmitted?this.renderFeedbackSubmitted():this.renderFeedbackForm()}};a.styles=[e.t],e._([e.n({type:String,attribute:"report-id"})],a.prototype,"reportId",void 0),e._([e.n({type:Boolean,attribute:"has-removal-reason-added"})],a.prototype,"hasRemovalReasonAdded",void 0),e._([e.d()],a.prototype,"_feedbackSubmitted",void 0),a=e._([e.e("post-guidance-feedback")],a)}));
SML.dm("contentactionbutton6a45f903",["iconc33661e6","shelle48e5956"],(async(e,t)=>{const n="plain",a="plain-weak",s="secondary",r="bordered",l="media",o="plain",m={[t.s.ExtraSmall]:e.I.ExtraSmall,[t.s.Small]:e.I.Small,[t.s.Medium]:e.I.Medium,[t.s.Large]:e.I.Medium},i={xs:"px-sm",sm:"px-sm",md:"px-sm",lg:"px-xs"},c={xs:"text-12",sm:"text-12",md:"text-12",lg:"text-14"},d={xs:"var(--size-button-sm-h)",sm:"var(--size-button-sm-h)",md:"var(--size-button-md-h)",lg:"var(--size-button-md-h)"},u={xs:"var(--font-button-sm)",sm:"var(--font-button-sm)",md:"var(--font-button-sm)",lg:"var(--font-button-md)"},b={[n]:"button-plain",[a]:"button-plain-weak",[s]:"button-secondary",[r]:"button-bordered-cab",[l]:"button-media-cab"},p=e=>{const{attributes:t,size:n,appearance:a,selected:s}=e;return[t?.className||"",n?`${c[n]}`:"",b[a??o],s?"button-activated":"","inline-flex items-center"].join(" ")};return{A:b,B:d,I:m,c:({attributes:n,children:a,size:s=t.s.Medium,selected:r,appearance:l=o,leadingIcon:m,screenReaderContent:c,role:b})=>{let x=`flex ${t.ay[s]}`;a&&m&&(x+=" mr-[var(--rem6)]");const{html:E,createElement:$}=e.g(),h=E`<span class="flex items-center"> ${m?E`<span class="${x}">${m}</span>`:void 0} ${a?E`<span> ${a} </span>`:void 0} </span> ${c?E`<faceplate-screen-reader-content> ${c} </faceplate-screen-reader-content>`:""}`,v=n?.href,f="bordered"===l?"border-sm":"border-md";return $(null!=v?"a":"button",{...n,role:b??n?.role,style:`height: ${d[s]}; font: ${u[s]}`,className:`button ${f} ${p({appearance:l,size:s,attributes:n,selected:r})}\n       ${i[s]}\n      `,rpl:!0},h)},g:p}}));
SML.dm("scrolltocomments57babb9e",["shelle48e5956"],(async e=>{var t,o;class r{static get instance(){return e.gc(t,t,"f",o)||e.gd(t,t,new t,"f",o),e.gc(t,t,"f",o)}getCorrelationId(){return this._correlationId}setCorrelationId(){return this._correlationId=crypto.randomUUID(),this._correlationId}getPostType(){return this._postType}setPostType(e){return this._postType=e,this._postType}}t=r,o={value:void 0};return{a:r.instance,s:async function(e){const t=document.querySelector("shreddit-comments-page-tools, comment-body-header"),o=document.querySelector("nav")?.offsetHeight??0,r=document.querySelector("shreddit-comment-tree");if(!t||!r)return;await r.updateComplete;const s=t.offsetTop;await requestAnimationFrame((()=>{window.scrollTo({top:s-o,behavior:e})}))}}}));
SML.dm("awardcontroller351c7b93",["shelle48e5956","scrolltocomments57babb9e"],(async(e,i)=>{class t{constructor(i){this.isActivatingExplainer=!1,this.handleExplainerClosed=({explainerId:e,dismissed:i})=>{this.resolver&&this.resolver.explainerId===e&&(this.resolver.resolve({dismissed:i}),this.resolver=void 0)},(this.host=i).addController(this),this.pubsub=new e.P(this.host)}hostConnected(){this.pubsub.subscribe(e.T.ExplainerClosed,this.handleExplainerClosed,!1)}hostDisconnected(){this.pubsub.unsubscribe(e.T.ExplainerClosed,this.handleExplainerClosed)}getExplainerDialogByExplainerId(e){return document.querySelector(`[dialog-id=explainer-dialog][data-explainer-id="${e}"]`)}async showExplainer({explainerExperience:i,explainerId:r,explainerVariantId:s,correlationId:n}){if(this.isActivatingExplainer||t.activatedExplainers.has(r))return{dismissed:!1};try{this.isActivatingExplainer=!0,await e.k({name:e.b7,routeParams:{explainerId:r},queryParams:{...null!=i&&{explainerExperience:i},...null!=s&&{explainerVariantId:s},...null!=n&&{correlationId:n}},renderMode:e.o.Contents});if(!this.getExplainerDialogByExplainerId(r))throw new Error(`Explainer dialog for explainer ID \`${r}\` not found after activation`);t.activatedExplainers.add(r)}catch(e){window.Sentry?.captureError?.(e)}finally{this.isActivatingExplainer=!1}return t.activatedExplainers.has(r)?new Promise((e=>this.resolver={explainerId:r,resolve:e})):{dismissed:!1}}}t.activatedExplainers=new Set;return{A:class{constructor(i,r){this.isActivatingDialog=!1,this.handleAwardContent=({thingId:e,award:i})=>{e===this.getThingId()&&this.onAward?.(i)},(this.host=i).addController(this),this.pubsub=new e.P(this.host),this.explainerController=new t(this.host),this.getThingId=r.getThingId,this.getAwardsPromoConfig=r.getAwardsPromoConfig,this.onAward=r.onAward}hostConnected(){this.onAward&&this.pubsub.subscribe(e.T.AwardContent,this.handleAwardContent,!1)}hostDisconnected(){this.pubsub.unsubscribe(e.T.AwardContent,this.handleAwardContent)}async activateDialog(){if(!this.isActivatingDialog)try{this.isActivatingDialog=!0;const{experience:t,variantId:r,id:s,type:n}=this.getAwardsPromoConfig?.()??{},a=t&&r&&s&&n===e.b8.EducationalModule?await this.explainerController.showExplainer({explainerExperience:t,explainerVariantId:r,explainerId:s,correlationId:i.a.getCorrelationId()}):void 0;a?.dismissed||await e.k({name:e.b9,routeParams:{thingId:this.getThingId()},renderMode:e.o.Contents})}finally{this.isActivatingDialog=!1}}}}}));
SML.dm("ae18b1320",["iconc33661e6"],(async e=>{var n,t;!function(e){e.Regular="regular",e.Semibold="semibold"}(n||(n={})),function(e){e.Small="sm",e.Medium="md",e.Large="lg"}(t||(t={})),t.Small,e.I.ExtraSmall,t.Medium,e.I.Small,t.Large,e.I.Medium;const i={sm:"text-12",md:"text-14",lg:"text-16"},a={always:"underline",hover:"hover:underline",none:"no-underline hover:no-underline"},r={primary:"",secondary:"text-secondary-plain hover:text-secondary-plain-hover no-visited visited:text-secondary-plain","plain-weak":"text-secondary-plain-weak hover:text-secondary-plain-hover no-visited visited:text-secondary-plain-weak",media:"text-media-onbackground no-visited visited:text-media-onbackground",inverted:"text-inverted-secondary-plain hover:text-inverted-secondary-plain-hover no-visited visited:text-neutral-background-weak"};return{get A(){return t},a:({attributes:n,children:t,fontWeight:o="regular",size:d,suppressVisitedStyle:l=!1,underline:s="hover",visited:m,appearance:c="primary",trailingIcon:u})=>{const{html:v,createElement:p}=e.g(),g=v`${t}${u?v`<span class="ml-2xs align-middle">${u}</span>`:""}`,x=`${n?.className||""} a cursor-pointer\n  ${c?r[c]:""}\n  ${d?i[d]:""}\n  ${"semibold"===o?"font-semibold":""}\n  ${l?"no-visited":""}\n  ${s?a[s]:""}\n  ${m?"visited":""}`;return p("a",{...n,rpl:!0,className:x},g)},get b(){return n}}}));
SML.dm("index192b5d82",[],(async()=>{const t=t=>{let r=t.title??"";return t.text&&(r.length&&(r+="\n\n"),r+=t.text),t.url&&(r.length&&(r+="\n\n"),r+=t.url),r};var r;!function(t){t[t.NativeShare=0]="NativeShare",t[t.Clipboard=1]="Clipboard"}(r||(r={}));var a=async(a,e=!0,n=t)=>{if("function"==typeof window.navigator.share&&!e){try{await window.navigator.share(a)}catch(t){}return r.NativeShare}try{await navigator.clipboard.writeText(n(a))}catch(t){}return r.Clipboard};return{get S(){return r},get s(){return a}}}));
SML.dm("keywordsfa9c4196",["shelle48e5956","agegatestandaloneclientjsb13e879d"],(async(t,e)=>{var a;!function(t){t[t.Hour=0]="Hour",t[t.Day=1]="Day",t[t.Month=2]="Month",t[t.Year=3]="Year"}(a||(a={}));const o=t=>({unit:a.Day,value:-t}),s=t=>({unit:a.Month,value:-t});var n,r;!function(t){t[t.Yesterday=0]="Yesterday",t[t.LastWeek=1]="LastWeek",t[t.LastMonth=2]="LastMonth",t[t.Last3Months=3]="Last3Months",t[t.Last6Months=4]="Last6Months",t[t.LastYear=5]="LastYear"}(n||(n={})),function(t){t.Yesterday="day",t.LastWeek="week",t.LastMonth="month",t.Last3Months="last-3-months",t.Last6Months="last-6-months",t.LastYear="year"}(r||(r={})),new Set([r.LastWeek,r.LastMonth,r.Last3Months]),a.Day;const i={[n.LastWeek]:r.LastWeek,[n.LastMonth]:r.LastMonth,[n.Last3Months]:r.Last3Months,[n.Last6Months]:r.Last6Months},d=[{type:n.LastWeek,value:i[n.LastWeek],offset:o(7)},{type:n.LastMonth,value:i[n.LastMonth],offset:o(30)},{type:n.Last3Months,value:i[n.Last3Months],offset:s(3)},{type:n.Last6Months,value:i[n.Last6Months],offset:s(6)}],h=new Map(d.map((({value:t,offset:e})=>[t,e]))),l=r.LastMonth;var c;h.get(l),r.LastWeek,t.hf.Week,r.LastMonth,t.hf.Month,r.Last3Months,t.hf.Months_3,r.Last6Months,t.hf.Months_6,r.LastYear,t.hf.Month,r.Yesterday,t.hf.Month,r.Yesterday,t.hg.Day,r.LastWeek,t.hg.Week,r.LastMonth,t.hg.Month,r.Last3Months,t.hg.Months_3,r.Last6Months,t.hg.Months_3,r.LastYear,t.hg.Months_3,function(t){t.ProfileCreation="profile_creation_step",t.OnboardingComplete="profile_creation_onboarding_complete"}(c||(c={}));const L=async(e,a)=>{const o=await t.B({operation:t.O.SetBrandAnalyticsKeywords,variables:{input:{keywords:a,redditorId:e}}});f(o)},M=async e=>{const a=await t.B({operation:t.O.ProfileKeywords,variables:{id:e}});f(a);const{redditor:o}=a.data;if("Redditor"!==o?.__typename)throw new Error("Couldn't find Redditor");const s=o.profile?.brandAnalytics?.keywords;if(!s)throw new Error("Couldn't retrieve keywords");return s},f=t=>{if(t.errors&&t.errors.length>0)throw new Error(t.errors[0].message)},p=async(t,e)=>{const a=new URL(e);t&&a.searchParams.set("keyword",t),await y(a.href)};let y=async t=>{await e.Y(1e3),window.location.href=t};return{A:"reddit-pro-account-stats-content-id",get D(){return a},O:"overview-box-value",P:"profile-active-subreddits-modal",get R(){return r},S:"REDDIT_PRO_SHARE_BUTTON_COACHMARK",T:"trend-monitoring-add-keyword-modal",a:"profile-contributions-modal",b:"profile-dashboard-performance-overview-content",c:l,d:"t",e:async(t,e)=>{const a=(await M(t)).map((({id:t})=>t));a.includes(e)||await L(t,[...a,e])},f:async(e,a,o,s=window.location.href)=>{e.dispatchEvent(t.c("faceplate-alert",{level:t.x.success,message:`"${a}" added`})),await p(o,s)},g:"reddit_pro_recommended_keywords",h:(e,a)=>{window.Sentry?.captureError?.(a),e.dispatchEvent(t.c("faceplate-alert",{level:t.x.error,cause:t.aI(a),message:a.message}))},i:"reddit-pro-recommended-keywords",j:"/profiles",k:"trend-monitoring-manage-keywords-modal",l:"delete-keyword-confirmation-modal",m:"REDDIT_PRO_PROFILE_PIN_POST_COACHMARK",n:"reddit_pro_onboarding",o:"profile-creation-add-description-event",p:"skip-profile-creation",q:"submit-profile-creation",r:"profile-creation-submit-event",s:L,get t(){return c},u:"profile-followers-modal",v:d}}));
SML.dm("withshared1523f2d",["shelle48e5956","iconc33661e6","ae18b1320","contentactionbutton6a45f903","expandablesectionheader41e0cfd1","index192b5d82","keywordsfa9c4196","agegatestandaloneclientjsb13e879d","utils93db03dd","awards2379b181","headeractionitemchatclientjsb3335fba","rplcoachmark4e17786a","rplcoachmarkcard5c5498b1","tooltipbaseaa9651a3","selectcontroller4c63b3e8"],(async(e,t,s,o,a,r,i,n,l,c)=>{const h="share-menu-template",p="share-menu-copy-link-option",u="share-menu-crosspost-option",d="share-menu-embed-option",m="share-dropdown-menu",E=e=>({target:t,placement:s})=>k({...e,target:t,placement:s??e.placement}),S=({content:s,experienceName:o,source:a})=>t.x`<rpl-coachmark-card auto-close appearance="inverted" slot="content" class="${"whitespace-nowrap"}"> ${(({experienceName:s,source:o})=>{const a='closest([slot="close-button"])';return t.x` ${e.r({attributes:{type:"button","aria-label":"Close",slot:"close-button"},appearance:"plainInverted",leadingIcon:t.C({size:t.I.Small}),size:e.s.Small})} <ac-track san="${o}|click|close_button" trigger-elem="${a}"> </ac-track> ${_({action:e.a8.Dismiss,experienceName:s,triggerElem:a})} `})({experienceName:o,source:a})} <span slot="title" class="font-[500]">${s}</span> <ac-track trigger="view" san="${a}|view|card"></ac-track> ${_({action:e.a8.View,experienceName:o,trigger:"view"})} </rpl-coachmark-card> `,_=({action:t,experienceName:s,trigger:o,triggerElem:a})=>n.bc({operation:e.O.StoreUxtargetingAction,trigger:o,triggerElem:a,variables:{input:{action:t,eligibleExperience:{experienceName:s,experience:e.a7.StringIdExperience}}}}),k=({content:s,experienceName:o,placement:a,source:r,target:i})=>t.x` <rpl-coachmark open no-animate trigger="manual" appearance="inverted" placement="${t.l(a)}" id="reddit-pro-coachmark" label="${s}"> ${(({experienceName:s,target:o,source:a})=>t.x` <span> ${o} <ac-call target="closest(#reddit-pro-coachmark)" method="hide()"> </ac-call> <ac-track san="${a}|click|target"></ac-track> ${_({action:e.a8.Click,experienceName:s})} </span> `)({experienceName:o,source:r,target:i})} ${S({content:s,experienceName:o,source:r})} </rpl-coachmark> `,T=E({experienceName:i.S,content:"Share your favorite content to your profile",source:"reddit_pro_share_menu_coachmark",placement:l.P.Top}),g=({source:t,noun:s})=>e.b({source:t||"share",action:"click",noun:s}),y=({source:e}={})=>g({source:e,noun:"share_crosspost"}),D=({source:e}={})=>g({source:e,noun:"share_profile_crosspost"}),b=()=>e.b({source:"comment",action:"click",noun:"share_as_post"},{action_info:{reason:"share_sheet"}}),C=Symbol("mixins/with-share");const w=(e,t,s)=>{const o=["click","keydown"],a=e.querySelector(`.${t}`);for(const e of o)a?.addEventListener(e,s)};return{C:"comment-share-menu-template",E:d,S:h,W:function(i){if(e.ea(i,C))return i;const n=i;class l extends n{constructor(){super(...arguments),this.permalink="",this.sourceId="",this.source=void 0,this.isCrosspostable=!1,this.isEmbeddable=!1,this.disabled=!1,this.isDesktopViewport=!1,this.hideButtonText=!1,this.hideButtonIcon=!1,this.shouldAllowPropagation=!1,this.shareMenuFeatureName=e.aV,this.shareMenuTemplateId=h,this.translationLanguage="",this.showShareMenuProfileCoachmark=!1,this.isShareMenuInitiated=!1,this.isShareDropdownOpened=!1,this.activateShareMenuFeature=()=>{const t={};return this.isCrosspostable&&(t.isCrosspostable=!0,this.sourceId&&(t.postId=this.sourceId)),this.isEmbeddable&&(t.isEmbeddable=!0),e.k({name:this.shareMenuFeatureName,queryParams:t,renderMode:e.o.Contents})},this.isAllowedEvent=e=>!e||(e instanceof PointerEvent||e instanceof MouseEvent||["Enter"," "].includes(e.key)),this.handleMobileShareClick=async e=>{this.isAllowedEvent(e)&&await this._copyLink()},this.handleDesktopShareClick=async e=>{if(!this.isAllowedEvent(e))return;if(this.isShareMenuInitiated)return;let t=!1;try{t=Boolean(await this.activateShareMenuFeature())}catch(t){return void this.handleCopyLinkClick(e)}const s=document.querySelector(`#${this.shareMenuTemplateId}`)?.content;if(!s)return void this.handleCopyLinkClick(e);const o=this.getShareDropdownMenus();o?.length&&(o.forEach((e=>{if(e.querySelector("faceplate-menu"))return;const o=s.cloneNode(!0);e.appendChild(o),w(e,p,this.handleCopyLinkClick),w(e,u,this.handleCrosspostClick),w(e,d,this.handleEmbedClick),w(e,"klp-copy-link",this.handleKlpCopyLinkClick),w(e,"share-menu-profile-crosspost-option",this.handleProfileCrosspostClick),t&&e.show?.()})),t&&this.handleShareDropdownOpen(),this.isShareMenuInitiated=!0)},this.handleShareDropdownOpen=()=>{this.isShareDropdownOpened||(this.isShareDropdownOpened=!0,e.a(this,(({source:t}={})=>e.b({source:t||"share",action:"view",noun:"custom_share_sheet"}))({source:this.source})))},this.handleShareDropdownClose=()=>{this.isShareDropdownOpened=!1,e.a(this,(({source:t}={})=>e.b({source:t||"share",action:"dismiss",noun:"custom_share_sheet"}))({source:this.source}))},this.getShareDropdownMenus=()=>{const e=this.shadowRoot?.querySelectorAll(`.${m}`);if(e?.length)return e;const t=this.querySelectorAll(`faceplate-dropdown-menu.${m}`);if(t?.length)return t;const s=this.querySelectorAll("slot");for(const e of s){const t=e.assignedElements?.();if(t?.length){const e=Array.from(t).find((e=>e.classList?.contains(m)||e.querySelector(`.${m}`)));if(e)return[e.classList?.contains(m)?e:e.querySelector(`.${m}`)]}}},this.closeShareMenu=()=>{this.getShareDropdownMenus()?.forEach((e=>e.close?.()))},this.handleCopyLinkClick=async t=>{this.shouldAllowPropagation||t?.stopPropagation(),this.isAllowedEvent(t)&&(e.a(this,(({source:e}={})=>g({source:e,noun:"copy_link"}))({source:this.source})),this.closeShareMenu(),await this._copyLink())},this.handleKlpCopyLinkClick=async e=>{this.isAllowedEvent(e)&&(this.closeShareMenu(),await this._copyLink())},this.handleKlpNotUsefulClick=e=>{this.isAllowedEvent(e)&&this._notUseful()},this.handleKlpUsefulClick=e=>{this.isAllowedEvent(e)&&this._useful()},this.handleCrosspostClick=t=>{const s=c.a(this.sourceId)?b:y;this._handlePostComposerClick(t,`${e.ee.CrosspostSourceId}=${this.sourceId}`,s)},this.handleProfileCrosspostClick=t=>{this._handlePostComposerClick(t,`${e.ee.CrosspostSourceId}=${this.sourceId}&${e.ee.CrosspostTarget}=profile`,D)},this.handleEmbedClick=t=>{t.stopPropagation(),this.isAllowedEvent(t)&&(e.a(this,(({source:e}={})=>g({source:e,noun:"embed"}))({source:this.source})),this.closeShareMenu(),window.open(`https://publish.reddit.com/embed?url=https://www.reddit.com${this.permalink}`,"RedditEmbed"))},this._handlePostComposerClick=(t,s,o)=>{t.stopPropagation(),this.isAllowedEvent(t)&&(e.a(this,o({source:this.source})),this.closeShareMenu(),window.open(`/submit?${s}`,"_blank"))},this._copyLink=async()=>{if(!this.permalink||!location.origin)return;const t={url:this._buildShareUrl(location.origin,this.permalink)};if(r.S.Clipboard===await r.s(t,this.isDesktopViewport)){const t=e.c("faceplate-alert",{level:e.x.success,message:"Link copied"});this.dispatchEvent(t)}},this._notUseful=()=>{const t=e.c("faceplate-alert",{level:e.x.notice,message:"Thanks for letting us know"});this.dispatchEvent(t)},this._useful=()=>{const t=e.c("faceplate-alert",{level:e.x.notice,message:"Thanks for letting us know"});this.dispatchEvent(t)},this._buildShareUrl=(e,t)=>{const s=t.includes("?"),o=t.includes("tl=");return e+t+this._getShareQueryParams({source:this.source,term:"1",permalinkHasQuery:s,permalinkHasTlQuery:o})},this._getShareQueryParams=({permalinkHasQuery:e=!1,permalinkHasTlQuery:t=!1,source:s="share",term:o})=>{const a=this._getShareUTMParams({source:s,term:o}),r=t?"":this._getShareTranslationLanguageQueryParams();return e?`&${a}${r}`:`?${a}${r}`},this._getShareTranslationLanguageQueryParams=()=>this.translationLanguage?`&share_tl=${this.translationLanguage}`:"",this._getShareUTMParams=({source:t="share",term:s})=>{const o=e.by();return`utm_source=${t}&utm_medium=${o}&utm_name=${o}css&utm_term=${s}&utm_content=share_button`},this.renderShareDropdown=({handleShareClick:a,size:r=e.s.Small,appearance:i="plain",attributes:n={},shareButtonText:l})=>{const c=l||"Share",h="link"===i,p=t.x` <faceplate-dropdown-menu class="${m} relative ${h?"inline":""}" position="bottom-start" .onopen="${this.isDesktopViewport?this.handleShareDropdownOpen:void 0}" .onclose="${this.isDesktopViewport?this.handleShareDropdownClose:void 0}"> ${h?s.a({attributes:{onclick:a,onkeydown:a,...n},children:this.hideButtonText?void 0:c,suppressVisitedStyle:!0}):o.c({size:r,appearance:i,attributes:{type:"button",onclick:a,onkeydown:a,...n},leadingIcon:this.hideButtonIcon?void 0:t.a$({size:o.I[r],attributes:{className:"icon-share","aria-hidden":"true"}}),screenReaderContent:this.hideButtonText?c:void 0,children:this.hideButtonText?void 0:c})} </faceplate-dropdown-menu>`;return this.showShareMenuProfileCoachmark?T({target:p}):p},this.renderOnlyShareButton=({handleShareClick:s,size:a=e.s.Small,appearance:r="plain",attributes:i={},showFullButtons:n=!1})=>{const l="Copy link",c="link"===r;return t.x` ${c?t.A:o.c({size:a,appearance:r,attributes:{type:"button",onclick:s,onkeydown:s,...i,className:`${i.className} relative`},screenReaderContent:l,children:t.x` <span class="justify-center ${n?"flex s:hidden":"flex"}">${t.O({size:t.I.Small})}</span> <span class="${n?"hidden s:flex":"hidden"}"> ${l} </span> `})}`},this.renderOnlyShareMenuItem=({handleShareClick:e,menuSize:s=a.L.Medium})=>a.l({leadingIcon:t.O(),label:"Copy link",size:s,onClick:e})}}return l[C]=!0,e._([e.n({type:String})],l.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"source-id"})],l.prototype,"sourceId",void 0),e._([e.n({type:String,attribute:"source"})],l.prototype,"source",void 0),e._([e.n({type:Boolean,attribute:"is-crosspostable"})],l.prototype,"isCrosspostable",void 0),e._([e.n({type:Boolean,attribute:"is-embeddable"})],l.prototype,"isEmbeddable",void 0),e._([e.n({type:Boolean})],l.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],l.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"hide-button-text"})],l.prototype,"hideButtonText",void 0),e._([e.n({type:Boolean,attribute:"hide-button-icon"})],l.prototype,"hideButtonIcon",void 0),e._([e.n({type:Boolean,attribute:"should-allow-propagation"})],l.prototype,"shouldAllowPropagation",void 0),e._([e.n({type:String,attribute:"share-menu-feature-name"})],l.prototype,"shareMenuFeatureName",void 0),e._([e.n({type:String,attribute:"share-menu-template-id"})],l.prototype,"shareMenuTemplateId",void 0),e._([e.n({type:String,attribute:"translation-language"})],l.prototype,"translationLanguage",void 0),e._([e.n({type:Boolean,attribute:"show-share-menu-profile-coachmark"})],l.prototype,"showShareMenuProfileCoachmark",void 0),l},a:m,b:p,c:u,d:E}}));
SML.dm("shredditcommentsharebutton10fe44fe",["shelle48e5956","iconc33661e6","expandablesectionheader41e0cfd1","withshared1523f2d","agegatestandaloneclientjsb13e879d"],(async(e,t,s,n,i)=>{const o=n.W(t.s);let a=class extends o{constructor(){super(...arguments),this.permalink="",this.disabled=!1,this.isDesktopViewport=!1,this.isListItem=!1,this.ssr=!1,this.shareMenuFeatureName=e.bo,this.shareMenuTemplateId=n.C,this.useButton=!1,this.useMenu=!1,this.showFullButtons=!1,this.menuSize=s.L.Medium}static get styles(){return[e.t,e.z("/*\n * :host and button.share-button-list-item is necessary to increase specificity to override the default styles of the button\n */\n:host button.share-button-list-item {\n  padding: 0;\n  height: 2rem !important;\n  border: none;\n  border-radius: 0;\n  color: var(--color-secondary);\n  background-color: transparent;\n  /*\n   * This CSS was added to fix the flex gap spacing when re-styling the share button component as a list item in the comment action overflow menu.\n   * It needs to be added here as we cannot otherwise directly target the span's styling.\n   */\n}\n:host button.share-button-list-item > span.flex {\n  font-weight: normal;\n}\n:host button.share-button-list-item > span.flex > span:first-child {\n  width: 2rem;\n  display: flex;\n  justify-content: center;\n  margin-right: 0.5rem;\n}\n")]}handleCommentShareClick(e){this.isAllowedEvent(e)&&(!this.isListItem&&this.isDesktopViewport?this.handleCommentDesktopShareClick(e):this.handleCommentMobileShareClick(e),this.ssr&&(this.isShareDropdownOpened?this.handleShareDropdownClose():this.handleShareDropdownOpen()))}handleCommentDesktopShareClick(t){e.a(this,i.T()),this.handleDesktopShareClick(t)}handleCommentMobileShareClick(t){e.a(this,i.U()),this.handleMobileShareClick(t)}render(){return this.ssr?t.x`<slot name="ssr-share-button" @click="${this.handleCommentShareClick}" @keydown="${this.handleCommentShareClick}"></slot>`:this.useMenu?this.renderOnlyShareMenuItem({handleShareClick:this.handleCommentShareClick,menuSize:this.menuSize}):this.useButton?this.renderOnlyShareButton({handleShareClick:this.handleCommentShareClick,attributes:{disabled:this.disabled,className:"font-semibold"},showFullButtons:this.showFullButtons}):this.renderShareDropdown({handleShareClick:this.handleCommentShareClick,size:this.isListItem?e.s.Large:e.s.Small,appearance:this.isListItem?"plain":"plain-weak",attributes:{disabled:this.disabled,className:this.isListItem?"share-button-list-item w-full":"font-semibold"}})}};e._([e.n({type:String})],a.prototype,"permalink",void 0),e._([e.n({type:Boolean})],a.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],a.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"is-list-item"})],a.prototype,"isListItem",void 0),e._([e.n({type:Boolean,attribute:"ssr"})],a.prototype,"ssr",void 0),e._([e.n({type:String,attribute:"share-menu-feature-name"})],a.prototype,"shareMenuFeatureName",void 0),e._([e.n({type:String,attribute:"share-menu-template-id"})],a.prototype,"shareMenuTemplateId",void 0),e._([e.n({type:Boolean,attribute:"use-button"})],a.prototype,"useButton",void 0),e._([e.n({type:Boolean,attribute:"use-menu"})],a.prototype,"useMenu",void 0),e._([e.n({type:Boolean,attribute:"show-full-buttons"})],a.prototype,"showFullButtons",void 0),e._([e.n({type:String})],a.prototype,"menuSize",void 0),a=e._([e.e("shreddit-comment-share-button")],a)}));
SML.dm("commentstatsentrypointclientjsb4288909",["shelle48e5956","iconc33661e6","rplcoachmarkcard5c5498b1","rplcoachmark4e17786a","agegatestandaloneclientjsb13e879d","tooltipbaseaa9651a3","utils93db03dd"],(async(a,e)=>{var t;let s=t=class extends e.s{constructor(){super(...arguments),this.coachmarkCardClasses="",this._rplCoachMarkRef=a.aq(),this.events=new a.E(this),this._enter=this.events.define("faceplate-enter",this.inView)}get counterValue(){return parseInt(a.l.getItem(a.L.CommentStatsCoachmark)??"0")}shouldShow(){return this.counterValue<2&&!t.hasBeenSeenFlag}inView(){this.shouldShow()?(t.hasBeenSeenFlag=!0,this._rplCoachMarkRef.value?.show(),this.incrementCoachmarkCounter()):this._rplCoachMarkRef.value?.hide()}incrementCoachmarkCounter(){a.l.setItem(a.L.CommentStatsCoachmark,(this.counterValue+1).toString())}firstUpdated(e){new a.ar(this,this)}render(){return e.x`<rpl-coachmark class="mx-xs" placement="bottom-end" appearance="inverted" skidding="-5" ${a.as(this._rplCoachMarkRef)}> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="inverted" class="mx-xs ${this.coachmarkCardClasses}"> <span class="text-14" slot="title">NEW! Comment insights</span> <span class="text-12">See how people are engaging with your comment </span> ${a.r({attributes:{"aria-label":"Close",slot:"close-button",onclick:()=>{this._rplCoachMarkRef.value?.hide()}},appearance:"plainInverted",leadingIcon:e.C({size:e.I.Small}),size:a.s.Small})} </rpl-coachmark-card> </rpl-coachmark>`}};s.styles=[a.t],s.hasBeenSeenFlag=!1,a._([a.n({type:String,attribute:"coachmark-card-classes"})],s.prototype,"coachmarkCardClasses",void 0),s=t=a._([a.e("comment-stats-coachmark")],s)}));
SML.dm("utils59e2ce2f",[],(async()=>{var e;return function(e){e.CommentHasCollectibleExpression="comment_has_collectible_expression",e.CommentHasVideo="comment_has_video"}(e||(e={})),{get U(){return e},i:function({isLocked:e,isMod:n,isArchived:i,isUserBanned:s}){return e&&!n||i||s}}}));
SML.dm("feedbacktooltipoverflowmenuc3c644ac",["shelle48e5956","iconc33661e6","headeractionitemchatclientjsb3335fba"],(async(t,e)=>{let o=class extends e.s{constructor(){super(...arguments),this.translationContextValue=t.aw,this.handleObserverIntersection=t=>{t.forEach((t=>{t.isIntersecting&&(this.observer?.unobserve(this),this.canShowCoachmark()&&(setTimeout(this.open.bind(this),500),this.open()))}))}}connectedCallback(){super.connectedCallback(),this.connectObserver()}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver()}connectObserver(){this.observer=new IntersectionObserver(this.handleObserverIntersection,{root:null,threshold:1}),this.observer.observe(this)}disconnectObserver(){this.observer?.disconnect?.()}canShowCoachmark(){return this.translationContextValue.isTranslationActive&&!this.translationContextValue.shouldDisplayCoachmark&&this.translationContextValue.shouldDisplayFeedbackCoachmark}open(){this.translationFeedbackCoachmark?.show()}onTooltipClosed(){const t=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,shouldDisplayFeedbackCoachmark:!1}});this.dispatchEvent(t)}close(){this.translationFeedbackCoachmark?.hide(),this.dispatchEvent(new CustomEvent("feedback-tooltip-closed"))}render(){return this.canShowCoachmark()?e.x` <rpl-tooltip placement="bottom" appearance="inverted" trigger="none" id="translation-feedback-coachmark-tooltip" @rpl-tooltip:after-hide="${this.onTooltipClosed}"> <div> <slot></slot> </div> <div slot="content" class="flex flex-col p-xs" @click="${this.close}" data-testid="feedback-tooltip-content"> <p class="my-0 max-w-[10rem] xs:max-w-none text-14 font-bold"> Rate this translation </p> </div> </rpl-tooltip> `:e.x`<slot></slot>`}};o.styles=[t.t],t._([t.av({context:t.ax,subscribe:!0}),t.d()],o.prototype,"translationContextValue",void 0),t._([t.y("#translation-feedback-coachmark-tooltip")],o.prototype,"translationFeedbackCoachmark",void 0),o=t._([t.e("feedback-tooltip-overflow-menu")],o)}));
SML.dm("numbera5d31186",["agegatestandaloneclientjsb13e879d"],(async t=>{let n=function(){try{return"1E4 bits"===new Intl.NumberFormat("en",{style:"unit",unit:"bit",unitDisplay:"long",notation:"scientific"}).format(1e4)}catch(t){return!1}}();const e=1e3,o=1e6,a=1e9,i=t=>t>=99999999949?`${Math.floor(t/a)}b`:t>=999999949&&t<99999999949?`${(t/a).toFixed(1)}b`:t>=99999949&&t<999999949?`${Math.floor(t/o)}m`:t>=999949&&t<99999949?`${(t/o).toFixed(1)}m`:t>=99949&&t<999949?`${Math.floor(t/e)}k`:t>=e&&t<99949?`${(t/e).toFixed(1)}k`:String(t);return{_:i,f:function(e,o,a){if(n){const n=(null==a?void 0:a.options)||{notation:(null==a?void 0:a.short)?"compact":"standard"};return t.f(o,n).format(e)}return i(e)}}}));
SML.dm("shopgallerydatafetcherclientjs777c4af0",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d","numbera5d31186"],(async(t,e,o,r)=>{let n=class extends e.s{constructor(){super(...arguments),this.number=0,this.locale="",this.pretty=!1}getLocale(){return this.locale||o.ci()}createRenderRoot(){return this}render(){const t=this.formatOptions?{options:this.formatOptions}:{short:this.pretty};return r.f(this.number,this.getLocale(),t)}};t._([t.n({type:Number})],n.prototype,"number",void 0),t._([t.n({type:String})],n.prototype,"locale",void 0),t._([t.n({type:Object})],n.prototype,"formatOptions",void 0),t._([t.n({type:Boolean})],n.prototype,"pretty",void 0),n=t._([t.e("faceplate-number")],n)}));
SML.dm("awards8d1217c9",[],(async()=>{var e,a,r;return function(e){e.GoldPurchasePaymentForm="award-gold-purchase-payment-form",e.GoldTopupPaymentForm="award-gold-topup-payment-form"}(e||(e={})),function(e){e.SelectionSheet="selection-sheet",e.Leaderboard="leaderboard",e.GoldPurchase="gold-purchase",e.GoldTopUp="gold-top-up"}(a||(a={})),Object.values(a),function(e){e.Limited="award:limited",e.Free="award:free",e.Community="award:community",e.Highlighted="award:highlighted",e.Iconic="award:iconic",e.Branded="award:branded"}(r||(r={})),{get A(){return a},get a(){return r}}}));
SML.dm("index43b39749",["shelle48e5956","iconc33661e6","contentactionbutton6a45f903","awardcontroller351c7b93","agegatestandaloneclientjsb13e879d","awards2379b181","scrolltocomments57babb9e","awards8d1217c9","shopgallerydatafetcherclientjs777c4af0"],(async(e,t,n,o,a,r,s,i)=>{function l(e,t){return e.tags?.includes(t)}i.a.Limited,i.a.Community,i.a.Free;let c=class extends(e.g(t.s)){constructor(){super(...arguments),this.size=e.s.Medium,this.disabled=!1,this.count=0,this.hasEnteredViewport=!1,this.awardController=new o.A(this,{getThingId:()=>this.thingId,onAward:e=>{this.count++,this.isAwardedByUser=!0,e&&(this.awardId=e.id,this.iconUrl=e.staticIcon.url,this.hasIconicAward||(this.hasIconicAward=function(e){return l(e,i.a.Iconic)}(e)),this.hasBrandedAward||(this.hasBrandedAward=function(e){return l(e,i.a.Branded)}(e)))}}),this.handleEnterViewport=()=>{this.hasEnteredViewport=!0,this.observerController&&(this.observerController=e.K(this,this.observerController))},this.handleClick=()=>{const e=s.a.setCorrelationId(),t=s.a.setPostType(this.postType);this.trackEvent(r.o({awardId:this.awardId,thingId:this.thingId,subredditId:this.subredditId,postId:this.postId,topAwardIconUrl:this.iconUrl,animatedAwardIconUrls:this.iconUrls,correlationId:e,position:this.feedIndex,postType:t,postScore:this.postScore,score:this.score,numberComments:this.commentCount})),this.awardController.activateDialog()}}connectedCallback(){super.connectedCallback(),this.observerController=e.ej(this,this,this.handleEnterViewport,{rootMargin:"0px"})}disconnectedCallback(){super.disconnectedCallback(),this.observerController&&(this.observerController=e.K(this,this.observerController))}renderGlow(){return t.x`<span class="glow" style="${t.l(this.isAwardedByUser?"--fade-out: none":void 0)}"> ${Array.from({length:8}).map(((e,n)=>t.x`<span class="sunbeam" style="${t.o({"--n":n})}"></span>`))} </span>`}renderStream(){if(a.q())return t.A;const{iconUrls:e}=this;if(!e)return t.A;const n=[1,-1,0,-1],o=Number(e[0]===this.iconUrl);return t.x`<span class="stream"> ${Array.from({length:16}).map(((a,r)=>t.x`<img style="${t.o({"--n":r,"--offset":n[r%n.length]})}" src="${e[(r+o)%e.length]}" width="16" height="16" alt="">`))} </span>`}render(){if(!this.thingId)return t.A;const o=n.I[this.size],r=(this.hasIconicAward||this.hasBrandedAward)&&!this.noGoldenBorder;return n.c({appearance:this.appearance,attributes:{type:"button",className:a.o("overflow-visible",r&&"border-sm border-global-gold",this.buttonClass),disabled:this.disabled,onclick:this.handleClick,"aria-label":0===this.count?"Give award":e.h({one:`Give award, ${this.count} award given`,other:`Give award, ${this.count} awards given`,count:this.count})},size:this.size,leadingIcon:this.iconUrl?t.x`<span class="${a.o("flex relative",this.disabled&&"opacity-25")}" aria-hidden="true"> ${this.hasEnteredViewport?this.renderGlow():t.A} ${this.hasEnteredViewport?this.renderStream():t.A} <img src="${this.iconUrl}" alt="" class="relative" width="${t.bj[o]}" height="${t.bj[o]}"> </span>`:t.bk({attributes:{"aria-hidden":"true"},size:o}),children:this.count?t.x`<faceplate-number number="${this.count}" pretty aria-hidden="true"></faceplate-number>`:this.withInitialStateText?t.x`<span aria-hidden="true">Award</span>`:void 0})}};var p;c.styles=[e.t,e.z("@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes rotate-clockwise {\n  0% {\n    transform: rotate(45deg);\n  }\n  100% {\n    transform: rotate(135deg);\n  }\n}\n@keyframes sunbeam-even {\n  0% {\n    transform: scaleX(1) scaleY(1);\n  }\n  50% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n  100% {\n    transform: scaleX(1) scaleY(1);\n  }\n}\n@keyframes sunbeam-odd {\n  0% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n  50% {\n    transform: scaleX(1) scaleY(1);\n  }\n  100% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n}\n.glow {\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 0;\n  height: 0;\n  perspective: 5em;\n  animation: 3s ease-out 1.5s both rotate-clockwise, 0.5s ease-in 1.5s backwards fade-in, var(--fade-out, 0.5s ease-out 5s reverse forwards fade-in);\n}\n.glow::before {\n  content: '';\n  display: block;\n  position: absolute;\n  left: -1em;\n  top: -1em;\n  background: radial-gradient(rgba(245, 214, 87, 0.9), rgba(245, 214, 87, 0) 50%);\n  width: 2em;\n  height: 2em;\n}\n.glow > .sunbeam {\n  display: block;\n  transform: rotate(calc(var(--n) * 45deg)) rotateX(-45deg);\n}\n.glow > .sunbeam::before {\n  content: '';\n  display: block;\n  background: no-repeat linear-gradient(rgba(245, 214, 87, 0.9), rgba(245, 214, 87, 0));\n  height: 1em;\n  width: 0.3em;\n  position: absolute;\n  transform: rotate(180deg) translateX(50%);\n  transform-origin: 50% 0px;\n  animation: 1.5s linear 1.5s 2 both sunbeam-even;\n  animation-composition: add;\n}\n.glow > .sunbeam:nth-child(odd)::before {\n  animation-name: sunbeam-odd;\n}\n"),e.z("@keyframes stream {\n  0% {\n    transform: scale(0);\n  }\n  20% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  100% {\n    offset-distance: 100%;\n    opacity: 0;\n  }\n}\n.stream {\n  pointer-events: none;\n  position: absolute;\n  bottom: calc(100px + 50%);\n  left: 50%;\n}\n.stream > img {\n  animation: 2s ease-in both stream;\n  animation-delay: calc(var(--n) * 0.2s);\n  offset-path: path('M2.5,100 q-5,-10,0,-20 t 0-20 0-20 0-20 0-20');\n  offset-rotate: 0deg;\n  position: absolute;\n  translate: calc(var(--offset) * 8px);\n}\n")],e._([e.n({type:String})],c.prototype,"appearance",void 0),e._([e.n({type:String})],c.prototype,"size",void 0),e._([e.n({type:String,attribute:"button-class"})],c.prototype,"buttonClass",void 0),e._([e.n({type:Boolean,reflect:!0})],c.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"no-golden-border"})],c.prototype,"noGoldenBorder",void 0),e._([e.n({type:Boolean,attribute:"with-initial-state-text"})],c.prototype,"withInitialStateText",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in"})],c.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"is-awarded-by-user"})],c.prototype,"isAwardedByUser",void 0),e._([e.n({type:String,attribute:"thing-id"})],c.prototype,"thingId",void 0),e._([e.n({type:Number,attribute:"feed-index"})],c.prototype,"feedIndex",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],c.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"post-id"})],c.prototype,"postId",void 0),e._([e.n({type:String,attribute:"post-type"})],c.prototype,"postType",void 0),e._([e.n({type:Number,attribute:"post-score"})],c.prototype,"postScore",void 0),e._([e.n({type:Number})],c.prototype,"score",void 0),e._([e.n({type:Number,attribute:"comment-count"})],c.prototype,"commentCount",void 0),e._([e.n({type:Number,reflect:!0})],c.prototype,"count",void 0),e._([e.n({type:String,reflect:!0,attribute:"award-id"})],c.prototype,"awardId",void 0),e._([e.n({type:String,reflect:!0,attribute:"icon-url"})],c.prototype,"iconUrl",void 0),e._([e.n({type:Array,attribute:"icon-urls"})],c.prototype,"iconUrls",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"has-iconic-award"})],c.prototype,"hasIconicAward",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"has-branded-award"})],c.prototype,"hasBrandedAward",void 0),e._([e.d()],c.prototype,"hasEnteredViewport",void 0),c=e._([e.e("award-button")],c),function(e){e.Upvote="upvote",e.Downvote="downvote"}(p||(p={}));const d=({appearance:e,active:t})=>`group button flex justify-center aspect-square p-0 border-0 ${n.A[e]} ${!t&&"disabled:text-interactive-content-disabled"} ${t&&"secondary"===e?"":"button-plain"}  inline-flex items-center`,u=({size:n})=>({size:n===e.s.Small||n===e.s.ExtraSmall?t.I.Small:t.I.Medium}),b=({size:t})=>`flex mx-xs ${e.ay[t]}`,m=e=>{let t="bg-transparent text-global-white hover:text-global-white";switch(e){case p.Downvote:t+=" hover:bg-downvote-background-hover";break;case p.Upvote:t+=" hover:bg-upvote-background-hover"}return t};var h;!function(e){e.Upvote="upvote",e.Downvote="downvote"}(h||(h={}));const v=e=>`group button flex justify-center p-0 border-0 ${n.A[e]} inline-flex items-center`,w=({size:n})=>({attributes:{classname:"rpl-vote-button-icon"},size:n===e.s.Small||n===e.s.ExtraSmall?t.I.Small:t.I.Medium}),g=({size:t})=>`flex mx-xs ${e.ay[t]}`,f=(e,t)=>"secondary"===t?{upvote:"bg-action-upvote text-global-white border-action-upvote ",downvote:"bg-action-downvote text-global-white border-action-downvote "}[e]:"",y={secondary:"bg-interactive-background-disabled text-[color:var(--color-button-secondary-text-disabled)] border-transparent",plain:"bg-[color:var(--color-button-plain-background-disabled)] text-[color:var(--color-button-plain-text-disabled)] border-transparent",bordered:"","plain-weak":"text-interactive-content-disabled"},x=({voteType:e,appearance:t})=>null==e?y[t]:"opacity-40 text-global-white";const $=(e,t)=>{if("post"===t){const t=e;return{ok:t.data?.updatePostVoteState?.ok,errors:t.data?.updatePostVoteState?.errors,voteStateResult:t.data?.updatePostVoteState?.voteState}}const n=e;return{ok:n.data?.updateCommentVoteState?.ok,errors:n.data?.updateCommentVoteState?.errors,voteStateResult:n.data?.updateCommentVoteState?.voteState}},E=(t,n,o)=>"post"===n?{operation:e.O.UpdatePostVoteState,variables:{input:{postId:t,voteState:o}}}:{operation:e.O.UpdateCommentVoteState,variables:{input:{commentId:t,voteState:o}}};return{get V(){return p},a:({attributes:o,voteCount:a,voteType:r,upvoteButton:s,downvoteButton:i,size:l=e.s.Medium,appearance:c="plain",initialStateText:p})=>{const{html:d,createElement:u}=t.g(),b=d`${s} ${null==a?p:d`<span> <faceplate-number number="${a}" pretty></faceplate-number> </span>`} ${i}`;return u("span",{...o,className:`${o?.className||""} ${r?f(r,c):""}\n      p-0 ${n.g({size:l,appearance:c,selected:!0})} button-shell overflow-visible font-semibold flex items-center cursor-auto ${o?.disabled?x({voteType:r,appearance:c}):""}`,rpl:!0},b)},b:({attributes:o,size:a=e.s.Medium,appearance:r="plain",screenReaderContent:s,voteType:i,onClick:l})=>{const{html:c,createElement:h}=t.g(),v=null!=i,w=i===p.Upvote,g=d({appearance:r,active:v});return h("button",{rpl:!0,upvote:!0,onclick:l,...o,className:`${o?.className||""} ${g} ${{plain:w?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote",secondary:v?m(i):"hover:text-action-upvote focus-visible:text-action-upvote",bordered:w?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote","plain-weak":w?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote"}[r]}`,style:`height: ${n.B[a]};`,"aria-pressed":w},c`<span class="${b({size:a})}"> ${(w?t.bn:t.b7)(u({size:a}))} </span> ${s&&c`<faceplate-screen-reader-content> ${s||"Upvote"} </faceplate-screen-reader-content>`}`)},c:({attributes:o,size:a=e.s.Medium,appearance:r="plain",screenReaderContent:s,voteType:i,onClick:l})=>{const{html:c,createElement:h}=t.g(),v=null!=i,w=i===p.Downvote,g=d({appearance:r,active:v});return h("button",{rpl:!0,downvote:!0,...o,onclick:l,className:`${o?.className||""} ${g} ${{plain:w?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote",secondary:v?m(i):"hover:text-action-downvote focus-visible:text-action-downvote",bordered:w?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote","plain-weak":w?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote"}[r]}`,style:`height: ${n.B[a]};`,"aria-pressed":w},c`<span class="${b({size:a})}"> ${(w?t.bl:t.bm)(u({size:a}))} </span> ${s&&c`<faceplate-screen-reader-content> ${s||"Downvote"} </faceplate-screen-reader-content>`}`)},d:o=>{const{html:a,createElement:r}=t.g(),{appearance:s="plain",attributes:i,size:l=e.s.Medium,screenReaderContent:c,voteType:p,onClick:d}=o,u=l===e.s.Small,b=p===h.Downvote,m=i?.href;return r(null!=m?"a":"button",{rpl:!0,downvote:!0,...i,onclick:d,className:`\n        ${i?.className||""} \n        rounded-none\n        ${u?"rounded-l-[8px]":"rounded-l-[12px]"}\n        ${v(s)} \n      `,style:`height: ${n.B[l]};`,"aria-pressed":b},a`<span class="${u?"mr-sm":"mr-md"} ${"plain"===s?"ml-[3px]":"ml-xs"} ${g({size:l})}"> ${(b?t.bl:t.bm)(w({size:l}))} </span> ${c&&a`<faceplate-screen-reader-content> ${c||"Downvote"} </faceplate-screen-reader-content>`}`)},g:function(e,t){return!e&&t===p.Upvote||e===p.Downvote&&t===p.Downvote?1:!e&&t===p.Downvote||e===p.Upvote&&t===p.Upvote?-1:e===p.Downvote&&t===p.Upvote?2:e===p.Upvote&&t===p.Downvote?-2:0},o:async function(t,n,o){let a=e.ek.None;o&&(a=o===p.Upvote?e.ek.Up:e.ek.Down);const r=await e.B(E(t,n,a)),{ok:s,errors:i,voteStateResult:l}=$(r,n);if(s){const t=l;if(t===e.ek.None)return;return t===e.ek.Up?p.Upvote:p.Downvote}if(i?.[0]){const e=i[0]?.message??"Something went wrong";throw new Error(e)}return o},u:o=>{const{html:a,createElement:r}=t.g(),{appearance:s="plain",attributes:i,initialStateText:l,onClick:c,screenReaderContent:p,size:d=e.s.Medium,voteCount:u,voteType:b}=o,m=d===e.s.Small,f=b===h.Upvote,y=i?.href;return r(null!=y?"a":"button",{rpl:!0,upvote:!0,onclick:c,...i,className:`\n        ${i?.className||""} \n        rounded-none \n        ${m?"rounded-r-[8px]":"rounded-r-[12px]"}\n        ${v(s)}\n      `,style:`height: ${n.B[d]};`,"aria-pressed":f},a` <span class="${m?"ml-sm":"ml-md"} mr-[6px] ${g({size:d})}"> ${(f?t.bn:t.b7)(w({size:d}))} </span> ${p&&a`<faceplate-screen-reader-content> ${p||"Upvote"} </faceplate-screen-reader-content>`} ${null==u?l?a`<span class="rpl-vote-button-group-label ${"plain"===s?"pr-[3px]":"pr-[10px]"}">${l}</span>`:"":a`<span class="rpl-vote-button-group-label ${"plain"===s?"pr-[3px]":"pr-[10px]"}"> <faceplate-number number="${u}" pretty></faceplate-number> </span>`} `)},v:({attributes:o,voteType:a,upvoteButton:r,downvoteButton:s,size:i=e.s.Medium,appearance:l="plain"})=>{const{html:c,createElement:p}=t.g(),d=c`${r} ${(()=>{if("plain"===l)return"";const t=i===e.s.Small?"h-md":"h-[20px]";return c`<span class="rpl-vote-button-group-divider rounded-1 ml-[-2px] translate-x-px w-px ${t}"></span>`})()} ${s}`;return p("span",{...o,className:`\n      rpl-vote-button-group p-0 button-shell overflow-hidden font-semibold flex items-center cursor-auto\n      ${o?.className||""} \n      ${a??""}\n      ${n.g({size:i,appearance:l})}`,rpl:!0},d)}}}));
SML.dm("usermanagement71adb426",["shelle48e5956"],(async e=>{var n;!function(e){e.Ban="ban",e.Mute="mute",e.SendModMail="send-mod-mail",e.AddModNote="add-mod-note",e.EditUserFlair="edit-user-flair",e.OpenDetailedView="open-detailed-view",e.UserModLog="user-mod-log",e.ReportUser="report-user"}(n||(n={}));var o,a;!function(e){e.Violation="violation-ban-modal-input",e.Duration="duration-ban-modal-input",e.ModNote="mod-note-ban-modal-input",e.Message="message-ban-modal-input",e.SavedResponse="saved-response-id-ban-modal-input",e.WithThingId="with-thing-id-ban-modal-input"}(o||(o={})),function(e){e.Duration="duration-mute-modal-input",e.ModNote="mod-note-mute-modal-input"}(a||(a={}));return{B:n=>e.b({source:"moderator",action:"click",noun:"username_input"},{action_info:{page_type:e.w.UserManagementBan,success:n}}),M:n=>e.b({source:"moderator",action:"click",noun:"username_input"},{action_info:{page_type:e.w.UserManagementMute,success:n}}),U:()=>e.b({source:"moderator",action:"click",noun:"unban_confirm"},{action_info:{page_type:e.w.UserManagementBan}}),a:"mod-ban-modal",b:()=>e.b({source:"moderator",action:"click",noun:"ban_evasion_filter"},{action_info:{page_type:e.w.UserManagementMute}}),c:"mod-mute-modal",d:"user-man-ban-submit-button",e:"user-man-mute-submit-button",f:"mod-ban-modal-close-button",g:"mod-mute-modal-close-button",h:"mod-ban-modal-cancel-button",i:"mod-mute-modal-cancel-button",get j(){return o},get k(){return a},l:()=>e.b({source:"moderator",action:"click",noun:"user_search"},{action_info:{page_type:e.w.UserManagementBan}}),m:()=>e.b({source:"moderator",action:"click",noun:"user_search"},{action_info:{page_type:e.w.UserManagementMute}}),n:()=>e.b({source:"moderator",action:"click",noun:"unmute_confirm"},{action_info:{page_type:e.w.UserManagementMute}}),get o(){return n},p:"mod-ban-modal-header",q:"mod-mute-modal-header",r:"mod-ban-modal-loading",s:"mod-ban-modal-content",t:"mod-mute-modal-loading",u:"mod-mute-modal-content"}}));
SML.dm("index5445b738",[],(async()=>{var i;return function(i){i.isAccessEnabled="isAccessEnabled",i.isAllAllowed="isAllAllowed",i.isChannelsEditingAllowed="isChannelsEditingAllowed",i.isChatConfigEditingAllowed="isChatConfigEditingAllowed",i.isChatOperator="isChatOperator",i.isCommunityChatEditingAllowed="isCommunityChatEditingAllowed",i.isConfigEditingAllowed="isConfigEditingAllowed",i.isFlairEditingAllowed="isFlairEditingAllowed",i.isMailEditingAllowed="isMailEditingAllowed",i.isPostEditingAllowed="isPostEditingAllowed",i.isWikiEditingAllowed="isWikiEditingAllowed"}(i||(i={})),{get M(){return i},a:"mod-ban-modal-template",b:"mod-user-flair-modal-template",c:"/svc/shreddit/mod-ban-modal",d:"/svc/shreddit/mod-mute-modal",e:"mod-action-button-title"}}));
SML.dm("modnotesf373dea5",["shelle48e5956","iconc33661e6"],(async(a,e)=>{const{svg:t}=e.g();var l=e.d(t`<path d="M10 19.99a4.6 4.6 0 0 1-3.27-1.354l-5.366-5.365a4.627 4.627 0 0 1 0-6.542L6.73 1.364a4.627 4.627 0 0 1 6.542 0l5.365 5.364a4.627 4.627 0 0 1 0 6.542l-5.364 5.365A4.601 4.601 0 0 1 10 19.99Zm0-18.73a3.353 3.353 0 0 0-2.386.988L2.25 7.614a3.374 3.374 0 0 0 0 4.772l5.366 5.366a3.46 3.46 0 0 0 4.772 0l5.365-5.366a3.374 3.374 0 0 0 0-4.772L12.386 2.25A3.35 3.35 0 0 0 10 1.26Zm3.92 10.258c.066.112.1.24.1.37a.8.8 0 0 1-.094.35.7.7 0 0 1-.633.375.83.83 0 0 1-.387-.105c-.2-.116-1.033-.734-2.5-1.852.219 1.75.328 2.734.328 2.953.02.238-.043.476-.176.674a.651.651 0 0 1-.539.217c-.476 0-.714-.289-.714-.867 0-.242.11-1.226.328-2.953l-.364.27c-1.192.905-1.902 1.425-2.128 1.558a.85.85 0 0 1-.4.105.739.739 0 0 1-.715-.727.72.72 0 0 1 .1-.369.748.748 0 0 1 .287-.276c.234-.133 1.187-.547 2.86-1.242-1.67-.694-2.623-1.107-2.859-1.24a.859.859 0 0 1-.287-.282.673.673 0 0 1-.1-.352.681.681 0 0 1 .094-.363.756.756 0 0 1 .27-.287.658.658 0 0 1 .351-.1.829.829 0 0 1 .4.117c.226.134.937.653 2.132 1.56l.364.268c-.22-1.726-.328-2.706-.328-2.94a1.039 1.039 0 0 1 .175-.663.653.653 0 0 1 .54-.217.649.649 0 0 1 .544.217c.13.204.19.444.17.685 0 .22-.11 1.2-.328 2.942 1.462-1.116 2.295-1.734 2.5-1.852a.829.829 0 0 1 .4-.117c.124 0 .246.034.351.1.114.07.207.17.27.287a.68.68 0 0 1 .094.363.673.673 0 0 1-.1.352.86.86 0 0 1-.287.281c-.2.118-1.145.532-2.836 1.242l.844.363c1.047.438 1.711.731 1.992.88.117.064.214.16.281.275Z"></path>`,"0 0 20 20","nsfw-language-outline");const{svg:s}=e.g();var n=e.d(s`<path d="M17.626 1.744a2.255 2.255 0 0 0-1.482-.912 2.228 2.228 0 0 0-2.568 1.7l-.824 3.506-1.139-4.19A2.277 2.277 0 0 0 7.525 1.2a2.028 2.028 0 0 0-.274 1.567L8 5.987a2.095 2.095 0 0 0-.436-.046h-.221a2.124 2.124 0 0 0-1.916 1.22 2.111 2.111 0 0 0-1.084-.307h-.218A2.128 2.128 0 0 0 2 8.979v4.247a6.863 6.863 0 0 0 7.034 6.625l.685.008h.007c.019 0 .036-.01.056-.011a6.851 6.851 0 0 0 6.893-6.618v-2.95L17.97 3.3a2.038 2.038 0 0 0-.344-1.556ZM6.469 8.979v-.913a.874.874 0 0 1 .874-.874h.219a.875.875 0 0 1 .874.874v1.276a2.34 2.34 0 0 0-.778.923c-.21.459-.257.975-.135 1.464h-.18a.875.875 0 0 1-.874-.875V8.979Zm-3.218 0a.876.876 0 0 1 .874-.874h.218a.876.876 0 0 1 .874.874v2.788a.876.876 0 0 1-.874.875h-.218a.876.876 0 0 1-.874-.875V8.979Zm6.381 9.626h-.013l-.576-.005a5.661 5.661 0 0 1-5.766-4.888c.267.118.556.18.848.18h.218a2.125 2.125 0 0 0 1.916-1.221 2.1 2.1 0 0 0 1.084.307h.219c.214 0 .426-.034.629-.1.227.214.493.384.783.5l2.673 1.064a.637.637 0 0 0 .232.044.625.625 0 0 0 .231-1.2l-2.674-1.069a1.162 1.162 0 0 1-.662-.638 1 1 0 0 1 .021-.793 1.281 1.281 0 0 1 1.637-.593l4.257 1.694a1.14 1.14 0 0 1 .7.762c.01.022.02.044.032.065v.516a5.614 5.614 0 0 1-5.789 5.375Zm5.674-7.8c-.053-.026-.1-.061-.154-.083L10.9 9.032a2.6 2.6 0 0 0-.951-.182L8.468 2.481a.787.787 0 0 1 .109-.608.97.97 0 0 1 .638-.42.982.982 0 0 1 1.185.7L12.154 8.6l.18.486 1-.054L14.8 2.785a.974.974 0 0 1 1.145-.719 1 1 0 0 1 .66.4.8.8 0 0 1 .137.6l-1.436 7.739Z"></path>`,"0 0 20 20","peace-outline");const o="mod-notes-rail",r=`/svc/shreddit/${o}/r/:subredditName/u/:userName/:subredditId/:userId/:thingId/:triggerSource/:postId`;var i,b;!function(a){a.USERNAME="username",a.USER_HOVER_CARD="user-hover-card"}(i||(i={})),function(a){a.Overview="overview",a.Log="log",a.Posts="posts",a.Comments="comments"}(b||(b={}));const c=[{getButtonText:()=>"Overview",slot:b.Overview},{getButtonText:()=>"Log",slot:b.Log},{getButtonText:()=>"Posts",slot:b.Posts},{getButtonText:()=>"Comments",slot:b.Comments}],m={[a.bD.HelpfulUser]:()=>"Helpful",[a.bD.SolidContributor]:()=>"Good Contributor",[a.bD.SpamWatch]:()=>"Spam Watch",[a.bD.SpamWarning]:()=>"Spam Warning",[a.bD.AbuseWarning]:()=>"Abuse Warning",[a.bD.Ban]:()=>"Ban",[a.bD.BotBan]:()=>"Bot ban",[a.bD.PermaBan]:()=>"Perma ban",[a.bD.UserSummary]:()=>"Summary"};return{M:"mod-notes-rail-loading",N:[{label:()=>"None",icon:()=>""},{label:m[a.bD.HelpfulUser],icon:(a=e.I.Medium,t)=>n({size:a,attributes:{className:t}}),gqlLabel:a.bD.HelpfulUser},{label:m[a.bD.SolidContributor],icon:(a=e.I.Medium,t)=>e.a2({size:a,attributes:{className:t}}),gqlLabel:a.bD.SolidContributor},{label:m[a.bD.SpamWatch],icon:(a=e.I.Medium,t)=>l({size:a,attributes:{className:t}}),gqlLabel:a.bD.SpamWatch},{label:m[a.bD.SpamWarning],icon:(a=e.I.Medium,t)=>e.a3({size:a,attributes:{className:t}}),gqlLabel:a.bD.SpamWarning},{label:m[a.bD.AbuseWarning],icon:(a=e.I.Medium,t)=>e.a3({size:a,attributes:{className:t}}),gqlLabel:a.bD.AbuseWarning}],a:o,b:r,get c(){return b},get d(){return i},e:c,f:20}}));

SML.dm("contenttags9bd7e916",["iconc33661e6","shelle48e5956"],(async e=>{var a;!function(e){e.APP="APP",e.GAME="GAME",e.NSFW="NSFW",e.ORIGINAL="ORIGINAL",e.SPOILER="SPOILER",e.QUARANTINED="QUARANTINED"}(a||(a={}));return{get C(){return a},c:({attributes:n,children:t,appearance:c})=>{const{html:s,createElement:l}=e.g(),r={size:e.I.Small,attributes:{className:"inline-block",style:"vertical-align: text-bottom"}},i={[a.APP]:{className:"text-ai-plain",icon:e.r(r)},[a.GAME]:{className:"text-ai-plain",icon:e.v(r)},[a.NSFW]:{className:"text-category-nsfw",icon:e.w(r)},[a.ORIGINAL]:{className:"text-primary",icon:e.y(r)},[a.SPOILER]:{className:"text-category-spoiler",icon:e.z(r)},[a.QUARANTINED]:{className:"text-warning-content",icon:e.D(r)}},N=s`<span class="inline-block" aria-hidden="true">${[i[c].icon]}</span> <span class="font-semibold text-12 uppercase">${t}</span>`;return l("span",{...n,className:`flex items-center gap-2xs ${[i[c].className]}`,rpl:!0},N)},g:()=>({[a.NSFW]:{children:"NSFW",appearance:a.NSFW},[a.APP]:{children:"APP",appearance:a.APP},[a.GAME]:{children:"GAME",appearance:a.GAME},[a.SPOILER]:{children:"SPOILER",appearance:a.SPOILER},[a.QUARANTINED]:{children:"QUARANTINED",appearance:a.QUARANTINED},[a.ORIGINAL]:{children:"ORIGINAL",appearance:a.ORIGINAL}})}}));
SML.dm("modpostlistclientjsa6825fc7",["shelle48e5956","iconc33661e6","contenttags9bd7e916","overflowmenuactionsf8d12b95","distinguishedtags1c4757ea"],(async(t,e,s,n)=>{let i=class extends e.s{constructor(){super(),this.postId="",this.spoiler=!1,this.nsfw=!1,this.quarantined=!1,this.game=!1,this.app="",this.onPostUpdateAction=({postId:t,action:e,value:s})=>{if(this.postId===t)switch(e){case n.a.markAsNsfw:this.nsfw=s;break;case n.a.markAsSpoiler:this.spoiler=s}},this.pubsubController=new t.P(this)}connectedCallback(){super.connectedCallback(),this.pubsubController.subscribe(t.T.PostUpdated,this.onPostUpdateAction)}disconnectedCallback(){super.disconnectedCallback(),this.pubsubController.unsubscribe(t.T.PostUpdated,this.onPostUpdateAction)}renderContentTag(t){const n=s.c(s.g()[t]);return e.x`<span class="h-lg inline-block">${n}</span>`}render(){return this.nsfw||this.spoiler||this.quarantined||this.app?e.x` <div class="content-tags inline-flex gap-xs"> ${this.nsfw?this.renderContentTag(s.C.NSFW):""} ${this.app?e.x`<a target="_blank" href="https://developers.reddit.com/apps/${this.app}?utm=watermark_v1" @click="${()=>this.dispatchEvent(new CustomEvent("tag-click",{detail:{type:s.C.APP}}))}">${this.renderContentTag(this.game?s.C.GAME:s.C.APP)}</a>`:""} ${this.spoiler?this.renderContentTag(s.C.SPOILER):""} ${this.quarantined?this.renderContentTag(s.C.QUARANTINED):""} </div> `:""}};i.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],i.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"spoiler",reflect:!0})],i.prototype,"spoiler",void 0),t._([t.n({type:Boolean,attribute:"nsfw",reflect:!0})],i.prototype,"nsfw",void 0),t._([t.n({type:Boolean,attribute:"quarantined",reflect:!0})],i.prototype,"quarantined",void 0),t._([t.n({type:Boolean})],i.prototype,"game",void 0),t._([t.n({type:String})],i.prototype,"app",void 0),i=t._([t.e("shreddit-content-tags")],i)}));
SML.dm("shredditmedialightboxlistener13c26692",["shelle48e5956","iconc33661e6"],(async(t,i)=>{t.cj(i.a`#shreddit-media-lightbox .lightboxed-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%}#shreddit-media-lightbox .non-lightboxed-content{display:none}#shreddit-media-lightbox .media-lightbox-img{max-height:none}#shreddit-media-lightbox::part(panel){max-width:100svw;max-height:100svh;width:100svw;height:100svh;border-radius:0}`);let e=class extends i.s{constructor(){super(...arguments),this._isConnected=!1,this._push=t.ck,this._lightboxUrl=void 0,this.pubsub=new t.P(this),this.templateRef=t.aq(),this.contentRef=t.aq(),this._hideCloseButtonOnIdle=!1,this.disableAnimations=!1,this.isIdle=!1,this.lightboxOpenHandler=({element:t,attributes:i={}})=>{const e=i.permalink??window.location.href;try{const s=e.startsWith("http")?e:`${window.location.origin}${e}`;this._lightboxUrl=new URL(`${s}#lightbox`),this._push(this._lightboxUrl.href,{onForwardNav:()=>this.showModal({element:t,attributes:i}),onBackNav:()=>this.dialog?.hide()})}catch(s){this.showModal({element:t,attributes:i}),window.Sentry?.captureException?.(`shreddit-media-lightbox: Error parsing permalink ${e}`,s)}},this.showModal=({element:i,attributes:e={}})=>{if(this.dialog?.open)return;const{hideCloseButtonOnIdle:s,onAfterClose:o}=e;this._hideCloseButtonOnIdle=s??!1,this._onAfterClose=o,this._originalParent=i,this._originalParentHeight=i.offsetHeight,this.dialog?.showModal(),this.pubsub.publish(t.T.LightboxOpened)},this.onAfterShow=()=>{const t=document.createElement("div");t.style.height=`${this._originalParentHeight}px`,this.contentRef?.value?.replaceChildren(...this._originalParent?.children||[]),this._originalParent?.appendChild(t),this._startIdleTimer(),this.isIdle=!1},this.lightboxCloseHandler=()=>{this.dialog?.open&&this.dialog?.hide()},this.onDialogHide=()=>{this.pubsub.publish(t.T.LightboxClosed),this.contentRef?.value?.children&&this._originalParent&&(this._originalParent.replaceChildren(...this.contentRef.value.children),this.contentRef.value.innerHTML=""),this._originalParent=void 0,this._hideCloseButtonOnIdle=!1,this._idleTimeout=void 0,this.isIdle=!1;const i=window.navigation?.currentEntry?.url!==this._lightboxUrl?.href;window.navigation?.canGoBack&&!i&&(this._lightboxUrl=void 0,window.navigation.back())},this.onAfterHide=()=>{this._onAfterClose&&(this._onAfterClose(),this._onAfterClose=void 0)},this._startIdleTimer=()=>{this._hideCloseButtonOnIdle&&(this._stopIdleTimer(),this._idleTimeout=window.setTimeout((()=>{this.isIdle=!0}),1500))}}static get styles(){return[t.t]}connectedCallback(){super.connectedCallback();Array.from(document.getElementsByTagName("shreddit-media-lightbox")).some((t=>t._isConnected))||(this._isConnected=!0,this.pubsub.subscribe(t.T.LightboxOpen,this.lightboxOpenHandler,!1),this.pubsub.subscribe(t.T.LightboxClose,this.lightboxCloseHandler,!1))}firstUpdated(){this.dialog&&this.disableAnimations&&function(i){const e={keyframes:[],options:{duration:0}};["dialog.show","dialog.hide","dialog.denyClose","dialog.overlay.show","dialog.overlay.hide"].forEach((s=>{t.cl(i,s,e)}))}(this.dialog)}disconnectedCallback(){super.disconnectedCallback(),this._isConnected&&(this.dialog?.open&&this.dialog?.hide(),this.pubsub.unsubscribe(t.T.LightboxOpen,this.lightboxOpenHandler),this.pubsub.unsubscribe(t.T.LightboxClose,this.lightboxCloseHandler),this._isConnected=!1)}_stopIdleTimer(){window.clearTimeout(this._idleTimeout),this._idleTimeout=void 0,this.isIdle=!1}render(){if(this._isConnected){const e=i.x`<div data-testid="lightbox-template" class="relative h-full w-full" @mousemove="${this._startIdleTimer}" @click="${this._startIdleTimer}" @keydown="${this._startIdleTimer}" ${t.as(this.templateRef)}> <div data-testid="lightbox-template-content" class="h-full w-full max-h-dvh" ${t.as(this.contentRef)}></div> ${t.r({size:t.s.Large,appearance:"media",shape:"pill",attributes:{"data-testid":"close-button",className:"absolute top-sm right-sm z-10 duration-300 "+(this.isIdle?"opacity-0 invisible":"opacity-100"),"aria-label":"Close lightbox",onclick:()=>{this.dialog?.hide()}},children:i.aG({size:i.I.Medium})})} </div>`;return i.x` <rpl-dialog dialog-id="${"shreddit-media-lightbox"}" @rpl-dialog:after-show="${this.onAfterShow}" @rpl-dialog:hide="${this.onDialogHide}" @rpl-dialog:after-hide="${this.onAfterHide}" .litTemplateChildren="${e}"> </rpl-dialog> `}return""}};t._([t.n({type:Boolean,attribute:"disable-animations"})],e.prototype,"disableAnimations",void 0),t._([t.d()],e.prototype,"isIdle",void 0),t._([t.y("rpl-dialog")],e.prototype,"dialog",void 0),e=t._([t.e("shreddit-media-lightbox")],e);let s=class extends i.s{constructor(){super(...arguments),this.pubsub=new t.P(this),this.handleInteraction=i=>{t.f(i)&&this.openLightbox()},this.handleTrigger=({postId:t})=>{t===this.postId&&this.openLightbox()},this.openLightbox=()=>{this.pubsub.publish(t.T.LightboxOpen,{element:this,attributes:{permalink:this.permalink}})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.TriggerLightboxOpen,this.handleTrigger,!1)}disconnectedCallback(){this.pubsub.unsubscribe(t.T.TriggerLightboxOpen,this.handleTrigger),super.disconnectedCallback()}render(){return i.x`<slot @click="${this.handleInteraction}" @keypress="${this.handleInteraction}"></slot>`}};s.styles=[i.a`:host{cursor:pointer}`,t.t],t._([t.n({type:String,attribute:"post-id"})],s.prototype,"postId",void 0),t._([t.n({type:String,attribute:"permalink"})],s.prototype,"permalink",void 0),s=t._([t.e("shreddit-media-lightbox-listener")],s)}));
SML.dm("imageobserver51925d1c",["shelle48e5956","iconc33661e6"],(async(e,i)=>{let t=class extends i.s{constructor(){super(...arguments),this._imageElem=null,this._traceCompleted=!1,this._imageStartTiming=0,this._imageLoadedTiming=0,this._imageReadyTiming=0,this._observer=new e.c6,this._hasBeenInView=!1,this.placement="image_post",this.onEnter=()=>{this._hasBeenInView=!0,this._imageStartTiming||(this._imageStartTiming=Date.now()),this.applyListeners(),this._timeoutTimer||(this._timeoutTimer=setTimeout((()=>{this._imageElem?.complete&&this._imageElem?.naturalWidth||this.sendImageMetric("download_fail")}),6e4))},this.onLeave=()=>{if(this._traceCompleted||!this._hasBeenInView||!this._imageStartTiming)return;const e=Date.now()-this._imageStartTiming>=150;!this._imageReadyTiming&&e&&this.sendImageMetric("exit_before_visible")},this.onLoad=()=>{this._imageLoadedTiming=Date.now(),this.poll()},this.onError=()=>{this.sendImageMetric("download_fail")},this.checkStatus=e=>{if(e.naturalWidth&&!this._imageReadyTiming)return this._imageLoadedTiming||(this._imageLoadedTiming=Date.now()),this._imageReadyTiming=Date.now(),this.sendImageMetric(),!0;e.complete&&!this._imageLoadedTiming&&(this._imageLoadedTiming=Date.now(),this.poll());const i=Date.now()-this._imageLoadedTiming;return this._pollVisibleInterval&&i>1e4&&this.sendImageMetric("download_fail"),!1}}connectedCallback(){if(super.connectedCallback(),this._traceCompleted)return;if(this._imageElem=this.previousElementSibling,!this._imageElem.tagName.includes("IMG"))throw new Error("<image-observer> must be immediately after the observed <img> in the DOM");this.checkStatus(this._imageElem)||(this._observer.observe(this._imageElem),this._imageElem.addEventListener("faceplate-enter",this.onEnter),this._imageElem.addEventListener("faceplate-leave",this.onLeave))}disconnectedCallback(){super.disconnectedCallback(),this._observer.unobserve(this._imageElem),this._imageElem?.removeEventListener("faceplate-enter",this.onEnter),this._imageElem?.removeEventListener("faceplate-leave",this.onLeave),this.cleanup()}applyListeners(){if(!this._imageElem)return;this.checkStatus(this._imageElem)||(this._imageElem.addEventListener("load",this.onLoad,{once:!0}),this._imageElem.addEventListener("error",this.onError,{once:!0}))}cleanup(){clearInterval(this._pollVisibleInterval),clearTimeout(this._timeoutTimer),this._imageElem?.removeEventListener("load",this.onLoad),this._imageElem?.removeEventListener("error",this.onError),this._imageStartTiming=0,this._imageLoadedTiming=0,this._imageReadyTiming=0}poll(){!this._pollVisibleInterval&&this._hasBeenInView&&(this._pollVisibleInterval=setInterval((()=>{this.checkStatus(this._imageElem)}),25))}sendImageMetric(i=void 0){const t=this._getPostInfo(),s=this._getGalleryInfo();let a,n;t&&({position:n,...a}=t);const m=this._imageStartTiming||this._imageLoadedTiming||this._imageReadyTiming||Date.now(),o=this._imageReadyTiming||Date.now(),r={source:"image",action:"trace",noun:"performance",client_timestamp:Date.now(),image_trace:{get_image_start_timestamp:m,image_ready_timestamp:o,view_visibile_timestamp:m},media:{width:this._imageElem?.naturalWidth,height:this._imageElem?.naturalHeight,url:this._imageElem?.src,placement:this.placement},action_info:{position:n,reason:i,page_type:e.X()}};a&&(r.post=a),s&&(r.gallery=s),this._sendEvent(r),this.cleanup(),"exit_before_visible"!==i&&(this._traceCompleted=!0)}_getPostInfo(){const i=this.closest("shreddit-post, shreddit-ad-post");if(i)return{id:i.id,promoted:i.nodeName.includes("AD"),nsfw:i.nsfw,view_type:i.viewType===e.al.CompactView?"classic":"card",position:i.feedIndex}}_getGalleryInfo(){if(!this.closest("gallery-carousel"))return;const e=this.closest("li")?.getAttribute("slot");return e?{position:Number(e.split("-")[1])-1}:void 0}_sendEvent(i){e.a(this,i)}createRenderRoot(){return this}};e._([e.n()],t.prototype,"placement",void 0),t=e._([e.e("image-observer")],t)}));
SML.dm("modlogtakedownpreviewclientjsd3af86b9",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(t,e,o)=>{function n(t,e,o){return!0===(null==o?void 0:o.short)?t.toLocaleDateString(e,{month:"short",day:"numeric"}):t.toLocaleString(e,null==o?void 0:o.options)}const i={options:{dateStyle:"full",timeStyle:"long"}};let s=class extends e.s{constructor(){super(...arguments),this.ts="",this.date=new Date,this.short=!1,this.locale=""}getLocale(){return this.locale||o.ci()}createRenderRoot(){return this}render(){const t=this.getLocale(),o=n(this.date,t,i),s=this.formatOptions?{options:this.formatOptions}:{short:this.short},r=n(this.date,t,s);return e.x`<time datetime="${this.date.toISOString()}" title="${o}">${r}</time>`}};return t._([t.n({type:String})],s.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>o.cj(t||"")})],s.prototype,"date",void 0),t._([t.n({type:Boolean})],s.prototype,"short",void 0),t._([t.n({type:String})],s.prototype,"locale",void 0),t._([t.n({type:Object})],s.prototype,"formatOptions",void 0),s=t._([t.e("faceplate-date")],s),{f:n}}));
SML.dm("shredditpostsharebutton64b8d78b",["shelle48e5956","iconc33661e6","expandablesectionheader41e0cfd1","withshared1523f2d"],(async(t,e,s,i)=>{const a=i.W(e.s);let o=class extends a{constructor(){super(...arguments),this.shareButtonText="",this.permalink="",this.size=t.s.Medium,this.menuSize=s.L.Medium,this.buttonClass="",this.isDesktopViewport=!1,this.ssr=!1,this.appearance="secondary",this.shareMenuFeatureName=t.aV,this.shareMenuTemplateId=i.S,this.useButton=!1,this.useMenu=!1,this.showFullButtons=!1,this.translationLanguage=""}static get styles(){return[t.t]}handlePostShareClick(t){this.isAllowedEvent(t)&&(this.isDesktopViewport?this.handleDesktopShareClick(t):this.handleMobileShareClick(t),this.ssr&&(this.isShareDropdownOpened?this.handleShareDropdownClose():this.handleShareDropdownOpen()))}render(){return this.ssr?e.x`<slot name="ssr-share-button" @click="${this.handlePostShareClick}" @keydown="${this.handlePostShareClick}"></slot>`:this.useMenu?this.renderOnlyShareMenuItem({handleShareClick:this.handlePostShareClick,menuSize:this.menuSize,attributes:{className:this.buttonClass}}):this.useButton?this.renderOnlyShareButton({handleShareClick:this.handlePostShareClick,size:this.size,attributes:{className:this.buttonClass},showFullButtons:this.showFullButtons}):this.renderShareDropdown({handleShareClick:this.handlePostShareClick,appearance:this.appearance,size:this.size,shareButtonText:this.shareButtonText,attributes:{className:this.buttonClass}})}};t._([t.n({type:String,attribute:"share-button-text"})],o.prototype,"shareButtonText",void 0),t._([t.n({type:String})],o.prototype,"permalink",void 0),t._([t.n({type:String})],o.prototype,"size",void 0),t._([t.n({type:String})],o.prototype,"menuSize",void 0),t._([t.n({type:String,attribute:"button-class"})],o.prototype,"buttonClass",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],o.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"ssr"})],o.prototype,"ssr",void 0),t._([t.n({type:String})],o.prototype,"appearance",void 0),t._([t.n({type:String,attribute:"share-menu-feature-name"})],o.prototype,"shareMenuFeatureName",void 0),t._([t.n({type:String,attribute:"share-menu-template-id"})],o.prototype,"shareMenuTemplateId",void 0),t._([t.n({type:Boolean,attribute:"use-button"})],o.prototype,"useButton",void 0),t._([t.n({type:Boolean,attribute:"use-menu"})],o.prototype,"useMenu",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],o.prototype,"showFullButtons",void 0),t._([t.n({type:String})],o.prototype,"translationLanguage",void 0),o=t._([t.e("shreddit-post-share-button")],o)}));
SML.dm("promotepostactionscontroller30d2105c",["shelle48e5956","contentactionbutton6a45f903","iconc33661e6","utils93db03dd"],(async(t,s,o,e)=>{var i;let d=i=class extends o.s{constructor(){super(...arguments),this.authorId="",this.postId="",this.subredditName="",this.viewType=t.al.CardView,this.boostPostPageExp=!1,this.isAmaPost=!1,this.isLoaded=!1,this.hasAnalytics=!1,this.promotedAdAccounts=[],this.pubsub=new t.P(this),this.handlePromotePostSuccess=({adAccount:s,postId:o})=>{if(o===this.postId&&this.viewType===t.al.CardView){this.hasAnalytics||(this.hasAnalytics=!0);this.promotedAdAccounts.find((t=>t.id===s.id))||this.promotedAdAccounts.push(s)}},this.handleClick=()=>{this.viewType===t.al.CardView&&this.hasAnalytics&&!this.isAmaPost?this.dispatchEvent(t.c("toggle-promote-post-insights",{promotedAdAccounts:this.promotedAdAccounts})):this.identity&&(this.boostPostPageExp?e.v(this.postId):e.c.activateAndOpenPromotePostModal({postId:this.postId,postType:this.postType,subredditName:this.subredditName,identity:this.identity})),t.a(this,e.a({source:"post",action:"click",noun:"promote_button"},this.postId,this.subredditName))}}static get styles(){return[t.t]}async connectedCallback(){super.connectedCallback?.(),this.pubsub.subscribe(t.T.PromotePostSuccess,this.handlePromotePostSuccess,!1);const s=t.B({operation:t.O.BoostedPostAdInsights,variables:{profileId:this.authorId,postId:this.postId,includeIdentity:!i.queryWithIdentityPromise,includeAdAccounts:!i.queryWithIdentityPromise}});i.queryWithIdentityPromise||(i.queryWithIdentityPromise=s);const o=await i.queryWithIdentityPromise,{adAccounts:d,email:a,isOnboarded:n}=e.g(o);this.identity={adAccounts:d,email:a,isOnboarded:n};const h=await s;if(h.data.adInsights){this.hasAnalytics=!!h.data.adInsights.edges.length;const t=new Set(h.data.adInsights.edges.map((t=>t?.node?.adAccountId)));this.promotedAdAccounts=Array.from(t).map((t=>d.find((s=>s.id===t))))}t.a(this,e.a({source:"post",action:"view",noun:"promote_button"},this.postId,this.subredditName)),this.isLoaded=!0}async disconnectedCallback(){super.disconnectedCallback?.(),this.pubsub.unsubscribe(t.T.PromotePostSuccess,this.handlePromotePostSuccess)}createRenderRoot(){return this}render(){return o.x`<span class="relative"> ${s.c({appearance:"secondary",leadingIcon:o.cl({size:s.I[t.s.Small],attributes:{className:"icon-promote-post","aria-hidden":"true"}}),attributes:{name:"promote-post-button","data-post-click-location":t.dS.PROMOTE_POST_BUTTON,onclick:this.handleClick,className:"ml-auto mr-0 pr-[6px] pl-[6px]",disabled:!this.isLoaded},size:t.s.Small,screenReaderContent:"Promote Post"})} </span>`}};t._([t.n({attribute:"author-id"})],d.prototype,"authorId",void 0),t._([t.n({attribute:"post-id"})],d.prototype,"postId",void 0),t._([t.n({attribute:"post-type"})],d.prototype,"postType",void 0),t._([t.n({attribute:"subreddit-name"})],d.prototype,"subredditName",void 0),t._([t.n({attribute:"view-type"})],d.prototype,"viewType",void 0),t._([t.n({type:Boolean,attribute:"boost-post-page-exp"})],d.prototype,"boostPostPageExp",void 0),t._([t.n({type:Boolean,attribute:"is-ama-post"})],d.prototype,"isAmaPost",void 0),t._([t.d()],d.prototype,"isLoaded",void 0),t._([t.d()],d.prototype,"hasAnalytics",void 0),t._([t.d()],d.prototype,"identity",void 0),t._([t.d()],d.prototype,"promotedAdAccounts",void 0),d=i=t._([t.e("promote-post-button")],d);class a{constructor(s){this.handlePromotePostSuccess=({adAccount:t,postId:s})=>{if(s===this.host.postId){this.host.hasPromotedPostAnalytics||(this.host.hasPromotedPostAnalytics=!0);this.host.promotedAdAccounts.find((s=>s.id===t.id))||this.host.promotedAdAccounts.push(t)}},this.handleClick=()=>{t.a(document.body,e.a({source:"post",action:"click",noun:"promote_button"},this.host.postId,this.host.subredditPrefixedName)),this.host.hasPromotedPostAnalytics&&!this.host.isAma?this.host.dispatchEvent(t.c("toggle-promote-post-insights",{promotedAdAccounts:this.host.promotedAdAccounts})):this.host.promotePostIdentity&&(this.host.boostPostPageExp?e.v(this.host.postId):e.c.activateAndOpenPromotePostModal({postId:this.host.postId,postType:this.host.postType,subredditName:this.host.subredditPrefixedName??"",identity:this.host.promotePostIdentity}))},this.load=async()=>{try{const s=t.B({operation:t.O.BoostedPostAdInsights,variables:{profileId:this.host.authorId,postId:this.host.postId,includeIdentity:!a.queryWithIdentityPromise,includeAdAccounts:!a.queryWithIdentityPromise}});a.queryWithIdentityPromise||(a.queryWithIdentityPromise=s);const o=await a.queryWithIdentityPromise,{adAccounts:i,email:d,isOnboarded:n}=e.g(o);this.host.promotePostIdentity={adAccounts:i,email:d,isOnboarded:n};const h=await s;if(h.data.adInsights){this.host.hasPromotedPostAnalytics=!!h.data.adInsights.edges.length;const t=new Set(h.data.adInsights.edges.map((t=>t?.node?.adAccountId)));this.host.promotedAdAccounts=Array.from(t).map((t=>i.find((s=>s.id===t))))}}catch(t){this.host.promotePostIdentity={adAccounts:[],email:"",isOnboarded:!1},this.host.hasPromotedPostAnalytics=!1,this.host.promotedAdAccounts=[]}this.host.hasLoadedPromotedPostAnalytics=!0},this.host=s,this.host.addController(this)}async hostConnected(){this.host.isPromoteablePost&&(this.host.pubsub.subscribe(t.T.PromotePostSuccess,this.handlePromotePostSuccess,!1),await this.load())}hostDisconnected(){this.host.isPromoteablePost&&this.host.pubsub.unsubscribe(t.T.PromotePostSuccess,this.handlePromotePostSuccess)}}return{P:a,get a(){return d}}}));
SML.dm("translationinterventionmodal407043a2",["shelle48e5956","iconc33661e6","translationsa30aa3ad","chatmobilexpromoclientjs5e1c145c","appselectorclientjs9964d0b0"],(async(t,e,i)=>{const s=e.s,n="translation-intervention-modal",{I18nPostTranslationOverride:a,I18nCommentTranslationOverride:o}=t.T,l=()=>!!t.l.getItem(t.L.I18nTranslationInterventionShown),r=()=>t.l.setItem(t.L.I18nTranslationInterventionShown,"true");let d=class extends s{constructor(){super(...arguments),this.translationContextValue=t.aw,this.open=!1,this.pubsub=new t.P(this),this.handleTranslationOverride=t=>{t.isContextUpdateEvent||l()||this.open||(this.translationOverrideActive=t.isTranslationActive,this.translationSourceId=t.id,this.show())},this.show=()=>{l()||(this.open=!0,this.modal?.showModal(),r())},this.close=()=>{this.translationOverrideActive=void 0,this.translationSourceId=void 0,this.open&&(this.modal?.close(),this.open=!1,this.dispatchEvent(new CustomEvent("translation-intervention-modal:close",{bubbles:!0,composed:!0})))},this.getThingTelemetryMetadata=()=>({post:"post"===this.mode?{id:this.translationSourceId,translation_state:!!this.translationOverrideActive}:"mtseo-post"===this.mode?{id:this.translationSourceId}:void 0,comment:"comment"===this.mode?{id:this.translationSourceId,translation_state:!!this.translationOverrideActive}:void 0}),this.handleDismiss=()=>{t.a(this,i.g({isImmersiveTranslationsActive:!!this.translationContextValue.isTranslationActive,isImmersiveVisit:this.isImmersiveVisit,...this.getThingTelemetryMetadata()})),this.close()},this.handleClick=e=>{t.a(this,i.h({actionType:e,isImmersiveTranslationsActive:"keep"===e?!!this.translationContextValue.isTranslationActive:!this.translationContextValue.isTranslationActive,isImmersiveVisit:this.isImmersiveVisit,...this.getThingTelemetryMetadata()})),"keep"===e?this.close():this.handleSubmit()},this.handleSubmit=()=>{"mtseo-post"===this.mode&&t.l.setItem(t.L.I18nTranslationInterventionShown,"mtseo-disabled");const e=this.translationOverrideActive;this.dispatchContextUpdateEvent(e),this.close()}}connectedCallback(){super.connectedCallback(),l()||("post"===this.mode&&this.pubsub.subscribe(a,this.handleTranslationOverride,!1),"comment"===this.mode&&this.pubsub.subscribe(o,this.handleTranslationOverride,!1))}disconnectedCallback(){super.disconnectedCallback(),"post"===this.mode&&this.pubsub.unsubscribe(a,this.handleTranslationOverride),"comment"===this.mode&&this.pubsub.unsubscribe(o,this.handleTranslationOverride)}dispatchContextUpdateEvent(e){const i=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,isTranslationActive:e}});this.dispatchEvent(i),this.pubsub.publish(t.T.I18nPostTranslationOverride,{isTranslationActive:e,id:"",isContextUpdateEvent:!0,pageType:"feed"===this.pageType?"FEED":"PDP"})}render(){const i=this.translationOverrideActive?{body:"It looks like you know another language. Would you like all your content automatically translated?",confirmButton:"Continue Without Translations",cancelButton:"Turn On Translations"}:{body:"It looks like you know another language. Would you like to keep automatic translations turned on?",confirmButton:"Continue With Translations",cancelButton:"Turn off Translations"};return e.x` <faceplate-modal blocking ?open="${this.open}" class="${n} w-[350px] m:w-[320px] h-fit z-10"> <div slot="title" class="w-full m:w-fit"> <h3 class="my-0 font-bold inline-flex text-18" data-testid="i18n-modal-title"> Update translations on Reddit </h3> </div> <div slot="closeButton" class="flex items-center"> ${t.r({attributes:{"aria-label":"Close","data-testid":"i18n-modal-close-button",onclick:this.handleDismiss},appearance:"secondary",leadingIcon:e.C({size:e.I.Small}),size:t.s.Small})} </div> <div class="flex flex-col w-full box-border"> <span class="text-16 my-lg text-pretty">${i.body}</span> <div class="flex flex-col w-full items-stretch gap-xs"> ${t.r({appearance:"primary",size:t.s.Large,shape:"pill",attributes:{className:"flex box-border w-full","data-testid":"i18n-modal-confirm-button",onclick:this.handleClick.bind(this,"keep")},children:e.x`<span class="font-semibold text-14">${i.confirmButton}</span>`})} ${t.r({appearance:"secondary",size:t.s.Large,shape:"pill",attributes:{className:"flex box-border w-full","data-testid":"i18n-modal-cancel-button",onclick:this.handleClick.bind(this,"change")},children:e.x`<span class="font-semibold text-14">${i.cancelButton}</span>`})} </div> </div> </faceplate-modal> `}};d.styles=[t.t],t._([t.av({context:t.ax,subscribe:!0}),t.d()],d.prototype,"translationContextValue",void 0),t._([t.n({type:String,attribute:"mode"})],d.prototype,"mode",void 0),t._([t.n({type:Boolean,attribute:"open"})],d.prototype,"open",void 0),t._([t.n({type:String,attribute:"page-type"})],d.prototype,"pageType",void 0),t._([t.n({type:Boolean,attribute:"is-immersive-visit"})],d.prototype,"isImmersiveVisit",void 0),t._([t.d()],d.prototype,"translationOverrideActive",void 0),t._([t.d()],d.prototype,"translationSourceId",void 0),t._([t.y(`faceplate-modal.${n}`)],d.prototype,"modal",void 0),d=t._([t.e("translation-intervention-modal")],d)}));
SML.dm("v2events64802d88",["shelle48e5956"],(async e=>{const r="devplatform",a=r=>{switch(r){case e.w.PostDetail:return"pdp";case e.w.Profile:return"profile";case e.w.Community:return"subreddit";case e.w.Embed:return"embed";case e.w.Home:case e.w.Popular:case e.w.All:case e.w.CustomFeed:case e.w.GeoCuratedFeed:case e.w.UserPosts:case e.w.ModQueue:case e.w.ModQueueAll:case e.w.SearchResults:return"feed";default:return""}};var t;!function(e){e.all="all",e.arena="arena",e.conversation="conversation",e.custom="custom",e.embed="embed",e.home="home",e.modQueue="mod_queue",e.modQueueAll="mod_queue_all",e.news="news",e.popular="popular",e.profile="profile",e.promotedSearchTrend="promoted_search_trend",e.read="read",e.search="search",e.subreddit="subreddit",e.user="user",e.watch="watch"}(t||(t={}));const s=r=>{switch(r){case e.w.All:return t.all;case e.w.ArenaFeed:return t.arena;case e.w.Community:return t.subreddit;case e.w.CustomFeed:case e.w.GeoCuratedFeed:return t.custom;case e.w.Embed:return t.embed;case e.w.Home:return t.home;case e.w.ModQueue:return t.modQueue;case e.w.ModQueueAll:return t.modQueueAll;case e.w.Popular:return t.popular;case e.w.Profile:return t.profile;case e.w.SearchResults:return t.search;case e.w.UserPosts:return t.user;default:return""}};return{D:r,a:(e,r)=>{if(URL.canParse(e)){const a=new URL(e);return a.searchParams.set("entry_point",r),a.toString()}return e},c:e=>({source:r,action:e.action,noun:e.noun,devplatform_custom_post_info:{post_id:e.postId,subreddit_id:e.subredditId,block_type:e.blockType,presentation_context:e.pageType?a(e.pageType):"",feed_type:e.pageType?s(e.pageType):"",watermark:e.watermark,post_chrome:e.post_chrome},devplatform:{runtime:"web",installation_id:e.appInstallationId,app_id:e.appId,app_slug:e.appSlug,app_name:e.appSlug,app_version_number:e.appVersionNumber,public_api_version:e.appPublicApiVersion,internal_entry_point:e.internalEntryPoint||"",app_recommendation_criteria:e.appRecommendationCriteria||""},request:{user_agent:e.userAgent},post:e.post})}}));
SML.dm("faceplatecarousele02bc9b8",["shelle48e5956","iconc33661e6","TinyGesture26737d23","agegatestandaloneclientjsb13e879d","shouldconttruncated81ee171"],(async(t,e,i,n,s)=>{var a;!function(t){t.PLAIN="plain",t.MEDIA="media"}(a||(a={}));const o=12;let r=class extends e.s{constructor(){super(...arguments),this.pages=0,this.pageIndex=0,this.appearance=a.PLAIN,this.animationDuration=0,this.containerLabel="",this.numVisible=2,this.centerIndexPosition=3,this.setTransitionDuration=async()=>{this._dotsContainer&&(await this.updateComplete,this._dotsContainer.style.setProperty("--pagination-transition-duration",`${this.animationDuration}ms`))},this.animateInfiniteCurrentPage=t=>{if(this._currentPageIndicator){const e=[{transform:t?`translate3d(${o*this.pages}px, 0,0)`:"translate3d(-12px, 0,0)",opacity:0},{opacity:0,transform:t?"translate3d(-12px, 0,0)":`translate3d(${o*this.pages}px, 0,0)`},{opacity:1,transform:t?"translate3d(0px, 0,0)":`translate3d(${o*(this.pages-1)}px, 0,0)`}],i={duration:this.animationDuration,fill:"forwards",iterations:1};this.setDotsTrackTransform(!t),this._currentPageIndicator.animate(e,i)}},this.animateCurrentPage=async()=>{this.setDotsTrackTransform(),this.animateCurrentPageNumber()},this.animateCurrentPageNumber=()=>{if(this._currentPageIndicator){const t=[{width:"var(--rem6)"},{width:"var(--rem18)",borderRadius:"4px"},{width:"var(--rem6)",transform:`translate3d(${o*this.pageIndex}px, 0,0)`}],e={duration:this.animationDuration,fill:"forwards",iterations:1};this._currentPageIndicator.animate(t,e)}},this.onSelect=t=>{const e=new CustomEvent("pagination-click",{detail:{pageIndex:t},bubbles:!0,composed:!0});this.dispatchEvent(e)},this.isEdgeDot=t=>{if(this.pages>=6){const e=t===this.pageIndex-3,i=t===this.pageIndex+3;return e||i}return!1},this.getDotButton=i=>{const n=Math.abs(i-this.pageIndex),s=t=>t===this.pageIndex?`(${this.currentPageLabel??"Current Page"})`:"",a=this.getPageLabels?`${this.getPageLabels(i)} ${s(i)}`:`Page ${i+1} ${s(i)}`,o=0===n||1===n;return e.x`<button class="${t.U({dot:!0,edge:this.isEdgeDot(i)})}" aria-hidden="${!o}" tabindex="${o?0:-1}" @click="${t=>{0===t.target.tabIndex&&this.onSelect(i)}}" @keydown="${t=>{"Enter"!==t.key&&"Space"!==t.key||this.onSelect(i)}}"> <faceplate-screen-reader-content>${a}</faceplate-screen-reader-content> </button>`},this.render=()=>{if(0!==this.pages)return e.x` <div id="dots-container"> <div class="dots-track-container"> <div id="dots-track" role="group" aria-label="${this.containerLabel}"> ${this.currentPageIndicator} ${[...Array(this.pages).keys()].map(((t,e)=>this.getDotButton(e)))} </div> </div> </div> `}}static get styles(){return e.a`:host{display:inline-flex;height:var(--rem16,1rem);width:100%;justify-content:center}:host #dots-container{display:inline-flex;position:relative;height:100%;overflow:hidden;align-items:center;border-radius:var(--rem8,.5rem);padding:0 var(--rem2,.125rem);transition:width ease-in-out var(--pagination-transition-duration)}:host .dots-track-container{position:relative;height:100%;width:100%;display:flex;align-items:center}:host #dots-track{display:flex;position:absolute;left:0;height:var(--rem12,.75rem);overflow:hidden;box-sizing:border-box;font-size:var(--rem10,.625rem);align-items:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host([appearance=media]) #dots-container{background-color:var(--color-media-background)}:host([appearance=media]) .dot{background-color:var(--color-media-onbackground-disabled)}:host .dot:focus-visible{outline:solid 1px var(--color-global-focus)}:host([appearance=media]) #current-page-indicator.number{color:var(--color-media-onbackground)}:host([appearance=media]) #current-page-indicator.dot{background-color:var(--color-media-onbackground)}:host #current-page-indicator{z-index:2;position:absolute}:host #current-page-indicator.number{color:var(--color-neutral-content);display:flex;align-items:center;justify-content:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host #current-page-indicator.dot{background-color:var(--color-neutral-content)}:host .dot{height:var(--rem6,.375rem);width:var(--rem6,.375rem);border-radius:50%;box-sizing:content-box;display:inline-block;margin:calc(var(--rem2,.125rem) + var(--rem1,.0625rem));padding:0;border:none}:host #current-page-indicator.number{height:var(--rem15,.9375rem);width:var(--rem16,1rem);margin:0}:host .dot{background-color:var(--color-neutral-border);background-clip:content-box;transition:all ease-in-out var(--pagination-transition-duration)}:host .dot[tabindex='0']{cursor:pointer}:host .dot:focus{transition:none}:host .dot.edge{height:calc(var(--rem2) + var(--rem1));width:calc(var(--rem2) + var(--rem1));margin:.28125rem;flex-shrink:0}`}willUpdate(t){t.has("pageIndex")&&(this.pageIndex<0||this.pageIndex>this.pages-1)&&(this.pageIndex=0)}async updated(t){await this.updateComplete,(t.has("pageIndex")||t.has("pages"))&&this.shrinkOrStretch();const e=t.get("pageIndex")===this.pages-1&&0===this.pageIndex,i=0===t.get("pageIndex")&&this.pageIndex===this.pages-1;e||i?this.animateInfiniteCurrentPage(e):t.has("pageIndex")&&await this.animateCurrentPage(),t.has("animationDuration")&&this.setTransitionDuration()}shrinkOrStretch(){this.pages>=6?0===this.pageIndex||this.pageIndex===this.pages-1?this.numVisible=4:1===this.pageIndex||this.pageIndex===this.pages-2?this.numVisible=5:2===this.pageIndex||this.pageIndex===this.pages-3?this.numVisible=6:this.pageIndex>=3&&this.pageIndex<=this.pages-4&&(this.numVisible=7):this.numVisible=this.pages,this._dotsContainer&&(this._dotsContainer.style.width=`calc(var(--rem12, 0.75rem) * ${this.numVisible})`)}setDotsTrackTransform(t){const e=this.pageIndex-this.centerIndexPosition,i=e>0?e:0;if(this._dotsTrack){const e=`translate3d(${o*i*-1}px, 0,0)`;e!==this._dotsTrack.style.transform?this._dotsTrack.style.transform=e:t&&"translate3d(0px, 0,0)"!==this._dotsTrack.style.transform&&(this._dotsTrack.style.transform="translate3d(0px, 0,0)")}}get currentPageIndicator(){return e.x`<span id="current-page-indicator" class="dot" aria-hidden="true"></span>`}};t._([t.n({type:Number})],r.prototype,"pages",void 0),t._([t.n({type:Number,attribute:"page-index"})],r.prototype,"pageIndex",void 0),t._([t.n({type:String})],r.prototype,"appearance",void 0),t._([t.n({type:Number,attribute:"animation-duration"})],r.prototype,"animationDuration",void 0),t._([t.n({type:String,attribute:"current-page-label"})],r.prototype,"currentPageLabel",void 0),t._([t.n()],r.prototype,"getPageLabels",void 0),t._([t.n({type:String,attribute:"container-label"})],r.prototype,"containerLabel",void 0),t._([t.y("#dots-container")],r.prototype,"_dotsContainer",void 0),t._([t.y("#dots-track")],r.prototype,"_dotsTrack",void 0),t._([t.y("#current-page-indicator")],r.prototype,"_currentPageIndicator",void 0),t._([t.bj(".dot")],r.prototype,"_dots",void 0),r=t._([t.e("faceplate-pagination-indicator")],r);let l=class extends e.s{constructor(){super(...arguments),this.appearance=a.PLAIN,this.autoplay=0,this.pages=0,this.pageIndex=0,this.isAnimationFinished=!1,this._currentAnimation=null,this.handleAutoplayInterruption=async t=>{this.cancelAnimation(t)},this.cancelAnimation=async t=>{const e=await this._autoplayPillContainer;if(e){const{children:i}=e;if(i[t]?.firstElementChild){const e=i[t]?.firstElementChild?.getAnimations().map((t=>(t.cancel(),t.ready)));e&&await Promise.all(e)}}},this.resetAnimations=async()=>{const t=await this._autoplayPillContainer;if(t){const{children:e}=t;for(let t=0;t<e.length;t++)this.cancelAnimation(t)}},this.animatePill=async()=>{this.isAnimationFinished=!1;try{await this.updateComplete,this._currentAnimation?.cancel();const t=[{backgroundColor:"var(--color-neutral-border-medium)",width:0,height:"var(--rem4)"},{backgroundColor:"var(--color-neutral-border-medium)",width:"100%",height:"var(--rem4)"}],e={duration:this.autoplay,fill:"forwards",iterations:1},{children:i}=await this._autoplayPillContainer,n=i?.[this.pageIndex]?.firstElementChild;this._currentAnimation=n?.animate(t,e),await(this._currentAnimation?.finished),this.isAnimationFinished=!0}catch(t){t instanceof DOMException&&"AbortError"===t.name||console.error(t)}},this.pauseAnimation=()=>{this._currentAnimation?.pause()},this.resumeAnimation=()=>{this._currentAnimation?.play()},this.render=()=>{if(0!==this.pages)return e.x` <div class="pagination-container"> <div class="${t.U({"pagination-controls":!0,plain:this.appearance===a.PLAIN,media:this.appearance===a.MEDIA,autoplay:this.autoplay})}"> <span id="autoplay-pill-container">${[...Array(this.pages).keys()].map(((i,n)=>e.x`<span class="${t.U({track:!0,"in-view":this.pageIndex===n})}"> <span class="${t.U({autoplayPill:!0,"in-view":this.pageIndex===n,viewed:n<this.pageIndex,plain:this.appearance===a.PLAIN,media:this.appearance===a.MEDIA})}"></span> </span>`))}</span> </div> </div> `}}static get styles(){return e.a`:host{display:block;box-sizing:border-box}.pagination-container{display:flex;justify-content:center}.track.in-view{height:var(--rem4,.25rem);border-radius:var(--rem2,.125rem)}.autoplayPill,.track{height:var(--rem2,.125rem);display:inline-block;border-radius:var(--rem2,.0625);width:100%}.autoplayPill{position:absolute}.track{background-color:var(--color-neutral-border);flex:1;margin:0 var(--rem2,.125rem);display:inline-block;position:relative}#autoplay-pill-container{display:flex;width:100%;align-items:center}.autoplayPill.viewed{background-color:var(--color-neutral-border-medium)}.pagination-controls.autoplay{width:90%}.pagination-controls.media.autoplay{position:absolute;bottom:var(--rem12,.75rem);z-index:2}.pagination-controls{display:flex;align-items:center;justify-content:center}.pagination-controls.plain .current-page-indicator{color:var(--color-media-onbackground)}.pagination-controls.media .current-page-indicator{color:var(--color-neutral-content)}`}updated(t){t.has("pageIndex")&&!this.isAnimationFinished&&this.handleAutoplayInterruption(t.get("pageIndex"))}};var h,d,c,p,u;t._([t.n({type:String,attribute:"appearance"})],l.prototype,"appearance",void 0),t._([t.n({type:Number})],l.prototype,"autoplay",void 0),t._([t.n({type:Number})],l.prototype,"pages",void 0),t._([t.n({type:Number,attribute:"page-index"})],l.prototype,"pageIndex",void 0),t._([t.d()],l.prototype,"isAnimationFinished",void 0),t._([t.g0("#autoplay-pill-container")],l.prototype,"_autoplayPillContainer",void 0),l=t._([t.e("faceplate-carousel-pagination")],l),function(t){t.OUTSIDE="outside",t.INSIDE="inside",t.OFF="off"}(h||(h={})),function(t){t.NEXT="next",t.BOTH="both",t.OFF="off"}(d||(d={})),function(t){t.INSIDE="inside",t.OUTSIDE="outside",t.OFF="off"}(c||(c={})),function(t){t.FORWARDS="forwards",t.BACKWARDS="backwards"}(p||(p={})),function(t){t.LEFT="left",t.CENTER="center",t.OFF="off"}(u||(u={}));let g=class extends e.s{constructor(){super(...arguments),this.navPlacement=c.OUTSIDE,this.paginationPlacement=h.OUTSIDE,this.autoplay="default",this.advanceAnimation=!1,this.numVisible=1,this.infinite=!1,this.inset=d.OFF,this.startIndex=0,this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this.hasBeenInteractedWith=!1,this._childCount=0,this._autoplayTimeoutId=null,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0,this._prevButtonHidden=!1,this._isNextButtonHidden=!1,this._gap=0,this._gapTotal=0,this._autoplayPaginationRef=t.aq(),this._carouselListRef=t.aq(),this._gesture=null,this.firstRender=!0,this.autoplayInProgress=!1,this.hidePrevButton=!1,this.hideNextButton=!1,this.emitter=n.J(this),this._animationStartTime=0,this._animationRemainingTime=0,this.generateAriaLiveMsg=({pageIndex:t,numVisible:e,pageCount:i})=>{const n=t*e+1;return e>1?`Items ${n} through ${n+e-1} of ${i}`:`Item ${n} of ${i}`},this.updated=async t=>{(t.has("numVisible")||t.has("infinite")||t.has("inset")||t.has("autoplay")||t.has("navPlacement")||t.has("paginationPlacement")||t.has("pageWidth"))&&((t.has("inset")||t.has("navPlacement"))&&(this.cachedDimensions=null),this.firstRender||this.resetAndInitialize()),(t.has("_pageIndex")||t.has("infinite"))&&this.toggleDisabledProgressButtons()},this.resetAndInitialize=()=>{this.resetCarousel(),this.initializeCarousel()},this.initializeResize=()=>{this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver((async()=>{if(!this.firstRender){this.cachedDimensions=null,await new Promise((t=>requestAnimationFrame(t)));const t=this.getCarouselDimensions();t&&await this.showFirstChild(t.width)}})),this.resizeObserver.observe(this)},this.intersectionCallback=t=>{t.forEach((t=>{t.target.style.visibility=t.isIntersecting?"visible":"hidden"}));const e=new CustomEvent("__TEST-ONLY_carousel-intersection");this.dispatchEvent(e)},this.initializeIntersectionObserver=()=>{if(this._intersectionObserver=new IntersectionObserver(this.intersectionCallback,{root:this._carouselListRef?.value}),this.carouselSlot.children)for(const t of Array.from(this.carouselSlot.children))this._intersectionObserver.observe(t)},this.onPaginationClick=t=>{this.goToPage(t.detail.pageIndex,!0)},this.initializeCarousel=()=>{if(this.isCarouselInitialized)return;const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this.handleAutoPlay(),this._isInsetBothAllowed=this._childCount>=3&&(this.inset===d.BOTH||this.alignment===u.CENTER),this.infinite&&this.cloneBoundElements({children:t});if(this.navPlacement===c.INSIDE&&this.paginationPlacement===h.INSIDE||!this.firstRender){const t=this.getCarouselDimensions();t&&this.showFirstChild(t.width)}this.firstRender=!1,this.isCarouselInitialized=!0,this.initListMutationObserver(),this.initializeVisibility(),this.initializeIntersectionObserver(),this.toggleDisabledProgressButtons(),this._paginationCounter?.[0]&&(this._paginationCounter[0].style.visibility=this.pageCount<=5?"hidden":"visible");const e=new CustomEvent("__TEST-ONLY_carousel-initialized");this.dispatchEvent(e)},this.showFirstChild=async t=>{!this.hasBeenInteractedWith&&this.startIndex&&(this._pageIndex=this.startIndex),await this.setChildDimensions(t),this.goToPage(this.pageIndex,!1);const e=new CustomEvent("__TEST-ONLY_carousel-children-ready",{bubbles:!0});this.dispatchEvent(e)},this.handleAutoPlay=async()=>{"off"===this.autoplay||isNaN(this._autoplaySpeed)||(this.autoplayInProgress&&this.clearAnimationTimeout(),this.autoplayInProgress=!0,(this.infinite||this._pageIndex<this.pageCount-1)&&(this._animationStartTime=Date.now(),this._autoplayPaginationRef?.value?.animatePill(),this._autoplayTimeoutId=setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._autoplaySpeed)))},this.cachedDimensions=null,this.getCarouselDimensions=()=>{if(this.cachedDimensions)return this.cachedDimensions;const t=this._carouselListRef.value?.getBoundingClientRect();if(t){const{width:e}=t;return this.cachedDimensions={width:e,height:t.height},this.cachedDimensions}},this.calcChildWidth=t=>{if(this.pageWidth)return"string"==typeof this.pageWidth&&this.pageWidth.endsWith("%")?t*(parseInt(this.pageWidth)/100):this.pageWidth;let e=0;this._gapTotal=this._gap*(this.numVisible-1)||0,this.inset!==d.OFF&&(e=48*(this.inset===d.NEXT?1:2),this._gapTotal=this._gap*(this.inset===d.NEXT?this.numVisible:this.numVisible+1));return(t-this._gapTotal-e)/this.numVisible},this.setChildDimensions=async t=>{this._gap=parseInt(getComputedStyle(this.carouselSlot).getPropertyValue("gap"))||0;for(const e of Array.from(this.carouselSlot.children)){const{width:i}=e.getBoundingClientRect(),n=e;if(n.style.boxSizing="border-box",t){const e=this.calcChildWidth(t);e!==i&&(n.style.width="number"==typeof e?`${e}px`:e)}"100%"!==n.style.height&&(n.style.height="100%"),"hidden"!==n.style.overflow&&(n.style.overflow="hidden")}},this.prepareNextSlideVisibility=t=>{for(let e=t;e<t+this.numVisible;e++)this.carouselSlot.children[e].style.visibility="visible"},this.handleTranslateXWithOffset=async({element:t,startIndex:e})=>{this.prepareNextSlideVisibility(e);let i="";const n=this.insetWidth(t);if(this._isInsetBothAllowed)switch(e){case 0:i=this.exceedMarginAllowed?`calc(-1 * ${t.offsetLeft}px + 1rem)`:`calc(-1 * ${t.offsetLeft}px)`;break;case this.pageCount-1:i=this.exceedMarginAllowed?`calc(\n              -1 * (${t.offsetLeft}px - ${2*n}px - ${this._gap*this.numGaps}px)\n              - 1rem)`:`calc(\n                -1 * (${t.offsetLeft}px - ${2*n}px - ${this._gap*this.numGaps}px))`;break;default:i=`calc(-1 * (${t.offsetLeft}px - ${n}px - ${this._gap}px))`}else{const e=getComputedStyle(this.carouselSlot),n=parseInt(e.paddingLeft||"0"),s=parseInt(e.paddingRight||"0"),a=this.carouselSlot.scrollWidth-(this.carouselSlot.clientWidth-s),o=t.offsetLeft===n?0:t.offsetLeft;i=-Math.min(o,a)+"px"}return this.carouselSlot.style.transform=`translate3d(${i}, 0,0)`,await Promise.all(this.carouselSlot.getAnimations().map((t=>t.finished))).catch((t=>{t instanceof DOMException&&"AbortError"===t.name||console.error(t)}))},this.slideCarousel=async({isWithinBounds:t,direction:e,requestedIndex:i,allowAnimations:n,onSuccessfulSlide:s})=>{const{children:a}=this.carouselSlot;let o=!1;if(this.firstRender||(this.carouselSlot.style.transitionDuration=`${n?this.animationDuration:0}ms`),t){let t=i*this.numVisible+this._lowerBoundOffset;const e=this.carouselSlot.children.length;if(t+this.numVisible>e){const n=i-1,s=t+this.numVisible-e;t=n*this.numVisible+(this.numVisible-s)}await this.handleTranslateXWithOffset({element:a[t],startIndex:t}),o=!0}else this.infinite&&(await this.handleInfiniteSlide({children:a,direction:e}),o=!0);o&&(this.hasBeenInteractedWith||(this.hasBeenInteractedWith=!0),s?.());const r=new CustomEvent("faceplate-carousel:slide",{detail:{prevPositionIndex:this._pageIndex,currPositionIndex:i,direction:e,num_items:this._childCount},bubbles:!0});this.dispatchEvent(r)},this.cloneBoundElements=({children:t})=>{let e=0;const i=this._childCount-1,n=this._isInsetBothAllowed?1:0;for(let e=0;e<this.numVisible+n;e++){const i=t[e]?.cloneNode(!0);i instanceof HTMLElement&&(i.dataset.fpUiCarouselMarker="true",i.id=Math.random().toString(16).slice(2),i.role="presentation",this.carouselSlot.append(i),++this._upperBoundOffset)}const s=this._isInsetBothAllowed?1:0;for(let n=0;n<this.numVisible+s;n++){const s=t[i-n+e++]?.cloneNode(!0);s instanceof HTMLElement&&(s.dataset.fpUiCarouselMarker="true",s.id=Math.random().toString(16).slice(2),s.role="presentation",this.carouselSlot.prepend(s),++this._lowerBoundOffset)}},this.handleInfiniteSlide=async({children:t,direction:e})=>{this.carouselSlot.style.transitionDuration="0s";let i=this._isInsetBothAllowed?1:0;e===p.BACKWARDS&&(i=t.length-this._upperBoundOffset),await this.handleTranslateXWithOffset({element:t[i],startIndex:i}),this.carouselSlot.style.transitionDuration=`${this.animationDuration}ms`;const n=e===p.BACKWARDS?i-this.numVisible:i+this.numVisible;await this.handleTranslateXWithOffset({element:t[n],startIndex:n})},this.setNavButtonVisibility=({type:t,hidden:e})=>{this.navPlacement!==c.OFF&&("next"===t?(this.hideNextButton=e,this._isNextButtonHidden=e):(this.hidePrevButton=e,this._prevButtonHidden=e))},this.toggleDisabledProgressButtons=()=>{if(!this.infinite){const t=0===this.pageIndex,e=this.pageIndex===Math.ceil(this._childCount/this.numVisible)-1,i=0===this._childCount;this.setNavButtonVisibility({type:"previous",hidden:i||t}),this.setNavButtonVisibility({type:"next",hidden:i||e})}},this.resetCarousel=()=>{this.resetChildren(),this.cancelAutoPlay(),this.resetDisabledProgressButtons(),this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0;const t=new CustomEvent("__TEST-ONLY_carousel-reset");this.dispatchEvent(t)},this.resetChildren=()=>{const{children:t}=this.carouselSlot;let e=0;const i=t.length;for(let n=0;n<i;n++){const i=t[e];i instanceof HTMLElement&&i.dataset.fpUiCarouselMarker?i.remove():e++}},this.clearAnimationTimeout=t=>{"number"==typeof this._autoplayTimeoutId&&(window.clearTimeout(this._autoplayTimeoutId),this.autoplayInProgress=!1,t&&t())},this.cancelAutoPlay=()=>{this.clearAnimationTimeout(this._autoplayPaginationRef?.value?.resetAnimations)},this.onListItemKeydown=t=>{"ArrowLeft"===t.key?this.slideBackwards(t):"ArrowRight"===t.key&&this.slideForwards(t)},this.goToPage=(t,e)=>{if(t<0||t>=this.pageCount)return;let i=p.BACKWARDS;t>this._pageIndex&&(i=p.FORWARDS),this._pageIndex=t,this.slideCarousel({isWithinBounds:!0,direction:i,requestedIndex:t,allowAnimations:e})},this.swipeLeft=t=>{this.slideForwards(t),this.dispatchSwipeEvent(p.FORWARDS)},this.swipeRight=t=>{this.slideBackwards(t),this.dispatchSwipeEvent(p.BACKWARDS)},this.onInterruptedAutoplay=async t=>{await t(),this.handleAutoPlay()},this.slideHelper=async({navButtonDisabled:t,slide:e,e:i})=>{t||(this._autoplayTimeoutId&&i?this.onInterruptedAutoplay(e):await e())},this.slideForwards=async t=>{const e=this._pageIndex+1,i=e<this.pageCount;await this.slideHelper({navButtonDisabled:this._isNextButtonHidden,slide:async()=>{this._pageIndex=i?e:0,this.slideCarousel({isWithinBounds:i,direction:p.FORWARDS,requestedIndex:e,allowAnimations:!0})},e:t})},this.onKeyDown=(t,e)=>{"Enter"!==t.key&&"Space"!==t.key||(t.preventDefault(),e(t))},this.slideBackwards=async t=>{const e=this._pageIndex-1,i=e>=0;await this.slideHelper({navButtonDisabled:this._prevButtonHidden,slide:async()=>{this._pageIndex=i?e:this.pageCount-1,this.slideCarousel({isWithinBounds:i,direction:p.BACKWARDS,requestedIndex:e,allowAnimations:!0})},e:t})},this.onListItemFocusIn=()=>{this.autoplay&&"off"!==this.autoplay&&(this._animationRemainingTime=this._autoplaySpeed-(Date.now()-this._animationStartTime),this.clearAnimationTimeout(),this.autoplayInProgress=!1,this._autoplayPaginationRef?.value?.pauseAnimation())},this.onListItemBlur=()=>{this.autoplay&&"off"!==this.autoplay&&(this._autoplayPaginationRef?.value?.resumeAnimation(),setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._animationRemainingTime))}}static get styles(){return e.a`:host{display:flex;position:relative;width:inherit;isolation:isolate;--carousel-gap:var(--spacer-xs, 0.5rem);--carousel-padding:0;--carousel-margin:0}.carousel-container{display:flex;height:auto;align-items:center;position:relative;width:100%}::slotted(:not([slot])){height:100%;display:grid;grid-auto-flow:column;transition:transform;transition-timing-function:ease-out;margin:var(--carousel-margin)!important;padding:var(--carousel-padding)!important;list-style:none;position:relative;gap:var(--carousel-gap)}::slotted([slot=nextButton]),::slotted([slot=prevButton]){display:inline-block}.content-nav-buttons{display:inline-block;position:relative;z-index:2}.content-nav-buttons.hide{visibility:hidden}.content-nav-buttons.left{position:absolute;left:var(--spacer-sm,.75rem)}.content-nav-buttons.outside.right{padding:0 var(--spacer-sm,.75rem)}.content-nav-buttons.inside{position:absolute;top:50%;transform:translateY(-50%)}.content-nav-buttons.inside.left{left:var(--spacer-xs,.5rem)}.content-nav-buttons.inside.right{right:var(--spacer-xs,.5rem)}#carousel-window{position:relative;overflow:hidden;contain:content;display:flex;flex-direction:column;height:100%;flex:1}#carousel-list{height:100%;overflow:hidden;position:relative}:host([pagination-placement=outside]) #pagination-container{padding-top:var(--spacer-xs,.5rem)}:host(:not([nav-placement])) #carousel-window,:host([nav-placement=outside]) #carousel-window{margin-left:var(--rem56,3.5rem)}:host([pagination-placement=inside]) #pagination-container{position:absolute;bottom:var(--rem16,1rem);left:0;right:0;margin:0 auto;width:fit-content}.carousel-actions{position:absolute;right:var(--rem12,.5rem);display:inline-flex;align-items:center;gap:var(--rem12,.75rem)}.carousel-actions.top{top:var(--rem12,.5rem)}.carousel-actions.bottom{bottom:var(--rem16,.1rem)}.hidden{visibility:hidden}.visible{visibility:visible;transition:visibility ease-in}`}get pageIndex(){return this._pageIndex}get carouselSlot(){return this._children.reduce(((t,e)=>e.assignedSlot&&"UL"===e.nodeName?e:t),document.createElement("ul"))}connectedCallback(){if(super.connectedCallback(),this._gesture=new i.T(this,{mouseSupport:!1}),this._gesture.on("swipeleft",this.swipeLeft),this._gesture.on("swiperight",this.swipeRight),this.initializeResize(),this.isCarouselInitialized){const t=this._pageIndex;this.resetAndInitialize(),this._pageIndex!==t&&this.goToPage(t,!1)}}disconnectedCallback(){super.disconnectedCallback(),this._gesture?.destroy(),this.resizeObserver?.disconnect(),this._listMutationObserver?.disconnect(),this._intersectionObserver?.disconnect()}firstUpdated(){this.initializeCarousel()}async handleChildRemoval(){const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this._firstViewableIndex>this._childCount-1&&this.slideBackwards(),this._childCount||this.toggleDisabledProgressButtons();const e=new CustomEvent("__TEST-ONLY_carousel-children-reset");this.dispatchEvent(e)}get _firstViewableIndex(){return this.infinite?this.pageIndex*this.numVisible+this._lowerBoundOffset:this.pageIndex*this.numVisible}initListMutationObserver(){this._listMutationObserver&&this._listMutationObserver.disconnect(),this._listMutationObserver=new MutationObserver((t=>{for(const e of t)"childList"===e.type&&this.isCarouselInitialized&&(e.removedNodes.length>0?this.handleChildRemoval():e.addedNodes.length>0&&this.handleChildrenAddition())})),this.carouselSlot&&this._listMutationObserver.observe(this.carouselSlot,{childList:!0})}setChildAndPageCount(t){this._childCount=t.length,this.pageCount=Math.ceil(this._childCount/this.numVisible)}async handleChildrenAddition(){const t=this._childCount,{children:e}=this.carouselSlot;this.setChildAndPageCount(e);const i=this.getCarouselDimensions();i&&await this.setChildDimensions(i.width),this._childCount>t&&this.toggleDisabledProgressButtons()}get _autoplaySpeed(){switch(this.autoplay){case"off":return 0;case"default":return 5e3;default:return parseInt(this.autoplay)}}get animationDuration(){return this.advanceAnimation&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches?250:0}get numInsets(){return this.inset===d.BOTH||this.alignment===u.CENTER?2:this.inset===d.NEXT||this.alignment===u.LEFT?1:0}get numGaps(){return this.numVisible+this.numInsets-1}insetWidth(t){const e=this.getCarouselDimensions();if(e){return(e.width-t.getBoundingClientRect().width*this.numVisible-this._gap*this.numGaps)/this.numInsets}return 0}resetDisabledProgressButtons(){this.setNavButtonVisibility({type:"next",hidden:!1}),this.setNavButtonVisibility({type:"previous",hidden:!1})}initializeVisibility(){for(const t of Array.from(this.carouselSlot.children))t.dataset.fpUiCarouselMarker||(t.style.visibility="hidden")}dispatchSwipeEvent(t){const e=new CustomEvent("faceplate-carousel:swipe",{detail:{currPositionIndex:this._pageIndex,direction:t},bubbles:!0});this.dispatchEvent(e)}render(){return e.x` <div class="carousel-container"> <div id="carousel-window"> <div id="carousel-list" ${t.as(this._carouselListRef)}> <slot @keydown="${this.onListItemKeydown}" @focusin="${this.onListItemFocusIn}" @focusout="${this.onListItemBlur}"></slot> <span class="carousel-actions top"> <slot name="paginationCounter"></slot> <slot name="closeButton"></slot> </span> <span class="carousel-actions bottom"> <slot name="addButton"></slot> </span> </div> <div id="pagination-container" class="${t.U({inside:this.paginationPlacement===h.INSIDE})}"> ${this.paginationPlacement===h.OFF?null:this._autoplaySpeed?e.x`<faceplate-carousel-pagination ${t.as(this._autoplayPaginationRef)} pages="${this.pageCount}" page-index="${this._pageIndex}" autoplay="${this._autoplaySpeed}" appearance="${this.paginationPlacement===h.INSIDE?a.MEDIA:a.PLAIN}"> </faceplate-carousel-pagination>`:e.x`<faceplate-pagination-indicator @pagination-click="${this.onPaginationClick}" .getPageLabels="${this.getPageLabels}" numbered current-page-label="${e.l(this.currentPageLabel)}" appearance="${this.paginationPlacement===h.INSIDE?a.MEDIA:a.PLAIN}" animation-duration="${this.animationDuration}" pages="${this.pageCount}" page-index="${this._pageIndex}" container-label="${e.l(this.paginationContainerLabel)}"></faceplate-pagination-indicator>`} </div> </div> <slot class="content-nav-buttons left ${t.U({hide:this.navPlacement===c.OFF||this.hidePrevButton,outside:this.navPlacement===c.OUTSIDE,inside:this.navPlacement===c.INSIDE})}" name="prevButton" @click="${this.slideBackwards}" @keydown="${t=>this.onKeyDown(t,this.slideBackwards)}"> </slot> <slot class="content-nav-buttons right ${t.U({hide:this.navPlacement===c.OFF||this.hideNextButton,outside:this.navPlacement===c.OUTSIDE,inside:this.navPlacement===c.INSIDE})}" name="nextButton" @click="${this.slideForwards}" @keydown="${t=>this.onKeyDown(t,this.slideForwards)}"> </slot> </div> <faceplate-screen-reader-content aria-live="polite" aria-atomic="true"> ${this.currentAriaLiveMsg??this.generateAriaLiveMsg({pageIndex:this.pageIndex,pageCount:this.pageCount,numVisible:this.numVisible})} </faceplate-screen-reader-content> `}};return g.navButton=({placement:i,progress:n,ariaLabel:s})=>{const a=n===p.FORWARDS?"Next Page":"Previous Page";return t.r({appearance:i===c.INSIDE?"media":"secondary",size:t.s.Small,leadingIcon:n===p.FORWARDS?e.c5({size:e.I.Small}):e.c6({size:e.I.Small}),attributes:{"aria-label":s??a}})},g.closeButton=({attributes:i})=>t.r({appearance:"media",size:t.s.Small,leadingIcon:e.aG({size:e.I.Small}),attributes:i}),g.addButton=({children:i,attributes:n})=>t.r({appearance:"media",size:t.s.Small,leadingIcon:e.c7({size:e.I.Small}),attributes:n,children:i}),g.paginationCounter=({attributes:t,pageIndex:e,pageCount:i})=>s.b({appearance:s.B.MEDIA,content:`${e+1} / ${i}`,attributes:t}),t._([t.n({type:String,attribute:"nav-placement",reflect:!0})],g.prototype,"navPlacement",void 0),t._([t.n({type:String,attribute:"pagination-placement",reflect:!0})],g.prototype,"paginationPlacement",void 0),t._([t.n({type:String})],g.prototype,"autoplay",void 0),t._([t.n({type:Boolean,attribute:"advance-animation"})],g.prototype,"advanceAnimation",void 0),t._([t.n({type:Number,attribute:"num-visible"})],g.prototype,"numVisible",void 0),t._([t.n({type:Boolean})],g.prototype,"infinite",void 0),t._([t.n({type:String})],g.prototype,"inset",void 0),t._([t.n({type:String,attribute:"pagination-counter-label"})],g.prototype,"paginationCounterLabel",void 0),t._([t.n({type:Number,attribute:"start-index"})],g.prototype,"startIndex",void 0),t._([t.n()],g.prototype,"getPageLabels",void 0),t._([t.n({type:String,attribute:"current-page-label"})],g.prototype,"currentPageLabel",void 0),t._([t.n({type:String,attribute:"current-aria-live-msg"})],g.prototype,"currentAriaLiveMsg",void 0),t._([t.n({type:String,attribute:"pagination-container-label"})],g.prototype,"paginationContainerLabel",void 0),t._([t.n({type:String,attribute:"page-width"})],g.prototype,"pageWidth",void 0),t._([t.n({type:String})],g.prototype,"alignment",void 0),t._([t.n({type:Boolean,attribute:"exceed-margin-allowed"})],g.prototype,"exceedMarginAllowed",void 0),t._([t.d()],g.prototype,"_pageIndex",void 0),t._([t.d()],g.prototype,"pageCount",void 0),t._([t.d()],g.prototype,"isCarouselInitialized",void 0),t._([t.d()],g.prototype,"hasBeenInteractedWith",void 0),t._([t.aP({flatten:!0})],g.prototype,"_children",void 0),t._([t.aP({slot:"paginationCounter",flatten:!0})],g.prototype,"_paginationCounter",void 0),t._([t.d()],g.prototype,"firstRender",void 0),t._([t.d()],g.prototype,"autoplayInProgress",void 0),t._([t.d()],g.prototype,"hidePrevButton",void 0),t._([t.d()],g.prototype,"hideNextButton",void 0),g=t._([t.e("faceplate-carousel")],g),{get C(){return p},get F(){return g},get I(){return d},get N(){return c},get P(){return h}}}));
SML.dm("gallery554c6dec",["shelle48e5956","links22118b0c","faceplatecarousele02bc9b8"],(async(a,e,t)=>{var r;!function(a){a.Forward="forward",a.Backward="backward"}(r||(r={}));const i=(t,r,i)=>a.b({source:"gallery",action:"view",noun:"media"},{...e.g(t),gallery:{num_items:i,position:r}}),l=(t,r,i,l)=>a.b({source:"gallery",action:"click",noun:r},{...e.g(t),gallery:{num_items:l,position:i}});return{get G(){return r},a:i,g:l,h:(a,e,n)=>{const o=l(a,e.detail.direction===t.C.FORWARDS?r.Forward:r.Backward,e.detail.prevPositionIndex,e.detail.num_items),s=i(a,e.detail.currPositionIndex,e.detail.num_items);n&&(o.ad_metadata={impression_id:n},s.ad_metadata={impression_id:n}),a.trackEvent(o),a.trackEvent(s)}}}));
SML.dm("qrcodemodalupsellclientjsbd428344",["shelle48e5956","iconc33661e6"],(async(e,t)=>{const i=e=>e instanceof HTMLButtonElement||e instanceof HTMLAnchorElement||["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"].includes(e?.getAttribute("role")??"");class n extends e.Q{constructor(){super(...arguments),this._triggerElement=null,this.keydown=!1,this.dialogId="",this.noModal=!1,this.handleClick=()=>{this.keydown||this.sendActivatedEvent()},this.handleKeydown=e=>{"Enter"===e.key&&(this.keydown=!0)},this.handleKeyup=e=>{"Enter"===e.key&&!0===this.keydown&&(this.keydown=!1,this.sendActivatedEvent())},this.handleBlur=()=>{this.keydown=!1}}set triggerElement(t){const i=this._triggerElement?.getAttribute("aria-expanded")??!1,n=this._triggerElement,r=t;n&&(n?.removeAttribute("aria-haspopup"),n?.removeAttribute("aria-expanded"),n?.removeEventListener("click",this.handleClick),n?.removeEventListener("keydown",this.handleKeydown),n?.removeEventListener("keyup",this.handleKeyup),n?.addEventListener("blur",this.handleBlur)),r&&(this.action!==e.gq.Hide&&(r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded",`${i}`)),r.addEventListener("click",this.handleClick),r.addEventListener("keydown",this.handleKeydown),r.addEventListener("keyup",this.handleKeyup),r.addEventListener("blur",this.handleBlur),this._triggerElement=r)}get triggerElement(){return this._triggerElement}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),"action"===e&&(this.triggerElement=this._triggerElement)}addOpenAttributes(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded","true")}removeOpenAttributes(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded","false")}handleSlotChange(){this.triggerElement=((e,t=5)=>{let n=e??null,r=0;if(i(n))return n;for(;n&&r<t;){if(n=n?.assignedElements?n?.assignedElements()?.[0]??null:n?.children[0]??null,i(n))return n;r++}return null})(this.slottedElements?.[0]??null)}sendActivatedEvent(){if(this.triggerElement?.hasAttribute("disabled"))return;if(!this.dialogId)return void console.warn("No dialogId set on rpl-dialog-trigger, unable to trigger");const e={dialogId:this.dialogId,triggerElement:this,noModal:this.noModal,action:this.action};this.emitter.dispatch("trigger-clicked",{bubbles:!0,composed:!0,detail:e})}render(){return t.x`<slot @slotchange="${this.handleSlotChange}"></slot>`}}e._([e.n({type:String,reflect:!0,attribute:"dialog-id"})],n.prototype,"dialogId",void 0),e._([e.n({type:Boolean,reflect:!0,attribute:"no-modal"})],n.prototype,"noModal",void 0),e._([e.n({type:String,reflect:!0})],n.prototype,"action",void 0),e._([e.j()],n.prototype,"slottedElements",void 0);var r=t.a`:host{display:contents}`;let l=class extends n{};l.styles=r,l=e._([e.e("rpl-dialog-trigger")],l)}));
SML.dm("partialfeedpostclientjs25890fbe",["shelle48e5956","iconc33661e6","index43b39749","utils93db03dd","tooltipbaseaa9651a3","contenttags9bd7e916","contentactionbutton6a45f903","postFlair51562697","withshared1523f2d","agegatestandaloneclientjsb13e879d","overflowmenuactionsf8d12b95","links22118b0c","v2events64802d88","modverdict58953687","gallery554c6dec","shouldconttruncated81ee171","passwordrecoveryfc50288b","index751e2b35","scrolltocomments57babb9e","modlogtakedownpreviewclientjsd3af86b9","shopgallerydatafetcherclientjs777c4af0","faceplateshimmer9894306d","headeractionitemchatclientjsb3335fba","rplcoachmark4e17786a","rplcoachmarkcard5c5498b1","modpostlistclientjsa6825fc7","shredditpostsharebutton64b8d78b","promotepostactionscontroller30d2105c","translationinterventionmodal407043a2","qrcodemodalupsellclientjsbd428344","numbera5d31186","awardcontroller351c7b93","awards2379b181","awards8d1217c9","distinguishedtags1c4757ea","expandablesectionheader41e0cfd1","ae18b1320","index192b5d82","keywordsfa9c4196","selectcontroller4c63b3e8","userflairfe275854","translationsa30aa3ad","chatmobilexpromoclientjs5e1c145c","appselectorclientjs9964d0b0","TinyGesture26737d23","faceplatecarousele02bc9b8"],(async(t,e,o,s,i,n,r,a,l,d,p,h,c,u,m,b,v,E,g)=>{const y=72e6,C=[y,y,1296e5,216e6,216e6],T=()=>{const e=localStorage.getItem(t.L.CrosspostingUpsellExperiment);if(e)return JSON.parse(e)},S=e=>{localStorage.setItem(t.L.CrosspostingUpsellExperiment,JSON.stringify(e))},w=async e=>{if((()=>{const t=T();if(!t)return!1;const{timer:e,snoozes:o,savedDate:s}=t;return o>=C.length||(new Date).getTime()-s<e})())return;const o=await t.B({operation:t.O.WhereToCrosspostNewModSuggestions,variables:{postId:e}}),s=o.data?.whereToCrosspostSuggestions?.edges;return s&&s?.length>0&&"Subreddit"===s[0]?.node?.subredditInfo.__typename?s[0]?.node?.subredditInfo:void 0};function _(t,e=!0){t=t||"";const[o,s]=t.split("?");let i=`https://www.reddit.com${("/"!==o[0]&&o.length>0?"/":"")+o}`;return e&&!i.endsWith("/")&&(i+="/"),s&&(i+=`?${s}`),i}let P=class extends e.s{constructor(){super(),this.name="",this.prefixedName="",this.subredditId="",this.isNsfw=!1,this.postId="",this.isOpen=!1,this.wasSeen=!1,this.trackExperimentEvent=(e,o,s)=>{t.a(this,t.b({source:e,action:o,noun:s},{subreddit:{id:this.subredditId,name:this.name,nsfw:this.isNsfw},post:{id:this.postId||""}}))},this.onShareClick=()=>{S({timer:18e5,snoozes:1,savedDate:(new Date).getTime()}),this.isOpen=!1,this.wasSeen=!0,this.trackExperimentEvent("crosspost_prompt","share","button")},this.onSkipClick=()=>{this.onMaybeSetCooldown(),this.isOpen=!1},new t.ar(this,this,{threshold:[.5]})}connectedCallback(){t.aS.subscribe(this.onMaybeSetCooldown,{shouldBeCalledFirst:!0}),super.connectedCallback(),this.addEventListener("faceplate-leave",this.onMaybeSetCooldown),this.trackExperimentEvent("crosspost_prompt","view","coachmark"),setTimeout((()=>{this.onMaybeSetCooldown()}),3e5)}disconnectedCallback(){super.disconnectedCallback(),t.aS.unsubscribe(this.onMaybeSetCooldown),this.removeEventListener("faceplate-leave",this.onMaybeSetCooldown)}onMaybeSetCooldown(){this.wasSeen||this.saveNoShareTimer()}saveNoShareTimer(){const t=T(),e=t?.snoozes||0;S({snoozes:e+1,timer:C[e],savedDate:(new Date).getTime()}),this.trackExperimentEvent("crosspost_prompt","hide","button"),this.wasSeen=!0}render(){return e.x`<rpl-coachmark ?open="${this.isOpen}" placement="${s.P.TopEnd}" appearance="${i.a.Inverted}"> <slot></slot> <rpl-coachmark-card slot="content" appearance="${i.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> Share with your newly created community </div> <div class="text-12"> ${this.prefixedName} might enjoy this post, try sharing it in your community. </div> ${t.r({attributes:{slot:"primary-button",href:_(`${this.prefixedName}/submit/?source_id=${this.postId}&crosspost_experiment_referral=true`),target:"_blank",rel:"noopener noreferrer",onclick:this.onShareClick},children:"Share",appearance:"plainInverted",size:t.s.Small})} ${t.r({attributes:{slot:"secondary-button",onclick:this.onSkipClick},children:"Skip",appearance:"plainInverted",size:t.s.Small})} </rpl-coachmark-card> </rpl-coachmark>`}};P.styles=[t.t],t._([t.n({type:String,attribute:"name"})],P.prototype,"name",void 0),t._([t.n({type:String,attribute:"prefixed-name"})],P.prototype,"prefixedName",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],P.prototype,"subredditId",void 0),t._([t.n({type:Boolean,attribute:"nsfw"})],P.prototype,"isNsfw",void 0),t._([t.n({type:String,attribute:"post-id"})],P.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"open",reflect:!0})],P.prototype,"isOpen",void 0),t._([t.d()],P.prototype,"wasSeen",void 0),P=t._([t.e("crosspost-upsell-coachmark")],P);class x{constructor(t){this.handleTogglePostInsights=t=>{if(!this.host.displayPostAnalytics){const e=t.detail.promotedAdAccounts;s.c.activatePromotePostInsights({authorId:this.host.authorId,postId:this.host.id,postType:this.host.postType,subredditName:this.host.subredditPrefixedName,adAccounts:e})}this.host.displayPostAnalytics=!this.host.displayPostAnalytics},this.renderPromotePostInsightsPanelSlot=()=>this.host.isPromoteablePost?e.x`<div class="${this.host.displayPostAnalytics?"":"hidden"}"> <slot name="promote-post-insights-panel"></slot> </div>`:e.x``,this.host=t,this.host.addController(this)}hostConnected(){this.host.isPromoteablePost&&this.host.addEventListener("toggle-promote-post-insights",this.handleTogglePostInsights)}hostDisconnected(){this.host.isPromoteablePost&&this.host.removeEventListener("toggle-promote-post-insights",this.handleTogglePostInsights)}maybeRenderPromotePostButton(){return this.host.isPromoteablePost?e.x`<promote-post-button author-id="${this.host.authorId}" post-id="${this.host.id}" post-type="${this.host.postType}" subreddit-name="${e.l(this.host.subredditPrefixedName)}" view-type="${this.host.viewType}" ?boost-post-page-exp="${this.host.boostPostPageExp}" ?is-ama-post="${this.host.isAma}"></promote-post-button>`:e.x``}}let k=class extends e.s{constructor(){super(...arguments),this.translationContextValue=t.aw,this.postId="",this.href="",this.withIntervention=!1,this.isImmersiveVisit=!1}canShowInterventionModal(){const e=!!t.l.getItem(t.L.I18nTranslationInterventionShown);return!!this.translationContextValue?.isTranslationActive&&this.withIntervention&&!e}onShowOriginalClick(t){t.preventDefault?.(),t.stopPropagation?.(),this.canShowInterventionModal()?this.translationInterventionModal.handleTranslationOverride({isTranslationActive:!1,id:this.postId}):this.navigateToOriginal()}navigateToOriginal(){window.location.href=this.href}render(){const t=e.x`<translation-intervention-modal mode="mtseo-post" page-type="pdp" ?is-immersive-visit="${this.isImmersiveVisit}" @translation-intervention-modal:close="${this.navigateToOriginal}"></translation-intervention-modal>`;return e.x`<a href="${this.href}" class="flex cursor-pointer my-xs pl-md xs:px-0 text-primary text-decoration-none" @click="${this.onShowOriginalClick}"> See original </a> ${this.canShowInterventionModal()?t:e.A}`}};k.styles=[t.t],t._([t.av({context:t.ax,subscribe:!0}),t.d()],k.prototype,"translationContextValue",void 0),t._([t.y("translation-intervention-modal")],k.prototype,"translationInterventionModal",void 0),t._([t.n({type:String,attribute:"post-id"})],k.prototype,"postId",void 0),t._([t.n({type:String,attribute:"href"})],k.prototype,"href",void 0),t._([t.n({type:Boolean,attribute:"with-intervention"})],k.prototype,"withIntervention",void 0),t._([t.n({type:Boolean,attribute:"isImmersiveVisit"})],k.prototype,"isImmersiveVisit",void 0),k=t._([t.e("mtseo-show-original-link")],k);const f="toggle__expando",O="toggle__expando-button";class I{constructor(e){this.initialized=!1,this.handleToggleEvent=e=>{t.f(e)&&this.toggleExpando()},(this.host=e).addController(this)}get expandoElement(){return this.host.isCompactView?this.host.querySelector(`.${f}`):this.host.shadowRoot?.querySelector('slot[name="expando"]')??null}get hasExpandoContent(){return this.host.isCompactView?!!this.host.querySelector(`.${f}`):!!this.host.shadowRoot?.querySelector('slot[name="expando"]')?.assignedElements().length}get toggleElement(){return(this.host.isCompactView?this.host.querySelector(`button.${O}`)||this.host.shadowRoot?.querySelector(`button.${O}`):this.host.shadowRoot?.querySelector('slot[name="thumbnail"]'))??null}async hostConnected(){await this.host.updateComplete,this.initializeListeners()}hostDisconnected(){this.toggleElement?.removeEventListener("click",this.handleToggleEvent),this.toggleElement?.removeEventListener("keydown",this.handleToggleEvent),this.initialized=!1}async hostUpdated(){await this.host.updateComplete,this.initialized||this.initializeListeners()}initializeListeners(){this.initialized||this.expandoElement&&this.hasExpandoContent&&this.toggleElement&&(this.toggleElement?.addEventListener("click",this.handleToggleEvent),this.toggleElement?.addEventListener("keydown",this.handleToggleEvent),this.initialized=!0)}toggleExpando(){this.expandoElement&&this.hasExpandoContent&&(this.host.showExpando=!this.host.showExpando,this.expandoElement.classList.toggle("hidden",!this.host.showExpando),this.expandoElement.classList.toggle("block",this.host.showExpando))}renderExpandoButton(){const t={attributes:{className:"icon-expand","aria-hidden":"true"},size:r.I[this.host.defaultActionButtonSize]},o=this.host.showExpando?e.C(t):e.e6(t),s=this.hasExpandoContent?"":"disabled pointer-all";return e.x` ${r.c({appearance:d.ab()?"bordered":"secondary",attributes:{type:"button",className:`${O} ${this.host.defaultActionButtonClassnames} ${s}`,disabled:!this.hasExpandoContent,"aria-expanded":this.host.showExpando?"true":"false","aria-label":"post content","aria-controls":`${this.host.id}-expando-content`},size:this.host.defaultActionButtonSize,leadingIcon:o,screenReaderContent:"Expand content"})} `}}class D{constructor(e){this.initializeHotkeys=()=>{"enabled"===t.dw("shreddit_hotkeys_m1")&&this.host.viewContext===h.P.CommentsPage&&(this.subscriberController?.subscribe(t.dy.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.subscribe(t.dy.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.subscribe(t.dy.UPVOTE,this.upvote),this.subscriberController?.subscribe(t.dy.DOWNVOTE,this.downvote),this.subscriberController?.subscribe(t.dy.REPLY_TO_COMMENT,this.onReplyToComment),this.subscriberController?.subscribe(t.dy.HIDE_POST,this.onToggleHide),this.subscriberController?.subscribe(t.dy.TOGGLE_SAVE,this.onToggleSave),this.subscriberController?.subscribe(t.dy.TOGGLE_COLLAPSE_COMMENT,this.onCommentToggleCollapse),this.subscriberController?.subscribe(t.dy.COPY_POST_OR_COMMENT_LINK,this.onCopyLink),this.subscriberController?.subscribe(t.dy.SUBMIT,this.onSubmitComment))},this.findShredditPost=t=>t instanceof L?t:t?.querySelector("shreddit-post, shreddit-ad-post"),this.cleanupHotkeys=()=>{"enabled"===t.dw("shreddit_hotkeys_m1")&&this.host.viewContext===h.P.CommentsPage&&(this.subscriberController?.unsubscribe(t.dy.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.unsubscribe(t.dy.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.unsubscribe(t.dy.UPVOTE,this.upvote),this.subscriberController?.unsubscribe(t.dy.DOWNVOTE,this.downvote),this.subscriberController?.unsubscribe(t.dy.REPLY_TO_COMMENT,this.onReplyToComment),this.subscriberController?.unsubscribe(t.dy.HIDE_POST,this.onToggleHide),this.subscriberController?.unsubscribe(t.dy.TOGGLE_SAVE,this.onToggleSave),this.subscriberController?.unsubscribe(t.dy.TOGGLE_COLLAPSE_COMMENT,this.onCommentToggleCollapse),this.subscriberController?.unsubscribe(t.dy.COPY_POST_OR_COMMENT_LINK,this.onCopyLink),this.subscriberController?.unsubscribe(t.dy.SUBMIT,this.onSubmitComment))},this.nextPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(E.P.NEXT);const t=this.postOrCommentTraversalController?.current instanceof L?"post":"comment";this.host.trackEvent(h.S("next",t))},this.prevPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(E.P.PREV);const t=this.postOrCommentTraversalController?.current instanceof L?"post":"comment";this.host.trackEvent(h.S("previous",t))},this.upvote=()=>{this.onVote(o.V.Upvote)},this.downvote=()=>{this.onVote(o.V.Downvote)},this.onFocus=t=>{this.host.viewContext===h.P.CommentsPage?this.host.shadowRoot?.querySelector(".shreddit-post-container")?.focus(t):this?.host.querySelector("[slot=full-post-link]")?.focus(t)},this.onVote=async t=>{let e;if(!this.postOrCommentTraversalController?.current)return;e=this.postOrCommentTraversalController?.isCurrentComment?(this.postOrCommentTraversalController?.current).commentActionRow:this.postOrCommentTraversalController?.current;const s=void 0;e&&(e.interactionFromHotkey=!0,t===o.V.Upvote?await e.handleUpvote(s):await e.handleDownvote(s),e.interactionFromHotkey=!1)},this.customPostTraversal=(t,e)=>{if(t===E.P.NEXT){const t=e?.querySelector("shreddit-comment-tree");if(t||"shreddit-comment-tree"===e?.tagName.toLowerCase())return e?.querySelector("shreddit-comment")}else if(!e?.previousElementSibling&&"shreddit-comment-tree"===e?.parentElement?.tagName.toLowerCase())return document.querySelector("shreddit-post")},this.onReplyToComment=()=>{this.postOrCommentTraversalController?.isCurrentPost?this.host.handleClickCommentsButton():this.postOrCommentTraversalController?.current?.querySelector("shreddit-comment-action-row")?.focusOnCommentComposer()},this.onToggleSave=()=>{if(this.postOrCommentTraversalController?.isCurrentComment){const t=this.postOrCommentTraversalController?.current?.overlowMenuItemProps?.find((t=>"save"===t.id));t?.onClick?.()}else this.postOverflowActions?.find((t=>"save"===t.id))?.onClick()},this.onToggleHide=()=>{(this.postOrCommentTraversalController?.isCurrentPost||this.host.isFeed)&&this.postOverflowActions?.find((t=>"hide"===t.id))?.onClick()},this.onCopyLink=()=>{let t;t=this.postOrCommentTraversalController?.isCurrentComment?this.postOrCommentTraversalController?.current?.shareButton:this.host.shareButtonRef?.value,t?.handleCopyLinkClick()},this.onCommentToggleCollapse=()=>{this.postOrCommentTraversalController?.isCurrentComment&&this.postOrCommentTraversalController.current.handleCollapse?.()},this.onSubmitComment=()=>{this.postOrCommentTraversalController?.isCurrentComment?this.postOrCommentTraversalController.current?.shredditComposer?.form?.submit():document.querySelector("shreddit-composer")?.form?.submit()},this.host=e,e.addController(this)}hostConnected(){this.subscriberController=new t.dx(this.host),this.postOrCommentTraversalController=new E.a(this.host,{type:E.b.COMMENTS_PAGE,getFirstElement:()=>this.host,customPostOrCommentDetection:this.findShredditPost,customTraversal:(t,e)=>this.customPostTraversal(t,e)}),this.initializeHotkeys()}hostDisconnected(){this.cleanupHotkeys()}get postOverflowActions(){return this.host.querySelector("shreddit-post-overflow-menu")?.overflowActions}onToggleExpando(){this.host._expandoController?.toggleExpando()}}const M=l.W(t.W(t.g(e.s)));let L=class extends M{get readMoreButton(){return this.querySelector(`#${this.id}-read-more-button`)??void 0}constructor(){super(),this.archived=!1,this.deleted=!1,this.hidden=!1,this.id="",this.game=!1,this.nsfw=!1,this.promoted=!1,this.spoiler=!1,this.subredditId=void 0,this.isSubscribed=!1,this.postLanguage="",this.translationLanguage="",this.isTranslationOn=!1,this.commentCount=0,this.permalink="",this.viewContext=h.P.AggregateFeed,this.viewType=t.al.CardView,this.isSlimCard=!1,this.isDesktopViewport=!1,this.isReportingEnabled=!1,this.isLinkPost=!1,this.isAma=!1,this.isEmbed=!1,this.isNotBrandSafe=!1,this.isCrosspost=!1,this.isCrosspostable=!1,this.isEmbeddable=!1,this.isUserLoggedIn=!1,this.disabled=!1,this.showFullContent=!1,this.isTranslatable=!1,this.isTranslationFetched=!1,this.isPostTranslated=!1,this.isPostBodyTranslated=!1,this.isMTSEOUserPage=!1,this.hasMTSEOTranslationInterruption=!1,this.morePostsCursor=void 0,this.isPostLeaveEventsEnabled=!1,this.isLocked=!1,this.isBanned=!1,this.isContestMode=!1,this.pdpTarget="_self",this.isPromoteablePost=!1,this.boostPostPageExp=!1,this.previousActionsFeature=!1,this.updateAnimation=void 0,this.itemState=u.M.UNMODERATED,this.areReportsExpandable=!1,this.isCompactUIExp=!1,this.isPostCommentTapExp=!1,this.isPdpSeekerM1LO=!1,this.shareButtonSSR=!1,this.interactionFromHotkey=!1,this.applyFeedsSimplification=!1,this.showPostRemovalBanner=!0,this.showExpando=!1,this.useShortHiddenPostForm=!1,this.isThumbnailSet=!1,this.isUpdatingPostBody=!1,this.displayPostAnalytics=!1,this.isCrosspostingCoachmarkOpen=!1,this.eligibleCrosspostingSubreddit=void 0,this.hasBeenViewed=!1,this.hasBeenConsumed=!1,this.getScrollContainerSelector=()=>[h.P.ModQueue,h.P.ModQueueAll].includes(this.viewContext)?'[slot="mod-queue-feed"]':this.viewContext===h.P.CommentsPage?'[slot="pdp-panel"]':void 0,this._partialUpdateController=null,this._events=new t.E(this),this._promotePostButtonController=new x(this),this._outboundLinkTrackingController=new a.O(this,(()=>({pageType:t.X(),postId:this.id,subredditId:this.subredditId}))),this._expandoController=new I(this),this.editController=null,this.pubsub=new t.P(this),this.shareButtonRef=t.aq(),this.onSubscriptionChange=async e=>{let o;this.subredditName===e.name&&(o=e.subscribed&&this.isSubscribed!==e.subscribed,this.isSubscribed=e.subscribed),o&&this.isEligibleForRelatedCommunityRecommendations&&await this._activateFeature({name:t.gS,queryParams:{subredditId:this.subredditId||"",pageType:String(this._getPageType())},root:(this.isHomeFeed||this.isPopularFeed)&&this.parentElement||document,renderMode:this.isHomeFeed||this.isPopularFeed?t.o.Append:void 0})},this.handleVisibilityChange=t=>{this.isPostInViewport&&t&&(this._hasPageUnloaded=!1,this.isPDP||(this.handleView(h.m(this,this.isTranslatable),!0),this.becameVisibleOnScreenTimestamp=Date.now()))},this.handleCalledFirstVisibilityChange=t=>{this.isPostInViewport&&(t||this._hasPageUnloaded||(this.handleConsume(),this.isPostLeaveEventsEnabled&&this.trackEvent(h.U(this))))},this.renderTabUpdateActionComponent=t=>this.isPDP?e.x`<ac-set trigger-elem="${e.l(t)}" target="${a.S}" attribute="pageindex" value="1"></ac-set>`:e.A,this._activateFeature=async e=>t.k(e),this._getPageType=t.X,this.showShortHiddenPostForm=()=>this.hidden&&this.useShortHiddenPostForm,this.handleLoadMorePosts=async()=>{const t=document.querySelector(`#partial-more-posts-${this.morePostsCursor}`);t&&"true"!==t?.getAttribute("hasBeenLoaded")&&(t?.setAttribute("hasBeenLoaded","true"),await(t?.load()))},this.trackConsume=()=>{this.trackEvent(h.V(this,this.isTranslatable))},this.handleRsvpClick=t=>{this.trackEvent(h.J(this))},this.handleUnRsvpClick=t=>{this.trackEvent(h.K(this))},this._getPostScoreDelta=t=>o.g(this.postVoteType,t),this._onUpdatePostVoteType=async()=>await o.o(this.id,"post",this.postVoteType),this.handleClickReadMore=()=>{"enabled"!==window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&(this.revealTruncatedContent(),this.trackReadMoreClick())},this.revealTruncatedContent=()=>{if("enabled"===window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools)return;this.querySelector(`#${this.id}-overflow-cover`)?.classList?.add(h.C),this.readMoreButton?.classList?.remove(h.j),this.readMoreButton?.classList?.add(h.C);const t=this.querySelector(`#${this.id}-post-rtjson-content`);t?.classList?.remove(...h.k.split(" "))},this.trackReadMoreClick=()=>{this.trackEvent(h.W(this))},this.onBeforeUnloadCallback=()=>{this.onBeforeUnload()},this.handleCustomPostSnapshotEvent=async()=>{const e=this.querySelector("shreddit-devvit-ui-loader"),o=e?await e.captureSafetyReport():"";this.dispatchEvent(t.c("stage-devplatform-snapshot",{postId:this.id,encodedData:o}))},this.setStateApproved=()=>{this.showPostRemovalBanner=!1,this.itemState=u.M.APPROVED},this.setStateRemoved=()=>{this.showPostRemovalBanner=!0,this.itemState=u.M.REMOVED},this.onPostUpdateAction=({postId:t,action:e,value:o})=>{if(this.id===t)switch(e){case p.a.markAsNsfw:this.nsfw=o;break;case p.a.markAsSpoiler:this.spoiler=o;break;case p.a.delete:this.deleted=o;break;case p.a.hide:this.applyHideChanges(o);break;case p.a.lock:this.isLocked=Boolean(o);break;case p.a.edit:"enabled"!==window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&this.editController?.setEditing(o);break;case p.a.approve:case p.a.approveOptimistic:this.setStateApproved();break;case p.a.remove:case p.a.removeAsSpam:case p.a.confirmRemoval:case p.a.addRemovalReason:case p.a.removeOptimistic:case p.a.removeAsSpamOptimistic:case p.a.confirmRemovalOptimistic:this.setStateRemoved();break;case p.a.updatePostBodyPending:"enabled"!==window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&(this.isUpdatingPostBody=o);break;case p.a.updateContent:"enabled"!==window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&(this.dispatchEvent(new CustomEvent(h.b)),this.editController?.resetEditing())}},this.applyHideChanges=t=>{this.useShortHiddenPostForm=t,this.hidden=t},this.unhidePost=async()=>{try{await p.n(this.id,!0);const e=t.c("faceplate-alert",{level:t.x.success,message:"Removed from hidden"});this.dispatchEvent(e);const o={postId:this.id,action:p.a.hide,value:!1};this.pubsub.publish(t.T.PostUpdated,o),this.trackEvent(h.H(this.viewContext))}catch(e){const o=t.c("faceplate-alert",{level:t.x.error,sourceElement:"unhide-post",cause:"uncategorized",message:"Unable to unhide post"});this.dispatchEvent(o)}},this.addEventListener("click",this.handleClickPost),new t.ar(this,this,{threshold:[.5]})}static get styles(){return[t.t,t.z(".rpl-vote-button-group {\n  /* APPEARANCE AGNOSTIC STYLES */\n  /* PLAIN APPEARANCE */\n  /* SECONDARY APPEARANCE */\n  /* BORDERED APPEARANCE */\n  --vote-button-divider-color: var(--color-neutral-border-weak);\n  /* MEDIA APPEARANCE */\n}\n.rpl-vote-button-group:not([disabled]) .rpl-vote-button-group-label {\n  color: var(--vote-button-label-color);\n}\n.rpl-vote-button-group:not([disabled]):hover.rpl-vote-button-group-label {\n  color: var(--vote-button-label-color-hover);\n}\n.rpl-vote-button-group .rpl-vote-button-group-divider {\n  background-color: var(--vote-button-divider-color);\n}\n.rpl-vote-button-group[disabled] button[rpl]:disabled {\n  --button-color-background-disabled: transparent;\n}\n.rpl-vote-button-group.button-plain {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-plain button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-plain.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-plain.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n  --vote-button-divider-color: var(--color-neutral-border);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary.upvote,\n.rpl-vote-button-group.button-secondary.upvote button[rpl] {\n  --button-color-text-default: var(--color-upvote-onBackground);\n  --button-color-text-hover: var(--color-upvote-onBackground);\n  --button-color-text-disabled: var(--color-upvote-disabled);\n  --button-color-text-activated: var(--color-upvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.upvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.upvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-upvote-background);\n  --button-color-background-hover: var(--color-upvote-background-hover);\n  --button-color-background-active: var(--color-upvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote,\n.rpl-vote-button-group.button-secondary.downvote button[rpl] {\n  --button-color-text-default: var(--color-downvote-onBackground);\n  --button-color-text-hover: var(--color-downvote-onBackground);\n  --button-color-text-disabled: var(--color-downvote-disabled);\n  --button-color-text-activated: var(--color-downvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.downvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-downvote-background);\n  --button-color-background-hover: var(--color-downvote-background-hover);\n  --button-color-background-active: var(--color-downvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-bordered-cab {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-media-cab {\n  --vote-button-label-color: var(--color-media-onBackground);\n  --vote-button-label-color-hover: var(--color-media-onBackground);\n  --vote-button-divider-color: var(--color-media-border-weak);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-upvote-onStrongScrim-disabled);\n}\n.rpl-vote-button-group.button-media-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-downvote-onStrongScrim-disabled);\n}\n.pdp-flair-slot::slotted(*) {\n  margin: var(--size-2xs) 0;\n}\n.feed-flair-slot::slotted(*) {\n  margin-bottom: var(--size-xs);\n}\n.text-decoration-none {\n  text-decoration: none;\n}\n:host([item-state~='APPROVED']),\n:host([item-state~='REMOVED']) {\n  background-color: var(--color-neutral-background-weak);\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n.condensed-post-title-heading {\n  margin: 0;\n}\n")]}connectedCallback(){super.connectedCallback(),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_pdp_no_mod_js_lo?v.g()&&this.initModActionsController():this.initModActionsController(),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools?this.querySelector("shreddit-post-text-body")?.addEventListener(h.R,this.trackReadMoreClick):this.initEditTools(),this.isObserved||this.enableObserver({rootMargin:"0px"}),this.postVoteType=this.voteType,this.postScore=this.score,this.isPDP&&!this.showFullContent&&this.readMoreButton&&this.readMoreButton.addEventListener("click",this.handleClickReadMore),this.gallery&&this.addEventListener("faceplate-carousel:slide",this.handleCarouselArrowClick),this.addEventListener("faceplate-hovercard:open",this.handleHovercardOpen),this.addEventListener("capture-devplatform-snapshot",this.handleCustomPostSnapshotEvent),t.aS.subscribe(this.onBeforeUnloadCallback,{shouldBeCalledFirst:!0}),t.aT(this.handleVisibilityChange,{immediate:!0}),t.aT(this.handleCalledFirstVisibilityChange,{immediate:!0,shouldBeCalledFirst:!0}),this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction),this.addEventListener(p.e,this.handleClickCommentsButton),this.addEventListener(p.f,this.handleShareButtonInteraction),this.addEventListener(p.b,this.handleRsvpClick),this.addEventListener(p.E,this.handleUnRsvpClick),this.pubsub.subscribe(t.T.SubredditSubscriptionChange,this.onSubscriptionChange),"enabled"===t.dw("shreddit_hotkeys_m1")&&(this.hotkeyController=new D(this))}async initModActionsController(){const{ModActionsController:t}=await SML.di("./mod-actions-controller-d935e6bc.js",import.meta.url,"modactionscontrollerd935e6bc");new t(this,{getThingIdFn:()=>this.id})}async initEditTools(){const{EditController:t}=await SML.di("./edit-d0b416d5.js",import.meta.url,"editd0b416d5").then((function(t){return t.e}));this.editController=new t(this,{getPostId:()=>this.id,getViewContext:()=>this.viewContext});const{PartialUpdateController:e}=await SML.di("./partial-update-cef6f8bf.js",import.meta.url,"partialupdatecef6f8bf");this._partialUpdateController=new e(this,{getPostId:()=>this.id,getViewContext:()=>this.viewContext,getViewType:()=>this.viewType,getSubredditPrefixedName:()=>this.subredditPrefixedName}),this.checkPostEditMode()}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.listingBelowConsumeTimer),this.isObserved&&this.disableObserver(),this.hasBeenViewed=!1,this.isPostInViewport=!1,this.readMoreButton&&this.readMoreButton.removeEventListener("click",this.handleClickReadMore),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&this.querySelector("shreddit-post-text-body")?.removeEventListener(h.R,this.trackReadMoreClick),this.gallery&&this.removeEventListener("faceplate-carousel:slide",this.handleCarouselArrowClick),this.removeEventListener("faceplate-hovercard:open",this.handleHovercardOpen),t.aS.unsubscribe(this.onBeforeUnloadCallback),t.aU(this.handleVisibilityChange),t.aU(this.handleCalledFirstVisibilityChange),this.pubsub.unsubscribe(t.T.PostUpdated,this.onPostUpdateAction),this.removeEventListener(p.e,this.handleClickCommentsButton),this.removeEventListener(p.f,this.handleShareButtonInteraction),this.removeEventListener(p.b,this.handleRsvpClick),this.removeEventListener(p.E,this.handleUnRsvpClick),this.removeEventListener("capture-devplatform-snapshot",this.handleCustomPostSnapshotEvent),this.pubsub.unsubscribe(t.T.SubredditSubscriptionChange,this.onSubscriptionChange)}get isFeed(){return h.a(this.viewContext)}get isPopularFeed(){return this.isFeed&&h.X(this._getPageType())}get isHomeFeed(){return this.isFeed&&h.Y(this._getPageType())}get isPDP(){return h.i(this.viewContext)}get isBrandConversations(){return h.Z(this.viewContext)}get isCardView(){return d.cW(this.viewType)}get isCompactView(){return d.cp(this.viewType)}get isEligibleForRelatedCommunityRecommendations(){return this.isUserLoggedIn&&!!this.subredditId&&(this.isPDP&&!this.isDesktopViewport||this.isHomeFeed||this.isPopularFeed)}renderThumbnail(){return e.x` <slot name="thumbnail" @slotchange="${this.handleThumbnailSlotChange}"></slot>`}renderExpando(){return e.x`<slot class="hidden col-span-2 w-full mb-xs xs:my-xs" name="expando"></slot>`}renderCommentsButton(){const o=this.isFeed?{className:this.defaultActionButtonClassnames,onclick:this.handleClickCommentsButton,name:"comments-action-button","data-post-click-location":t.dS.COMMENTS_BUTTON,href:this.permalink,target:this.pdpTarget}:{type:"button",className:this.defaultActionButtonClassnames,onclick:this.handleClickCommentsButton,name:"comments-action-button","data-post-click-location":t.dS.COMMENTS_BUTTON};return e.x`${r.c({appearance:d.ab()?"bordered":"secondary",attributes:o,size:this.defaultActionButtonSize,children:e.x`${this.renderTabUpdateActionComponent("closest(button)")}<faceplate-number number="${this.commentCount}" pretty></faceplate-number>${!this.isUserLoggedIn&&this.isPostCommentTapExp?d.d3({triggerElem:"closest(button)",target:"closest(button)",eventName:"reply"}):e.A}`,leadingIcon:e.a8({attributes:{className:"icon-comment","aria-hidden":"true"},size:r.I[this.defaultActionButtonSize]}),screenReaderContent:"Go to comments"})}`}renderAwardButton(){return!this.isAwardable||this.applyFeedsSimplification?e.A:e.x`<award-button appearance="${d.ab()?"bordered":"secondary"}" size="${this.defaultActionButtonSize}" button-class="${this.defaultActionButtonClassnames}" thing-id="${this.id}" count="${e.l(this.awardCount)}" award-id="${e.l(this.awardId)}" icon-url="${e.l(this.hideAwardIcon?void 0:this.awardIconUrl)}" icon-urls="${e.l(this.hideAwardIcon?void 0:JSON.stringify(this.awardIconUrls))}" ?is-awarded-by-user="${this.isAwardedByUser}" ?has-iconic-award="${this.hasIconicAward}" ?has-branded-award="${this.hasBrandedAward}" subreddit-id="${e.l(this.subredditId)}" post-id="${this.id}" feed-index="${e.l(this.feedIndex)}" post-type="${e.l(this.postType)}" score="${e.l(this.postScore)}" comment-count="${this.commentCount}"></award-button>`}get defaultActionButtonSize(){return t.s.Small}get defaultActionButtonClassnames(){return d.o("flex flex-row justify-center items-center","h-xl","font-semibold","relative")}renderVoteButton(){const s=d.bM(),i=s?o.v:o.a,n=s?o.u:o.b,r=s?o.d:o.c,a=this.postScore,l="Vote",p={voteType:this.postVoteType||null,appearance:d.ab()?"bordered":"secondary",size:this.defaultActionButtonSize,attributes:{disabled:this.archived}},h=n({...p,voteCount:a,initialStateText:l,screenReaderContent:"Upvote",onClick:this.handleUpvote}),c=r({...p,screenReaderContent:"Downvote",onClick:this.handleDownvote});return e.x` <span class="relative leading-[0] ${this.disabled?"disabled":""}"> ${this.renderTabUpdateActionComponent()} ${i({attributes:{"data-post-click-location":t.dS.VOTE,className:this.defaultActionButtonClassnames},voteCount:a,voteType:this.postVoteType,upvoteButton:h,downvoteButton:c,appearance:p.appearance,size:p.size,initialStateText:l})} </span> `}renderShareButton(){if(this.applyFeedsSimplification)return e.A;const o=e.x` <shreddit-post-share-button data-post-click-location="${t.dS.SHARE}" permalink="${this.permalink}" source-id="${this.id}" ?is-crosspostable="${this.isCrosspostable}" ?is-embeddable="${this.isEmbeddable}" ?is-desktop-viewport="${this.isDesktopViewport}" ?ssr="${this.shareButtonSSR}" ?hide-button-text="${!this.isDesktopViewport}" ?show-share-menu-profile-coachmark="${this.showShareMenuProfileCoachmark}" size="${this.defaultActionButtonSize}" button-class="${this.defaultActionButtonClassnames}" @click="${this.handleShareButtonInteraction}" @keydown="${this.handleShareButtonInteraction}" appearance="${d.ab()?"bordered":"secondary"}" data-faceplate-tracking-context="${JSON.stringify({post:{id:this.id}})}" ${t.as(this.shareButtonRef)}> ${this.shareButtonSSR?e.x`<slot name="ssr-share-button" slot="ssr-share-button"></slot>`:e.A} </shreddit-post-share-button> `;return this.isCrosspostingV2Enabled&&this.isCrosspostingCoachmarkOpen&&"Subreddit"===this.eligibleCrosspostingSubreddit?.__typename?e.x`<slot name="share-button"> <crosspost-upsell-coachmark post-id="${this.id}" name="${this.eligibleCrosspostingSubreddit?.name}" prefixed-name="${this.eligibleCrosspostingSubreddit?.prefixedName}" subreddit-id="${this.eligibleCrosspostingSubreddit?.id}" ?open="${this.isCrosspostingCoachmarkOpen}"> ${o} </crosspost-upsell-coachmark> </slot> `:e.x` <slot name="share-button"> ${o} </slot> `}renderExpandoButton(){return this.isDesktopViewport?this._expandoController.renderExpandoButton():""}renderReportButton(){const o="Report";return e.x` ${r.c({appearance:"secondary",attributes:{onclick:()=>{var e,o;this.trackEvent((e="post",t.b({source:e,action:"click",noun:"report"}))),this.dispatchEvent((o=this.id,t.c(t.j$,{thingId:o})))},type:"button",className:this.defaultActionButtonClassnames},size:this.defaultActionButtonSize,children:this.isDesktopViewport?o:"",leadingIcon:e.cg({attributes:{className:"icon-report","aria-hidden":"true"},size:r.I[this.defaultActionButtonSize]}),screenReaderContent:o})} `}renderActionRowWhitespace(){return e.x`<slot name="action-row-whitespace"></slot>`}renderActionRow(){if(this.isPDP&&this.isPdpSeekerM1LO)return this.renderSeekerPostInfoRow();const o=["shreddit-post-container flex gap-sm flex-row items-center flex-nowrap justify-start"];this.isPDP?this.isCompactUIExp?o.push("py-xs px-md xs:px-0"):o.push("h-2xl mt-md px-md xs:px-0"):this.isCardView&&!this.promoted&&!this.isCrosspost&&this.isEmbed&&o.push("pt-xs");const s="enabled"===t.dw("shreddit_hotkeys_m1");return e.x`<div class="${o.join(" ")}" data-testid="action-row" tabindex="${s?"0":"-1"}" aria-label="Actions available for this post"> ${this.renderVoteButton()} ${this.renderCommentsButton()} ${this.renderAwardButton()} ${this.renderShareButton()} ${this.isReportingEnabled&&!this.isFeed?this.renderReportButton():""} <div class="ms-auto flex flex-row"> <slot name="mod-content-actions"></slot> ${this.isDesktopViewport?this._promotePostButtonController.maybeRenderPromotePostButton():e.A} </div> ${this.renderActionRowWhitespace()} </div>`}renderSeekerPostInfoRow(){return e.x` <div class="px-md xs:px-0 py-xs truncate text-neutral-content-weak text-12 flex items-center gap-2xs font-semibold" data-testid="seeker-post-info-row"> ${void 0!==this.postScore?e.x` ${e.b7({size:e.I.Small})} <faceplate-number number="${this.postScore}" pretty></faceplate-number> ${e.bm({size:e.I.Small})} `:e.A} ${this.postScore&&this.commentCount?e.x`<span data-testid="seeker-post-info-row-divider">\u00B7</span>`:e.A} ${this.commentCount?e.x` ${e.a8({size:e.I.Small})} <faceplate-number number="${this.commentCount}" pretty></faceplate-number> `:e.A} </div> `}renderMessageBanner(){return e.x` ${this.isLocked?e.x`<slot name="post-locked-banner"></slot>`:null} ${this.isBanned?e.x`<slot name="post-banned-banner"></slot>`:null} <slot name="post-archived-banner"></slot> ${this.showPostRemovalBanner?e.x`<slot name="post-removed-banner"></slot>`:null} ${this.isContestMode?e.x`<slot name="post-contest-mode-banner"></slot>`:null} `}getMaxTextBodyHeight(t){return this.isPDP?Math.max(t,253):208}trackContentTagClick(t){t.detail.type===n.C.APP&&this.trackWatermarkEvent("v1_badge")}trackWatermarkEvent(e){const o=t.b(c.c({postId:this.id||"",subredditId:this.subredditId||"",blockType:"",pageType:t.X(),action:"click",noun:"watermark",appId:this.appId||"",appInstallationId:this.appInstallationId||"",appVersionNumber:this.appVersionNumber||"",appPublicApiVersion:this.appPublicApiVersion||"",appName:this.appSlug||"",appSlug:this.appSlug||"",userAgent:window.navigator?.userAgent.toLowerCase()||"unknown",watermark:e}));this.trackEvent(o)}hideTextPostContentOverflow(){const t=this.querySelector(`#${this.id}-post-rtjson-content`);if(!t)return;const e=this.querySelector(".post-content")||this.querySelector('div[slot="text-body"]'),o=e?.querySelectorAll("faceplate-img"),s=.2*window.innerHeight,i=(o?.length||0)*s,n=this.getMaxTextBodyHeight(t.clientHeight),r=t.scrollHeight+i>n;if(r&&r){if(!this.shouldContTruncate())return void this.revealTruncatedContent();this.querySelector(`#${this.id}-overflow-cover`)?.classList?.remove(h.C),this.readMoreButton?.classList?.remove(h.C),this.readMoreButton?.classList?.add(h.j)}}shouldContTruncate(){return"enabled"!==window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&b.s(this.readMoreButton?.dataset)}renderPostHeader(){return e.x` <slot name="credit-bar"></slot> ${this.isEligibleForRelatedCommunityRecommendations?e.x`<slot name="related-community-recommendation"></slot>`:e.x``} <div id="content-tag-container" class="flex justify-between gap-xs ${t.U({"px-md":this.isPDP,"xs:px-0":this.isPDP})}"> ${this.renderContentTags()} ${this.renderAppPrivacyButton()} </div> ${this.renderPostLinkForMTSEO()} `}renderAppPrivacyButton(){return this.appName?e.x`<rpl-dialog-trigger dialog-id="${this.appSlug}-privacy-dialog"> ${t.r({appearance:"plain",attributes:{onclick:()=>(this.trackWatermarkEvent("v1_privacy_link"),this._activateFeature({name:t.k0,routeParams:{appSlug:this.appSlug,appName:this.appName,appOwnerId:this.appOwnerId||"null",postId:this.id,subredditId:this.subredditId},renderMode:t.o.Contents})),className:"flex gap-xs"},children:"Privacy",leadingIcon:e.$({size:e.I.ExtraSmall}),size:t.s.ExtraSmall})} </rpl-dialog-trigger>`:e.A}renderPostLinkForMTSEO(){if(!this.isMTSEOUserPage)return"";const o=new RegExp(/[^?]+/),s=this.permalink?.match(o);if(!s||0===s.length)return"";const i=t.cd(s[0],t.k2,t.k1);return e.x` <mtseo-show-original-link post-id="${this.id}" href="${i}" ?with-intervention="${this.hasMTSEOTranslationInterruption}"></mtseo-show-original-link> `}renderTitle(){const t=e.x`<slot name="title"></slot>`;return this.showFullContent||this.isPDP?t:e.x`<h2 class="condensed-post-title-heading">${t}</h2>`}renderTextBody(){if("enabled"===window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools)return e.x`<slot name="text-body"></slot>`;if(this.isUpdatingPostBody)return e.x` <faceplate-shimmer class="h-[200px] w-full px-md xs:px-0" shape="pill"></faceplate-shimmer> `;if(this.editController?.isEditing)return this.editController.renderEditor();return e.x`<slot @slotchange="${this.handleTextBodySlotChange}" name="${"text-body"}"></slot>`}renderPostMediaContainer(t){return e.x` <slot @slotchange="${this.handleContentSlotChange}" name="post-media-container" class="${t??""}"></slot> `}renderFeedFlair(){return this.isPDP?"":e.x`<div> <slot name="post-flair" class="feed-flair-slot"></slot> </div>`}renderPDPFlair(){const t=this.isCompactUIExp?"leading-none":"xs:px-0";return this.isPDP?e.x`<div class="px-md ${t}"> <slot name="post-flair" class="pdp-flair-slot"></slot> </div>`:""}renderDeletedPost(){return e.x` <div class="deleted-post h-3xl flex items-center"> <p class="font-semibold text-neutral-content-strong text-14"> Post deleted </p> </div> `}renderHiddenPost(){return e.x` <div class="hidden-post h-3xl flex items-center justify-between px-md"> <div> <p class="m-0 font-semibold text-neutral-content-strong text-14"> Post hidden </p> </div> ${t.r({attributes:{onclick:this.unhidePost},size:t.s.Medium,appearance:"secondary",children:"Undo"})} </div> `}renderCompactView(){const t="grid grid-cols-[1fr_min-content] grid-rows-[auto_auto_auto_auto_auto] xs:grid-cols-[min-content_1fr] xs:grid-rows-[auto_auto_auto_auto]",o="col-start-1 col-end-3 row-start-1 row-end-2 xs:col-start-1 xs:col-end-3 xs:row-start-1 xs:row-end-2",s="col-start-2 col-end-3 row-start-2 row-end-3 xs:col-start-1 xs:col-end-2 xs:row-start-2 xs:row-end-4",i="col-start-1 col-end-2 row-start-2 row-end-3 xs:col-start-2 xs:col-end-3 xs:row-start-2 xs:row-end-3 overflow-hidden",n="col-start-1 col-end-3 row-start-3 row-end-4 xs:hidden",r="col-start-1 col-end-3 row-start-4 row-end-5 xs:col-start-2 xs:col-end-3 xs:row-start-3 xs:row-end-4",a="col-start-1 col-end-3 row-start-5 row-end-6 xs:col-start-2 xs:col-end-3 xs:row-start-4 xs:row-end-5 overflow-hidden",l="col-start-1 col-end-3 row-start-6 row-end-7 xs:col-start-2 xs:col-end-3 xs:row-start-5 xs:row-end-6";return e.x` <slot name="full-post-link"></slot> <div class="${d.o("grid",t)}"> <div class="${o}"> <slot name="recommendation-bar"></slot> </div> <div class="${d.o(s,"mt-2xs ml-xs xs:my-2xs xs:ml-0 xs:mr-md")}"> <slot name="thumbnail"></slot> </div> <div class="${d.o(i,"mt-2xs")}"> <div class="mb-2xs xs:mb-0"> <slot name="credit-bar"></slot> </div> <div class="overflow-hidden"> ${this.renderTitle()} <slot name="content-tags"></slot> <slot name="app-privacy"></slot> <slot name="post-flair"></slot> </div> <div> <slot name="mod-content-state-indicators"></slot> <slot name="mod-content-actions"></slot> </div> <div> <slot name="desktop-cta-row"></slot> </div> </div> <div class="${n}"> <slot name="mobile-cta-row"></slot> </div> <div class="${d.o(r,"flex gap-2xs overflow-hidden items-center mb-2xs mt-xs xs:mt-[2px]")}"> <slot name="action-bar-ad-cta"></slot> ${this.renderExpandoButton()}${this.renderVoteButton()} <slot name="overflow-menu-bar" class="grow overflow-hidden block"></slot> </div> <div class="${a}"> <slot name="expando-content"></slot> </div> <div class="${l}">${this.renderPostStatsEntryPoint()}</div> </div> ${this._promotePostButtonController.renderPromotePostInsightsPanelSlot()} ${this.renderPostStatsContainer()} `}renderPostStatsContainer(){return e.x`<slot name="post-insights-panel"></slot>`}renderPostStatsEntryPoint(){return e.x`<slot name="post-stats-entry-point"></slot>`}renderCardViewPostFooter(){return e.x` ${this.renderMessageBanner()} ${this.renderActionRow()} ${this._promotePostButtonController.renderPromotePostInsightsPanelSlot()} ${this.renderPostStatsEntryPoint()} ${this.renderPostStatsContainer()} `}renderContentTags(){return e.x`<shreddit-content-tags post-id="${this.id}" ?nsfw="${this.nsfw}" ?spoiler="${this.spoiler}" app="${this.appSlug}" ?game="${this.game}" @tag-click="${t=>this.trackContentTagClick(t)}"></shreddit-content-tags>`}renderSlimCardPost(){return e.x` <slot name="full-post-link"></slot> <slot></slot> <div class="pt-xs">${this.renderCardViewPostFooter()}</div> `}renderCardView(){const t=this.isThumbnailSet?"ml-xs xs:ml-sm":void 0;return e.x` <slot name="full-post-link"></slot> ${this.renderPostHeader()} <div class="flex"> <div class="flex flex-col grow max-w-full"> ${this.renderTitle()} ${this.renderPDPFlair()} <slot name="mod-content-state-indicators"></slot> ${this.isPDP?null:this.renderTextBody()} ${this.renderFeedFlair()} </div> <div class="${e.l(t)}">${this.renderThumbnail()}</div> </div> ${this.renderPostMediaContainer("xs:pt-md")} ${this.isPDP?this.renderTextBody():null} <slot></slot> ${this.renderCardViewPostFooter()} `}render(){return this.deleted?this.renderDeletedPost():this.showShortHiddenPostForm()?this.renderHiddenPost():this.isCompactView?this.renderCompactView():this.isSlimCard?this.renderSlimCardPost():this.renderCardView()}handleView(t,e,o){!e&&this.isPDP||h._(this.viewContext)&&this.hasBeenViewed||this.trackEvent(t),this.gallery&&this.trackEvent(m.a(this,0,o)),this.morePostsCursor&&this.handleLoadMorePosts()}handleConsume(){!this.isPDP&&this.becameVisibleOnScreenTimestamp&&Date.now()-this.becameVisibleOnScreenTimestamp>h.c&&!h._(this.viewContext)&&this.trackConsume()}handleClick(t,e){t&&this.trackEvent(t),e&&this.dispatchEvent(e)}handleShareButtonInteraction(){this.isDesktopViewport?this.handleClick(h.$(this)):this.handleClick(h.a0(this))}_navigateToUrl(t,e){"_self"===e?window.location.href=t:window.open(t,e)}handleClickCommentsButton(t){if(this.trackEvent(h.n(this)),this.isFeed)return;this.isPostCommentTapExp||g.s("smooth");if((t?.currentTarget?.querySelector("faceplate-number")?.number??0)>0&&!this.isPostCommentTapExp){const t=document.querySelector("shreddit-comments-sort-dropdown")?.querySelector("shreddit-sort-dropdown")?.shadowRoot?.querySelector("faceplate-dropdown-menu")?.querySelector("button");t?.focus()}else{if(!this.isUserLoggedIn&&this.isPostCommentTapExp)return;const t=document.querySelector("comment-body-header comment-composer-host");this.isPostCommentTapExp&&t?.scrollIntoView({behavior:"smooth",block:"center"}),t?.focus()}}handleClickPost(t){const e=h.a1(t,this);this.handleClick(e)}handleCarouselArrowClick(t){t.preventDefault();const e=t;m.h(this,e)}async handleUpdatePostVote(e){const s=this.postScore,i=this.postVoteType;if(void 0!==this.postScore){const t=this._getPostScoreDelta(e);this.postScore=this.postScore+t}this.postVoteType=e===this.postVoteType?void 0:e;try{await this._onUpdatePostVoteType(),this.postVoteType&&this.pubsub.publish(this.postVoteType===o.V.Upvote?t.T.PostUpvoted:t.T.PostDownvoted,{postId:this.id})}catch(o){this.postScore=s,this.postVoteType=i,this.dispatchEvent(t.c("faceplate-alert",{level:t.x.warning,message:o,sourceElement:e,cause:`failed-${e}`}))}}async handleCrosspostingV2Experiment(){const t=await w(this.id);this.eligibleCrosspostingSubreddit=t,this.isCrosspostingCoachmarkOpen=!!t}async handleUpvote(e){const s=this.postVoteType===o.V.Upvote;if(this.isUserLoggedIn)return this.handleClick(s?h.a2(this):h.a3(this)),await this.handleUpdatePostVote(o.V.Upvote),!s&&this.isCrosspostingV2Enabled&&this.handleCrosspostingV2Experiment(),void(this.isAma&&!s&&this.pubsub.publish(t.T.TriggerAmaRemindMeModal,{postId:this.id}));this.disabled?(this.dispatchEvent(t.c(t.aD.upvoteTry)),this.trackEvent(h.a4(this))):this.handleClick(h.a3(this),t.c(t.aD.upvote))}async handleDownvote(e){if(this.isUserLoggedIn)return this.handleClick(this.postVoteType===o.V.Downvote?h.a2(this):h.a5(this)),void await this.handleUpdatePostVote(o.V.Downvote);this.disabled?(this.dispatchEvent(t.c(t.aD.downvoteTry)),this.trackEvent(h.a4(this))):this.handleClick(h.a5(this),t.c(t.aD.downvote))}onBeforeUnload(){this._hasPageUnloaded=!0,this.isPostInViewport&&(this.handleConsume(),this.isPostLeaveEventsEnabled&&this.trackEvent(h.U(this)))}handleHovercardOpen(t){if(!(t.target instanceof HTMLElement&&"id"in t.target.dataset))return;const e=t.target.dataset.id;"community-hover-card"===e&&this.trackEvent(h.a6(this)),"user-hover-card"===e&&this.trackEvent(h.a7(this))}handleTextBodySlotChange(t){this.showFullContent||requestAnimationFrame((()=>this.hideTextPostContentOverflow()))}handleContentSlotChange(t){this.showFullContent||requestAnimationFrame((()=>this.hideTextPostContentOverflow()))}handleThumbnailSlotChange(t){const e=t.target?.assignedElements();this.isThumbnailSet=e.length>0}observerIsIntersectingCallback(e){this.isNotBrandSafe&&e.target===this&&window.dispatchEvent(t.c(t.hw,{postId:this.id,isInView:!0})),this.isPostInViewport||(this.isPostInViewport=!0,this.becameVisibleOnScreenTimestamp=Date.now(),this.handleView(h.m(this,this.isTranslatable),!this.isPDP),this.hasBeenViewed=!0,h._(this.viewContext)&&(this.listingBelowConsumeTimer=setTimeout(this.trackConsume,h.c)))}observerIsNotIntersectingCallback(e){clearTimeout(this.listingBelowConsumeTimer),this.isNotBrandSafe&&e.target===this&&window.dispatchEvent(t.c(t.hw,{postId:this.id,isInView:!1}));const o=this.isPostInViewport;this.isPostInViewport=!1,o&&(this.handleConsume(),this.isPostLeaveEventsEnabled&&this.trackEvent(h.U(this)))}checkPostEditMode(){const e=new URLSearchParams(window.location.search);if(e.get(p.c)){this.pubsub.publish(t.T.PostUpdated,{postId:this.id,action:p.a.edit,value:!0}),e.delete(p.c);const o=e.toString(),s=window.location.pathname+(o.length?"?":"")+o;window.history.replaceState({},document.title,s)}}};return t._([t.n({type:Boolean})],L.prototype,"archived",void 0),t._([t.n({type:Boolean})],L.prototype,"deleted",void 0),t._([t.n({type:Boolean,reflect:!0})],L.prototype,"hidden",void 0),t._([t.n({type:String,attribute:"author-id"})],L.prototype,"authorId",void 0),t._([t.n({type:String,attribute:"created-timestamp"})],L.prototype,"createdTimestamp",void 0),t._([t.n({type:String})],L.prototype,"domain",void 0),t._([t.n({type:String,attribute:"content-href"})],L.prototype,"contentHref",void 0),t._([t.n({type:String})],L.prototype,"id",void 0),t._([t.n({type:String,attribute:"user-id"})],L.prototype,"userId",void 0),t._([t.n({type:String,attribute:"app-id"})],L.prototype,"appId",void 0),t._([t.n({type:String,attribute:"app-slug"})],L.prototype,"appSlug",void 0),t._([t.n({type:Boolean})],L.prototype,"game",void 0),t._([t.n({type:String,attribute:"app-installation-id"})],L.prototype,"appInstallationId",void 0),t._([t.n({type:String,attribute:"app-name"})],L.prototype,"appName",void 0),t._([t.n({type:String,attribute:"app-owner-id"})],L.prototype,"appOwnerId",void 0),t._([t.n({type:String,attribute:"app-version-number"})],L.prototype,"appVersionNumber",void 0),t._([t.n({type:String,attribute:"app-public-api-version"})],L.prototype,"appPublicApiVersion",void 0),t._([t.n({type:Boolean,reflect:!0})],L.prototype,"nsfw",void 0),t._([t.n({type:Boolean})],L.prototype,"promoted",void 0),t._([t.n({type:Number})],L.prototype,"score",void 0),t._([t.n({type:Boolean,reflect:!0})],L.prototype,"spoiler",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],L.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],L.prototype,"subredditName",void 0),t._([t.n({type:Boolean,attribute:"is-subscribed"})],L.prototype,"isSubscribed",void 0),t._([t.n({type:String,attribute:"subreddit-prefixed-name"})],L.prototype,"subredditPrefixedName",void 0),t._([t.n({type:String,attribute:"post-title"})],L.prototype,"postTitle",void 0),t._([t.n({type:String,attribute:"post-type"})],L.prototype,"postType",void 0),t._([t.n({type:String,attribute:"recommendation-source"})],L.prototype,"recommendationSource",void 0),t._([t.n({type:String,attribute:"recommendation-subreddit-id"})],L.prototype,"recommendationSubredditId",void 0),t._([t.n({type:String,attribute:"recommendation-subreddit-name"})],L.prototype,"recommendationSubredditName",void 0),t._([t.n({type:String,attribute:"post-language"})],L.prototype,"postLanguage",void 0),t._([t.n({type:String,attribute:"translation-language"})],L.prototype,"translationLanguage",void 0),t._([t.n({type:Boolean,attribute:"is-translation-on",reflect:!0})],L.prototype,"isTranslationOn",void 0),t._([t.n({type:Number})],L.prototype,"feedIndex",void 0),t._([t.n({type:Boolean,attribute:"stickied"})],L.prototype,"isStickied",void 0),t._([t.n({type:Boolean,attribute:"highlighted"})],L.prototype,"isHighlighted",void 0),t._([t.n({type:Boolean,attribute:"crossposting-v2-enabled"})],L.prototype,"isCrosspostingV2Enabled",void 0),t._([t.n({type:Number,attribute:"comment-count"})],L.prototype,"commentCount",void 0),t._([t.n({type:Boolean,attribute:"is-awardable"})],L.prototype,"isAwardable",void 0),t._([t.n({type:Number,attribute:"award-count"})],L.prototype,"awardCount",void 0),t._([t.n({type:String,attribute:"award-id"})],L.prototype,"awardId",void 0),t._([t.n({type:String,attribute:"award-icon-url"})],L.prototype,"awardIconUrl",void 0),t._([t.n({type:Array,attribute:"award-icon-urls"})],L.prototype,"awardIconUrls",void 0),t._([t.n({type:Boolean,attribute:"hide-award-icon"})],L.prototype,"hideAwardIcon",void 0),t._([t.n({type:Boolean,attribute:"is-awarded-by-user"})],L.prototype,"isAwardedByUser",void 0),t._([t.n({type:Boolean,attribute:"has-iconic-award"})],L.prototype,"hasIconicAward",void 0),t._([t.n({type:Boolean,attribute:"has-branded-award"})],L.prototype,"hasBrandedAward",void 0),t._([t.n({type:String})],L.prototype,"permalink",void 0),t._([t.n({type:Boolean})],L.prototype,"gallery",void 0),t._([t.n({type:String,attribute:"view-context"})],L.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"view-type"})],L.prototype,"viewType",void 0),t._([t.n({type:Boolean,attribute:"is-slim-card"})],L.prototype,"isSlimCard",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],L.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-reporting-enabled"})],L.prototype,"isReportingEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-link-post"})],L.prototype,"isLinkPost",void 0),t._([t.n({type:Boolean,attribute:"is-ama"})],L.prototype,"isAma",void 0),t._([t.n({type:Boolean,attribute:"is-embed"})],L.prototype,"isEmbed",void 0),t._([t.n({type:Boolean,attribute:"is-not-brand-safe"})],L.prototype,"isNotBrandSafe",void 0),t._([t.n({type:Boolean,attribute:"is-crosspost"})],L.prototype,"isCrosspost",void 0),t._([t.n({type:Boolean,attribute:"is-crosspostable"})],L.prototype,"isCrosspostable",void 0),t._([t.n({type:Boolean,attribute:"is-embeddable"})],L.prototype,"isEmbeddable",void 0),t._([t.n({type:Boolean,attribute:"user-logged-in"})],L.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"disabled"})],L.prototype,"disabled",void 0),t._([t.n({type:String,attribute:"vote-type"})],L.prototype,"voteType",void 0),t._([t.n({type:Boolean,attribute:"show-full-content"})],L.prototype,"showFullContent",void 0),t._([t.n({type:Boolean,attribute:"is-translatable"})],L.prototype,"isTranslatable",void 0),t._([t.n({type:Boolean,attribute:"is-translation-fetched",reflect:!0})],L.prototype,"isTranslationFetched",void 0),t._([t.n({type:Boolean,attribute:"is-post-translated",reflect:!0})],L.prototype,"isPostTranslated",void 0),t._([t.n({type:Boolean,attribute:"is-post-body-translated",reflect:!0})],L.prototype,"isPostBodyTranslated",void 0),t._([t.n({type:Boolean,attribute:"is-mt-seo-user-page",reflect:!0})],L.prototype,"isMTSEOUserPage",void 0),t._([t.n({type:Boolean,attribute:"has-mt-seo-translation-interruption"})],L.prototype,"hasMTSEOTranslationInterruption",void 0),t._([t.n({type:String,attribute:"more-posts-cursor"})],L.prototype,"morePostsCursor",void 0),t._([t.n({type:Boolean,attribute:"should-track-post-leave-events"})],L.prototype,"isPostLeaveEventsEnabled",void 0),t._([t.n({type:Boolean,attribute:"locked",reflect:!0})],L.prototype,"isLocked",void 0),t._([t.n({type:Boolean,attribute:"banned",reflect:!0})],L.prototype,"isBanned",void 0),t._([t.n({type:Boolean,attribute:"is-contest-mode",reflect:!0})],L.prototype,"isContestMode",void 0),t._([t.n({type:String,attribute:"pdp-target"})],L.prototype,"pdpTarget",void 0),t._([t.n({type:Boolean,attribute:"is-promoteable-post"})],L.prototype,"isPromoteablePost",void 0),t._([t.n({type:Boolean,attribute:"boost-post-page-exp"})],L.prototype,"boostPostPageExp",void 0),t._([t.n({type:String,attribute:"moderation-verdict"})],L.prototype,"moderationVerdict",void 0),t._([t.n({type:Boolean,attribute:"previous-actions-feature"})],L.prototype,"previousActionsFeature",void 0),t._([t.n({type:String,reflect:!0})],L.prototype,"updateAnimation",void 0),t._([t.n({type:String,attribute:"item-state",reflect:!0})],L.prototype,"itemState",void 0),t._([t.n({type:Boolean,attribute:"are-reports-expandable"})],L.prototype,"areReportsExpandable",void 0),t._([t.n({type:Boolean,attribute:"compact-ui-experiment"})],L.prototype,"isCompactUIExp",void 0),t._([t.n({type:Boolean,attribute:"post-comment-tap-exp"})],L.prototype,"isPostCommentTapExp",void 0),t._([t.n({type:Boolean,attribute:"is-pdp-seeker-m1-lo"})],L.prototype,"isPdpSeekerM1LO",void 0),t._([t.n({type:Boolean,attribute:"share-button-ssr"})],L.prototype,"shareButtonSSR",void 0),t._([t.n({type:Boolean,attribute:"interaction-from-hotkey"})],L.prototype,"interactionFromHotkey",void 0),t._([t.n({type:Boolean,attribute:"apply-feeds-simplification"})],L.prototype,"applyFeedsSimplification",void 0),t._([t.d()],L.prototype,"showPostRemovalBanner",void 0),t._([t.d()],L.prototype,"showExpando",void 0),t._([t.d()],L.prototype,"postVoteType",void 0),t._([t.d()],L.prototype,"postScore",void 0),t._([t.d()],L.prototype,"useShortHiddenPostForm",void 0),t._([t.d()],L.prototype,"isThumbnailSet",void 0),t._([t.d()],L.prototype,"isUpdatingPostBody",void 0),t._([t.d()],L.prototype,"displayPostAnalytics",void 0),t._([t.d()],L.prototype,"isCrosspostingCoachmarkOpen",void 0),t._([t.d()],L.prototype,"eligibleCrosspostingSubreddit",void 0),L=t._([t.e("shreddit-post")],L),{get S(){return L}}}));
SML.dm("shredditpostflair5ab36abd",["shelle48e5956","iconc33661e6"],(async(t,s)=>{const e=t.C(s.s),i=new DOMParser;let r=class extends e{constructor(){super(...arguments),this.postId="",this.flairClass="",this.onPostFlairChange=t=>{t.postId===this.postId&&this.renderUpdatedFlair(t.updatedHtml)}}connectedCallback(){super.connectedCallback(),requestAnimationFrame((()=>{this.subscribe(t.T.PostFlairUpdated,this.onPostFlairChange)}))}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(t.T.PostFlairUpdated,this.onPostFlairChange)}renderUpdatedFlair(t){const s=this.shadowRoot?.querySelector("slot")?.assignedElements({flatten:!0})[0];if(!t&&s)return void s.remove();const e=i.parseFromString(t,"text/html").body.firstChild;if(e){if(this.flairClass&&e instanceof HTMLElement){const t=this.flairClass.split(" ").filter((t=>!!t));e.classList.add(...t)}s?s.replaceWith(e):this.appendChild(e)}}render(){return s.x`<slot></slot>`}};r.styles=[t.t],t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:String,attribute:"flair-class"})],r.prototype,"flairClass",void 0),r=t._([t.e("shreddit-post-flair")],r)}));
SML.dm("shreddittweetembedc1a19ee2",["shelle48e5956","iconc33661e6","links22118b0c"],(async(e,t,i)=>{const s=e.g(t.s),o=["allow-forms","allow-orientation-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"].join(" ");let r=class extends s{constructor(){super(...arguments),this.postId="",this.limitHeight=!1,this.onMessage=e=>{const{data:t}=e;if(!e.source||e.source!==this.iframe?.contentWindow||"tweet-measured"!==t?.action||i.e(t?.id36)!==this.postId)return;this.iframe.height=`${t?.height}px`,this.limitHeight&&t?.height>550?(this.renderRoot?.querySelector(`#${this.postId}-tweet-overflow`)?.classList.remove("hidden"),this?.style.setProperty("height","550px")):this?.style.setProperty("height",`${t?.height+4}px`),this.renderRoot?.querySelector(`#${this.postId}-tweet-loading-placeholder`)?.remove();const s=document.querySelector(`#${this.postId}-post-media-container`),o=s?.querySelector(`#${this.postId}-aspect-ratio`);if(o){const e=this.offsetHeight/this.offsetWidth;o?.style.setProperty("--aspect-ratio",`${e}`);const t=this.offsetHeight-o.offsetHeight;o?.style.setProperty("height",`${t}px`)}}}static get styles(){return[e.t]}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this.onMessage)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this.onMessage)}onIframeLoad(){this.iframe?.contentWindow?.postMessage("twitter-measure-requested","https://www.redditmedia.com")}render(){const e=`${i.d(this.postId)}?responsive=true&is_nightmode=${matchMedia("(prefers-color-scheme: dark)").matches}`;return t.x` <div id="${this.postId}-tweet-loading-placeholder" class="${this.className} bg-neutral-background-weak absolute left-0 right-0 top-0 bottom-0"></div> <div class="overflow-hidden flex justify-center w-100 ${this.limitHeight?"max-h-[550px] ":""}"> <iframe id="${this.postId}-tweet-iframe" scrolling="no" allowfullscreen class="items-center overflow-hidden b-0 border-transparent justify-center bg-neutral-background-weak max-w-[550px] rounded-[14px]" max-width="${"550px"}" width="100%" title="${this.title}" aria-label="Tweet: ${this.title}" src="${e}" sandbox="${o}" @load="${this.onIframeLoad}" allowtransparency="true"></iframe> </div> ${this.limitHeight?t.x`<div id="${this.postId}-tweet-overflow" class="h-[66px] mt-[-66px] w-100 from-[color:var(--color-neutral-background-weak)] bg-gradient-to-t hidden isolate pointer-events-none"></div>`:""} `}};e._([e.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),e._([e.n({type:Boolean,attribute:"limit-height"})],r.prototype,"limitHeight",void 0),e._([e.y("iframe")],r.prototype,"iframe",void 0),r=e._([e.e("shreddit-tweet-embed")],r)}));
SML.dm("shredditpubsubpublisher59526190",["shelle48e5956","iconc33661e6"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this.handleInteraction=e=>{t.f(e)&&this.handleAction()}}static get styles(){return e.a`:host{display:contents}`}handleAction(){this.topic&&t.p(this.topic,this.data)}render(){return e.x`<slot @click="${this.handleInteraction}" @keypress="${this.handleInteraction}"></slot>`}};t._([t.n({type:String})],s.prototype,"topic",void 0),t._([t.n({type:Object})],s.prototype,"data",void 0),s=t._([t.e("shreddit-pubsub-publisher")],s)}));
SML.dm("followbutton2b20c54e",["shelle48e5956","iconc33661e6"],(async(t,o)=>{let e=class extends o.s{constructor(){super(...arguments),this.isDesktop=!1,this.isLoggedIn=!1,this.isFollowed=!1,this.trackingSource="profile",this.toggleLoadingIcon=()=>{const t=this.isFollowed?".unfollow-button":".follow-button",o=this.querySelector(`${t} .loading-icon`),e=this.querySelector(`${t} .button-leading-icon`)?.parentElement;if(o?.classList.toggle("hidden"),e?.classList.toggle("hidden"),!this.isDesktop){const o=this.querySelector(`${t} .button-text`);o?.classList.toggle("hidden")}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}async onClick(){if(this.redditorId&&this.isLoggedIn){const o={input:{accountId:this.redditorId,state:this.isFollowed?t.au.None:t.au.Followed}};this.toggleLoadingIcon();try{const e=await t.B({operation:t.O.UpdateProfileFollowState,variables:o});return this.toggleLoadingIcon(),void(e.data.updateProfileFollowState?.ok&&!e.data.updateProfileFollowState?.errors&&(this.isFollowed=!this.isFollowed))}catch(t){return window.Sentry?.captureError?.(t),void this.toggleLoadingIcon()}}}render(){return o.x`<slot name="button-${this.isFollowed?"unfollow":"follow"}"></slot>`}};e.styles=[t.t],t._([t.n({type:Boolean,attribute:"is-desktop"})],e.prototype,"isDesktop",void 0),t._([t.n({type:Boolean,attribute:"is-logged-in"})],e.prototype,"isLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"is-followed"})],e.prototype,"isFollowed",void 0),t._([t.n({type:String,attribute:"redditor-id"})],e.prototype,"redditorId",void 0),t._([t.n({type:Object,attribute:"tracking-source"})],e.prototype,"trackingSource",void 0),e=t._([t.e("follow-button")],e)}));
SML.dm("clicklocationtracker6f864270",["shelle48e5956","agegatestandaloneclientjsb13e879d","iconc33661e6"],(async(t,c,l)=>{const e=t.g(l.s);let i=class extends e{constructor(){super(...arguments),this.clickLocation=t.A.UNKNOWN}handleClick(t){"auxclick"===t.type&&1!==t.button||c.t({el:this,clickLocation:this.clickLocation})}render(){return l.x`<slot @click="${this.handleClick}" @contextmenu="${this.handleClick}" @auxclick="${this.handleClick}"></slot>`}};i.styles=[t.t],t._([t.n({type:String,attribute:"click-location"})],i.prototype,"clickLocation",void 0),i=t._([t.e("click-location-tracker")],i)}));
SML.dm("userhovercardclientjsc70bab8c",["passwordrecoveryfc50288b","rendersavedresponsetemplatebysubredditidb78cebab","followbutton2b20c54e","allchatspagerecommendationsclientjs6f0a19fc","clicklocationtracker6f864270","shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async e=>{e.g()&&(SML.di("./achievements-entrypoint-a0cc6299.js",import.meta.url,"achievementsentrypointa0cc6299"),SML.di("./mod-note-overflow-menu-d1b5690a.js",import.meta.url,"modnoteoverflowmenud1b5690a"),SML.di("./mod-user-summary-feedback-5f0fcf92.js",import.meta.url,"modusersummaryfeedback5f0fcf92"))}));
SML.dm("authorflaireventhandler1ad78656",["shelle48e5956","iconc33661e6"],(async(t,s)=>{const e=t.C(s.s),o=new DOMParser;let i=class extends e{constructor(){super(...arguments),this.userId="",this.subredditId="",this.onUpdateFlairEvent=({html:t,subredditId:s,userId:e,isEnabled:i})=>{if(this.userId===e&&this.subredditId===s){const s=t&&i,e=s?t:'<span class="hidden"></span>',d=o.parseFromString(e,"text/html").body.firstChild;d&&(this.shadowRoot?.querySelector("slot")?.assignedElements({flatten:!0})[0].replaceWith(d),s?this.showHost():this.hideHost())}}}static get styles(){return s.a`:host{--display:flex;display:var(--display);overflow:hidden}`}onSlotChanged(t){const s=t.target?.assignedElements({flatten:!0});s?.some((t=>"SPAN"===t.nodeName&&t.classList.contains("hidden")))&&this.hideHost()}connectedCallback(){super.connectedCallback(),this.subscribe(t.T.CommunityAuthorFlairUpdated,this.onUpdateFlairEvent)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(t.T.CommunityAuthorFlairUpdated,this.onUpdateFlairEvent)}hideHost(){(this.shadowRoot?.host).style.setProperty("--display","none")}showHost(){(this.shadowRoot?.host).style.setProperty("--display","flex")}render(){return s.x`<slot @slotchange="${this.onSlotChanged}"></slot>`}};t._([t.n()],i.prototype,"userId",void 0),t._([t.n()],i.prototype,"subredditId",void 0),i=t._([t.e("author-flair-event-handler")],i)}));
SML.dm("communitystatustelemetry34dd7aad",[],(async()=>{var t,T,e;return function(t){t.MODERATOR="moderator",t.COMMUNITY_STATUS="community_status"}(t||(t={})),function(t){t.VIEW="view",t.CLICK="click"}(T||(T={})),function(t){t.STATUS_EDIT="status_edit",t.STATUS_CANCEL="status_cancel",t.STATUS_CREATE="status_create",t.STATUS_DELETE="status_delete",t.STATUS_LINK="status_link",t.STATUS_DISPLAY="status_display",t.STATUS_SUB_LINK="subreddit_link"}(e||(e={})),{get A(){return T},get N(){return e},get S(){return t}}}));
SML.dm("communitystatusbottomsheet7af52cb6",["shelle48e5956","iconc33661e6","communitystatustelemetry34dd7aad","faceplatehovercard98735488","appselectorclientjs9964d0b0"],(async(t,e,s)=>{var o;!function(t){t.small="small",t.medium="medium"}(o||(o={}));let i=class extends e.s{constructor(){super(...arguments),this.size=o.medium}render(){return e.x` <button class="flex items-center justify-center p-0 m-0 border-none rounded-1 h-[var(--emote-btn-size)] w-[var(--emote-btn-size)] bg-transparent hover:bg-neutral-background-hover cursor-pointer"> <slot class="emote"></slot> </button> `}};function a({pageType:t,url:e}){return{page_type:t,...e?{pane_name:e}:{}}}function r({subredditId:t,subredditName:e}){return{id:t,...e?{name:e}:{}}}i.styles=[e.a`:host{--emote-btn-size:2.25rem;--emote-size:1.75rem;display:block}:host([size=small]){--emote-btn-size:1.25rem;--emote-size:1.25rem}.emote::slotted(img){width:var(--emote-size);height:var(--emote-size);object-fit:contain;margin:0!important;padding:0!important}`,t.t],t._([t.n({type:String,reflect:!0})],i.prototype,"size",void 0),i=t._([t.e("community-status")],i);const n=e=>t.b({source:s.S.COMMUNITY_STATUS,action:s.A.CLICK,noun:s.N.STATUS_LINK},{action_info:a(e),subreddit:r(e)}),l=e.s;let d=class extends l{constructor(){super(...arguments),this.subredditId="",this.subredditName="",this.handleClick=()=>{this.hovercard?.close()},this.handleKeyUp=t=>{"Enter"===t.key&&this.handleClick()},this.handleStatusClicks=e=>{const s=e.composedPath().find((t=>t instanceof HTMLAnchorElement));s&&t.a(this,n({subredditId:this.subredditId,subredditName:this.subredditName,pageType:this._getPageType(),url:s.href}))},this._getPageType=t.X}render(){return e.x` <faceplate-hovercard position="bottom" appearance="inverted"> <span> <slot name="trigger"></slot> </span> <article slot="content" class="flex flex-col relative py-sm w-[184px]"> <div class="absolute right-2xs top-2xs"> <slot name="edit-btn" @click="${this.handleClick}" @keyup="${this.handleKeyUp}"></slot> </div> <div class="flex justify-center align-center"> <slot name="emote"></slot> </div> <p class="text-center m-0 mt-md line-clamp-12 text-12"> <slot name="status" @click="${this.handleStatusClicks}"></slot> </p> </article> </faceplate-hovercard> `}};d.styles=[e.a`slot[name=emote]::slotted(img){max-height:140px;max-width:148px!important;margin-bottom:0!important}faceplate-hovercard::part(content-container){background:var(--color-neutral-content-strong)}`,t.t],t._([t.n({type:String,attribute:"subreddit-id"})],d.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],d.prototype,"subredditName",void 0),t._([t.y("faceplate-hovercard")],d.prototype,"hovercard",void 0),d=t._([t.e("community-status-tooltip")],d);const c=e.s;let m=class extends c{constructor(){super(...arguments),this.subredditId="",this.subredditName="",this.open=()=>{this.bottomSheet?.showModal()},this.close=()=>{this.bottomSheet?.close()},this.handleKeyUp=t=>{"Enter"!==t.key&&"Space"!==t.key||this.close()},this.handleStatusClicks=e=>{const s=e.composedPath().find((t=>t instanceof HTMLAnchorElement));s&&t.a(this,n({subredditId:this.subredditId,subredditName:this.subredditName,pageType:this._getPageType(),url:s.href}))},this._getPageType=t.X}render(){return e.x` <button @click="${this.open}" class="m-0 p-0 border-none bg-transparent"> <slot name="trigger"></slot> </button> <faceplate-bottom-sheet id="bottom-sheet"> <div class="flex flex-col w-full box-border px-md py-xl"> <div class="flex justify-center align-center"> <slot name="emote"></slot> </div> <p class="text-center m-0 line-clamp-8 text-14 font-semibold"> <slot name="status" @click="${this.handleStatusClicks}"></slot> </p> <slot @click="${this.close}" @keyup="${this.handleKeyUp}" name="primary-btn"></slot> ${t.r({appearance:"secondary",attributes:{onclick:this.close,className:"mt-sm",id:"close-button"},children:"Close"})} </div> </faceplate-bottom-sheet> `}};m.styles=[e.a`:host{display:inline-flex}slot[name=emote]::slotted(img){max-height:148px;margin-bottom:32px!important}slot[name=primary-btn]::slotted(*){margin-top:24px}`,t.t],t._([t.n({type:String,attribute:"subreddit-id"})],m.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],m.prototype,"subredditName",void 0),t._([t.y("#bottom-sheet")],m.prototype,"bottomSheet",void 0),m=t._([t.e("community-status-bottom-sheet")],m)}));
SML.dm("commentlinkpostclientjs115fae0d",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d"],(async(t,e,o)=>{let s=class extends e.s{constructor(){super(),this.ts="",this.short=!1,this.format="",this.locale="",this.date=new Date(this.ts)}getLocale(){return this.locale.length?this.locale:o.ci()}createRenderRoot(){return this}render(){const t=o.cn(this.getLocale(),{dateStyle:"full",timeStyle:"long"}).format(this.date),s={short:this.short,format:this.format.length?this.format:void 0},i=o.co(this.date,this.getLocale(),s);return e.x` <time datetime="${this.date.toISOString()}" title="${t}">${i}</time> `}};t._([t.n({type:String})],s.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>o.cj(t||"")})],s.prototype,"date",void 0),t._([t.n({type:Boolean})],s.prototype,"short",void 0),t._([t.n({type:String})],s.prototype,"format",void 0),t._([t.n({type:String})],s.prototype,"locale",void 0),s=t._([t.e("faceplate-timeago")],s)}));
SML.dm("feedpostclientjsd6421ad5",["shelle48e5956","iconc33661e6","modpostlistclientjsa6825fc7","shredditmedialightboxlistener13c26692","imageobserver51925d1c","partialfeedpostclientjs25890fbe","shredditpostflair5ab36abd","shreddittweetembedc1a19ee2","shredditpubsubpublisher59526190","userhovercardclientjsc70bab8c","authorflaireventhandler1ad78656","modnotesopener281d7fc7","communitystatusbottomsheet7af52cb6","commentlinkpostclientjs115fae0d","headeractionitemchatclientjsb3335fba","contenttags9bd7e916","overflowmenuactionsf8d12b95","distinguishedtags1c4757ea","modlogtakedownpreviewclientjsd3af86b9","agegatestandaloneclientjsb13e879d","shopgallerydatafetcherclientjs777c4af0","numbera5d31186","faceplateshimmer9894306d","index43b39749","contentactionbutton6a45f903","awardcontroller351c7b93","scrolltocomments57babb9e","awards2379b181","awards8d1217c9","rplcoachmark4e17786a","tooltipbaseaa9651a3","utils93db03dd","rplcoachmarkcard5c5498b1","shredditpostsharebutton64b8d78b","expandablesectionheader41e0cfd1","withshared1523f2d","ae18b1320","index192b5d82","keywordsfa9c4196","selectcontroller4c63b3e8","userflairfe275854","postFlair51562697","promotepostactionscontroller30d2105c","translationinterventionmodal407043a2","translationsa30aa3ad","chatmobilexpromoclientjs5e1c145c","appselectorclientjs9964d0b0","TinyGesture26737d23","links22118b0c","v2events64802d88","modverdict58953687","gallery554c6dec","faceplatecarousele02bc9b8","shouldconttruncated81ee171","passwordrecoveryfc50288b","qrcodemodalupsellclientjsbd428344","index751e2b35","rendersavedresponsetemplatebysubredditidb78cebab","followbutton2b20c54e","allchatspagerecommendationsclientjs6f0a19fc","clicklocationtracker6f864270","modnotesf373dea5","faceplatehovercard98735488","faceplatetooltipf30979fb","communitystatustelemetry34dd7aad"],(async(t,e)=>{let a=class extends e.s{constructor(){super(...arguments),this.isTranslationActive=!1,this.isTranslationFetched=!1,this.isOriginalFetched=!0,this.updateTranslationFetchedState=()=>{const t=this.shadowRoot?.querySelector('slot[name="translated"]');this.isTranslationFetched=(t?.assignedNodes().length||0)>0;const e=this.shadowRoot?.querySelector("slot#original");this.isOriginalFetched=(e?.assignedNodes().length||0)>0}}connectedCallback(){super.connectedCallback(),this.updateTranslationFetchedState()}appendTranslation(t){t&&!this.isTranslationFetched&&(t.setAttribute("slot","translated"),this.appendChild(t))}appendOriginalText(t){t&&!this.isOriginalFetched&&(t.removeAttribute("slot"),this.appendChild(t))}render(){const t=this.isTranslationActive&&this.isTranslationFetched;return e.x` <slot id="original" class="${t?"hidden":"contents"}" @slotchange="${this.updateTranslationFetchedState}"></slot> <slot name="translated" class="${t?"contents":"hidden"}" @slotchange="${this.updateTranslationFetchedState}"></slot> `}};a.styles=[t.t],t._([t.n({type:Boolean,attribute:"is-translation-active",reflect:!0})],a.prototype,"isTranslationActive",void 0),t._([t.d()],a.prototype,"isTranslationFetched",void 0),t._([t.d()],a.prototype,"isOriginalFetched",void 0),a=t._([t.e("translatable-text")],a),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_post_decouple_edit_tools&&SML.di("./shreddit-post-text-body-a81ad62f.js",import.meta.url,"shredditposttextbodya81ad62f")}));
SML.dm("communityhighlightscb59b3d8",["links22118b0c"],(async e=>({H:new Set([e.P.SubredditFeed,e.P.CommentsPage,e.P.ModQueue,e.P.ModQueueAll,e.P.ModLog])})));
SML.dm("rplbadgee6d3a44a",["shelle48e5956","iconc33661e6"],(async(r,a)=>{const n={Neutral:"neutral",Success:"success",Warning:"warning",Danger:"danger",Alert:"alert",Plain:"plain",Disabled:"disabled"};class o extends r.Q{constructor(){super(...arguments),this.appearance=n.Neutral,this.outline=!1,this._hasContent=!1}render(){return a.x`<span class="container"> <slot class="${r.U({"with-content":this._hasContent,"without-content":!this._hasContent})}" @slotchange="${r=>{this._hasContent=!!r.target.assignedNodes().length}}"></slot> </span>`}}r._([r.n({type:String,reflect:!0})],o.prototype,"appearance",void 0),r._([r.n({type:Boolean})],o.prototype,"outline",void 0),r._([r.d()],o.prototype,"_hasContent",void 0);var e=a.a`${r.V}:host{border-radius:var(--radius-full);display:inline-flex}.with-content{min-width:inherit;min-height:var(--size-md);display:inline-block}.without-content{width:inherit;height:var(--size-xs)}.container{font-weight:600;display:inline-block;font-size:var(--rem10);text-align:center;padding:0 var(--spacer-2xs);line-height:var(--rem16);min-width:var(--size-xs);min-height:var(--size-xs)}:host([outline]){border:solid var(--line-md) var(--color-neutral-background)}:host([appearance=warning]){background:var(--color-warning-background);color:var(--color-neutral-background)}:host([appearance=alert]){background:var(--color-global-orangered);color:var(--color-primary-onBackground)}:host([appearance=danger]){background:var(--color-danger-background);color:var(--color-primary-onBackground)}:host([appearance=success]){background:var(--color-success-background);color:var(--color-primary-onBackground)}:host([appearance=neutral]){background:var(--color-neutral-content);color:var(--color-neutral-background)}:host([appearance=plain]){background:var(--color-neutral-background);color:var(--color-neutral-content)}:host([appearance=disabled]){background:var(--color-interactive-content-disabled);color:var(--color-neutral-background)}`;let t=class extends o{};return t.styles=e,t=r._([r.e("rpl-badge")],t),{R:n}}));
SML.dm("moddropdowncloser6b014290",["shelle48e5956","iconc33661e6"],(async(e,l)=>{let o=class extends l.s{constructor(){super(...arguments),this.handleScroll=()=>{this.dropdownMenu?.[0]?.close()}}connectedCallback(){super.connectedCallback(),document.querySelector('[slot="pdp-panel"]')?.addEventListener("scroll",this.handleScroll),document.querySelector('[slot="mod-queue-feed"]')?.addEventListener("scroll",this.handleScroll)}disconnectedCallback(){super.disconnectedCallback(),document.querySelector('[slot="pdp-panel"]')?.removeEventListener("scroll",this.handleScroll),document.querySelector('[slot="mod-queue-feed"]')?.removeEventListener("scroll",this.handleScroll)}render(){return l.x`<slot></slot>`}};e._([e.j({slot:"",selector:"faceplate-dropdown-menu"})],o.prototype,"dropdownMenu",void 0),o=e._([e.e("mod-dropdown-closer")],o)}));
SML.dm("modactionsmenue9062f75",["shelle48e5956","iconc33661e6","expandablesectionheader41e0cfd1","contentactionbutton6a45f903","communityhighlightscb59b3d8","rplbadgee6d3a44a","links22118b0c","modverdict58953687","modactionscontrollerd935e6bc","allchatspagerecommendationsclientjs6f0a19fc","utils93db03dd","tooltipbaseaa9651a3","agegatestandaloneclientjsb13e879d","selectcontroller4c63b3e8","tablepagination77cf692d","appselectorclientjs9964d0b0","faceplatebottomsheetheadere0488abf","moddropdowncloser6b014290","shredditcommentsharebutton10fe44fe","shredditpostsharebutton64b8d78b","headeractionitemchatclientjsb3335fba","rplcoachmarkcard5c5498b1","rplcoachmark4e17786a"],(async(t,e,o,i,s,n,a,r,l,d,h,c,p)=>{const m="modQueue",u="modQueueChat",g="overflow",C="inline";let E=class extends e.s{constructor(){super(...arguments),this.location=C,this.viewContext=void 0,this.COACHMARK_LABELS={[m]:"NEW! Chat about items in the queue",[u]:"Jump back in",[g]:"NEW! Chat about content",[C]:"Jump back in"},this.COACHMARK_BODY={[m]:"Share content in the queue directly with your mod team",[u]:"Get back to chat threads from the queue",[g]:"Share content directly with your mod team",[C]:"Get back to chat threads from the content"},this.COACHMARK_POSITION={[m]:h.P.Top,[u]:h.P.Top,[g]:h.P.Left,[C]:h.P.Left},this.LOCAL_STORAGE_KEYS={[m]:t.L.ShareToModChatCoachMarkMQSeen,[u]:t.L.ShareToModChatCoachMarkMQChatSeen,[g]:t.L.ShareToModChatCoachMarkOverflowSeen,[C]:t.L.ShareToModChatCoachMarkInlineSeen},this._showShareToModChatBanner=!t.l.getItem(this.getLocalStorageKey()),this.closeCoachmark=()=>{this._showShareToModChatBanner=!1}}getLocalStorageKey(){return this.LOCAL_STORAGE_KEYS[this.location]}connectedCallback(){super.connectedCallback();const e=t.l.getItem(this.getLocalStorageKey());this.location===g&&this.viewContext&&[a.P.ModQueue,a.P.ModQueueAll].includes(this.viewContext)||e?this._showShareToModChatBanner=!1:(t.l.setItem(this.getLocalStorageKey(),"true"),this._showShareToModChatBanner=!0)}disconnectedCallback(){super.disconnectedCallback()}render(){return e.x`<rpl-coachmark placement="${this.COACHMARK_POSITION[this.location]}" appearance="${c.a.Inverted}" ?open="${this._showShareToModChatBanner}"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${c.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> <div>${this.COACHMARK_LABELS[this.location]}</div> </div> ${t.r({attributes:{className:"close-btn",slot:"close-button",onclick:t=>{t.stopPropagation(),this.closeCoachmark()}},appearance:"plainInverted",size:t.s.Small,leadingIcon:e.C({size:e.I.Small})})} <div class="text-12 w-[170px] mb-sm">${this.COACHMARK_BODY[this.location]}</div> </rpl-coachmark-card> </rpl-coachmark>`}};E.styles=[t.t],t._([t.n({type:String,attribute:"location"})],E.prototype,"location",void 0),t._([t.n({type:String,attribute:"view-context"})],E.prototype,"viewContext",void 0),t._([t.d()],E.prototype,"_showShareToModChatBanner",void 0),E=t._([t.e("share-to-mod-chat-coachmark")],E);const S=e.s;class A extends S{constructor(){super(...arguments),this.size=o.L.Medium,this.appearance="content-action",this.viewContext=a.P.CommentsPage,this.feedViewType=t.al.ModQueueCompactView,this.itemState=r.M.UNMODERATED,this.verdict=void 0,this.isCurrentUserAuthor=!1,this.isDeleted=!1,this.isRemoved=!1,this.isModModeEnabled=!1,this.isAdmin=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isReportingIgnored=!1,this.areHighlightsEnabled=!1,this.hasReports=!1,this.hasRemovalReason=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.isSpamFilteredPost=!1,this.isDesktop=!1,this.permalink="",this.isContentLevelModsCommsEnabled=!1,this.modContentDiscussionContext=void 0,this.isFeedNoApproveEnabled=!1,this.focusChatTextareaFn=p.bC,this.pubsub=new t.P(this),this.modActionsController=new l.ModActionsController(this,{getThingIdFn:()=>this.thingId||""}),this.getListItemClickHandler=t=>()=>(this.dropdownMenu?.close(),t())}get isPost(){return a.l(this.thingId||"")}get shouldAlwaysShowAction(){return!this.isModModeEnabled&&!this.isOnModqueuePage}shouldAlwaysShowApproveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==r.M.APPROVED&&this.shouldShowActionInMenu}shouldAlwaysShowRemoveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==r.M.REMOVED&&this.shouldShowActionInMenu}get isOnModqueuePage(){return this.viewContext===a.P.ModQueue||this.viewContext===a.P.ModQueueAll}get isApproved(){return this.itemState===r.M.APPROVED}get shouldShowConfirmRemoval(){return r.s(this.itemState,this.isSpamFilteredPost)}get shouldShowActionInMenu(){return!r.a(this.viewContext,this.feedViewType)||"hover-menu"===this.appearance}get isDistinguishable(){return this.isCurrentUserAuthor&&!this.isDeleted}get isStickyable(){return!(this.viewContext===a.P.ProfileFeed||this.viewContext===a.P.ProfileFeed2||this.isDeleted)}get isModVerdictVisible(){return r.h(this.verdict)&&!this.hasReports&&this.itemState!==r.M.FILTERED}renderApproveAction(){return this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.itemState===r.M.UNMODERATED||this.shouldAlwaysShowApproveAction()&&r.b(this.itemState)?o.l({leadingIcon:e.P(),label:"Approve",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleApproveContent)}):null}renderRemoveAction(){return this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.itemState===r.M.UNMODERATED||this.shouldAlwaysShowRemoveAction()&&r.c(this.itemState)?o.l({leadingIcon:e.C(),label:"Remove",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContent)}):null}renderConfirmRemovalAction(){return this.shouldAlwaysShowRemoveAction()&&this.shouldShowConfirmRemoval?o.l({leadingIcon:e.bo(),label:"Confirm Removal",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleConfirmRemoval)}):null}renderSpamAction(){return r.d({moderationState:this.itemState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInMenu?o.l({leadingIcon:e.bp(),label:"Mark as Spam",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContentAsSpam)}):null}renderShareToModChatAction(t){if(!r.e({isPromotedPost:this.isPromotedPost})||!this.shouldShowActionInMenu||!t?.modChatChannel||t?.modContentDiscussion)return null;const i=t?.modContentDiscussion?`${d.g(t.modContentDiscussion.chatChannel?.roomId,t.modContentDiscussion.chatMessage?.id)}/thread`:d.a(t?.modChatChannel?.roomId);return e.x` <faceplate-tracker source="moderator" action="click" noun="${t?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:t?.eventContext?.subredditId,name:t?.eventContext?.subredditName},action_info:{setting_value:t?.eventContext?.roomId},post:{id:t?.eventContext?.postId},...t?.eventContext?.commentId&&{comment:{id:t?.eventContext?.commentId}}})}"> <reddit-chat-anchor> <a href="${i}?draft=${encodeURIComponent("https://www.reddit.com"+this.permalink)}" class="no-underline"> ${o.l({leadingIcon:e.aw(),trailingSlot:e.x` <rpl-badge appearance="${n.R.Alert}">NEW</rpl-badge>`,label:"Share to mod chat",size:this.size,onClick:async()=>{t.modContentDiscussion||await this.focusChatTextareaFn()}})} </a> </reddit-chat-anchor> </faceplate-tracker>`}renderIgnoreReportsAction(){return this.isReportingIgnored||!this.hasReports?null:o.l({leadingIcon:e.bq(),label:"Ignore reports and approve",size:this.size,onClick:this.getListItemClickHandler((()=>{this.modActionsController.handleIgnoreReports(),this.modActionsController.handleApproveContent()}))})}renderUnignoreReportsAction(){return this.isReportingIgnored?o.l({leadingIcon:e.br(),label:"Unignore reports",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnignoreReports)}):null}renderAddRemovalReasonAction(){return r.f(this.itemState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)&&this.shouldShowActionInMenu?o.l({leadingIcon:e.u(),label:"Add Removal Reason",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAddRemovalReason)}):null}renderDistinguishAction(){return this.isDistinguishable&&this.distinguishedAs!==t.at.Moderator?o.l({leadingIcon:e.bs(),label:"Show mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleDistinguish)}):null}renderUndistinguishAction(){return this.isDistinguishable&&this.distinguishedAs===t.at.Moderator?o.l({leadingIcon:e.bt(),label:"Hide mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUndistinguish)}):null}renderStickyAction(t){return!this.isStickyable||this.isStickied||!this.shouldShowActionInMenu||this.areHighlightsEnabled||this.isPromotedPost?null:o.l({leadingIcon:e.bu(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleSticky)})}renderUnstickyAction(t){return this.isStickyable&&this.isStickied&&this.shouldShowActionInMenu&&!this.areHighlightsEnabled&&!this.isPromotedPost?o.l({leadingIcon:e.ak(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnsticky)}):null}renderAddToHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&s.H.has(this.viewContext)&&!this.isHighlighted?o.l({leadingIcon:e.bu(),label:"Add to highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUpdateHighlightedPost)}):null}renderRemoveFromHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&s.H.has(this.viewContext)&&this.isHighlighted?o.l({leadingIcon:e.ak(),label:"Remove from highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveHighlightedPost)}):null}renderLockAction(t){return this.isLocked||!this.shouldShowActionInMenu?null:o.l({leadingIcon:e.bv(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleLock)})}renderUnlockAction(t){return this.isLocked&&this.shouldShowActionInMenu?o.l({leadingIcon:e.aj(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnlock)}):null}renderEditPostFlairAction(t){return!this.shouldShowActionInMenu||this.isPromotedPost||this.isDeleted?null:o.l({leadingIcon:e.aA(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleOpenEditPostFlairModal)})}renderCopyLinkAction(){return"hover-menu"!==this.appearance?null:this.isPost?e.x`<shreddit-post-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-post-share-button>`:e.x`<shreddit-comment-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-comment-share-button>`}closeModal(){this.bottomSheetMenu?.close()}openModal(){this.bottomSheetMenu?.showModal()}renderMenuTrigger(){const o={leadingIcon:e.bw({size:e.I.Small}),screenReaderContent:"Moderation actions menu",appearance:"secondary",attributes:{type:"button",onclick:()=>{this.openModal()},slot:"trigger"},size:t.s.Small};return e.x` <faceplate-tracker source="moderator" action="click" noun="mod_shield_menu"> ${"hover-menu"===this.appearance?t.r({...o,appearance:"secondary"}):i.c({...o,appearance:"plain"})} </faceplate-tracker> `}renderMobileActionsMenu(o){return e.x` ${this.renderMenuTrigger()} <faceplate-bottom-sheet> <faceplate-bottom-sheet-header slot="header" has-divider> <span slot="trailing" @click="${this.closeModal}"> ${t.r({attributes:{"aria-label":"Close"},appearance:"secondary",leadingIcon:e.C({size:e.I.Small}),size:t.s.Small})}</span> <span>Mod actions</span> </faceplate-bottom-sheet-header> <faceplate-menu class="w-full nd:hidden" @click="${this.closeModal}"> ${o} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-bottom-sheet> `}renderActionsMenu(t){return this.isContentLevelModsCommsEnabled&&!this.modContentDiscussionContext?.modContentDiscussion?e.x` <mod-dropdown-closer> <share-to-mod-chat-coachmark location="${g}" view-context="${this.viewContext}"> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs nd:hidden max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${t} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </share-to-mod-chat-coachmark> </mod-dropdown-closer>`:e.x` <mod-dropdown-closer> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${t} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer>`}render(){if(this.viewContext===a.P.AggregateFeed)return e.A;const t=this.renderActions();return 0===t.length||t.every((t=>null===t))?e.x``:this.isDesktop?this.renderActionsMenu(t):this.renderMobileActionsMenu(t)}}return A.styles=[t.t],t._([t.n({type:String,attribute:"thing-id"})],A.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"user-id"})],A.prototype,"userId",void 0),t._([t.n({type:String})],A.prototype,"size",void 0),t._([t.n({type:String})],A.prototype,"appearance",void 0),t._([t.n({type:String,attribute:"view-context"})],A.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"feed-view-type"})],A.prototype,"feedViewType",void 0),t._([t.n({type:String,attribute:"item-state",reflect:!0})],A.prototype,"itemState",void 0),t._([t.n({type:String,attribute:"distinguished-as"})],A.prototype,"distinguishedAs",void 0),t._([t.n({type:String,attribute:"verdict"})],A.prototype,"verdict",void 0),t._([t.n({type:String,attribute:"verdict-by"})],A.prototype,"verdictBy",void 0),t._([t.n({type:Boolean,attribute:"current-user-author"})],A.prototype,"isCurrentUserAuthor",void 0),t._([t.n({type:Boolean,attribute:"deleted"})],A.prototype,"isDeleted",void 0),t._([t.n({type:Boolean,attribute:"removed"})],A.prototype,"isRemoved",void 0),t._([t.n({type:Boolean,attribute:"mod-mode"})],A.prototype,"isModModeEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-admin"})],A.prototype,"isAdmin",void 0),t._([t.n({type:Boolean,attribute:"locked"})],A.prototype,"isLocked",void 0),t._([t.n({type:Boolean,attribute:"stickied"})],A.prototype,"isStickied",void 0),t._([t.n({type:Boolean,attribute:"highlighted"})],A.prototype,"isHighlighted",void 0),t._([t.n({type:Boolean,attribute:"reporting-ignored"})],A.prototype,"isReportingIgnored",void 0),t._([t.n({type:Boolean,attribute:"highlights-enabled"})],A.prototype,"areHighlightsEnabled",void 0),t._([t.n({type:Boolean,attribute:"has-reports"})],A.prototype,"hasReports",void 0),t._([t.n({type:Boolean,attribute:"has-removal-reason"})],A.prototype,"hasRemovalReason",void 0),t._([t.n({type:Boolean,attribute:"is-profile-post"})],A.prototype,"isProfilePost",void 0),t._([t.n({type:Boolean,attribute:"is-promoted-post"})],A.prototype,"isPromotedPost",void 0),t._([t.n({type:Boolean,attribute:"is-spam-filtered-post"})],A.prototype,"isSpamFilteredPost",void 0),t._([t.n({type:Boolean,attribute:"is-desktop"})],A.prototype,"isDesktop",void 0),t._([t.n({type:String,attribute:"permalink"})],A.prototype,"permalink",void 0),t._([t.n({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],A.prototype,"isContentLevelModsCommsEnabled",void 0),t._([t.n({type:Object,attribute:"mod-content-discussion-context"})],A.prototype,"modContentDiscussionContext",void 0),t._([t.n({type:Boolean,attribute:"is-feed-no-approve-enabled"})],A.prototype,"isFeedNoApproveEnabled",void 0),t._([t.n({attribute:!1})],A.prototype,"focusChatTextareaFn",void 0),t._([t.y("faceplate-dropdown-menu")],A.prototype,"dropdownMenu",void 0),t._([t.y("faceplate-bottom-sheet")],A.prototype,"bottomSheetMenu",void 0),{M:A}}));
SML.dm("modinlineactionsclientjs60c44b08",["shelle48e5956","iconc33661e6","contentactionbutton6a45f903","agegatestandaloneclientjsb13e879d","distinguishedtags1c4757ea","awards2379b181","moderation461324fc","communityhighlightscb59b3d8","modbulkactionsb972488b","comment5b02ad76","links22118b0c","overflowmenuactionsf8d12b95","modverdict58953687","allchatspagerecommendationsclientjs6f0a19fc","modactionsmenue9062f75","expandablesectionheader41e0cfd1","modlogtakedownpreviewclientjsd3af86b9","commentlinkpostclientjs115fae0d","selectcontroller4c63b3e8","tablepagination77cf692d","faceplateshimmer9894306d","faceplatetooltipf30979fb","shredditcommentsharebutton10fe44fe","shredditpostsharebutton64b8d78b","userflairfe275854","withshared1523f2d","ae18b1320","index192b5d82","headeractionitemchatclientjsb3335fba","tooltipbaseaa9651a3","utils93db03dd","keywordsfa9c4196","rplcoachmark4e17786a","rplcoachmarkcard5c5498b1","rplbadgee6d3a44a","modactionscontrollerd935e6bc","chatmobilexpromoclientjs5e1c145c","modremovalreasonformclientjsba8e4d27","rendersavedresponsetemplatebysubredditidb78cebab","faceplateformcff507f5","communitypickerf331f77f","rplfilterchip3ad19f7c","faceplateselecttextinputbad79e01","constants9e09f052","utils57a7018c","textinput9c3f45be","faceplateoption7a297e33","faceplatetextareainput29f541e5","smartescalationsproviderclientjs1b1b1602","communityonboardingcompletedmodalclientjsf4f5192c","huiuserdrawerclientjs91e856a7","TinyGesture26737d23","postFlair51562697","previousactionsclientjs3044bbd0","appselectorclientjs9964d0b0","faceplatebottomsheetheadere0488abf","moddropdowncloser6b014290"],(async(t,e,i,o,s,n,a,r,d,l,c,h,m,p,u,E)=>{let b=class extends e.s{constructor(){super(...arguments),this.buttonAppearance="secondary",this.buttonSize=t.s.Small,this.showFullButtons=!1,this.ariaLabel="",this.thingId="",this.smartEscalationsTracking=!1,this.isLargerThanSmallWindow=!0,this._handleModActionClick=e=>{this.dataModAction===s.M.AddRemovalReason&&e.stopPropagation(),this.dataModAction&&(this.dispatchEvent(t.c(this.dataModAction)),e.target&&this.noun&&t.a(e.target,t.b({source:"moderator",action:"click",noun:this.noun})))},this.mediaWatcher=null,this.handleMediaChange=t=>{this.isLargerThanSmallWindow=t.matches},this.renderWithTooltip=()=>e.x`<faceplate-tooltip appearance="inverted" position="top"> ${this.renderButton()} <slot name="text"></slot> </faceplate-tooltip>`,this.renderButton=()=>{const s=o.ab()?i.c:t.r,a=this.smartEscalationsTracking?e.x` <ac-track trigger="click" san="moderator|click|remove" data-faceplate-tracking-context="${JSON.stringify({action_info:{source_name:"smart-escalations"},...this.thingId&&n.i(this.thingId)&&{post:{id:this.thingId}},...this.thingId&&n.a(this.thingId)&&{comment:{id:this.thingId}}})}"></ac-track>`:"";return e.x`${s({appearance:this.buttonAppearance,attributes:{onclick:this._handleModActionClick,className:"relative",slot:"trigger"},size:this.buttonSize,children:this.showFullButtons&&this.isLargerThanSmallWindow?e.x` <span> ${a} <slot name="text"></slot> </span> `:"",leadingIcon:this.showFullButtons&&this.isLargerThanSmallWindow?"":e.x` <span class="flex justify-center items-center"> ${a} <slot name="icon"></slot> </span> `,screenReaderContent:this.ariaLabel})}`}}connectedCallback(){super.connectedCallback(),this.showFullButtons&&(this.mediaWatcher=window.matchMedia("(min-width: 768px)"),this.mediaWatcher.addEventListener("change",this.handleMediaChange))}disconnectedCallback(){super.disconnectedCallback(),this.mediaWatcher?.removeEventListener("change",this.handleMediaChange)}render(){return this.showFullButtons?this.renderButton():this.renderWithTooltip()}};b.styles=[t.t],t._([t.n({type:String,attribute:"data-mod-action"})],b.prototype,"dataModAction",void 0),t._([t.n({type:String,attribute:"event-noun"})],b.prototype,"noun",void 0),t._([t.n({type:String,attribute:"button-appearance"})],b.prototype,"buttonAppearance",void 0),t._([t.n({type:String,attribute:"button-size"})],b.prototype,"buttonSize",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],b.prototype,"showFullButtons",void 0),t._([t.n({type:String,attribute:"aria-label"})],b.prototype,"ariaLabel",void 0),t._([t.n({type:String,attribute:"thing-id"})],b.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"smart-escalations-tracking"})],b.prototype,"smartEscalationsTracking",void 0),t._([t.d()],b.prototype,"isLargerThanSmallWindow",void 0),b=t._([t.e("mod-action-button")],b);let T=class extends(t.C(e.s)){constructor(){super(...arguments),this.feedViewType=t.al.ModQueueCompactView,this.viewContext=c.P.CommentsPage,this.itemState=m.M.UNMODERATED,this.hasReports=!1,this.isModMode=!1,this.isRemoved=!1,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isCurrentUserAuthor=!1,this.hasParent=!1,this.isIconOnly=!1,this.hasRemovalReason=!1,this.permalink="",this.isDesktopViewport=!1,this.isSpamFilteredPost=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.hasFlairPermissions=!1,this.areHighlightsEnabled=!1,this.hideInlineActions=!1,this.isSmartEscalations=!1,this.isContentLevelModsCommsEnabled=!1,this.modContentDiscussionContext=void 0,this.isFeedNoApproveEnabled=!1,this.focusChatTextareaFn=o.bC,this.moderationState=m.M.UNMODERATED,this._handleThingUpdate=t=>{let e="";if("awardOnContentId"in t?e=t.awardOnContentId:"commentId"in t?e=t.commentId:"postId"in t&&(e=t.postId),e!==this.thingId)return;const{value:i}=t;switch(t.action){case h.a.approve:case l.C.approve:case d.A.approve:case l.C.approveOptimistic:this.hasRemovalReason=!1,this.isRemoved=!1,this.moderationState=m.M.APPROVED;break;case h.a.remove:case h.a.removeAsSpam:case h.a.confirmRemoval:case l.C.remove:case l.C.removeAsSpam:case l.C.confirmRemoval:case d.A.remove:case d.A.confirmRemoval:case l.C.removeOptimistic:case l.C.removeAsSpamOptimistic:case l.C.confirmRemovalOptimistic:this.isRemoved=!0,this.moderationState=m.M.REMOVED;break;case h.a.addRemovalReason:case l.C.addRemovalReason:this.hasRemovalReason=!0;break;case h.a.updateHighlightedPost:this.isHighlighted=i;break;case h.a.lock:case l.C.lock:this.isLocked=i;break;case h.a.delete:this.isDeleted=i;break;case h.a.sticky:case l.C.sticky:this.isStickied=i}}}get itemType(){return this.thingId?a.i(this.thingId):null}get isPost(){return this.itemType===t.a9.Post}get isCompactView(){return this.feedViewType===t.al.CompactView}get isOnModqueuePage(){return this.viewContext===c.P.ModQueue||this.viewContext===c.P.ModQueueAll}get isApproved(){return this.moderationState===m.M.APPROVED}get shouldShowConfirmRemoval(){return m.s(this.moderationState,this.isSpamFilteredPost)}get shouldShowActionInline(){return m.a(this.viewContext,this.feedViewType)&&!this.isIconOnly&&!this.hideInlineActions}get isStickyable(){const t=!(this.viewContext===c.P.ProfileFeed||this.viewContext===c.P.ProfileFeed2),e=this.isCurrentUserAuthor&&!this.hasParent;return this.isPost?t:t&&e}get itemTopic(){switch(this.itemType){case t.a9.Award:return t.T.AwardOnContentUpdated;case t.a9.Comment:return t.T.CommentUpdated;case t.a9.Post:return t.T.PostUpdated;default:return null}}connectedCallback(){super.connectedCallback(),this.moderationState=this.itemState,this.itemTopic&&this.subscribe(this.itemTopic,this._handleThingUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.itemTopic&&this.unsubscribe(this.itemTopic,this._handleThingUpdate)}getApproveButtonAppearance(){const t=o.ab()?"bordered":"secondary";return this.isCompactView?t:this.shouldShowConfirmRemoval||this.hasReports?"primary":(this.moderationState,m.M.REMOVED,t)}renderApproveAction(){return(this.isModMode||this.isOnModqueuePage)&&m.b(this.moderationState)?this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.moderationState===m.M.UNMODERATED?null:e.x` <mod-action-button aria-label="Approve content" data-mod-action="${s.M.ApproveContent}" button-appearance="${this.getApproveButtonAppearance()}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.P({attributes:{"aria-hidden":"true"},size:e.I.Small})}</span> <span slot="text">Approve</span> </mod-action-button> `:null}renderRemoveAction(){return(this.isModMode||this.isOnModqueuePage)&&m.c(this.moderationState)?this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.moderationState===m.M.UNMODERATED?null:e.x` <mod-action-button aria-label="Remove content" data-mod-action="${s.M.RemoveContent}" button-appearance="${o.ab()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.C({attributes:{"aria-hidden":"true"},size:e.I.Small})}</span> <span slot="text"> Remove </span> </mod-action-button> `:null}renderConfirmRemovalAction(){return(this.isModMode||this.isOnModqueuePage)&&this.shouldShowConfirmRemoval?e.x` <mod-action-button aria-label="Confirm Removal" data-mod-action="${s.M.ConfirmRemoval}" button-appearance="${o.ab()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}" thing-id="${e.l(this.thingId)}" ?smart-escalations-tracking="${this.isSmartEscalations}"> <span slot="icon" class="flex justify-center">${e.C({attributes:{"aria-hidden":"true"},size:e.I.Small})}</span> <span slot="text"> Confirm Removal </span> </mod-action-button> `:null}renderSpamAction(){return m.d({moderationState:this.moderationState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInline?e.x` <mod-action-button aria-label="Remove content as spam" data-mod-action="${s.M.RemoveContentAsSpam}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.bp({attributes:{"aria-hidden":"true"},size:e.I.Small})}</span> <span slot="text"> Spam </span> </mod-action-button> `:null}renderShareToModChatAction(){if(!m.e({isPromotedPost:this.isPromotedPost})||!this.isContentLevelModsCommsEnabled||!this.modContentDiscussionContext?.modChatChannel||!this.isOnModqueuePage||this.isOnModqueuePage&&!this.shouldShowActionInline&&!this.modContentDiscussionContext.modContentDiscussion)return null;let t=this.modContentDiscussionContext?.modContentDiscussion?`${p.g(this.modContentDiscussionContext.modContentDiscussion.chatChannel?.roomId,this.modContentDiscussionContext.modContentDiscussion.chatMessage?.id)}/thread`:p.a(this.modContentDiscussionContext?.modChatChannel?.roomId);this.modContentDiscussionContext?.modContentDiscussion||(t+=`?draft=${encodeURIComponent("https://www.reddit.com"+this.permalink)}`);const i=this.modContentDiscussionContext?.modContentDiscussion?s.M.ViewChatThread:s.M.ShareToModChat,o=this.modContentDiscussionContext?.modContentDiscussion?"Open chat thread":"Share to mod chat",n=this.modContentDiscussionContext?.modContentDiscussion?"Open chat thread":"Share to mod chat";return e.x` <faceplate-tracker source="moderator" action="click" noun="${this.modContentDiscussionContext?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.modContentDiscussionContext?.eventContext?.subredditId,name:this.modContentDiscussionContext?.eventContext?.subredditName},post:{id:this.modContentDiscussionContext?.eventContext?.postId},...this.modContentDiscussionContext?.eventContext?.roomId&&{chat:{id:this.modContentDiscussionContext?.eventContext?.roomId}},...this.modContentDiscussionContext?.eventContext?.commentId&&{comment:{id:this.modContentDiscussionContext?.eventContext?.commentId}}})}" slot="mod-share-to-mod-chat"> <share-to-mod-chat-coachmark location="${this.modContentDiscussionContext?.modContentDiscussion?"modQueueChat":"modQueue"}" view-context="${this.viewContext}"> <reddit-chat-anchor> <a href="${t}"> <div class="relative"> <mod-action-button aria-label="${o}" button-appearance="plain" data-mod-action="${i}"> <span slot="icon" class="flex justify-center"> ${e.aw({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${n} </span> </mod-action-button> </div> </a> </reddit-chat-anchor> </share-to-mod-chat-coachmark> </faceplate-tracker> `}renderFlairAction(){return this.isPost&&this.shouldShowActionInline?e.x` <mod-action-button aria-label="Open post flair modal" data-mod-action="${s.M.OpenEditPostFlairModal}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.aA({attributes:{"aria-hidden":"true"},size:e.I.Small})}</span> <span slot="text"> Flair </span> </mod-action-button>`:null}renderAddRemovalReasonAction(){return(this.isModMode||this.isOnModqueuePage)&&this.itemType!==t.a9.Award&&m.f(this.moderationState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)?e.x` <mod-action-button aria-label="Add removal reason" data-mod-action="${s.M.AddRemovalReason}" button-appearance="${o.ab()?"bordered":"secondary"}" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center">${e.u({attributes:{"aria-hidden":"true"},size:e.I.Small})}</span> <span slot="text"> Add removal reason </span> </mod-action-button> ${this.isIconOnly?e.x`<div class="separator"></div>`:null} `:null}renderCopyLinkAction(){return this.shouldShowActionInline?this.isPost?e.x`<shreddit-post-share-button ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" size="${t.s.Small}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-post-share-button>`:e.x`<shreddit-comment-share-button slot="comment-share" ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-comment-share-button>`:null}renderLockAction(){if(!this.shouldShowActionInline||this.isLocked)return null;const t="Lock";return e.x` <mod-action-button aria-label="${t}" data-mod-action="${s.M.Lock}" event-noun="lock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.bv({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderUnlockAction(){if(!this.shouldShowActionInline||!this.isLocked)return null;const t="Unlock";return e.x` <mod-action-button aria-label="${t}" data-mod-action="${s.M.Unlock}" event-noun="unlock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.aj({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderStickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||this.isStickied||this.areHighlightsEnabled)return null;const t="Sticky";return e.x` <mod-action-button aria-label="${t}" data-mod-action="${s.M.Sticky}" event-noun="sticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.bu({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderUnstickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.isStickied||this.areHighlightsEnabled)return null;const t="Unsticky";return e.x` <mod-action-button aria-label="${t}" data-mod-action="${s.M.Unsticky}" event-noun="unsticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.ak({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderAddToHighlightsAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.areHighlightsEnabled||!r.H.has(this.viewContext)||this.isHighlighted)return null;const t="Add to highlights";return e.x` <mod-action-button aria-label="${t}" data-mod-action="${s.M.UpdateHighlightedPost}" event-noun="highlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.bu({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderRemoveFromHighlightsAction(){if(!(this.isStickyable&&this.shouldShowActionInline&&this.areHighlightsEnabled&&r.H.has(this.viewContext)&&this.isHighlighted))return null;const t="Remove from highlights";return e.x` <mod-action-button aria-label="${t}" data-mod-action="${s.M.RemoveHighlightedPost}" event-noun="unhighlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.ak({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}render(){return e.x` ${this.renderAddRemovalReasonAction()} ${this.renderApproveAction()} ${this.renderRemoveAction()} ${this.renderConfirmRemovalAction()} ${this.renderShareToModChatAction()} ${this.renderSpamAction()} ${this.renderFlairAction()} ${this.renderLockAction()} ${this.renderUnlockAction()} ${this.renderCopyLinkAction()} ${this.renderStickyAction()} ${this.renderUnstickyAction()} ${this.renderAddToHighlightsAction()} ${this.renderRemoveFromHighlightsAction()} `}};T.styles=[t.t,e.a`:host{display:flex;gap:var(--spacer-xs)}.separator{border-left:1px solid rgb(0,0,0,.1);width:1px;height:32px}`],t._([t.n({type:String,attribute:"thing-id"})],T.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"feed-view-type"})],T.prototype,"feedViewType",void 0),t._([t.n({type:String,attribute:"view-context"})],T.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"item-state"})],T.prototype,"itemState",void 0),t._([t.n({type:Boolean,attribute:"has-reports"})],T.prototype,"hasReports",void 0),t._([t.n({type:Boolean,attribute:"mod-mode"})],T.prototype,"isModMode",void 0),t._([t.n({type:Boolean,attribute:"removed"})],T.prototype,"isRemoved",void 0),t._([t.n({type:Boolean,attribute:"deleted"})],T.prototype,"isDeleted",void 0),t._([t.n({type:Boolean,attribute:"locked"})],T.prototype,"isLocked",void 0),t._([t.n({type:Boolean,attribute:"stickied"})],T.prototype,"isStickied",void 0),t._([t.n({type:Boolean,attribute:"highlighted"})],T.prototype,"isHighlighted",void 0),t._([t.n({type:Boolean,attribute:"current-user-author"})],T.prototype,"isCurrentUserAuthor",void 0),t._([t.n({type:Boolean,attribute:"has-parent"})],T.prototype,"hasParent",void 0),t._([t.n({type:Boolean,attribute:"icon-only"})],T.prototype,"isIconOnly",void 0),t._([t.n({type:Boolean,attribute:"has-removal-reason"})],T.prototype,"hasRemovalReason",void 0),t._([t.n({type:String,attribute:"permalink"})],T.prototype,"permalink",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],T.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-spam-filtered-post"})],T.prototype,"isSpamFilteredPost",void 0),t._([t.n({type:Boolean,attribute:"is-profile-post"})],T.prototype,"isProfilePost",void 0),t._([t.n({type:Boolean,attribute:"is-promoted-post"})],T.prototype,"isPromotedPost",void 0),t._([t.n({type:Boolean,attribute:"has-flair-permissions"})],T.prototype,"hasFlairPermissions",void 0),t._([t.n({type:Boolean,attribute:"highlights-enabled"})],T.prototype,"areHighlightsEnabled",void 0),t._([t.n({type:Boolean,attribute:"hide-inline-actions"})],T.prototype,"hideInlineActions",void 0),t._([t.n({type:Boolean,attribute:"smart-escalations"})],T.prototype,"isSmartEscalations",void 0),t._([t.n({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],T.prototype,"isContentLevelModsCommsEnabled",void 0),t._([t.n({type:Object,attribute:"mod-content-discussion-context"})],T.prototype,"modContentDiscussionContext",void 0),t._([t.n({type:Boolean,attribute:"is-feed-no-approve-enabled"})],T.prototype,"isFeedNoApproveEnabled",void 0),t._([t.n({attribute:!1})],T.prototype,"focusChatTextareaFn",void 0),t._([t.d()],T.prototype,"moderationState",void 0),T=t._([t.e("shreddit-mod-inline-actions")],T);let v=class extends u.M{constructor(){super(...arguments),this.hasParent=!1,this.pubsub=new t.P(this),this.handleCommentUpdate=({commentId:e,action:i,value:o})=>{if(e===this.thingId)switch(i){case l.C.lock:this.isLocked=Boolean(o);break;case l.C.sticky:this.isStickied=Boolean(o);break;case l.C.distinguishAsMod:this.distinguishedAs=o?t.at.Moderator:void 0;break;case l.C.distinguishAsAdmin:this.distinguishedAs=o?t.at.Admin:void 0;break;case l.C.approve:case l.C.approveOptimistic:this.isRemoved=!1,this.hasRemovalReason=!1,this.verdict=t.am.ModApproved,this.itemState=m.M.APPROVED,this.hasReports=!1;break;case l.C.remove:case l.C.removeAsSpam:case l.C.confirmRemoval:case l.C.removeOptimistic:case l.C.removeAsSpamOptimistic:case l.C.confirmRemovalOptimistic:this.isRemoved=!0,this.verdict=t.am.ModRemoved,this.itemState=m.M.REMOVED,this.hasReports=!1;break;case l.C.addRemovalReason:this.hasRemovalReason=Boolean(o);break;case l.C.ignoreReports:this.isReportingIgnored=Boolean(o),o&&(this.isRemoved=!1,this.verdict=t.am.ModApproved,this.itemState=m.M.APPROVED)}}}get isStickyable(){return super.isStickyable&&this.isCurrentUserAuthor&&!this.hasParent}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdate)}renderActions(){return[this.renderConfirmRemovalAction(),this.renderApproveAction(),this.renderRemoveAction(),this.isContentLevelModsCommsEnabled?this.renderShareToModChatAction(this.modContentDiscussionContext):null,this.renderSpamAction(),this.renderIgnoreReportsAction(),this.renderUnignoreReportsAction(),this.renderAddRemovalReasonAction(),this.renderDistinguishAction(),this.renderUndistinguishAction(),this.renderStickyAction("Sticky comment"),this.renderUnstickyAction("Unsticky comment"),this.renderLockAction("Lock comment"),this.renderUnlockAction("Unlock comment"),this.renderCopyLinkAction()]}};t._([t.n({type:Boolean,attribute:"has-parent"})],v.prototype,"hasParent",void 0),v=t._([t.e("shreddit-comment-mod-actions-menu")],v);let R=class extends u.M{constructor(){super(...arguments),this.isNsfw=!1,this.isSpoiler=!1,this.pubsub=new t.P(this),this._handlePostUpdate=({postId:e,action:i,value:o})=>{if(e===this.thingId)switch(i){case h.a.lock:this.isLocked=Boolean(o);break;case h.a.sticky:this.isStickied=Boolean(o);break;case h.a.updateHighlightedPost:this.isHighlighted=Boolean(o);break;case h.a.distinguishAsMod:this.distinguishedAs=o?t.at.Moderator:void 0;break;case h.a.approveOptimistic:case h.a.approve:this.isRemoved=!1,this.hasRemovalReason=!1,this.verdict=t.am.ModApproved,this.itemState=m.M.APPROVED,this.hasReports=!1,this.requestUpdate();break;case h.a.remove:case h.a.removeAsSpam:case h.a.confirmRemoval:case h.a.removeOptimistic:case h.a.removeAsSpamOptimistic:case h.a.confirmRemovalOptimistic:this.isRemoved=!0,this.verdict=t.am.ModRemoved,this.itemState=m.M.REMOVED,this.hasReports=!1;break;case h.a.addRemovalReason:this.hasRemovalReason=Boolean(o);break;case h.a.markAsNsfw:this.isNsfw=Boolean(o);break;case h.a.markAsSpoiler:this.isSpoiler=Boolean(o);break;case h.a.ignoreReports:this.isReportingIgnored=Boolean(o),o&&(this.isRemoved=!1,this.verdict=t.am.ModApproved,this.itemState=m.M.APPROVED)}}}get isStickyable(){return super.isStickyable}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.PostUpdated,this._handlePostUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub.unsubscribe(t.T.PostUpdated,this._handlePostUpdate)}renderMarkAsNsfwAction(){return this.isDeleted||this.isNsfw?null:E.l({leadingIcon:e.bD(),label:"Add NSFW tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleMarkNsfw)})}renderUnmarkAsNsfwAction(){return this.isDeleted||!this.isNsfw?null:E.l({leadingIcon:e.w(),label:"Remove NSFW tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnmarkNsfw)})}renderMarkAsSpoilerAction(){return this.isDeleted||this.isSpoiler?null:E.l({leadingIcon:e.a3(),label:"Add spoiler tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleMarkSpoiler)})}renderUnmarkAsSpoilerAction(){return this.isDeleted||!this.isSpoiler?null:E.l({leadingIcon:e.z(),label:"Remove spoiler tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnmarkSpoiler)})}renderAdjustCrowdControlAction(){return this.isPromotedPost?null:E.l({leadingIcon:e.bY(),label:"Adjust crowd control",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAdjustCrowdControl)})}renderActions(){return[this.renderConfirmRemovalAction(),this.renderApproveAction(),this.renderRemoveAction(),this.isContentLevelModsCommsEnabled?this.renderShareToModChatAction(this.modContentDiscussionContext):null,this.renderSpamAction(),this.renderIgnoreReportsAction(),this.renderUnignoreReportsAction(),this.renderAddRemovalReasonAction(),this.renderDistinguishAction(),this.renderUndistinguishAction(),this.renderStickyAction("Sticky post"),this.renderUnstickyAction("Unsticky post"),this.renderAddToHighlightsAction(),this.renderRemoveFromHighlightsAction(),this.renderLockAction("Lock comments"),this.renderUnlockAction("Unlock comments"),this.renderEditPostFlairAction("Edit post flair"),this.renderMarkAsNsfwAction(),this.renderUnmarkAsNsfwAction(),this.renderMarkAsSpoilerAction(),this.renderUnmarkAsSpoilerAction(),this.renderAdjustCrowdControlAction(),this.renderCopyLinkAction()]}};t._([t.n({type:Boolean,attribute:"nsfw"})],R.prototype,"isNsfw",void 0),t._([t.n({type:Boolean,attribute:"spoiler"})],R.prototype,"isSpoiler",void 0),R=t._([t.e("shreddit-post-mod-actions-menu")],R);const S=t.C(e.s);let A=class extends S{constructor(){super(...arguments),this.isEnoughParentWidth=!1,this.removed=!1,this.thingId="",this.shouldIgnoreParentWidth=!1,this.minWidthToShowLabel=460,this.onCommentUpdateAction=t=>{if(t.commentId!==this.thingId)return;const{action:e}=t;switch(e){case l.C.approve:case l.C.approveOptimistic:this.removed=!1;break;case l.C.remove:case l.C.removeAsSpam:case l.C.confirmRemoval:case l.C.removeOptimistic:case l.C.removeAsSpamOptimistic:case l.C.confirmRemovalOptimistic:this.removed=!0}},this.onPostUpdateAction=t=>{if(t.postId!==this.thingId)return;const{action:e}=t;switch(e){case h.a.approve:case h.a.approveOptimistic:this.removed=!1;break;case h.a.remove:case h.a.removeAsSpam:case h.a.confirmRemoval:case h.a.removeOptimistic:case h.a.removeAsSpamOptimistic:case h.a.confirmRemovalOptimistic:this.removed=!0}},this.onAwardOnContentUpdateAction=t=>{if(t.awardOnContentId!==this.thingId)return;const{action:e}=t;switch(e){case d.A.approve:this.removed=!1;break;case d.A.remove:case d.A.confirmRemoval:this.removed=!0}}}connectedCallback(){this.initializeResizeObserver(),this.subscribe(t.T.PostUpdated,this.onPostUpdateAction),this.subscribe(t.T.CommentUpdated,this.onCommentUpdateAction),this.subscribe(t.T.AwardOnContentUpdated,this.onAwardOnContentUpdateAction),super.connectedCallback()}disconnectedCallback(){this.resizeObserver?.disconnect(),this.unsubscribe(t.T.PostUpdated,this.onPostUpdateAction),this.unsubscribe(t.T.CommentUpdated,this.onCommentUpdateAction),this.unsubscribe(t.T.AwardOnContentUpdated,this.onAwardOnContentUpdateAction),super.disconnectedCallback()}initializeResizeObserver(){const t=a.g(this);t&&(this.resizeObserver=new ResizeObserver((t=>{for(const e of t){const t=e.contentRect.width>=this.minWidthToShowLabel;t!==this.isEnoughParentWidth&&(this.isEnoughParentWidth=t)}})),this.resizeObserver.observe(t))}render(){return e.x` <span class="inline-flex items-center gap-xs text-12 text-neutral-content w-full"> <div class="relative"> <slot name="verdict-indicator-avatar"></slot> <div aria-hidden="true" class="absolute bottom-0 -right-px flex justify-center items-center h-md w-md rounded-full border-solid border-md border-neutral-background scale-75 origin-bottom-right translate-y-px ${this.removed?"bg-red-200 text-red-700":"bg-kiwigreen-200 text-kiwigreen-700"}"> ${this.removed?e.aG({size:e.I.ExtraSmall}):e.E({size:e.I.ExtraSmall})} </div> </div> ${this.shouldShowLabel?e.x`<slot name="verdict-indicator-label"></slot>`:""} </span> `}get shouldShowLabel(){return this.shouldIgnoreParentWidth||this.isEnoughParentWidth}};A.styles=[t.t],t._([t.d()],A.prototype,"isEnoughParentWidth",void 0),t._([t.n({type:Boolean,reflect:!0})],A.prototype,"removed",void 0),t._([t.n({type:String,attribute:"thing-id"})],A.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"ignore-parent-width"})],A.prototype,"shouldIgnoreParentWidth",void 0),A=t._([t.e("mod-verdict-indicator-component")],A);let C=class extends e.s{constructor(){super(...arguments),this.iconOnly=!1,this.pubsub=new t.P(this),this.handleCommentUpdate=({commentId:t,action:e,value:i})=>{if(t===this.thingId)switch(e){case l.C.addRemovalReason:this.hasRemovalReason=Boolean(i);break;case l.C.approve:case l.C.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case l.C.remove:case l.C.removeAsSpam:case l.C.removeOptimistic:case l.C.removeAsSpamOptimistic:case l.C.confirmRemovalOptimistic:this.hasRemovalReason=!1,this.isRemoved=!0}},this.handlePostUpdate=({postId:t,action:e,value:i})=>{if(t===this.thingId)switch(e){case h.a.addRemovalReason:this.hasRemovalReason=Boolean(i);break;case h.a.approve:case h.a.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case h.a.remove:case h.a.removeAsSpam:case h.a.removeOptimistic:case h.a.removeAsSpamOptimistic:case h.a.confirmRemovalOptimistic:this.isRemoved=!0,this.hasRemovalReason=!1}},this.updateModVerdict=t=>{const e=this.closest('[slot="mod-verdict"]');t&&this.isRemoved?e?.setAttribute("show-removal-reason-cta",""):e?.removeAttribute("show-removal-reason-cta")},this.shouldShowCta=()=>{const t=this.isRemoved?m.M.REMOVED:m.M.UNMODERATED;return m.f(t,!!this.hasRemovalReason,!!this.isContentSpamFilteredPost,this.isProfilePost)}}connectedCallback(){super.connectedCallback();const e=a.g(this);this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.contentRect.width<500?this.iconOnly=!0:this.iconOnly=!1})),e&&this.resizeObserver.observe(e),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdate),this.pubsub.subscribe(t.T.PostUpdated,this.handlePostUpdate),this.updateModVerdict(!this.hasRemovalReason)}disconnectedCallback(){super.disconnectedCallback();const e=a.g(this);e&&this.resizeObserver.unobserve(e),this.resizeObserver.disconnect(),this.pubsub.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdate),this.pubsub.unsubscribe(t.T.PostUpdated,this.handlePostUpdate)}updated(t){super.updated(t),t.has("hasRemovalReason")&&this.updateModVerdict(!this.hasRemovalReason)}render(){return this.hasRemovalReason||!this.shouldShowCta()?e.A:e.x` <mod-action-button aria-label="Add removal reason" data-mod-action="${s.M.AddRemovalReason}" button-appearance="secondary" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center"> ${e.u({attributes:{"aria-hidden":"true"},size:e.I.Small})} </span> <span slot="text" class="flex"> ${this.iconOnly?e.u({attributes:{"aria-hidden":"true"},size:e.I.Small}):"Add removal reason"} </span> </mod-action-button> `}};C.styles=[t.t],t._([t.n({type:String,attribute:"thing-id"})],C.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"has-removal-reason"})],C.prototype,"hasRemovalReason",void 0),t._([t.d()],C.prototype,"iconOnly",void 0),t._([t.n({type:Boolean,attribute:"is-removed"})],C.prototype,"isRemoved",void 0),t._([t.n({type:Boolean,attribute:"is-content-spam-filtered-post"})],C.prototype,"isContentSpamFilteredPost",void 0),t._([t.n({type:Boolean,attribute:"is-profile-post"})],C.prototype,"isProfilePost",void 0),C=t._([t.e("responsive-add-removal-reason-cta")],C)}));
SML.dm("modcontentstateindicatorsclientjs3a235108",["shelle48e5956","comment5b02ad76","distinguishedtags1c4757ea","overflowmenuactionsf8d12b95","iconc33661e6","expandablesectionheader41e0cfd1","links22118b0c","faceplatetooltipf30979fb","selectcontroller4c63b3e8","tablepagination77cf692d","moddropdowncloser6b014290","userflairfe275854","agegatestandaloneclientjsb13e879d"],(async(t,e,o,s,n,r,a)=>{let i=class extends(t.C(n.s)){constructor(){super(...arguments),this.status=o.R.Reported,this.handlePostUpdate=({postId:t,action:e,value:n})=>{t===this.thingId&&e===s.a.ignoreReports&&(this.status=n?o.R.Ignored:o.R.Dismissed)},this.handleCommentUpdate=({commentId:t,action:s,value:n})=>{t===this.thingId&&s===e.C.ignoreReports&&(this.status=n?o.R.Ignored:o.R.Dismissed)}}connectedCallback(){super.connectedCallback(),this.subscribe(t.T.PostUpdated,this.handlePostUpdate),this.subscribe(t.T.CommentUpdated,this.handleCommentUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(t.T.PostUpdated,this.handlePostUpdate),this.unsubscribe(t.T.CommentUpdated,this.handleCommentUpdate)}getStyle(){return n.o({"--list-icon-color":this.status===o.R.Reported?"var(--shreddit-color-mods-reported-onBackground)":"var(--color-secondary-onBackground)"})}render(){return this.status===o.R.Reported?n.x`<div class="bg-mods-reported-background hover:bg-mods-reported-background-hover" style="${this.getStyle()}"> <slot></slot> </div>`:n.x`<details class="max-w-fit bg-secondary-background hover:bg-secondary-background-hover" style="${this.getStyle()}"> <summary class="cursor-pointer block list-none" @click="${t=>t.stopPropagation()}"> <slot name="${this.status}"></slot> </summary> <slot></slot> </details>`}};i.styles=[n.a`summary::-webkit-details-marker{display:none}`,t.t],t._([t.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),t._([t.n({type:String})],i.prototype,"status",void 0),i=t._([t.e("reports-summary-wrapper")],i);const d=n.s;let c=class extends d{constructor(){super(...arguments),this.contentId="",this.isSnoozed=!1,this.reportReason="",this.pubsub=new t.P(this),this.onPostUpdateAction=t=>{if(t.postId!==this.contentId)return;const{action:e}=t;switch(e){case s.a.snoozeReporter:this.isSnoozed=!0;break;case s.a.unsnoozeReporter:this.isSnoozed=!1}},this.onCommentUpdateAction=t=>{if(t.commentId!==this.contentId)return;const{action:o}=t;switch(o){case e.C.snoozeReporter:this.isSnoozed=!0;break;case e.C.unsnoozeReporter:this.isSnoozed=!1}}}connectedCallback(){super.connectedCallback(),a.l(this.contentId)?this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction):this.pubsub.subscribe(t.T.CommentUpdated,this.onCommentUpdateAction)}disconnectedCallback(){super.disconnectedCallback(),a.l(this.contentId)?this.pubsub.unsubscribe(t.T.PostUpdated,this.onPostUpdateAction):this.pubsub.unsubscribe(t.T.CommentUpdated,this.onCommentUpdateAction)}renderReportOverflowMenu(){return n.x` <mod-dropdown-closer> <faceplate-dropdown-menu @click="${t=>t.stopPropagation()}" position="bottom-end"> ${t.r({appearance:"plain",size:t.s.ExtraSmall,children:n.ai({size:n.I.ExtraSmall})})} <faceplate-menu slot="menu"> ${r.l({label:this.isSnoozed?"Un-snooze reporter":"Snooze reporter",description:this.isSnoozed?"Receive reports from this user again":"Pause reports from this user for 7 days",leadingIcon:n.aF({size:n.I.Small}),onClick:this.toggleSnooze})} </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer> `}sendTrackingEvent(e,o,s){const n=s?"snoozereports":"unsnoozereports",r=a.l(e)?"post":"comment",i=a.l(e)?e:null,d=a.l(e)?null:e,c=t.b({source:"moderator",action:n,noun:r},{...i&&{post:{id:i}},...d&&{comment:{id:d}},...o&&{action_info:{reason:o}}});t.a(this,c)}showToast({success:e,isSnoozed:o}){const s=e?o?"Reports from these users will be paused":"Reports from these users will be resumed":"Failed to update reports",n=e?t.x.info:t.x.error,r=t.c("faceplate-alert",{level:n,message:s});this.dispatchEvent(r)}async updateReportState(e){try{const{data:o}=await t.B({operation:t.O.UpdateReportState,variables:{input:{itemId:this.contentId,reportText:this.reportReason,isSnoozed:e}}});return o?.updateReport?.ok??!1}catch(t){return!1}}async toggleSnooze(o){const n=!this.isSnoozed;this.sendTrackingEvent(this.contentId,this.reportReason,n);const r=await this.updateReportState(n);r&&(n?a.l(this.contentId)?this.pubsub.publish(t.T.PostUpdated,{postId:this.contentId,action:s.a.snoozeReporter,value:!0}):this.pubsub.publish(t.T.CommentUpdated,{commentId:this.contentId,action:e.C.snoozeReporter,value:!0}):a.l(this.contentId)?this.pubsub.publish(t.T.PostUpdated,{postId:this.contentId,action:s.a.unsnoozeReporter,value:!0}):this.pubsub.publish(t.T.CommentUpdated,{commentId:this.contentId,action:e.C.unsnoozeReporter,value:!0})),this.showToast({success:r,isSnoozed:this.isSnoozed})}render(){const e={"flex items-center m-0 p-0":!0,"bg-secondary-background":this.isSnoozed};return n.x`<li class="${t.U(e)}"> <slot name="${n.l(this.isSnoozed?"snoozed":void 0)}" class="flex-auto block"></slot> ${this.renderReportOverflowMenu()} </li> `}};c.styles=[t.t],t._([t.n({type:String,attribute:"content-id"})],c.prototype,"contentId",void 0),t._([t.n({type:Boolean,attribute:"is-snoozed"})],c.prototype,"isSnoozed",void 0),t._([t.n({type:String,attribute:"report-reason"})],c.prototype,"reportReason",void 0),c=t._([t.e("user-report-summary")],c)}));
SML.dm("zoomableimgd46c7c63",["shelle48e5956","agegatestandaloneclientjsb13e879d","iconc33661e6"],(async(e,t,i)=>{let s=class extends i.s{constructor(){super(...arguments),this.zoomedIn=!1,this.disabled=!1,this.media=null,this._events=new e.E(this),this._click=this._events.define("click",this.onClick),this.fullImageWidth=0,this.fullImageHeight=0,this.checkMediaSize=()=>{this.media?.complete&&(this.fullImageWidth=this.media.naturalWidth,this.fullImageHeight=this.media.naturalHeight,this.disabled=this.fullImageWidth<=this.clientWidth&&this.fullImageHeight<=this.clientHeight,this.zoomedIn=!this.disabled&&this.zoomedIn)},this.checkMediaSizeDebounced=e.aB(this.checkMediaSize,100)}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.media=this.querySelector("img"),this.media&&this.media.addEventListener("load",this.checkMediaSize,{once:!0}),requestAnimationFrame(this.checkMediaSize),window.addEventListener("resize",this.checkMediaSizeDebounced)}firstUpdated(){this.checkMediaSize()}onClick(e){if(this.media&&e.target===this.media&&!this.disabled){let t=0,i=0;if(!this.zoomedIn){const s=this.media.getBoundingClientRect(),l=e.clientX-s.left,h=e.clientY-s.top,a=l/s.width*100,o=h/s.height*100;i=this.fullImageWidth*a/100-this.clientWidth/2,t=this.fullImageHeight*o/100-this.clientHeight/2}this.zoomedIn=!this.zoomedIn,requestAnimationFrame((()=>{this.scrollTo({top:t,left:i})}))}}render(){this.media&&this.media.setAttribute("class",this.getChildClassList()),this.setAttribute("class",this.getClasslist())}getClasslist(){return t.o("flex",this.zoomedIn?"fixed top-0 left-0 w-screen h-screen overflow-auto":"w-full h-full justify-center items-center overflow-hidden")}getChildClassList(){return t.o("z-1",this.disabled?"max-h-full max-w-full":this.zoomedIn?"max-w-none max-h-none m-auto cursor-zoom-out":"max-h-full max-w-full object-contain cursor-zoom-in")}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.checkMediaSizeDebounced),this.zoomedIn=!1}};e._([e.d()],s.prototype,"zoomedIn",void 0),e._([e.d()],s.prototype,"disabled",void 0),s=e._([e.e("zoomable-img")],s)}));

SML.dm("sharebuttond9f84027",["shelle48e5956","index192b5d82","iconc33661e6"],(async(e,s,t)=>{let a=class extends t.s{constructor(){super(...arguments),this.isDesktopViewport=!1,this.handleShareClick=async t=>{const a=t.target;if(await s.s({text:window.location.href},this.isDesktopViewport)===s.S.Clipboard){const s=e.c("faceplate-alert",{level:e.x.success,message:"Link copied"});a?.dispatchEvent(s)}}}render(){return t.x`<slot @click="${this.handleShareClick}"></slot>`}};a.styles=[e.t],e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],a.prototype,"isDesktopViewport",void 0),a=e._([e.e("share-action")],a);return{r:({html:s,size:a,className:i,ariaLabel:l,appearance:o="plain",isDesktopViewport:r})=>s`<share-action class="nd:visible" ?is-desktop-viewport="${r}"> ${e.r({appearance:o,shape:"pill",size:a===e.s.Small?e.s.Small:e.s.Medium,leadingIcon:t.a$({size:a===e.s.Small?t.I.Small:t.I.Medium}),attributes:{type:"button",className:i,"aria-label":l}})} </share-action>`}}));
SML.dm("cardnaming4107601d",["shelle48e5956","agegatestandaloneclientjsb13e879d"],(async(t,e)=>{var a;!function(t){t.Listing="listing",t.Import="import",t.Item="item"}(a||(a={}));return{get P(){return a},a:{saveAvatar:"avatar-action-bar:save-avatar"},c:function(t){return parseInt(t,10)/100},f:function(t,e="en-US"){return t.toLocaleString(e,{minimumFractionDigits:2,maximumFractionDigits:2})},g:function(t,e){return`${Math.max(e-t,0)} of ${e} left`},p:{closeButtonClick:"product-detail-card-view:close-btn-click",backButtonClick:"product-detail-card-view:back-btn-click",buyNowClick:"product-detail-card-view:buy-now-click",equipAvatar:"product-detail-card-view:equip-avatar"},r:(a,{dropSize:r,dropRarity:i,nftTitle:n})=>{const c=function(a,r){if(a)return e.bL(a,{removeZeroDecimal:!0});if(r)switch(r){case t.h8.Legendary:return"1";case t.h8.Epic:return"100";case t.h8.Rare:return"101+";case t.h8.Test:return"∞"}return null}(r,i),o="[text-shadow:1px_0_0_var(--color-media-background),-1px_0_0_var(--color-media-background),0_1px_0_var(--color-media-background),0_-1px_0_var(--color-media-background)]";return a` <div class="flex items-center absolute bottom-[var(--rem20)] left-[var(--rem20)]"> ${c?a`<div class="w-lg text-10 text-center" data-testid="card-range"> <div class="text-white rounded-t-sm border-solid border-md border-b-0 border-puregray-900 ${o}"> 1 </div> <div class="text-white bg-puregray-900 rounded-b-sm">${c}</div> </div>`:e._} <span class="ml-md text-white text-18 font-bold ${o}" data-testid="card-title">${n}</span> </div> `},v:{afterClose:"view-avatar-outfit-modal:after-close"}}}));
SML.dm("routing1f7880ca",[],(async()=>{var t,a,o,r;return function(t){t.OutfitTile="outfit-tile",t.PDP="pdp",t.DisplayCollection="display-collection"}(t||(t={})),function(t){t.OutfitImage="outfit-image",t.BackButton="back-button",t.CloseButton="close-button",t.BuyCta="buy-cta"}(a||(a={})),function(t){t.AvatarShop="avatar-shop",t.DisplayCollectibles="display-collectibles"}(o||(o={})),function(t){t.SHOP="/avatar/shop",t.ARTISTS_LIST="/avatar/shop/artists",t.ARTIST_DETAILS="/avatar/shop/artist/:path",t.ALL_CATEGORIES="/avatar/shop/categories/:path",t.CATEGORY_DETAILS="/avatar/shop/category/:path",t.GALLERY="/avatar/shop/gallery",t.OUTFIT_DETAILS="/avatar/shop/product/:path"}(r||(r={})),{get M(){return o},get S(){return r},get a(){return a},get b(){return t}}}));
SML.dm("closebuttone83fb375",["cardnaming4107601d","routing1f7880ca","agegatestandaloneclientjsb13e879d","shelle48e5956","iconc33661e6"],(async(t,e,a,n,o)=>{const s=a.h(e.S.OUTFIT_DETAILS),i=t=>{window.history.pushState({previous:window.location.pathname+window.location.search},"",t)},r=({defaultRoute:t})=>{window.history.replaceState({},"",window.history.state?.previous||t)},l=()=>document.querySelector("shop-flow-manager");return{a:()=>{const t=l();t?.previous()},b:(e,a=t.P.Listing)=>{const n=l();n?.start({entityId:e,pdpType:a}),i(s({path:e}))},c:()=>{const t=l();t?.reset(),r({defaultRoute:e.S.SHOP})},d:t=>{const e=l();e?.start(),i(`/user/${t}/display-collectibles/`)},e:e=>{const a=l();a?.next({entityId:e,pdpType:t.P.Item})},f:t=>{const e=l();e?.reset(),r({defaultRoute:`/user/${t}/`})},g:l,o:({start:e,entityId:a,pdpType:n=t.P.Listing})=>{const o=l();e&&o?.start({entityId:a,pdpType:n}),o?.next()},r:({appearance:t="plain",size:e=n.s.Small,onClick:a,ariaLabel:s})=>n.r({appearance:t,attributes:{type:"button",onclick:a,"aria-label":s},shape:"pill",size:e,leadingIcon:o.C({size:e})})}}));
SML.dm("displaycollectibleviewdatafetcherclientjs2865e1f1",["shelle48e5956","sharebuttond9f84027","iconc33661e6","closebuttone83fb375","agegatestandaloneclientjsb13e879d","index192b5d82","cardnaming4107601d","routing1f7880ca"],(async(e,t,l,s,a)=>{var r;!function(e){e.Empty="empty",e.Ready="ready"}(r||(r={}));let i=class extends l.s{constructor(){super(...arguments),this.collection=[],this.ownerProfileForegroundImage=null,this.ownerProfileBackgroundImage=null,this.viewTitle=null,this.username="",this.isDesktopViewport=!1,this.handleOutfitClick=e=>{s.e(e.id)},this.handleCloseViaOverlay=()=>{null===this.closest("marketplace-centered-modal")?.getAttribute("is-closed")&&this.handleClose()},this.handleClose=()=>{this.username&&s.f(this.username)},this.getModalDisplayState=()=>this.collection?.length&&a.bO(this.ownerProfileForegroundImage)?r.Ready:r.Empty,this.renderTitle=()=>l.x`<h2 class="m-0 mt-xl embed-m:mt-md text-center text-tone-1 font-sans leading-6 text-20 font-semibold flex"> <img src="https://www.redditstatic.com/crypto-assets/v1/cards/nft-icon.svg" class="w-lg h-lg mr-xs" alt=""> Owned by ${this.viewTitle} </h2>`,this.renderHeaderImage=()=>l.x`<div class="relative shadow-xs w-[210px] embed-m:w-[180px] aspect-[3/4] rounded-5 bg-secondary-background flex-shrink-0"> ${this.ownerProfileBackgroundImage?l.x`<img src="${this.ownerProfileBackgroundImage}" loading="lazy" alt="" class="h-full w-full">`:l.A} ${this.ownerProfileForegroundImage?l.x`<img src="${this.ownerProfileForegroundImage}" loading="lazy" alt="" class="absolute bottom-[9%] w-[69%] left-1/2 -translate-x-1/2">`:l.A} <img src="https://www.redditstatic.com/crypto-assets/v1/cards/nft-icon.svg" class="absolute right-md top-md z-1 w-lg h-lg" alt=""> </div>`,this.renderEmpty=()=>l.x`<div class="self-center w-[210px] aspect-[3/4] rounded-5 shadow-xs bg-secondary-background"></div> ${this.renderTitle()} <div class="grid gap-md mx-lg mt-lg grid-cols-5 w-full"> ${[...Array(5)].map((()=>l.x` <div class="rounded-[9%/6.8%] shadow-xs w-full aspect-[3/4] bg-secondary-background"></div> `))} </div>`,this.renderContent=()=>l.x` ${this.renderHeaderImage()} ${this.renderTitle()} <ul class="grid gap-md mt-lg grid-cols-5 embed-m:grid-cols-3 list-none px-0 w-full"> ${this.collection.map((e=>{const t=e.node.item;return l.x` <li class="w-full aspect-[3/4]"> <button class="border-none border-0 p-0 m-0 leading-[0] cursor-pointer rounded-[9%/6.8%] bg-secondary-background relative w-full h-full" aria-label="View ${t.name} #${t.serialNumber}" @click="${()=>this.handleOutfitClick(t)}"> <img src="https://www.redditstatic.com/crypto-assets/v1/cards/nft-icon.svg" class="absolute right-sm embed-m:right-xs top-sm embed-m:top-xs z-1 w-lg h-lg" alt=""> <img src="${t.images[0].url}" loading="lazy" alt="" class="object-cover w-full"> </button> </li> `}))} </ul> `}connectedCallback(){super.connectedCallback(),document.addEventListener("dismiss-overlay",this.handleCloseViaOverlay)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("dismiss-overlay",this.handleCloseViaOverlay)}render(){const i=this.getModalDisplayState();return l.x`<div class="absolute top-lg right-lg embed-m:right-xs flex"> ${t.r({html:l.x,size:e.s.Small,className:"mr-xs embed-m:mr-0",ariaLabel:"Share a link to your collection",isDesktopViewport:this.isDesktopViewport})} ${s.r({onClick:this.handleClose,ariaLabel:"Close the collection page"})} </div> <div class="flex flex-col w-full h-full box-border"> <div class="flex-grow p-lg overflow-scroll flex flex-col items-center"> ${a.ch(i,[[r.Empty,this.renderEmpty],[r.Ready,this.renderContent]])} </div> </div> ${i===r.Empty?l.x`<faceplate-alert level="error" message="Collection disabled!"></faceplate-alert>`:l.A} `}};i.styles=[e.t],e._([e.n({type:Array})],i.prototype,"collection",void 0),e._([e.n({type:String,attribute:"owner-profile-foreground-image"})],i.prototype,"ownerProfileForegroundImage",void 0),e._([e.n({type:String,attribute:"owner-profile-background-image"})],i.prototype,"ownerProfileBackgroundImage",void 0),e._([e.n({type:String,attribute:"view-title"})],i.prototype,"viewTitle",void 0),e._([e.n({type:String})],i.prototype,"username",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],i.prototype,"isDesktopViewport",void 0),i=e._([e.e("display-collectibles-view")],i)}));
SML.dm("carousel58c5a0eb",["shelle48e5956","iconc33661e6"],(async(t,e)=>{let s=class extends e.s{constructor(){super(...arguments),this.totalPages=0,this.currentPage=0,this.alwaysShowNavigation=!1,this.useAbsoluteNavigation=!1,this.customPreviousButtonClass="",this.customNextButtonClass="",this.scrollPercentage=1,this.carouselContainerRef=t.aq(),this.carouselRef=t.aq(),this.getCarouselWidth=()=>{const t=window.getComputedStyle(this.carouselContainerRef.value);return Math.round(this.carouselContainerRef.value.scrollWidth)+parseInt(t.marginLeft,10)+parseInt(t.marginRight,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10)},this.getParentWidth=()=>Math.round(this.carouselRef.value.getBoundingClientRect().width)*this.scrollPercentage,this.goToPage=t=>{const e=this.getParentWidth(),s=this.getCarouselWidth();let a=0;"next"===t&&this.currentPage<this.totalPages?(this.currentPage+=1,a=this.currentPage===this.totalPages?s-e:Math.min(this.currentPage*e,s)):"previous"===t&&this.currentPage>0&&(this.currentPage-=1,a=this.currentPage*e),this.carouselContainerRef.value.style.setProperty("transform",`translateX(-${a}px)`)},this.calculatePages=()=>{const t=this.getParentWidth(),e=this.getCarouselWidth();this.totalPages=Math.ceil(e/t)-1},this.setupCarousel=()=>{this.calculatePages(),this.currentPage=0,this.carouselContainerRef.value.style.setProperty("transform","translateX(0px)")},this.handleResize=()=>{clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=setTimeout(this.setupCarousel,200)},this.handlePreviousClick=t=>{this.goToPage("previous");const e=new CustomEvent("marketplace-carousel:previous-page",{detail:t});this.dispatchEvent(e)},this.handleNextClick=t=>{this.goToPage("next");const e=new CustomEvent("marketplace-carousel:next-page",{detail:t});this.dispatchEvent(e)}}get shouldShowNextButton(){return this.currentPage<this.totalPages||this.alwaysShowNavigation}get shouldShowPreviousButton(){return this.currentPage>0||this.alwaysShowNavigation}connectObserver(){this.observer=new IntersectionObserver((t=>{const e=t[0];e?.isIntersecting&&this.calculatePages()}),{root:null,threshold:.1}),this.observer.observe(this)}disconnectObserver(){this.observer?.disconnect?.()}firstUpdated(){this.setupCarousel()}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize),this.connectObserver()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.handleResize),this.disconnectObserver()}render(){return e.x` <div class="grid grid-flow-col relative overflow-hidden isolate"> ${this.shouldShowPreviousButton?e.x` ${t.r({attributes:{className:`${this.useAbsoluteNavigation?"absolute top-1/2 -translate-y-1/2 left-sm z-1":""} ${this.customPreviousButtonClass} border-0`,onclick:this.handlePreviousClick,disabled:0===this.currentPage},appearance:"secondary",size:t.s.Medium,leadingIcon:e.ae({size:e.I.Medium})})} `:e.A} <div class="relative overflow-hidden isolate" ${t.as(this.carouselRef)}> <div class="transition-transform box-border" ${t.as(this.carouselContainerRef)} data-container> <div class="grid grid-flow-col" data-content> <slot @slotchange="${this.setupCarousel}"></slot> </div> </div> </div> ${this.shouldShowNextButton?e.x` ${t.r({attributes:{className:`${this.useAbsoluteNavigation?"absolute top-1/2 -translate-y-1/2 right-sm z-1":""} ${this.customNextButtonClass} border-0`,disabled:this.currentPage===this.totalPages,onclick:this.handleNextClick},appearance:"secondary",size:t.s.Medium,leadingIcon:e.af({size:e.I.Medium})})} `:e.A} </div> `}};s.styles=[e.a`:host{--marketplace-carousel-content-margin:0px;--marketplace-carousel-content-gap:0px;--marketplace-carousel-content-rows:1}[data-container]{width:max-content}[data-content]{margin:var(--marketplace-carousel-content-margin);gap:var(--marketplace-carousel-content-gap);grid-template-rows:repeat(var(--marketplace-carousel-content-rows),minmax(0,1fr))}`,t.t],t._([t.d()],s.prototype,"totalPages",void 0),t._([t.d()],s.prototype,"currentPage",void 0),t._([t.n({type:Boolean,attribute:"always-show-navigation"})],s.prototype,"alwaysShowNavigation",void 0),t._([t.n({type:Boolean,attribute:"use-absolute-navigation"})],s.prototype,"useAbsoluteNavigation",void 0),t._([t.n({type:String,attribute:"custom-previous-button-class"})],s.prototype,"customPreviousButtonClass",void 0),t._([t.n({type:String,attribute:"custom-next-button-class"})],s.prototype,"customNextButtonClass",void 0),t._([t.n({type:Number,attribute:"scroll-percentage"})],s.prototype,"scrollPercentage",void 0),s=t._([t.e("marketplace-carousel")],s)}));
SML.dm("utilitiesListf4e8746b",["agegatestandaloneclientjsb13e879d","shelle48e5956","cardnaming4107601d","iconc33661e6","carousel58c5a0eb"],(async(e,t,r,i)=>{const s=(e,t,{nftTitle:i,nftAvatarImageUrl:s,dropRarity:o,dropSize:l})=>e`<div class="overflow-hidden absolute w-full h-full top-0 left-0 rounded-[9%/6.8%] bg-alienblue-700 leading-[0] [backface-visibility:hidden] [transform:translate3d(0,0,0)]"> <img class="w-100 h-100" src="${s}" alt=""> <img src="${t}assets/marketplace/nft-icon.svg" class="absolute top-md right-md w-xl h-xl hover:scale-110 transition-[transform] duration-200 cursor-pointer" alt=""> ${r.r(e,{nftTitle:i,dropRarity:o,dropSize:l})} </div>`;const o=(t,{nftTitle:r,dropSize:i,serialNumber:s,series:o,mintDate:l})=>t`<div class="absolute w-full h-full top-0 left-0 rounded-[9%/6.8%] bg-alienblue-700 [transform:rotateY(180deg)] [backface-visibility:hidden]"> <div class="absolute bottom-lg px-lg pt-lg text-global-white w-full box-border"> <ol class="list-none rounded-1 border-[1px] border-solid border-coolgray-100 p-0 m-0"> ${s?t`<li class="flex justify-between items-center py-2xs px-xs"> <div class="shrink-0 mr-md"> Serial Number </div> <div class="text-right">${s}</div> </li>`:e._} ${i?t`<li class="flex justify-between items-center py-2xs px-xs border-t-coolgray-100 border-0 border-t-[1px] border-solid"> <div class="shrink-0 mr-md"> Series Size </div> <div class="text-right">${i}</div> </li>`:e._} ${o?t`<li class="flex justify-between items-center py-2xs px-xs border-t-coolgray-100 border-0 border-t-[1px] border-solid"> <div class="shrink-0 mr-md"> Series </div> <div class="text-right">${o}</div> </li>`:e._} ${l?t`<li class="flex justify-between items-center py-2xs px-xs border-t-coolgray-100 border-0 border-t-[1px] border-solid"> <div class="shrink-0 mr-md"> Mint Day </div> <div class="text-right">${function(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`}(l)}</div> </li>`:e._} <li class="flex justify-between items-center py-2xs px-xs border-t-coolgray-100 border-0 border-t-[1px] border-solid"> <div class="shrink-0 mr-md">Name</div> <div class="text-right">${r}</div> </li> </ol> </div> </div>`,l=e=>`utility-info-${e}`;return{a:({utilities:e,shadowRoot:r})=>{const s=(e?.length||0)>1,o=(e?.length||0)>3,a=i.x` ${e?.map(((a,d)=>{const n=d===e.length-1,{id:c,type:{icon:b,title:u}}=a;if(!b.url||!u)return i.A;return i.x`<button data-testid="utility-block" @click="${()=>{const e=r?.getElementById(l(c));return e?.scrollIntoView({behavior:"smooth"})}}" class="${t.U({"flex box-content justify-center items-center px-md py-sm font-semibold text-white cursor-pointer bg-transparent border-0 ":!0,"gap-md":!s,"flex-col gap-xs text-center":s,"border-r-md border-black border-opacity-30 border-double":s&&!n,"w-[64px]":o})}"> <img class="w-[20px] h-[20px]" src="${b.url}" alt="${u}"> <strong class="text-10">${u}</strong> </button>`}))} `;return i.x` <div class="${t.U({flex:!o,"relative bg-opacity-60 bg-media-background z-0 rounded-2 shadow-sm max-w-[370px]":!0})}"> ${o?i.x`<marketplace-carousel always-show-navigation custom-previous-button-class="h-100 bg-transparent rounded-none border-r-md border-double border-black border-opacity-30 text-white disabled:text-opacity-25" custom-next-button-class="h-100 bg-transparent rounded-none border-l-md border-double border-black border-opacity-30 text-white disabled:text-opacity-25"> ${a} </marketplace-carousel>`:a} </div> `},g:l,r:(e,t,r)=>r.isMinted?((e,t,r)=>e`<button class="bg-transparent border-none border-0 cursor-pointer p-0 m-0 relative ${r.withUtilities?"w-[300px]":"w-[342px]"} aspect-[3/4] [transform-style:preserve-3d] ${"front"===r.activeSide?"transform-none":"[transform:rotateY(180deg)]"} [perspective:1000px] transition ease-out duration-300" @click="${r.onClick}" aria-label="View your collectible's details"> ${s(e,t,r)}${o(e,r)} </button> <div class="flex z-1"> <div class="w-xs h-xs rounded-1 mr-xs ${"front"===r.activeSide?"bg-coolgray-100":"bg-coolgray-500"}"></div> <div class="w-xs h-xs rounded-1 ${"back"===r.activeSide?"bg-coolgray-100":"bg-coolgray-500"}"></div> </div>`)(e,t,r):e`<div class="relative ${r.withUtilities?"w-[300px]":"w-[342px]"} aspect-[3/4]"> ${s(e,t,r)} </div>`}}));
SML.dm("builderpanellayout3f0c2ce9",["shelle48e5956","sharebuttond9f84027","iconc33661e6","closebuttone83fb375"],(async(t,e,a,i)=>{let l=class extends a.s{constructor(){super(...arguments),this.closeBtnAriaLabel="",this.backBtnAriaLabel="",this.shareBtnAriaLabel="",this.isDesktopViewport=!1,this.hasSecondaryPanel=!1,this.handleSecondaryPanelContentChange=t=>{const e=t?.target?.assignedNodes()?.length>0;this.hasSecondaryPanel=e},this.handleBackBtnClick=()=>{this.dispatchEvent(t.c("builder-panel-layout:back-btn-click"))},this.handleCloseBtnClick=()=>{this.dispatchEvent(t.c("builder-panel-layout:close-btn-click"))}}render(){return a.x`<div class="relative flex overflow-hidden w-100 h-100"> <div class="absolute pt-md px-md flex w-100 box-border"> <div class="flex-1 z-1"> ${this.withBackBtn?(({onClick:e,ariaLabel:i,href:l})=>t.r({appearance:"secondary",attributes:{type:"button",onclick:e,"aria-label":i,href:l},shape:"pill",size:t.s.Medium,leadingIcon:a.Z()}))({onClick:this.handleBackBtnClick,ariaLabel:this.backBtnAriaLabel}):a.A} </div> <div class="grid gap-xs grid-flow-col flex-shrink-0 items-center"> ${this.withShareBtn?e.r({html:a.x,size:t.s.Small,ariaLabel:this.shareBtnAriaLabel,isDesktopViewport:this.isDesktopViewport}):a.A} ${this.withCloseBtn?i.r({onClick:this.handleCloseBtnClick,ariaLabel:this.closeBtnAriaLabel}):a.A} </div> </div> <div class="flex-1 min-w-0"> <slot name="primary-panel-content"></slot> </div> <div class="${this.hasSecondaryPanel?"max-w-[380px]":"max-w-0"} flex-1 transition-[max-width] duration-500" data-panel-name="secondary"> <div class="w-[380px] h-100"> <slot name="secondary-panel-content" @slotchange="${this.handleSecondaryPanelContentChange}"></slot> </div> </div> </div>`}};l.styles=[t.t],t._([t.n({type:Boolean,attribute:"with-back-btn"})],l.prototype,"withBackBtn",void 0),t._([t.n({type:Boolean,attribute:"with-close-btn"})],l.prototype,"withCloseBtn",void 0),t._([t.n({type:Boolean,attribute:"with-share-btn"})],l.prototype,"withShareBtn",void 0),t._([t.n({type:String,attribute:"close-btn-aria-label"})],l.prototype,"closeBtnAriaLabel",void 0),t._([t.n({type:String,attribute:"back-btn-aria-label"})],l.prototype,"backBtnAriaLabel",void 0),t._([t.n({type:String,attribute:"share-btn-aria-label"})],l.prototype,"shareBtnAriaLabel",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],l.prototype,"isDesktopViewport",void 0),t._([t.d()],l.prototype,"hasSecondaryPanel",void 0),l=t._([t.e("builder-panel-layout")],l)}));
SML.dm("productdetailcardviewdatafetcherclientjseea156e5",["shelle48e5956","iconc33661e6","ae18b1320","closebuttone83fb375","cardnaming4107601d","utilitiesListf4e8746b","agegatestandaloneclientjsb13e879d","builderpanellayout3f0c2ce9","routing1f7880ca","carousel58c5a0eb","sharebuttond9f84027","index192b5d82"],(async(t,e,i,r,s,a,l)=>{const o="https://www.redditinc.com/policies/previews-terms",n=({price:i,isSoldOut:r,soldQuantity:a,totalQuantity:l,handleCTAClick:n,url:d,telemetry:c})=>{const p=s.c(i);return e.x` <div class="pt-md px-xl grid gap-2xl grid-cols-2 items-center [box-shadow:0_-6px_8px_var(--color-tone-5)]"> <div class="flex flex-col gap-2xs"> <span class="font-bold text-18 ${r?"line-through":""}">$${s.f(p)}</span> <span class="text-14 text-puregray-500"> ${s.g(a,l)} </span> </div> ${(({isSoldOut:i,handleCTAClick:r,url:s,telemetry:a})=>{const l=i?"Sold Out":"Buy Now";return e.x` <faceplate-tracker class="visible" source="${a.checkoutCtaClick?.source}" noun="${a.checkoutCtaClick?.noun}" action="${a.checkoutCtaClick?.action}" data-faceplate-tracking-context="${JSON.stringify(a.checkoutCtaClick?.context)}"> ${t.r({appearance:"primary",attributes:{type:"button",className:"px-2xl w-100",onclick:r,disabled:i?"disabled":"",href:i?void 0:s},size:t.s.Small,children:l})} </faceplate-tracker> `})({isSoldOut:r,handleCTAClick:n,url:d,telemetry:c})} </div> <p class="text-center my-md text-12 font-normal text-puregray-500"> By buying, you agree to our <a href="${o}" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary-hover">Previews Terms</a>. </p> `},d=({isDivider:t=!1,src:i,text:r})=>e.x`<div class="grid grid-rows-[2fr,1fr] place-items-center px-xs flex-1 text-center ${t?"border-0 border-l-sm border-neutral-border-weak border-solid":""}"> <img src="${i}" class="h-2xl self-center" alt=""> <span>${r}</span> </div>`,c=({utilities:i,isUserOwner:r=!1,telemetry:s})=>e.x`${i?.map((i=>{if(!i)return e.A;const{utilitiesView:o,utilityRedemptionClick:n}=s,{id:d,type:c,description:p,name:u,subtitle:h,image:m}=i,{icon:b,title:y}=c;return e.x`<div id="${a.g(d)}" data-testid="utility-info-block" class="mt-sm flex flex-wrap border-sm border-coolgray-300 border-solid rounded-2 text-coolgray-500 text-10"> <faceplate-tracker action="${o?.action}" source="${o?.source}" noun="${o?.noun}" data-faceplate-tracking-context="${JSON.stringify(o?.context)}"></faceplate-tracker> <div class="flex items-center pt-xs px-xs gap-sm mb-xs"> <img class="w-xl h-xl" src="${b.url}" alt="${y}"> <div class="flex flex-col"> <strong class="font-normal text-14 text-neutral-content">${y}</strong> <span class="text-neutral-border-medium">${h}</span> </div> </div> <img class="object-cover w-100 block mb-sm" src="${m?.url}" alt="${u}"> <div class="px-sm pb-sm"> <strong class="font-normal block mb-xs text-14 text-neutral-content">${u}</strong> <p class="m-0 mb-xs text-neutral-content">${p}</p> ${(({utility:t,isUserOwner:i})=>{if(!t)return e.A;const{isAvailable:r}=t;let s=e.x`\u26A0\uFE0F <span class="uppercase">Important</span>: The utility included with this product offers exclusive benefits that are valid only for purchases made within Reddit.`;!r&&i&&(s=e.x`\u26A0\uFE0F <span class="uppercase">Not available to redeem</span>: Only primary purchasers receive benefits from creators on Reddit.`);const a=i?e.x`<strong class="font-normal block my-sm text-16 text-neutral-content"> Unique Redemption Code </strong>`:e.A;return e.x` ${a} <div class="flex font-semibold bg-yellow-50 text-upvote-content-weak p-sm rounded-1"> <span>${s}</span> </div> `})({utility:i,isUserOwner:r})} ${(({utility:i,isUserOwner:r,telemetry:s})=>{if(!r||!i)return e.A;const{isAvailable:a,code:l,startsAt:o,endsAt:n,url:d}=i,c=(a&&l||"----------------").match(/.{1,4}/g)?.join(" ");return e.x`<div class="mt-xs" data-testid="utility-redemption-form"> <div class="flex mb-xs px-md py-2xs items-center justify-between bg-neutral-background-hover rounded-1"> <span class="${t.U({"font-semibold text-neutral-content text-14":!0,"opacity-30":!a})}">${c}</span> ${t.r({appearance:"plain",attributes:{disabled:!a,onclick:e=>{l&&navigator.clipboard.writeText(l);const i=t.c("faceplate-alert",{level:t.x.success,message:"Redemption code copied"});return e.target?.dispatchEvent(i)}},leadingIcon:e.cx({size:e.I.Small})})} </div> <faceplate-tracker class="visible" action="${s?.utilityRedemptionClick?.action}" source="${s?.utilityRedemptionClick?.source}" noun="${s?.utilityRedemptionClick?.noun}" data-faceplate-tracking-context="${JSON.stringify(s?.utilityRedemptionClick?.context)}"> ${t.r({appearance:"primary",children:"Redeem",attributes:{href:d,className:"mb-xs w-100",disabled:!a,target:"_blank"},size:t.s.Large})} </faceplate-tracker> ${(()=>{if(!o||!n)return e.A;const t=t=>new Date(t).toLocaleDateString("en-US");return e.x` <strong class="block font-semibold text-12 text-neutral-content text-center"> Valid from ${t(o)} to ${t(n)} </strong> `})()} </div> `})({utility:i,isUserOwner:r,telemetry:{utilityRedemptionClick:n}})} ${(({isUserOwner:t,utility:i})=>{if(!t||!i?.instructions)return e.A;const{instructions:r}=i,s=r?.split("•").filter(l.ah).map((t=>e.x`<li class="text-10 text-neutral-content">${t}</li>`));return e.x`<strong class="block text-14 font-normal text-neutral-content mt-lg mb-sm">Redemption instructions</strong> <ul class="px-sm"> ${s} </ul>`})({utility:i,isUserOwner:r})} </div> </div>`}))}`;let p=class extends e.s{constructor(){super(...arguments),this.isSoldOut=!1,this.totalQuantity=0,this.soldQuantity=0,this.price="",this.isArtistReddit=!1,this.dropSize=0,this.isMinted=!1,this.isMinting=!1,this.nftTitle="",this.nftDescription="",this.nftAvatarImageUrl="",this.artistName="",this.artistIconUrl="",this.artistUrl="",this.artistDescription="",this.blockchainExplorerUrl="",this.ipfsUrl="",this.ctaUrl="",this.ipfsMetadataUrl="",this.shouldShowRemainingInventory=!1,this.utilities=[],this.shouldShowUtilities=!1,this.source="",this.serialNumber="",this.mintDate="",this.series="",this.currentUserId="",this.ownerUserId="",this.closeBtnAriaLabel="",this.backBtnAriaLabel="",this.shareBtnAriaLabel="",this.isLoggedIn=!1,this.isDesktopViewport=!1,this.isImport=!1,this.avatarCardActiveSide="front",this.handleCTAClick=e=>{e.preventDefault();const{entityId:i}=this;if(i)return this.isLoggedIn?r.o({entityId:i}):this.dispatchEvent(t.c(t.aD.vaultLogin))},this.handleCloseViaOverlay=()=>{null===this.closest("marketplace-centered-modal")?.getAttribute("is-closed")&&this.handleClosePdp()},this.handleClosePdp=()=>{this.dispatchEvent(t.c(s.p.closeButtonClick,{from:this.source}))},this.handleBackClick=()=>{this.dispatchEvent(t.c(s.p.backButtonClick,{from:this.source}))},this.handleEquipAvatar=()=>{this.dispatchEvent(t.c(s.p.equipAvatar,{from:this.source,outfitId:this.entityId}))},this.renderCtas=()=>{return this.isImport?(({onClickImport:i})=>e.x` <div class="px-md py-lg flex justify-around items-center [box-shadow:0_-6px_8px_var(--color-tone-5)]"> ${t.r({appearance:"primary",attributes:{className:"w-full",onclick:i,type:"button"},size:t.s.Medium,children:"Import Collectible Avatar"})} </div> `)({onClickImport:()=>{this.isLoggedIn?r.o({}):this.dispatchEvent(t.c(t.aD.vaultLogin))}}):this.ownerUserId?this.ownerUserId===this.currentUserId?(i=this.handleEquipAvatar,e.x` <div class="px-md py-lg flex justify-around items-center [box-shadow:0_-6px_8px_var(--color-tone-5)]"> ${t.r({appearance:"primary",attributes:{className:"w-full",onclick:i,type:"button"},size:t.s.Medium,children:"Make It Your Avatar"})} </div> `):e.x` <div class="px-md py-lg flex [box-shadow:0_-6px_8px_var(--color-tone-5)] box-border"> ${t.r({appearance:"brand",attributes:{type:"button",className:"w-full",href:"/avatar/shop"},size:t.s.Medium,children:"Shop For More Avatars"})} </div> `:n({price:this.price,isSoldOut:this.isSoldOut,soldQuantity:this.soldQuantity,totalQuantity:this.totalQuantity,handleCTAClick:this.handleCTAClick,url:this.ctaUrl,telemetry:{checkoutCtaClick:this.telemetry?.checkoutCtaClick}});var i}}get isUserOwner(){const t=!!this.currentUserId&&!!this.ownerUserId,e=this.currentUserId===this.ownerUserId;return t&&e}get hasUtilitiesAndShouldDisplayThem(){return(this.utilities||[]).length>0&&this.shouldShowUtilities}connectedCallback(){super.connectedCallback(),r.g()?.addEventListener("dismiss-overlay",this.handleCloseViaOverlay)}disconnectedCallback(){super.disconnectedCallback(),r.g()?.removeEventListener("dismiss-overlay",this.handleCloseViaOverlay)}render(){return e.x`<div class="font-sans w-full h-full"> <builder-panel-layout ?with-back-btn="${this.withBackBtn}" ?with-close-btn="${this.withCloseBtn}" ?with-share-btn="${this.withShareBtn}" close-btn-aria-label="${this.closeBtnAriaLabel}" back-btn-aria-label="${this.backBtnAriaLabel}" share-btn-aria-label="${this.shareBtnAriaLabel}" @builder-panel-layout:close-btn-click="${this.handleClosePdp}" @builder-panel-layout:back-btn-click="${this.handleBackClick}" ?is-desktop-viewport="${this.isDesktopViewport}"> <div slot="primary-panel-content" class="relative overflow-hidden h-100 w-100 grid place-items-center place-content-evenly bg-gradient-to-bl from-berrypurple-900 from-16.42% to-lightblue-500 to-100%"> <div class="absolute opacity-75 w-100 h-[305px] bottom-0" style="background:radial-gradient(69.39% 50% at 20% 50%,#942fff 44.27%,rgba(170,71,255,0) 100%)"></div> ${a.r(e.x,CLIENT_CONFIG.STATIC_BASE_URL,{nftTitle:this.nftTitle,nftAvatarImageUrl:this.nftAvatarImageUrl,dropRarity:this.dropRarity,dropSize:this.dropSize,withUtilities:this.hasUtilitiesAndShouldDisplayThem,isMinted:this.isMinted,serialNumber:this.serialNumber,mintDate:this.mintDate,series:this.series,activeSide:this.avatarCardActiveSide,onClick:()=>{this.avatarCardActiveSide="front"===this.avatarCardActiveSide?"back":"front"}})} ${this.hasUtilitiesAndShouldDisplayThem?a.a({utilities:this.utilities,shadowRoot:this.shadowRoot}):e.A} </div> <div slot="secondary-panel-content" class="pt-2xl text-tone-1 flex flex-col w-100 h-100 box-border overflow-hidden"> <div class="flex-0 px-xl"> <h3 class="text-24 font-semibold m-0">${this.nftTitle}</h3> <faceplate-tracker source="${this.telemetry?.artistClick?.source}" action="${this.telemetry?.artistClick?.action}" noun="${this.telemetry?.artistClick?.noun}" data-faceplate-tracking-context="${JSON.stringify(this.telemetry?.artistClick?.context)}"> ${(({isArtistReddit:t,artistName:r,artistIconUrl:s,artistUrl:a})=>t?e.x`<div class="mt-sm flex items-center text-tone-2 text-12"> <img src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/reddit.svg" alt="" class="w-xl h-xl rounded-full bg-secondary-background"> <span class="ml-2xs"> by Reddit </span> </div>`:i.a({attributes:{href:a,className:"mt-sm flex items-center text-tone-2 text-12"},suppressVisitedStyle:!0,underline:"always",children:e.x`<img src="${s}" alt="" class="w-xl h-xl rounded-full bg-secondary-background"> <span class="ml-2xs"> by ${r} </span>`}))({isArtistReddit:this.isArtistReddit,artistName:this.artistName,artistIconUrl:this.artistIconUrl,artistUrl:this.artistUrl})} </faceplate-tracker> </div> <div class="mt-md pb-xl flex-1 overflow-auto px-xl"> <span>${this.nftDescription}</span> ${this.hasUtilitiesAndShouldDisplayThem?e.x` <div class="text-tone-2 mt-xl"> <h3 class="font-bold text-10 m-0"> BENEFITS FROM CREATOR </h3> ${c({utilities:this.utilities,isUserOwner:this.isUserOwner,telemetry:{utilitiesView:this.telemetry?.utilitiesView,utilityRedemptionClick:this.telemetry?.utilityRedemptionClick}})} </div> `:e.A} <div class="text-tone-2 mt-xl"> <h3 class="font-bold text-10 m-0"> BENEFITS ON REDDIT </h3> ${(({isArtistReddit:t})=>e.x` <div class="mt-sm flex flex-wrap py-xs border-sm border-neutral-border-weak border-solid rounded-2 text-10"> ${d({src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/stand-out.svg`,text:"Stand out in comments"})} ${d({src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/card-example.svg`,text:"Add a card to your profile",isDivider:!0})} ${d({src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/avatar-gear.svg`,text:"Mix with other avatar gear",isDivider:!0})} <div class="w-100 m-xs border-neutral-border-weak border-solid border-sm border-t-0 border-x-0"></div> ${d(t?{src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/achievement.svg`,text:"Awarded to top redditors"}:{src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/collectible.svg`,text:"Collectible, part of a series"})} ${d({src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/nft.svg`,text:"You own your collectible",isDivider:!0})} ${d({src:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/transferable.svg`,text:"Transferable via blockchain",isDivider:!0})} </div> `)({isArtistReddit:this.isArtistReddit})} </div> <div class="text-tone-2 mt-xl"> <h3 class="font-bold text-10 m-0"> DETAILS </h3> <div class="mt-xs text-10 font-semibold py-2xs px-xs bg-neutral-background-hover text-global-alienblue inline"> ${(({isMinted:t,isMinting:e})=>t?"Minted":e?"In queue to mint":"Mints after transaction")({isMinted:this.isMinted,isMinting:this.isMinting})} </div> <div class="mt-lg"> ${(({isMinted:i,blockchainExplorerUrl:r,ipfsUrl:s,ipfsMetadataUrl:a})=>e.x` <div> ${t.r({attributes:{href:r,target:"_blank",className:"w-100",onclick(){},...i?{}:{disabled:"disabled"}},appearance:"secondary",leadingIcon:e.cw({size:e.I.Small}),size:t.s.Small,children:"View on Explorer"})} ${t.r({attributes:{href:s,target:"_blank",className:"w-100 mt-xs",onclick(){},...i?{}:{disabled:"disabled"}},appearance:"secondary",leadingIcon:e.bK({size:e.I.Small}),size:t.s.Small,children:"View on IPFS"})} ${t.r({attributes:{href:a,target:"_blank",className:"w-100 mt-xs",onclick(){},...i?{}:{disabled:"disabled"}},appearance:"secondary",leadingIcon:e.bG({size:e.I.Small}),size:t.s.Small,children:"IPFS Metadata"})} </div> `)({isMinted:this.isMinted,blockchainExplorerUrl:this.blockchainExplorerUrl,ipfsUrl:this.ipfsUrl,ipfsMetadataUrl:this.ipfsMetadataUrl})} </div> </div> <div class="text-tone-2 mt-xl"> <h3 class="font-bold text-10 m-0"> ABOUT THE CREATOR </h3> <div class="text-12 text-tone-1 mt-xs">${this.artistDescription}</div> <p class="text-puregray-500 text-12 mt-md"> Secondary sales of this item will have a ${5}% royalty fee. <a href="${"https://reddithelp.com/hc/articles/6213869034132"}" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary-hover"> Learn more about fees. </a> </p> <p> ${i.a({attributes:{href:"https://support.reddithelp.com/hc/requests/new?ticket_form_id=16510899084308",className:"text-danger-content text-12 mt-lg flex items-center gap-2xs",target:"_blank",rel:"noopener noreferrer"},children:[e.cg({size:e.I.Small}),"Report this Collectible Avatar."],suppressVisitedStyle:!0})} </p> </div> </div> ${this.renderCtas()} </div> </builder-panel-layout> </div>`}};return p.styles=[t.t],t._([t.n({type:Boolean,attribute:"with-back-btn"})],p.prototype,"withBackBtn",void 0),t._([t.n({type:Boolean,attribute:"with-close-btn"})],p.prototype,"withCloseBtn",void 0),t._([t.n({type:Boolean,attribute:"with-share-btn"})],p.prototype,"withShareBtn",void 0),t._([t.n({type:Boolean,attribute:"is-sold-out"})],p.prototype,"isSoldOut",void 0),t._([t.n({type:Number,attribute:"total-quantity"})],p.prototype,"totalQuantity",void 0),t._([t.n({type:Number,attribute:"sold-quantity"})],p.prototype,"soldQuantity",void 0),t._([t.n({type:String,attribute:"price"})],p.prototype,"price",void 0),t._([t.n({type:Boolean,attribute:"is-artist-reddit"})],p.prototype,"isArtistReddit",void 0),t._([t.n({type:Number,attribute:"drop-size"})],p.prototype,"dropSize",void 0),t._([t.n({type:String,attribute:"drop-rarity"})],p.prototype,"dropRarity",void 0),t._([t.n({type:Boolean,attribute:"is-minted"})],p.prototype,"isMinted",void 0),t._([t.n({type:Boolean,attribute:"is-minting"})],p.prototype,"isMinting",void 0),t._([t.n({type:String,attribute:"nft-title"})],p.prototype,"nftTitle",void 0),t._([t.n({type:String,attribute:"nft-description"})],p.prototype,"nftDescription",void 0),t._([t.n({type:String,attribute:"nft-avatar-image-url"})],p.prototype,"nftAvatarImageUrl",void 0),t._([t.n({type:String,attribute:"artist-name"})],p.prototype,"artistName",void 0),t._([t.n({type:String,attribute:"artist-icon-url"})],p.prototype,"artistIconUrl",void 0),t._([t.n({type:String,attribute:"artist-url"})],p.prototype,"artistUrl",void 0),t._([t.n({type:String,attribute:"artist-description"})],p.prototype,"artistDescription",void 0),t._([t.n({type:String,attribute:"blockchain-explorer-url"})],p.prototype,"blockchainExplorerUrl",void 0),t._([t.n({type:String,attribute:"ipfs-url"})],p.prototype,"ipfsUrl",void 0),t._([t.n({type:String,attribute:"cta-url"})],p.prototype,"ctaUrl",void 0),t._([t.n({type:String,attribute:"ipfs-metadata-url"})],p.prototype,"ipfsMetadataUrl",void 0),t._([t.n({type:Boolean,attribute:"should-show-remaining-inventory"})],p.prototype,"shouldShowRemainingInventory",void 0),t._([t.n({type:Array})],p.prototype,"utilities",void 0),t._([t.n({type:Boolean,attribute:"should-show-utilities"})],p.prototype,"shouldShowUtilities",void 0),t._([t.n({type:String,attribute:"source"})],p.prototype,"source",void 0),t._([t.n({type:String,attribute:"serial-number"})],p.prototype,"serialNumber",void 0),t._([t.n({type:String,attribute:"mint-date"})],p.prototype,"mintDate",void 0),t._([t.n({type:String})],p.prototype,"series",void 0),t._([t.n({type:String,attribute:"current-user-id"})],p.prototype,"currentUserId",void 0),t._([t.n({type:String,attribute:"owner-user-id"})],p.prototype,"ownerUserId",void 0),t._([t.n({type:Object})],p.prototype,"telemetry",void 0),t._([t.n({type:String,attribute:"close-btn-aria-label"})],p.prototype,"closeBtnAriaLabel",void 0),t._([t.n({type:String,attribute:"back-btn-aria-label"})],p.prototype,"backBtnAriaLabel",void 0),t._([t.n({type:String,attribute:"share-btn-aria-label"})],p.prototype,"shareBtnAriaLabel",void 0),t._([t.n({type:Boolean,attribute:"is-logged-in"})],p.prototype,"isLoggedIn",void 0),t._([t.n({type:String,attribute:"entity-id"})],p.prototype,"entityId",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],p.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-import"})],p.prototype,"isImport",void 0),t._([t.d()],p.prototype,"avatarCardActiveSide",void 0),p=t._([t.e("product-detail-card-view")],p),{P:o}}));
SML.dm("modelsdcd99059",[],(async()=>{var t,e,a,r,i,o,l,n;return function(t){t.Avatar="avatar",t.AvatarBuilder="avatar_builder",t.Marketplace="marketplace",t.MarketplaceGold="marketplace_gold",t.MarketplaceShop="marketplace_shop",t.MarketplaceListingDetailPage="marketplace_listing_detail_page",t.PremiumMarketing="premium_marketing",t.Snoovatar="snoovatar",t.Wearing="wearing"}(t||(t={})),function(t){t.Click="click",t.View="view",t.Payment="payment",t.Paid="paid",t.Scroll="scroll",t.Back="back",t.SetToProfile="set_to_profile",t.Select="select",t.Deselect="deselect"}(e||(e={})),function(t){t.Builder="builder",t.BuilderTab="builder_tab",t.BuyNft="buy_nft",t.BuyNftCta="buy_nft_cta",t.CompletedFe="completed_fe",t.ContributorProgram="contributor_program",t.ContributorProgramPage="contributor_program_page",t.DiscoveryUnit="discover_unit",t.Error="error",t.MarketplaceArtist="marketplace_artist",t.MarketingUnit="marketing_unit",t.MarketingPage="marketing_page",t.OffPlatformBenefits="off_platform_benefits",t.Outfit="outfit",t.RedeemBenefits="redeem_benefits",t.StartContributorProgramVerification="start_contributor_program_verification",t.Storefront="storefront",t.ListingsDetailPage="listings_detail_page",t.BottomPage="bottom_page",t.ProductDetailPage="product_detail_page",t.ListingFe="listing_fe",t.PdpCaptcha="pdp_captcha",t.PaymentError="payment_error",t.ClaimIntroPage="claim_intro_page",t.SelectionUi="selection_ui",t.ClaimNft="claim_nft",t.SecureVault="secure_vault",t.VaultConfirmation="vault_confirmation",t.SnooGear="snoo_gear",t.PastOutfit="past_outfit",t.Dismiss="dismiss",t.Wearing="wearing",t.Snoovatar="snoovatar",t.Undo="undo",t.Redo="redo",t.NftOutfit="nft_outfit",t.BackgroundCard="background_card",t.WearAll="wear_all",t.PremiumBenefit="premium_benefit"}(a||(a={})),function(t){t.Shop="shop",t.Password="password"}(r||(r={})),function(t){t.Discover="discover",t.CategoryListings="category_listings",t.Gallery="gallery",t.ArtistPage="artist_page",t.Artists="artists"}(i||(i={})),function(t){t.ArtistViewAll="artist_view_all",t.Avatar="avatar",t.AvatarTabs="avatar_tabs",t.ProductDetailPage="product_detail_page",t.NftGalleryPage="nft_gallery_page",t.ArtistProfilePage="artist_profile_page",t.InventoryDetail="inventory_detail"}(o||(o={})),function(t){t.AvatarBuilder="avatar_builder",t.CheckCaptcha="check_captcha",t.ClaimFlow="claim_flow",t.ClaimFlowDeepLink="claim_flow_deeplink",t.ClaimFlowExplore="claim_flow_explore",t.Purchase="purchase"}(l||(l={})),function(t){t.All="all",t.Available="available"}(n||(n={})),{get M(){return a},get a(){return e},get b(){return t},get c(){return l},get d(){return o},get e(){return r}}}));
SML.dm("galleryc769794f",["shelle48e5956"],(async()=>{var e,t,l,a,n,r;!function(e){e.BatchListings="batchListings",e.BatchArtists="batchArtists"}(e||(e={})),function(e){e.Small="small",e.Large="large",e.Gallery="gallery"}(t||(t={})),function(e){e.Regular="regular",e.Large="large"}(l||(l={})),function(e){e.Deeplink="deeplink",e.BannerDetails="bannerDetails"}(a||(a={})),function(e){e.FullbleedImage="fullbleedImage",e.SupplementalImage="supplementalImage",e.Title="title",e.Subtitle="subtitle",e.Body="body"}(n||(n={})),function(e){e.Comfy="COMFY",e.Compact="COMPACT"}(r||(r={}));var i;return r.Comfy,["xs:[--marketplace-tile-grid-content-columns:4]","s:[--marketplace-tile-grid-content-columns:5]","m:[--marketplace-tile-grid-content-columns:6]","[--marketplace-tile-grid-content-gap:var(--rem16)]","xs:[--marketplace-tile-grid-content-gap:var(--rem24)]"].join(" "),r.Compact,["[--marketplace-tile-grid-content-columns:4]","xs:[--marketplace-tile-grid-content-columns:6]","s:[--marketplace-tile-grid-content-columns:7]","m:[--marketplace-tile-grid-content-columns:8]","[--marketplace-tile-grid-content-gap:var(--rem8)]","xs:[--marketplace-tile-grid-content-gap:var(--rem16)]"].join(" "),r.Compact,r.Comfy,function(e){e.CategoryDetails="CATEGORY_DETAILS",e.FullGallery="FULL_GALLERY"}(i||(i={})),{get D(){return l},get G(){return r},get a(){return a},get b(){return n}}}));
SML.dm("claimselectionviewdatafetcherclientjsb1ef2c8c",["shelle48e5956","iconc33661e6","closebuttone83fb375","cardnaming4107601d","modelsdcd99059","galleryc769794f","rendersavedresponsetemplatebysubredditidb78cebab","routing1f7880ca","agegatestandaloneclientjsb13e879d"],(async(e,t,i,r,s)=>{function n(e){return e`<div class="w-3xl h-3xl flex items-center justify-center"> <faceplate-progress value="20" class="animate-spin"></faceplate-progress> </div>`}const a=t=>{if(!t)return o();switch(t){case e.gJ.ClaimFailed:return o();case e.gJ.CompletelyClaimed:return"Sorry, you have reached the limit of avatars you can claim from this collection.";case e.gJ.NoNftLeft:return"The avatar you have selected is no longer available.";case e.gJ.NotEligibleToClaim:return"Unfortunately you aren't selected to receive this collection at this time.";default:return}},o=()=>"Sorry, something unexpected happened.",l=e=>e?.map((e=>({url:e.source.url})))||[];var c,d,p,h;let u;!function(e){e.GALAXY="galaxy"}(c||(c={})),function(e){e.GALAXY="reveal-galaxy"}(d||(d={})),function(e){e.GALAXY="reveal-galaxy"}(p||(p={})),function(e){e.INTRO="intro",e.SELECTION="selection",e.CLAIMING="claiming",e.CLAIMED="claimed"}(h||(h={}));const m=new Uint8Array(16);function g(){if(!u&&(u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(m)}var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));function v(e,t=0){return(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase()}function b(e){if(!function(e){return"string"==typeof e&&f.test(e)}(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i}function C(e,t,i){function r(e,r,s,n){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof r&&(r=b(r)),16!==(null===(a=r)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(r),o.set(e,r.length),o=i(o),o[6]=15&o[6]|t,o[8]=63&o[8]|128,s){n=n||0;for(let e=0;e<16;++e)s[n+e]=o[e];return s}return v(o)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function x(e){return 14+(e+64>>>9<<4)+1}function I(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function T(e,t,i,r,s,n){return I((a=I(I(t,e),I(r,n)))<<(o=s)|a>>>32-o,i);var a,o}function E(e,t,i,r,s,n,a){return T(t&i|~t&r,e,t,s,n,a)}function D(e,t,i,r,s,n,a){return T(t&r|i&~r,e,t,s,n,a)}function w(e,t,i,r,s,n,a){return T(t^i^r,e,t,s,n,a)}function A(e,t,i,r,s,n,a){return T(i^(t|~r),e,t,s,n,a)}C("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){const t=[],i=32*e.length,r="0123456789abcdef";for(let s=0;s<i;s+=8){const i=e[s>>5]>>>s%32&255,n=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(n)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[x(t)-1]=t;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let t=0;t<e.length;t+=16){const a=i,o=r,l=s,c=n;i=E(i,r,s,n,e[t],7,-680876936),n=E(n,i,r,s,e[t+1],12,-389564586),s=E(s,n,i,r,e[t+2],17,606105819),r=E(r,s,n,i,e[t+3],22,-1044525330),i=E(i,r,s,n,e[t+4],7,-176418897),n=E(n,i,r,s,e[t+5],12,1200080426),s=E(s,n,i,r,e[t+6],17,-1473231341),r=E(r,s,n,i,e[t+7],22,-45705983),i=E(i,r,s,n,e[t+8],7,1770035416),n=E(n,i,r,s,e[t+9],12,-1958414417),s=E(s,n,i,r,e[t+10],17,-42063),r=E(r,s,n,i,e[t+11],22,-1990404162),i=E(i,r,s,n,e[t+12],7,1804603682),n=E(n,i,r,s,e[t+13],12,-40341101),s=E(s,n,i,r,e[t+14],17,-1502002290),r=E(r,s,n,i,e[t+15],22,1236535329),i=D(i,r,s,n,e[t+1],5,-165796510),n=D(n,i,r,s,e[t+6],9,-1069501632),s=D(s,n,i,r,e[t+11],14,643717713),r=D(r,s,n,i,e[t],20,-373897302),i=D(i,r,s,n,e[t+5],5,-701558691),n=D(n,i,r,s,e[t+10],9,38016083),s=D(s,n,i,r,e[t+15],14,-660478335),r=D(r,s,n,i,e[t+4],20,-405537848),i=D(i,r,s,n,e[t+9],5,568446438),n=D(n,i,r,s,e[t+14],9,-1019803690),s=D(s,n,i,r,e[t+3],14,-187363961),r=D(r,s,n,i,e[t+8],20,1163531501),i=D(i,r,s,n,e[t+13],5,-1444681467),n=D(n,i,r,s,e[t+2],9,-51403784),s=D(s,n,i,r,e[t+7],14,1735328473),r=D(r,s,n,i,e[t+12],20,-1926607734),i=w(i,r,s,n,e[t+5],4,-378558),n=w(n,i,r,s,e[t+8],11,-2022574463),s=w(s,n,i,r,e[t+11],16,1839030562),r=w(r,s,n,i,e[t+14],23,-35309556),i=w(i,r,s,n,e[t+1],4,-1530992060),n=w(n,i,r,s,e[t+4],11,1272893353),s=w(s,n,i,r,e[t+7],16,-155497632),r=w(r,s,n,i,e[t+10],23,-1094730640),i=w(i,r,s,n,e[t+13],4,681279174),n=w(n,i,r,s,e[t],11,-358537222),s=w(s,n,i,r,e[t+3],16,-722521979),r=w(r,s,n,i,e[t+6],23,76029189),i=w(i,r,s,n,e[t+9],4,-640364487),n=w(n,i,r,s,e[t+12],11,-421815835),s=w(s,n,i,r,e[t+15],16,530742520),r=w(r,s,n,i,e[t+2],23,-995338651),i=A(i,r,s,n,e[t],6,-198630844),n=A(n,i,r,s,e[t+7],10,1126891415),s=A(s,n,i,r,e[t+14],15,-1416354905),r=A(r,s,n,i,e[t+5],21,-57434055),i=A(i,r,s,n,e[t+12],6,1700485571),n=A(n,i,r,s,e[t+3],10,-1894986606),s=A(s,n,i,r,e[t+10],15,-1051523),r=A(r,s,n,i,e[t+1],21,-2054922799),i=A(i,r,s,n,e[t+8],6,1873313359),n=A(n,i,r,s,e[t+15],10,-30611744),s=A(s,n,i,r,e[t+6],15,-1560198380),r=A(r,s,n,i,e[t+13],21,1309151649),i=A(i,r,s,n,e[t+4],6,-145523070),n=A(n,i,r,s,e[t+11],10,-1120210379),s=A(s,n,i,r,e[t+2],15,718787259),r=A(r,s,n,i,e[t+9],21,-343485551),i=I(i,a),r=I(r,o),s=I(s,l),n=I(n,c)}return[i,r,s,n]}(function(e){if(0===e.length)return[];const t=8*e.length,i=new Uint32Array(x(t));for(let r=0;r<t;r+=8)i[r>>5]|=(255&e[r/8])<<r%32;return i}(e),8*e.length))}));var S={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function _(e,t,i){if(S.randomUUID&&!e)return S.randomUUID();const r=(e=e||{}).random||(e.rng||g)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,v(r)}function M(e,t,i,r){switch(e){case 0:return t&i^~t&r;case 1:case 3:return t^i^r;case 2:return t&i^t&r^i&r}}function $(e,t){return e<<t|e>>>32-t}C("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let i=0;i<t.length;++i)e.push(t.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,s=Math.ceil(r/16),n=new Array(s);for(let t=0;t<s;++t){const i=new Uint32Array(16);for(let r=0;r<16;++r)i[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];n[t]=i}n[s-1][14]=8*(e.length-1)/Math.pow(2,32),n[s-1][14]=Math.floor(n[s-1][14]),n[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=n[e][t];for(let e=16;e<80;++e)r[e]=$(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let s=i[0],a=i[1],o=i[2],l=i[3],c=i[4];for(let e=0;e<80;++e){const i=Math.floor(e/20),n=$(s,5)+M(i,a,o,l)+c+t[i]+r[e]>>>0;c=l,l=o,o=$(a,30)>>>0,a=s,s=n}i[0]=i[0]+s>>>0,i[1]=i[1]+a>>>0,i[2]=i[2]+o>>>0,i[3]=i[3]+l>>>0,i[4]=i[4]+c>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}));const N=e.g(t.s);let R=class extends N{constructor(){super(...arguments),this.selectedDropIndex=0,this.displayMode=h.INTRO,this.hasShuffledDrops=!1,this.telemetryEvents={claimNft:()=>this.trackEvent(e.b({source:s.b.Marketplace,action:s.a.Click,noun:s.M.ClaimNft},{action_info:{reason:s.c.ClaimFlow},marketplace:{item_id:this.selectedDrop?.id,item_name:this.selectedDrop?.name}})),leave:()=>this.trackEvent(e.b({source:s.b.Marketplace,action:s.a.Back,noun:s.M.SelectionUi})),navigateCarousel:()=>this.trackEvent(e.b({source:s.b.Marketplace,action:s.a.Scroll,noun:s.M.SelectionUi},{action_info:{reason:s.c.ClaimFlow},marketplace:{item_id:this.selectedDrop?.id,item_name:this.selectedDrop?.name,choice_id:this.claimChoiceId,claim_selection_count:this.dropsToDisplay.length}})),viewClaimError:t=>this.trackEvent(e.b({source:s.b.Marketplace,action:s.a.View,noun:s.M.Error},{action_info:{reason:s.c.ClaimFlow},marketplace:{error:t,item_id:this.selectedDrop?.id,item_name:this.selectedDrop?.name,choice_id:this.claimChoiceId,claim_selection_count:this.dropsToDisplay.length}})),viewSelection:()=>{const t=this.displayMode===h.INTRO?s.M.ClaimIntroPage:s.M.SelectionUi;return this.trackEvent(e.b({source:s.b.Marketplace,action:s.a.View,noun:t},{action_info:{reason:s.c.ClaimFlow},marketplace:{item_id:this.selectedDrop?.id,item_name:this.selectedDrop?.name,choice_id:this.claimChoiceId,claim_selection_count:this.dropsToDisplay.length}}))}}}get prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion)").matches}get claimChoiceId(){return this.distributionCampaignChoices?.[0]?.id}get isMultiChoiceDrop(){return(this.freeNftClaimDrops?.length||0)>1}firstUpdated(){this.claimId&&(this.displayMode=h.CLAIMING,this.selectedDropIndex=this.dropsToDisplay.findIndex((({id:e})=>e===this.claimId)),this.dispatchClaimFreeNftMutation(this.claimId)),this.distributionCampaignChoices?.length||(this.displayMode=h.SELECTION)}updated(e){(e.has("selectedDropIndex")||e.has("displayMode")||e.has("freeNftClaimDrops"))&&this.telemetryEvents.viewSelection()}async dispatchClaimFreeNftMutation(t){try{this.telemetryEvents.claimNft();const{item:i}=await(async t=>{const{data:{claimFreeNft:i},errors:r}=await e.B({operation:e.O.ClaimFreeNft,variables:t}),{freeNftClaimStatus:s,errors:n}=i??{},l=a(s?.status);if(l)throw new Error(l);if(n?.[0]||r?.[0]||!s?.item)throw new Error(o());return s})({ikey:_(),distributionCampaignChoiceId:this.claimChoiceId,claimId:t});this.claimedItem=i??void 0,this.displayMode=h.CLAIMED,this.prefersReducedMotion||!this.revealVideos.length?this.onReviewAnimationEnd():this.revealVideos.forEach((e=>e.play()))}catch(t){const i=t.message,r=e.c("faceplate-alert",{level:e.x.error,cause:"uncategorized",message:i});this.dispatchEvent(r),this.telemetryEvents.viewClaimError(i),this.telemetryEvents.leave()}}onReviewAnimationEnd(){i.g()?.next({entityId:this.claimedItem?.id,pdpType:r.P.Item})}onCTAClick(){if(this.displayMode!==h.INTRO||!this.isMultiChoiceDrop)return i.g()?.next({claimChoiceId:this.claimChoiceId,claimId:this.selectedDrop?.id});this.displayMode=h.SELECTION}get screens(){return(({distributionCampaignChoice:e,defaultCtaText:t="Claim now",defaultTitle:i="Avatar"})=>{const r={introScreen:{ctaText:t,description:"",pageContext:i,title:i,media:[]},selectionScreen:{ctaText:t,pageContext:i}};if(!e)return r;const{introScreens:s,selectionScreen:n,ctaText:a,description:o,pageContext:l,images:c}=e,d=s?.[0]?.media.length;return r.introScreen.title=s?.[0]?.title||l||r.introScreen.title,r.introScreen.ctaText=s?.[0]?.ctaText||a||r.introScreen.ctaText,r.introScreen.pageContext=s?.[0]?.pageContext||l||r.introScreen.pageContext,r.introScreen.description=s?.[0]?.description||o||r.introScreen.description,r.introScreen.media=d&&s?.[0]?.media||(e=>e?.map((e=>({source:{url:e.url}})))||[])(c),r.selectionScreen.ctaText=n?.ctaText||a||r.selectionScreen.ctaText,r.selectionScreen.pageContext=n?.pageContext||l||r.selectionScreen.pageContext,r})({distributionCampaignChoice:this.distributionCampaignChoices?.[0]})}get dropsToDisplay(){if(!this.freeNftClaimDrops?.length)return[];if(this.displayMode===h.INTRO&&this.isMultiChoiceDrop){const e=(e=>{const{introScreen:{description:t,media:i,title:r}}=e;return{id:"intro",name:r,description:t,images:l(i)}})(this.screens);return e.images.length&&e.name&&e.description?[e]:[]}return this.hasShuffledDrops||(this.hasShuffledDrops=!0,this.freeNftClaimDrops=(e=>{const t=e.slice(0);let i=e.length-1;for(;i>0;){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]],i--}return t})(this.freeNftClaimDrops)),this.freeNftClaimDrops}get selectedDrop(){return this.dropsToDisplay[this.selectedDropIndex]}get backgroundAssets(){const e=`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/claim/background/`,t=c.GALAXY;return{mp4:`${e}${t}.mp4`,webp:`${e}${t}.webp`,img:`${e}${t}.png`}}get revealBackgroundAssets(){const e=`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/claim/background/`,t=d.GALAXY;return{mp4:`${e}${t}.mp4`,webp:`${e}${t}.webp`,img:`${e}${t}.png`}}get revealForegroundAssets(){const e=`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/claim/foreground/`,t=p.GALAXY;return{mov:`${e}${t}.mov`,webp:`${e}${t}.webp`,img:`${e}${t}.png`}}get shouldRenderErrorTemplate(){return!this.freeNftClaimDrops?.length&&(this.displayMode===h.INTRO||this.displayMode===h.SELECTION)}get shouldRenderLoadingTemplate(){return this.displayMode===h.CLAIMING}get shouldRenderIntroAndSelectionTemplate(){return!this.shouldRenderErrorTemplate&&(this.displayMode===h.INTRO||this.displayMode===h.SELECTION)}renderCarousel(){const e=222*-this.selectedDropIndex,i="h-[232px] w-[174px] object-contain transform transition-all duration-500",r=`${i} opacity-100 scale-100`,s=`${i} opacity-50 scale-75`,n=`${i} opacity-0 scale-75`;return t.x`<div data-testid="claim-selection-view-carousel" class="w-full relative flex justify-start items-center gap-2xl pl-[calc(50%-87px)] transform transition-all duration-500" style="transform:translateX(${e}px)"> ${this.dropsToDisplay.map(((e,i)=>{const a=i===this.selectedDropIndex,o=i===this.selectedDropIndex-1||i===this.selectedDropIndex+1,l=a?r:o?s:n;return t.x`<img class="${l}" src="${e.images[0]?.url}" alt="${e.name}"> `}))} </div>`}renderCarouselButtons(){if(this.dropsToDisplay.length<=1)return t.A;const i=0===this.selectedDropIndex,r=this.selectedDropIndex===this.dropsToDisplay.length-1;return t.x`${e.r({appearance:"bordered",leadingIcon:t.Z({size:t.I.Small}),attributes:{className:"z-1 absolute mt-2xl top-1/2 left-[70px] transform -translate-y-1/2 text-white border-white",disabled:i,onclick:()=>{this.telemetryEvents.navigateCarousel(),this.selectedDropIndex=i?0:this.selectedDropIndex-1}}})} ${e.r({appearance:"bordered",leadingIcon:t.ah({size:t.I.Small}),attributes:{className:"z-1 absolute mt-2xl top-1/2 right-[70px] transform -translate-y-1/2 text-white border-white",disabled:r,onclick:()=>{this.telemetryEvents.navigateCarousel(),this.selectedDropIndex=r?this.dropsToDisplay.length:this.selectedDropIndex+1}}})}`}renderCarouselPagination(){return this.dropsToDisplay.length<=1?t.A:t.x`<div class="flex justify-center items-center gap-xs"> ${this.dropsToDisplay.map(((t,i)=>{const r=i===this.selectedDropIndex,s="border-white",n=s+" bg-white",a=s+" bg-transparent";return e.r({appearance:"bordered",attributes:{className:r?n:a,style:"width: 8px; height: 8px; padding: 0;",onclick:()=>{this.selectedDropIndex=i}}})}))} </div>`}renderGenericErrorTemplate(){const e=a();return this.telemetryEvents.viewClaimError(e),t.x`<h2 class="text-center font-normal text-16 w-100 text-white">${e}</h2> <faceplate-alert level="error" message="${e}"></faceplate-alert>`}renderIntroAndSelectionTemplate(){const i="absolute left-1/2 transform w-[230px] -translate-x-1/2";return t.x`<h2 class="m-0 uppercase font-normal text-16 text-white mt-md"> ${this.screens.introScreen.pageContext} </h2> <div class="w-100 flex-1 flex justify-start items-center overflow-hidden"> <img class="${i} top-0" src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/claim/icons/spotlight.svg" alt=""> <img class="${i} top-1/2 -translate-y-1/2" src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/claim/icons/ellipse.svg" alt=""> ${this.renderCarousel()} </div> ${this.renderCarouselButtons()} ${this.renderCarouselPagination()} <div class="w-[516px] text-center"> <h3 class="m-0 mt-md leading-6 font-bold text-32 text-white pb-xs"> ${this.selectedDrop?.name} </h3> <p class="m-0 text-14 leading-6 text-white">${this.selectedDrop?.description}</p> </div> <div class="mt-2xl mb-xs"> ${e.r({appearance:"plainInverted",children:this.displayMode===h.INTRO?this.screens.introScreen.ctaText:this.screens.selectionScreen.ctaText,size:e.s.Large,attributes:{"data-testid":"claim-selection-view-cta",className:"w-[324px] h-2xl flex justify-center items-center bg-white text-black",onclick:()=>this.onCTAClick()}})} </div> <h3 class="m-0 pb-xl text-12 font-normal leading-4 text-white/70 w-1/2 text-center"> By claiming your blockchain collectible, you agree to our <a class="text-white no-underline" href="https://www.redditinc.com/policies/previews-terms">Preview Terms</a> and creating a <a class="text-white no-underline" href="https://support.reddithelp.com/hc/articles/7558997757332-Reddit-Vault-Basics">Vault</a> if you don't have one. </h3>`}render(){const r=this.displayMode===h.CLAIMED;return t.x`<div class="relative m-0 h-100 w-100 min-h-[600px]"> <div class="absolute top-0 left-0 flex h-100 w-100 bg-alienblue-800"> <video preload="auto" muted loop playsinline disablepictureinpicture disableremoteplayback ?autoplay="${!this.prefersReducedMotion}"> <source src="${this.backgroundAssets.mp4}" type="video/mp4"> <source src="${this.backgroundAssets.webp}" type="video/webp"> <img src="${this.backgroundAssets.img}" alt=""> </video> </div> <div class="isolate absolute h-100 w-100 flex flex-col justify-center items-center"> ${this.shouldRenderErrorTemplate?this.renderGenericErrorTemplate():t.A} ${this.shouldRenderLoadingTemplate?n(t.x):t.A} ${this.shouldRenderIntroAndSelectionTemplate?this.renderIntroAndSelectionTemplate():t.A} </div> <div id="reveal" class="isolate absolute inset-0 bg-alienblue-800 ${r?"":"hidden"}"> <video class="absolute" preload="auto" muted playsinline disablepictureinpicture disableremoteplayback> <source src="${this.revealBackgroundAssets.mp4}" type="video/mp4"> <source src="${this.revealBackgroundAssets.webp}" type="video/webp"> <img src="${this.revealBackgroundAssets.img}" alt=""> </video> <img class="absolute inset-1/2 -translate-x-1/2 -translate-y-1/2 h-[232px] w-[174px] object-contain card-reveal" src="${this.selectedDrop?.images[0]?.url}" alt="${this.selectedDrop?.name}"> <video class="absolute" preload="auto" muted playsinline disablepictureinpicture disableremoteplayback @click="${this.onReviewAnimationEnd}" @ended="${this.onReviewAnimationEnd}" @error="${this.onReviewAnimationEnd}"> <source src="${this.revealForegroundAssets.mov}" type="video/mp4"> <source src="${this.revealForegroundAssets.webp}" type="video/webp"> <img src="${this.revealForegroundAssets.img}" alt=""> </video> </div> <div class="absolute box-border flex justify-end p-md w-100"> ${i.r({appearance:"secondary",size:e.s.ExtraSmall,onClick:i.c,ariaLabel:"Close the claim screen"})} </div> </div>`}};return R.styles=[e.t,e.z("@keyframes reveal {\n  20% {\n    height: 260px;\n    opacity: 1;\n  }\n  30% {\n    height: calc(260px * 0.9);\n    opacity: 0.8;\n  }\n  50% {\n    filter: grayscale(0%) contrast(100%) brightness(100%);\n    height: 260px;\n    opacity: 1;\n  }\n  80% {\n    filter: grayscale(100%) contrast(0%) brightness(10%);\n    height: calc(260px * 0.9);\n    opacity: 0.8;\n  }\n}\n.card-reveal {\n  animation: reveal 5s;\n  opacity: 0;\n  width: auto;\n  height: 0;\n}\n")],e._([e.n({type:Array,attribute:"distribution-campaign-choices"})],R.prototype,"distributionCampaignChoices",void 0),e._([e.n({type:Array,attribute:"free-nft-claim-drops"})],R.prototype,"freeNftClaimDrops",void 0),e._([e.n({type:String,attribute:"claim-id"})],R.prototype,"claimId",void 0),e._([e.d()],R.prototype,"selectedDropIndex",void 0),e._([e.d()],R.prototype,"displayMode",void 0),e._([e.bj("#reveal > video")],R.prototype,"revealVideos",void 0),R=e._([e.e("claim-selection-view")],R),{r:n}}));
SML.dm("scrollblockerc1378d81",["shelle48e5956","iconc33661e6"],(async(e,t)=>{const o="wheel",n="touchmove",s="scroll-is-blocked";function l(e){e.preventDefault()}function d(e){e.stopPropagation()}class a extends e.bC{constructor(){super(...arguments),this.blockedSources=new Set([])}get shredditApp(){return document.querySelector("shreddit-app")}get isDebugEnabled(){return this.shredditApp?.hasAttribute("debug")}preventOverscrollOnBody(){document.body.classList.contains(s)||document.body.classList.add(s)}allowOverscrollOnBody(){document.body.classList.remove(s)}preventEventOnNode(e,t){t.addEventListener(e,l,{passive:!1})}allowEventOnNode(e,t){t.removeEventListener(e,l)}stopEventPropagationOnNode(e,t){t.addEventListener(e,d,{passive:!1})}allowEventPropagationOnNode(e,t){t.removeEventListener(e,d)}rafOrYOLO(e){requestAnimationFrame?requestAnimationFrame(e):e()}applyBlocking(){return new Promise((e=>{this.rafOrYOLO((()=>{const t=new Set,s=new Set;for(const e in a.CURRENT_SCROLL_BLOCKERS){const l=a.CURRENT_SCROLL_BLOCKERS[e];this.allowEventOnNode(o,l.targetNode),l.allowWheelEvents?this.allowEventPropagationOnNode(o,l.sourceNode):(this.preventEventOnNode(o,l.targetNode),this.stopEventPropagationOnNode(o,l.sourceNode),s.add(l.targetNode)),this.allowEventOnNode(n,l.targetNode),l.allowTouchEvents?this.allowEventPropagationOnNode(n,l.sourceNode):(this.preventEventOnNode(n,l.targetNode),this.stopEventPropagationOnNode(n,l.sourceNode),t.add(l.targetNode))}s.size>0?(this.preventOverscrollOnBody(),this.preventEventOnNode(o,document)):(this.allowOverscrollOnBody(),this.allowEventOnNode(o,document)),t.size>0?this.preventEventOnNode(n,document):this.allowEventOnNode(n,document),e()}))}))}async blockPageScrolling({allowTouchEvents:o,allowWheelEvents:n,source:s=this._host.tagName,sourceNode:l=this._host,targetNode:d=document}={}){a.CURRENT_SCROLL_BLOCKERS[s]||o&&n||(a.CURRENT_SCROLL_BLOCKERS[s]={allowTouchEvents:o,allowWheelEvents:n,sourceNode:l,targetNode:d},await this.applyBlocking(),this.blockedSources.add(s),this.isDebugEnabled&&this.shredditApp?.dispatchEvent(e.c("faceplate-alert",{name:"scroll-blocker-debug",level:e.x.debug,message:`Scrolling blocked for "${s}"`,content:t.x` <dl> <dt>Touch events allowed?</dt> <dd><code>${Boolean(o)}</code></dd> <dt>Wheel events allowed?</dt> <dd><code>${Boolean(n)}</code></dd> </dl> `})))}async unblockPageScrolling(t=this._host.tagName){a.CURRENT_SCROLL_BLOCKERS[t]&&(a.CURRENT_SCROLL_BLOCKERS[t].allowTouchEvents=!0,a.CURRENT_SCROLL_BLOCKERS[t].allowWheelEvents=!0,await this.applyBlocking(),delete a.CURRENT_SCROLL_BLOCKERS[t],this.blockedSources.delete(t),this.isDebugEnabled&&this.shredditApp?.dispatchEvent(e.c("faceplate-alert",{name:"scroll-blocker-debug",level:e.x.debug,message:`Scrolling unblocked for "${t}"`})))}hostDisconnected(){for(const e of this.blockedSources)this.unblockPageScrolling(e)}}return a.CURRENT_SCROLL_BLOCKERS={},{S:a}}));
SML.dm("shredditinteractableelemented3b7c75",["shelle48e5956","iconc33661e6"],(async(e,t)=>{let n=class extends t.s{render(){return t.x` <slot @click="${this.interactionHandler}" @keydown="${this.interactionHandler}"></slot> `}interactionHandler(e){e instanceof KeyboardEvent&&"Enter"!==e.key||this.dispatchEvent(new Event("interactionEvent"))}};n=e._([e.e("shreddit-interactable-element")],n)}));
SML.dm("withrecaptcha5c04d6f4",["shelle48e5956","iconc33661e6"],(async(t,e)=>{class r{constructor(t,e){this.slotTrail=[],(this.host=t).addController(this),this.slotName=e}hostConnected(){let t=this.host;const e=[t];for(;t=t.getRootNode().host;)e.push(t);const r=e.pop();let n=r.querySelector(`[slot="${this.slotName}"]`);n||(n=document.createElement("div"),n.slot=this.slotName,r.appendChild(n)),this.slotted=n,e.forEach((t=>{const e=document.createElement("slot");e.name=e.slot=this.slotName,this.slotTrail.push(t.appendChild(e))}))}hostDisconnected(){for(;this.slotTrail.length>0;)this.slotTrail.pop()?.remove();this.slotted?.remove(),this.slotted=void 0}}var n;let c;!function(t){t.Render="render",t.Execute="execute"}(n||(n={}));const o=new Uint8Array(16);function a(){if(!c&&(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(o)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));function h(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}function p(t){if(!function(t){return"string"==typeof t&&i.test(t)}(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}function l(t,e,r){function n(t,n,c,o){var a;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=p(n)),16!==(null===(a=n)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+t.length);if(i.set(n),i.set(t,n.length),i=r(i),i[6]=15&i[6]|e,i[8]=63&i[8]|128,c){o=o||0;for(let t=0;t<16;++t)c[o+t]=i[t];return c}return h(i)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function u(t){return 14+(t+64>>>9<<4)+1}function d(t,e){const r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function f(t,e,r,n,c,o){return d((a=d(d(e,t),d(n,o)))<<(i=c)|a>>>32-i,r);var a,i}function y(t,e,r,n,c,o,a){return f(e&r|~e&n,t,e,c,o,a)}function m(t,e,r,n,c,o,a){return f(e&n|r&~n,t,e,c,o,a)}function g(t,e,r,n,c,o,a){return f(e^r^n,t,e,c,o,a)}function A(t,e,r,n,c,o,a){return f(r^(e|~n),t,e,c,o,a)}l("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){const e=[],r=32*t.length,n="0123456789abcdef";for(let c=0;c<r;c+=8){const r=t[c>>5]>>>c%32&255,o=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[u(e)-1]=e;let r=1732584193,n=-271733879,c=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const a=r,i=n,s=c,h=o;r=y(r,n,c,o,t[e],7,-680876936),o=y(o,r,n,c,t[e+1],12,-389564586),c=y(c,o,r,n,t[e+2],17,606105819),n=y(n,c,o,r,t[e+3],22,-1044525330),r=y(r,n,c,o,t[e+4],7,-176418897),o=y(o,r,n,c,t[e+5],12,1200080426),c=y(c,o,r,n,t[e+6],17,-1473231341),n=y(n,c,o,r,t[e+7],22,-45705983),r=y(r,n,c,o,t[e+8],7,1770035416),o=y(o,r,n,c,t[e+9],12,-1958414417),c=y(c,o,r,n,t[e+10],17,-42063),n=y(n,c,o,r,t[e+11],22,-1990404162),r=y(r,n,c,o,t[e+12],7,1804603682),o=y(o,r,n,c,t[e+13],12,-40341101),c=y(c,o,r,n,t[e+14],17,-1502002290),n=y(n,c,o,r,t[e+15],22,1236535329),r=m(r,n,c,o,t[e+1],5,-165796510),o=m(o,r,n,c,t[e+6],9,-1069501632),c=m(c,o,r,n,t[e+11],14,643717713),n=m(n,c,o,r,t[e],20,-373897302),r=m(r,n,c,o,t[e+5],5,-701558691),o=m(o,r,n,c,t[e+10],9,38016083),c=m(c,o,r,n,t[e+15],14,-660478335),n=m(n,c,o,r,t[e+4],20,-405537848),r=m(r,n,c,o,t[e+9],5,568446438),o=m(o,r,n,c,t[e+14],9,-1019803690),c=m(c,o,r,n,t[e+3],14,-187363961),n=m(n,c,o,r,t[e+8],20,1163531501),r=m(r,n,c,o,t[e+13],5,-1444681467),o=m(o,r,n,c,t[e+2],9,-51403784),c=m(c,o,r,n,t[e+7],14,1735328473),n=m(n,c,o,r,t[e+12],20,-1926607734),r=g(r,n,c,o,t[e+5],4,-378558),o=g(o,r,n,c,t[e+8],11,-2022574463),c=g(c,o,r,n,t[e+11],16,1839030562),n=g(n,c,o,r,t[e+14],23,-35309556),r=g(r,n,c,o,t[e+1],4,-1530992060),o=g(o,r,n,c,t[e+4],11,1272893353),c=g(c,o,r,n,t[e+7],16,-155497632),n=g(n,c,o,r,t[e+10],23,-1094730640),r=g(r,n,c,o,t[e+13],4,681279174),o=g(o,r,n,c,t[e],11,-358537222),c=g(c,o,r,n,t[e+3],16,-722521979),n=g(n,c,o,r,t[e+6],23,76029189),r=g(r,n,c,o,t[e+9],4,-640364487),o=g(o,r,n,c,t[e+12],11,-421815835),c=g(c,o,r,n,t[e+15],16,530742520),n=g(n,c,o,r,t[e+2],23,-995338651),r=A(r,n,c,o,t[e],6,-198630844),o=A(o,r,n,c,t[e+7],10,1126891415),c=A(c,o,r,n,t[e+14],15,-1416354905),n=A(n,c,o,r,t[e+5],21,-57434055),r=A(r,n,c,o,t[e+12],6,1700485571),o=A(o,r,n,c,t[e+3],10,-1894986606),c=A(c,o,r,n,t[e+10],15,-1051523),n=A(n,c,o,r,t[e+1],21,-2054922799),r=A(r,n,c,o,t[e+8],6,1873313359),o=A(o,r,n,c,t[e+15],10,-30611744),c=A(c,o,r,n,t[e+6],15,-1560198380),n=A(n,c,o,r,t[e+13],21,1309151649),r=A(r,n,c,o,t[e+4],6,-145523070),o=A(o,r,n,c,t[e+11],10,-1120210379),c=A(c,o,r,n,t[e+2],15,718787259),n=A(n,c,o,r,t[e+9],21,-343485551),r=d(r,a),n=d(n,i),c=d(c,s),o=d(o,h)}return[r,n,c,o]}(function(t){if(0===t.length)return[];const e=8*t.length,r=new Uint32Array(u(e));for(let n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}));var w={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function S(t,e,r){if(w.randomUUID&&!t)return w.randomUUID();const n=(t=t||{}).random||(t.rng||a)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,h(n)}function v(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:case 3:return e^r^n;case 2:return e&r^e&n^r&n}}function E(t,e){return t<<e|t>>>32-e}l("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,c=Math.ceil(n/16),o=new Array(c);for(let e=0;e<c;++e){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=t[64*e+4*n]<<24|t[64*e+4*n+1]<<16|t[64*e+4*n+2]<<8|t[64*e+4*n+3];o[e]=r}o[c-1][14]=8*(t.length-1)/Math.pow(2,32),o[c-1][14]=Math.floor(o[c-1][14]),o[c-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<c;++t){const n=new Uint32Array(80);for(let e=0;e<16;++e)n[e]=o[t][e];for(let t=16;t<80;++t)n[t]=E(n[t-3]^n[t-8]^n[t-14]^n[t-16],1);let c=r[0],a=r[1],i=r[2],s=r[3],h=r[4];for(let t=0;t<80;++t){const r=Math.floor(t/20),o=E(c,5)+v(r,a,i,s)+h+e[r]+n[t]>>>0;h=s,s=i,i=E(a,30)>>>0,a=c,c=o}r[0]=r[0]+c>>>0,r[1]=r[1]+a>>>0,r[2]=r[2]+i>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));const b="captcha-update",C=Symbol("mixins/with-recaptcha");return{C:b,L:r,get R(){return n},W:function(c){if(t.ea(c,C))return c;class o extends c{constructor(){super(...arguments),this.recaptchaMethod=n.Render,this.renderString="explicit",this.uuid=S(),this.captchaSlotName=`${this.tagName.toLowerCase()}-captcha-element-${this.uuid}`,this.captchaSlotController=new r(this,this.captchaSlotName),this.scriptElements=new Map}insertRecaptchaScript(t=this.renderString,e=this.captchaSiteKey,r=this.captchaAction,n=this.recaptchaMethod){const c=`//www.google.com/recaptcha/enterprise.js?render=${t}`;if(t&&document.querySelector(`script[src*="${c}"]`))return;const o=document.createElement("script"),a=`${this.tagName.toLowerCase()}-${S()}-${t}`;o.setAttribute("id",a),o.setAttribute("nonce",a),o.setAttribute("async","true"),o.setAttribute("src",c),o.onload=()=>{this.onRecaptchaLoad(e,r,n)},document.body.appendChild(o),this.scriptElements.set(t,o)}removeRecaptchaScript(){this.scriptElements.forEach((t=>t?.remove()))}onRecaptchaLoad(e=this.captchaSiteKey,r=this.captchaAction,c=this.recaptchaMethod){const o=window.grecaptcha;if(!o||c===n.Execute)return;const a=n=>{this.captchaToken=n,this.dispatchEvent(t.c(b,{token:n,siteKey:e,action:r,recaptchaMethod:c}))};o.enterprise.ready((async()=>{this.captchaWidgetId=o.enterprise.render(this.captchaSlotController.slotted,{action:r||"",sitekey:e||"",theme:t.i()?"dark":"light",callback:a,"expired-callback":a,"error-callback":a})}))}async getRecaptchaToken(t=this.captchaAction,e=this.captchaSiteKey){return this.recaptchaMethod=n.Execute,this.captchaToken=void 0,new Promise(((r,n)=>{const c=window.grecaptcha;if(!c)return n("reCAPTCHA not ready or site key not set.");c.enterprise.ready((async()=>{if(!t||!e)return n("reCAPTCHA action or site key is not provided.");if("function"!=typeof c.enterprise.execute)return n("reCAPTCHA execute method is undefined.");try{const n=await c.enterprise.execute(e,{action:t});if(!n)throw new Error("Failed to retrieve a valid reCAPTCHA token.");this.captchaToken=n,r(n)}catch(t){n(`Error in reCAPTCHA token retrieval: ${t}`)}}))}))}resetRecaptcha(t=this.recaptchaMethod){const e=window.grecaptcha;e&&t!==n.Execute&&void 0!==this.captchaWidgetId&&e.enterprise.ready((async()=>{e.enterprise.reset(this.captchaWidgetId),this.captchaToken=void 0}))}async getRecaptchaTokenSafe(t,e){let r=null;try{r=await this.getRecaptchaToken(t,e)??null}catch(t){r=null}return r}dispatchRecaptchaFailureAlert(){const e=t.c("faceplate-alert",{level:t.x.error,message:"An error occurred. Please disable any extensions or try using a different web browser to continue.",cause:"recaptcha-failure"});this.dispatchEvent(e)}renderRecaptcha(t=this.captchaSiteKey,r=this.recaptchaMethod){return t?r===n.Execute?e.A:e.x`<slot name="${this.captchaSlotName}"></slot>`:e.A}renderRecaptchaIn(t,r=this.captchaSiteKey,n=this.recaptchaMethod){e.B(this.renderRecaptcha(r,n),t)}}return o[C]=!0,t._([t.n({type:String,attribute:"captcha-action"})],o.prototype,"captchaAction",void 0),t._([t.n({type:String,attribute:"captcha-site-key"})],o.prototype,"captchaSiteKey",void 0),t._([t.n({type:String,attribute:"captcha-method"})],o.prototype,"recaptchaMethod",void 0),t._([t.n({type:String,attribute:"render-string"})],o.prototype,"renderString",void 0),t._([t.d()],o.prototype,"captchaToken",void 0),o}}}));
SML.dm("indexce089c9c",["shelle48e5956"],(async r=>{var e,o,t,n;!function(r){r.LiveMode="pk_live_sD8LeDtVnlJwAGf51jLygWpH",r.TestMode="pk_test_Me5fd06PSuMkMF5YnwuMfFf4"}(e||(e={})),function(r){r.GenericPurchaseError="GenericPurchaseError",r.AccountAgeRestrictionError="AccountAgeRestrictionError",r.MissingEmailError="MissingEmailError",r.RateLimitingCheckError="RateLimitingCheckError"}(o||(o={})),function(r){r.UserLimitError="UserLimitError",r.GeolocationRestrictionError="GeolocationRestrictionError",r.CaptchaVerificationRejected="CaptchaVerificationRejected",r.InitialAccessLimitError="InitialAccessLimitError"}(t||(t={})),function(r){r.AwardingInProcessError="AwardingInProcessError",r.AwardingOwnContentError="AwardingOwnContentError",r.EnvironmentDisallowedError="EnvironmentDisallowedError",r.InsufficientAwardInventoryBalanceError="InsufficientAwardInventoryBalanceError",r.InsufficientBalanceError="InsufficientBalanceError",r.InternalError="InternalError",r.InvalidRequestError="InvalidRequestError",r.NotAuthorizedError="NotAuthorizedError",r.UnavailableAwardError="UnavailableAwardError"}(n||(n={}));var a,i;!function(r){r.Product="product",r.Gold="gold",r.GoldTopUp="gold-top-up"}(a||(a={})),function(r){r.Proceed="proceed",r.ProceedEmployeeSandbox="proceed-employee-sandbox",r.SandboxTestFailure="sandbox-test-failure",r.SandboxTestSuccess="sandbox-test-success"}(i||(i={})),Object.values(a);const c=()=>"Sorry, unable to complete purchase. Your account was not charged.",s=r=>{switch(r){case o.GenericPurchaseError:return"Sorry, unable to complete purchase. Your account was not charged.";case o.AccountAgeRestrictionError:return"Your account isn't old enough to complete this type of purchase yet.";case o.MissingEmailError:return"Your account doesn't have an email address. Please add one to your account settings.";case o.RateLimitingCheckError:return"You've reached your purchase limit. Please try again later.";default:return}},u=r=>{if(r){const e=s(r);if(e)return e}return"Sorry, unable to complete purchase. Your account was not charged."},d=r=>{if(r){const e=s(r)||(r=>{switch(r){case t.CaptchaVerificationRejected:return"Sorry, something went wrong with your purchase. Please try again.";case t.GeolocationRestrictionError:return"Sorry, purchases are not allowed in your location.";case t.InitialAccessLimitError:return"Initial access limit reached for this item";case t.UserLimitError:return"Sorry, you have reached the purchase limit.";default:return}})(r);if(e)return e}return"Sorry, unable to complete purchase. Your account was not charged."},l=r=>{switch(r){case n.AwardingInProcessError:return"Awarding is in progress.";case n.AwardingOwnContentError:return"You can’t award your own content.";case n.InsufficientBalanceError:return"Your gold balance is insufficient.";case n.InsufficientAwardInventoryBalanceError:return"You have no free awards left.";case n.InvalidRequestError:return"This content isn’t eligible to receive awards.";case n.UnavailableAwardError:return"The award is no longer available.";case n.EnvironmentDisallowedError:case n.InternalError:case n.NotAuthorizedError:default:return"Sorry, something went wrong."}};class E extends Error{constructor(r,e){super(r),this.name="ErrorWithUserSafeMessage",this.originalUserUnsafeMessage=e}}return{E,get P(){return a},S:"2022-11-15",a:"purchase-dialog",get b(){return i},c:async e=>{const{data:{checkout:o},errors:t}=await r.B({operation:r.O.Checkout,variables:{input:e}}),{order:n,errors:a}=o??{};if(t?.[0])throw new Error(u());if(!n||a?.[0])throw new Error(u(a?.[0]?.code));return n},d:async e=>{const{data:{createAwardOrder:o},errors:t}=await r.B({operation:r.O.CreateAwardOrder,variables:{input:e}}),{awarding:n,errors:a}=o??{},i=a?.[0];if(!n||i)throw new E(l(i?.code),i?.message);const c=t?.[0];if(c)throw new E(l(),c.message);return n},e:l,f:async e=>{const{data:{createEconOrder:o},errors:t}=await r.B({operation:r.O.CreateEconOrder,variables:{input:e}}),{order:n,errors:a}=o??{};if(!n||a?.[0])throw new Error(u(a?.[0]?.code));if(t?.[0])throw new Error(u());return n},g:()=>"Something went wrong.",h:c,i:async e=>{const{data:{createEconPayment:o},errors:t}=await r.B({operation:r.O.CreateEconPayment,variables:{input:e}}),{payment:n,providerExecution:a,errors:i}=o??{};if(!n||i?.[0])throw new Error(u(i?.[0]?.code));if(t?.[0])throw new Error(u());return{payment:n,providerExecution:a}},j:async e=>{const{data:{createStorefrontOrder:o},errors:t}=await r.B({operation:r.O.CreateStorefrontOrder,variables:{input:e}}),{order:n,errors:a}=o??{};if(!n||a?.[0])throw new Error(d(a?.[0]?.code));if(t?.[0])throw new Error(d());return n}}}));
SML.dm("index2351742a",[],(async()=>{var e,n="https://js.stripe.com",r="".concat(n,"/v3"),t=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,o=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,i=function(e){var n=document.createElement("script");n.src="".concat(r).concat("");var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},c=null,u=null,s=null,a=function(e){return null!==c?c:(c=new Promise((function(r,c){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)r(window.Stripe);else try{var a=function(){for(var e,r=document.querySelectorAll('script[src^="'.concat(n,'"]')),i=0;i<r.length;i++){var c=r[i];if(e=c.src,t.test(e)||o.test(e))return c}return null}();if(a&&e);else if(a){if(a&&null!==s&&null!==u){var l;a.removeEventListener("load",s),a.removeEventListener("error",u),null===(l=a.parentNode)||void 0===l||l.removeChild(a),a=i()}}else a=i();s=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}}(r,c),u=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}}(c),a.addEventListener("load",s),a.addEventListener("error",u)}catch(e){return void c(e)}else r(null)}))).catch((function(e){return c=null,Promise.reject(e)}))},l=!1,d=function(){return e||(e=a(null).catch((function(n){return e=null,Promise.reject(n)})))};Promise.resolve().then((function(){return d()})).catch((function(e){l||console.warn(e)}));var p=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];l=!0;var t=Date.now();return d().then((function(e){return function(e,n,r){if(null===e)return null;var t=n[0].match(/^pk_test/),o=function(e){return 3===e?"v3":e}(e.version);t&&"v3"!==o&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,n);return function(e,n){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:n})}(i,r),i}(e,n,t)}))};return{get l(){return p}}}));
SML.dm("stripepaymentform14b3fe49",["shelle48e5956","iconc33661e6","withrecaptcha5c04d6f4","indexce089c9c","agegatestandaloneclientjsb13e879d","index2351742a"],(async(t,e,r,n,i,o)=>{let a;const s=new Uint8Array(16);function c(){if(!a&&(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(s)}var p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const l=[];for(let t=0;t<256;++t)l.push((t+256).toString(16).slice(1));function u(t,e=0){return(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase()}function d(t){if(!function(t){return"string"==typeof t&&p.test(t)}(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}function h(t,e,r){function n(t,n,i,o){var a;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=d(n)),16!==(null===(a=n)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+t.length);if(s.set(n),s.set(t,n.length),s=r(s),s[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(let t=0;t<16;++t)i[o+t]=s[t];return i}return u(s)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function m(t){return 14+(t+64>>>9<<4)+1}function y(t,e){const r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function f(t,e,r,n,i,o){return y((a=y(y(e,t),y(n,o)))<<(s=i)|a>>>32-s,r);var a,s}function g(t,e,r,n,i,o,a){return f(e&r|~e&n,t,e,i,o,a)}function w(t,e,r,n,i,o,a){return f(e&n|r&~n,t,e,i,o,a)}function b(t,e,r,n,i,o,a){return f(e^r^n,t,e,i,o,a)}function E(t,e,r,n,i,o,a){return f(r^(e|~n),t,e,i,o,a)}h("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){const e=[],r=32*t.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[m(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const a=r,s=n,c=i,p=o;r=g(r,n,i,o,t[e],7,-680876936),o=g(o,r,n,i,t[e+1],12,-389564586),i=g(i,o,r,n,t[e+2],17,606105819),n=g(n,i,o,r,t[e+3],22,-1044525330),r=g(r,n,i,o,t[e+4],7,-176418897),o=g(o,r,n,i,t[e+5],12,1200080426),i=g(i,o,r,n,t[e+6],17,-1473231341),n=g(n,i,o,r,t[e+7],22,-45705983),r=g(r,n,i,o,t[e+8],7,1770035416),o=g(o,r,n,i,t[e+9],12,-1958414417),i=g(i,o,r,n,t[e+10],17,-42063),n=g(n,i,o,r,t[e+11],22,-1990404162),r=g(r,n,i,o,t[e+12],7,1804603682),o=g(o,r,n,i,t[e+13],12,-40341101),i=g(i,o,r,n,t[e+14],17,-1502002290),n=g(n,i,o,r,t[e+15],22,1236535329),r=w(r,n,i,o,t[e+1],5,-165796510),o=w(o,r,n,i,t[e+6],9,-1069501632),i=w(i,o,r,n,t[e+11],14,643717713),n=w(n,i,o,r,t[e],20,-373897302),r=w(r,n,i,o,t[e+5],5,-701558691),o=w(o,r,n,i,t[e+10],9,38016083),i=w(i,o,r,n,t[e+15],14,-660478335),n=w(n,i,o,r,t[e+4],20,-405537848),r=w(r,n,i,o,t[e+9],5,568446438),o=w(o,r,n,i,t[e+14],9,-1019803690),i=w(i,o,r,n,t[e+3],14,-187363961),n=w(n,i,o,r,t[e+8],20,1163531501),r=w(r,n,i,o,t[e+13],5,-1444681467),o=w(o,r,n,i,t[e+2],9,-51403784),i=w(i,o,r,n,t[e+7],14,1735328473),n=w(n,i,o,r,t[e+12],20,-1926607734),r=b(r,n,i,o,t[e+5],4,-378558),o=b(o,r,n,i,t[e+8],11,-2022574463),i=b(i,o,r,n,t[e+11],16,1839030562),n=b(n,i,o,r,t[e+14],23,-35309556),r=b(r,n,i,o,t[e+1],4,-1530992060),o=b(o,r,n,i,t[e+4],11,1272893353),i=b(i,o,r,n,t[e+7],16,-155497632),n=b(n,i,o,r,t[e+10],23,-1094730640),r=b(r,n,i,o,t[e+13],4,681279174),o=b(o,r,n,i,t[e],11,-358537222),i=b(i,o,r,n,t[e+3],16,-722521979),n=b(n,i,o,r,t[e+6],23,76029189),r=b(r,n,i,o,t[e+9],4,-640364487),o=b(o,r,n,i,t[e+12],11,-421815835),i=b(i,o,r,n,t[e+15],16,530742520),n=b(n,i,o,r,t[e+2],23,-995338651),r=E(r,n,i,o,t[e],6,-198630844),o=E(o,r,n,i,t[e+7],10,1126891415),i=E(i,o,r,n,t[e+14],15,-1416354905),n=E(n,i,o,r,t[e+5],21,-57434055),r=E(r,n,i,o,t[e+12],6,1700485571),o=E(o,r,n,i,t[e+3],10,-1894986606),i=E(i,o,r,n,t[e+10],15,-1051523),n=E(n,i,o,r,t[e+1],21,-2054922799),r=E(r,n,i,o,t[e+8],6,1873313359),o=E(o,r,n,i,t[e+15],10,-30611744),i=E(i,o,r,n,t[e+6],15,-1560198380),n=E(n,i,o,r,t[e+13],21,1309151649),r=E(r,n,i,o,t[e+4],6,-145523070),o=E(o,r,n,i,t[e+11],10,-1120210379),i=E(i,o,r,n,t[e+2],15,718787259),n=E(n,i,o,r,t[e+9],21,-343485551),r=y(r,a),n=y(n,s),i=y(i,c),o=y(o,p)}return[r,n,i,o]}(function(t){if(0===t.length)return[];const e=8*t.length,r=new Uint32Array(m(e));for(let n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}));var P={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function S(t,e,r){if(P.randomUUID&&!t)return P.randomUUID();const n=(t=t||{}).random||(t.rng||c)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,u(n)}function v(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:case 3:return e^r^n;case 2:return e&r^e&n^r&n}}function I(t,e){return t<<e|t>>>32-e}h("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let e=0;e<i;++e){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=t[64*e+4*n]<<24|t[64*e+4*n+1]<<16|t[64*e+4*n+2]<<8|t[64*e+4*n+3];o[e]=r}o[i-1][14]=8*(t.length-1)/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<i;++t){const n=new Uint32Array(80);for(let e=0;e<16;++e)n[e]=o[t][e];for(let t=16;t<80;++t)n[t]=I(n[t-3]^n[t-8]^n[t-14]^n[t-16],1);let i=r[0],a=r[1],s=r[2],c=r[3],p=r[4];for(let t=0;t<80;++t){const r=Math.floor(t/20),o=I(i,5)+v(r,a,s,c)+p+e[r]+n[t]>>>0;p=c,c=s,s=I(a,30)>>>0,a=i,i=o}r[0]=r[0]+i>>>0,r[1]=r[1]+a>>>0,r[2]=r[2]+s>>>0,r[3]=r[3]+c>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));class _ extends Error{constructor(t,e){super(t),this.reason=e}}function M(t){return{fontFamily:t.getPropertyValue("--font-sans"),borderRadius:t.getPropertyValue("--radius-md"),colorPrimary:t.getPropertyValue("--color-primary"),colorBackground:t.getPropertyValue("--color-input-secondary"),colorText:t.getPropertyValue("--color-neutral-content-strong"),colorSuccess:t.getPropertyValue("--color-success-content"),colorWarning:t.getPropertyValue("--color-warning-content"),colorDanger:t.getPropertyValue("--color-danger-content"),focusBoxShadow:"none",focusOutline:`${t.getPropertyValue("--color-global-focus")} auto 1px`,fontLineHeight:"1rem",spacingUnit:"0.2rem"}}function T(t){const e=t.getPropertyValue("--color-secondary-plain-weak"),r=t.getPropertyValue("--color-secondary-plain");return{".Tab":{backgroundColor:"transparent",borderRadius:"0",borderBottom:"2px transparent solid",color:e},".Tab:hover":{color:e},".Tab--selected":{backgroundColor:"transparent",borderBottom:`2px ${r} solid`,color:r},".Tab--selected:hover":{color:r},".TabIcon":{fill:e},".TabIcon--selected":{fill:r}}}async function U(e,r){const i={...e};r(i);const o=await i.orderId;if(!o)throw new _(n.h()+" (E1001)","order_creation_failed");const{data:a}=await t.B({operation:t.O.CreatePaymentIntent,variables:{input:{orderId:o,provider:t.c8.Stripe}}}),s=a.createPaymentIntent?.paymentIntent?.id;if(!s)throw new _(n.h()+" (E1002)","payment_intent_creation_failed");return{orderId:o,clientSecret:s}}async function R(t,e){const r={...t};e(r);const i=await r.orderId;if(!i)throw new _(n.h()+" (E1004)","order_creation_failed");const o=await r.clientSecret;if(!o)throw new _(n.h()+" (E1005)","payment_intent_creation_failed");return{orderId:i,clientSecret:o}}var x,A,C;!function(t){t.Success="success",t.Failure="failure"}(x||(x={})),function(t){t.FailureStatus="FailureStatus",t.MissingOrderId="MissingOrderId"}(A||(A={})),function(t){t.Sandbox="cpmt_0R9yommC1MZ65DeRFCM0cM2F",t.Production="cpmt_0R9XZJmC1MZ65DeRo20xPnz9"}(C||(C={}));function D(t,e){const r=new URL(`${location.origin}/partner/paypal/return`);return r.searchParams.set("order_id",t),r.searchParams.set("status",e),r.toString()}let L=class extends(r.W(e.s)){constructor(){super(...arguments),this.layout="tabs",this.submitButtonText="Complete purchase",this.labels="floating",this.isPaymentPlatform=!1,this.mode="payment",this.stripe=null,this.stripeElements=null,this.initialized=!1,this.submitting=!1,this.slotName=`${this.tagName.toLowerCase()}-payment-element-${S()}`,this.slotController=new r.L(this,this.slotName),this.popupWindow=null,this.onPopupWindowMessage=e=>{if("string"==typeof e.data){let r;try{r=JSON.parse(e.data)}catch{}if("paypal-return-page"===r?.type){const e=r;e.status===x.Success&&e.orderId?this.dispatchEvent(t.c("paypal-payment-success",{orderId:e.orderId})):this.dispatchEvent(t.c("paypal-payment-error",{error:e.orderId?A.FailureStatus:A.MissingOrderId})),this.popupWindow?.close(),this.setIsSubmitting(!1),window.removeEventListener("message",this.onPopupWindowMessage)}}}}get stripePaymentElement(){return this.stripeElements?.getElement("payment")}get getConfirmationParams(){return this.isPaymentPlatform?R:U}updated(t){if(super.updated(t),t.has("publishableKey"))return this.remount();(t.has("labels")||t.has("setupFutureUsage")||t.has("price")||t.has("currency")||t.has("withPaypal")||t.has("paypalCustomPaymentMethodId"))&&this.stripeElements?.update(this.buildStripeElementsOptions()),t.has("layout")&&this.stripePaymentElement?.update({layout:this.layout})}disconnectedCallback(){super.disconnectedCallback(),this.unmount()}buildStripeElementsOptions(){if(!this.price||!this.currency)throw this.unmount(),new Error("Missing price or currency");const t=getComputedStyle(this);return{mode:this.mode,setupFutureUsage:this.setupFutureUsage,amount:this.price,currency:this.currency.toLowerCase(),appearance:{theme:"flat",labels:this.labels,variables:M(t),rules:T(t)},...this.withPaypal&&this.paypalCustomPaymentMethodId&&{customPaymentMethods:[{id:this.paypalCustomPaymentMethodId,options:{type:"static"}}]}}}async mount(){if(!this.publishableKey)return;if(this.captchaSiteKey&&this.insertRecaptchaScript(),this.stripe=await o.l(this.publishableKey,{apiVersion:n.S}),!this.stripe)return;this.stripeElements=this.stripe.elements(this.buildStripeElementsOptions());const e=this.stripeElements.create("payment",{layout:this.layout});e.mount(this.slotController.slotted),e.once("ready",(()=>{this.initialized=!0,this.dispatchEvent(t.c("stripe-payment-form-ready"))})),e.on("change",(e=>this.dispatchEvent(t.c("stripe-payment-form-change",e))))}unmount(){this.stripePaymentElement?.destroy(),this.removeRecaptchaScript(),this.initialized=!1,window.removeEventListener("message",this.onPopupWindowMessage)}remount(){this.unmount(),this.mount()}async submit(){if(this.initialized&&!this.submitting){this.setIsSubmitting(!0),this.dispatchEvent(t.c("stripe-payment-submit"));t:try{const{error:t,selectedPaymentMethod:n}=await this.stripeElements.submit();if(t){this.scrollIntoView({behavior:"smooth"});break t}if(this.captchaSiteKey)switch(this.recaptchaMethod){case r.R.Execute:if(await this.getRecaptchaTokenSafe(),!this.captchaToken){this.dispatchRecaptchaFailureAlert();break t}break;case r.R.Render:if(!this.captchaToken)throw new _("Please check the reCAPTCHA checkbox.","missing_captcha_token")}(e=n)&&[C.Production,C.Sandbox].includes(e)?await this.handlePaypalPayment():await this.handleStripePayment()}catch(e){this.dispatchEvent(t.c("stripe-payment-error",{error:e.message,reason:e.reason}))}var e;this.setIsSubmitting(!1)}}async handlePaypalPayment(){try{const e={orderId:this.orderId};this.dispatchEvent(t.c("paypal-payment-request",e));const r=await e.orderId;if(!r)throw new Error("Missing order ID");const{approvalUrl:i,status:o}=await async function(e){const{payment:r,providerExecution:i}=await n.i({nonce:S(),orderId:e,paymentAuthorization:{paypalPayment:{authorizationCancelUrl:D(e,x.Failure),authorizationSuccessUrl:D(e,x.Success)}},provider:t.c8.Paypal}),o={status:r.status};if(r.status===t.eY.ActionRequired&&"PaypalPaymentExecution"===i?.__typename){const t=i.billingAgreementApprovalUrl||i.orderApprovalUrl;return{...o,approvalUrl:t}}return o}(r);switch(o){case t.eY.Paid:this.dispatchEvent(t.c("paypal-payment-success",{orderId:r}));break;case t.eY.ActionRequired:if(i){if(this.popupWindow=function(t,e){const r=new URL(t);r.searchParams.set("rnd",Math.random().toString());const n=Math.min(740,window.innerHeight),i=Math.min(580,window.innerWidth),o=Math.max(window.screenY+Math.round((window.innerHeight-n)/2),0),a=Math.max(window.screenX+Math.round((window.innerWidth-i)/2),0);return window.open(r.toString(),e,`height=${n},width=${i},top=${o},left=${a},modal=yes,alwaysRaised=yes`)}(i),!this.popupWindow)throw new Error("Unable to open popup window");return void window.addEventListener("message",this.onPopupWindowMessage)}throw new Error("Missing approval url");default:throw new Error(`Unexpected payment status: ${o}`)}}catch(e){const r=e;this.dispatchEvent(t.c("paypal-payment-error",{error:r.message})),window.Sentry?.captureMessage?.(r.message)}}async handleStripePayment(){const{orderId:e,clientSecret:r}=await this.getConfirmationParams({orderId:this.orderId,captchaToken:this.captchaToken,captchaMethod:this.recaptchaMethod},(e=>this.dispatchEvent(t.c("stripe-payment-request",e)))),o=this.stripe.confirmPayment({clientSecret:r,elements:this.stripeElements,redirect:"if_required",confirmParams:{return_url:window.location.href}});await async function(t){const{paymentIntent:e,error:r}=await t;if(r)throw r;const{status:i}=e;if("succeeded"!==i&&"processing"!==i)throw new _(n.h()+" (E1003)","payment_failed");return i}(o),await i.Y(1e3),this.dispatchEvent(t.c("stripe-payment-success",{orderId:e}))}setIsSubmitting(t){this.stripePaymentElement?.update({readOnly:t}),this.submitting=t}onSubmit(t){return t.preventDefault(),this.submit()}renderFooter(){return e.x`<div class="flex flex-col-reverse xs:flex-row justify-between items-center gap-xs xs:gap-md w-full"> <slot class="text-12 text-neutral-content-weak" name="footer"></slot> ${t.r({appearance:"primary",attributes:{className:"shrink-0 w-full xs:w-auto",disabled:this.submitting,type:"submit"},children:this.submitButtonText})} </div>`}render(){return e.x` <form @submit="${this.onSubmit}"> <div class="${t.U({"opacity-50":this.submitting})}"> <slot name="${this.slotName}"></slot> </div> ${this.initialized?e.x`<div class="flex flex-col items-center mt-sm gap-md"> ${this.captchaSiteKey?this.renderRecaptcha():e.A} ${this.withFooter?this.renderFooter():e.A} </div>`:e.A} </form> `}};L.styles=[t.t],t._([t.n({type:String,reflect:!0,attribute:"publishable-key"})],L.prototype,"publishableKey",void 0),t._([t.n({type:String,reflect:!0})],L.prototype,"layout",void 0),t._([t.n({type:String,reflect:!0,attribute:"submit-button-text"})],L.prototype,"submitButtonText",void 0),t._([t.n({type:String,reflect:!0})],L.prototype,"labels",void 0),t._([t.n({type:String,reflect:!0,attribute:"setup-future-usage"})],L.prototype,"setupFutureUsage",void 0),t._([t.n({type:String,reflect:!0,attribute:"order-id"})],L.prototype,"orderId",void 0),t._([t.n({type:Number,reflect:!0})],L.prototype,"price",void 0),t._([t.n({type:String,reflect:!0})],L.prototype,"currency",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"is-payment-platform"})],L.prototype,"isPaymentPlatform",void 0),t._([t.n({type:String})],L.prototype,"mode",void 0),t._([t.n({type:Boolean,attribute:"with-footer"})],L.prototype,"withFooter",void 0),t._([t.n({type:Boolean,attribute:"with-paypal"})],L.prototype,"withPaypal",void 0),t._([t.n({type:String,attribute:"paypal-custom-payment-method-id"})],L.prototype,"paypalCustomPaymentMethodId",void 0),t._([t.d()],L.prototype,"stripe",void 0),t._([t.d()],L.prototype,"stripeElements",void 0),t._([t.d()],L.prototype,"initialized",void 0),t._([t.d()],L.prototype,"submitting",void 0),L=t._([t.e("stripe-payment-form")],L)}));
SML.dm("listingpurchasestepclientjs2fa1555b",["shelle48e5956","utilitiesListf4e8746b","cardnaming4107601d","closebuttone83fb375","iconc33661e6","withrecaptcha5c04d6f4","indexce089c9c","modelsdcd99059","galleryc769794f","stripepaymentform14b3fe49","builderpanellayout3f0c2ce9","agegatestandaloneclientjsb13e879d","carousel58c5a0eb","routing1f7880ca","index2351742a","sharebuttond9f84027","index192b5d82"],(async(t,e,i,r,a,n,o,s)=>{let c;const l=new Uint8Array(16);function p(){if(!c&&(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(l)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const u=[];for(let t=0;t<256;++t)u.push((t+256).toString(16).slice(1));function h(t,e=0){return(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase()}function y(t){if(!function(t){return"string"==typeof t&&d.test(t)}(t))throw TypeError("Invalid UUID");let e;const i=new Uint8Array(16);return i[0]=(e=parseInt(t.slice(0,8),16))>>>24,i[1]=e>>>16&255,i[2]=e>>>8&255,i[3]=255&e,i[4]=(e=parseInt(t.slice(9,13),16))>>>8,i[5]=255&e,i[6]=(e=parseInt(t.slice(14,18),16))>>>8,i[7]=255&e,i[8]=(e=parseInt(t.slice(19,23),16))>>>8,i[9]=255&e,i[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,i[11]=e/4294967296&255,i[12]=e>>>24&255,i[13]=e>>>16&255,i[14]=e>>>8&255,i[15]=255&e,i}function g(t,e,i){function r(t,r,a,n){var o;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let i=0;i<t.length;++i)e.push(t.charCodeAt(i));return e}(t)),"string"==typeof r&&(r=y(r)),16!==(null===(o=r)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+t.length);if(s.set(r),s.set(t,r.length),s=i(s),s[6]=15&s[6]|e,s[8]=63&s[8]|128,a){n=n||0;for(let t=0;t<16;++t)a[n+t]=s[t];return a}return h(s)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function m(t){return 14+(t+64>>>9<<4)+1}function E(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function f(t,e,i,r,a,n){return E((o=E(E(e,t),E(r,n)))<<(s=a)|o>>>32-s,i);var o,s}function _(t,e,i,r,a,n,o){return f(e&i|~e&r,t,e,a,n,o)}function S(t,e,i,r,a,n,o){return f(e&r|i&~r,t,e,a,n,o)}function T(t,e,i,r,a,n,o){return f(e^i^r,t,e,a,n,o)}function b(t,e,i,r,a,n,o){return f(i^(e|~r),t,e,a,n,o)}g("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let i=0;i<e.length;++i)t[i]=e.charCodeAt(i)}return function(t){const e=[],i=32*t.length,r="0123456789abcdef";for(let a=0;a<i;a+=8){const i=t[a>>5]>>>a%32&255,n=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);e.push(n)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[m(e)-1]=e;let i=1732584193,r=-271733879,a=-1732584194,n=271733878;for(let e=0;e<t.length;e+=16){const o=i,s=r,c=a,l=n;i=_(i,r,a,n,t[e],7,-680876936),n=_(n,i,r,a,t[e+1],12,-389564586),a=_(a,n,i,r,t[e+2],17,606105819),r=_(r,a,n,i,t[e+3],22,-1044525330),i=_(i,r,a,n,t[e+4],7,-176418897),n=_(n,i,r,a,t[e+5],12,1200080426),a=_(a,n,i,r,t[e+6],17,-1473231341),r=_(r,a,n,i,t[e+7],22,-45705983),i=_(i,r,a,n,t[e+8],7,1770035416),n=_(n,i,r,a,t[e+9],12,-1958414417),a=_(a,n,i,r,t[e+10],17,-42063),r=_(r,a,n,i,t[e+11],22,-1990404162),i=_(i,r,a,n,t[e+12],7,1804603682),n=_(n,i,r,a,t[e+13],12,-40341101),a=_(a,n,i,r,t[e+14],17,-1502002290),r=_(r,a,n,i,t[e+15],22,1236535329),i=S(i,r,a,n,t[e+1],5,-165796510),n=S(n,i,r,a,t[e+6],9,-1069501632),a=S(a,n,i,r,t[e+11],14,643717713),r=S(r,a,n,i,t[e],20,-373897302),i=S(i,r,a,n,t[e+5],5,-701558691),n=S(n,i,r,a,t[e+10],9,38016083),a=S(a,n,i,r,t[e+15],14,-660478335),r=S(r,a,n,i,t[e+4],20,-405537848),i=S(i,r,a,n,t[e+9],5,568446438),n=S(n,i,r,a,t[e+14],9,-1019803690),a=S(a,n,i,r,t[e+3],14,-187363961),r=S(r,a,n,i,t[e+8],20,1163531501),i=S(i,r,a,n,t[e+13],5,-1444681467),n=S(n,i,r,a,t[e+2],9,-51403784),a=S(a,n,i,r,t[e+7],14,1735328473),r=S(r,a,n,i,t[e+12],20,-1926607734),i=T(i,r,a,n,t[e+5],4,-378558),n=T(n,i,r,a,t[e+8],11,-2022574463),a=T(a,n,i,r,t[e+11],16,1839030562),r=T(r,a,n,i,t[e+14],23,-35309556),i=T(i,r,a,n,t[e+1],4,-1530992060),n=T(n,i,r,a,t[e+4],11,1272893353),a=T(a,n,i,r,t[e+7],16,-155497632),r=T(r,a,n,i,t[e+10],23,-1094730640),i=T(i,r,a,n,t[e+13],4,681279174),n=T(n,i,r,a,t[e],11,-358537222),a=T(a,n,i,r,t[e+3],16,-722521979),r=T(r,a,n,i,t[e+6],23,76029189),i=T(i,r,a,n,t[e+9],4,-640364487),n=T(n,i,r,a,t[e+12],11,-421815835),a=T(a,n,i,r,t[e+15],16,530742520),r=T(r,a,n,i,t[e+2],23,-995338651),i=b(i,r,a,n,t[e],6,-198630844),n=b(n,i,r,a,t[e+7],10,1126891415),a=b(a,n,i,r,t[e+14],15,-1416354905),r=b(r,a,n,i,t[e+5],21,-57434055),i=b(i,r,a,n,t[e+12],6,1700485571),n=b(n,i,r,a,t[e+3],10,-1894986606),a=b(a,n,i,r,t[e+10],15,-1051523),r=b(r,a,n,i,t[e+1],21,-2054922799),i=b(i,r,a,n,t[e+8],6,1873313359),n=b(n,i,r,a,t[e+15],10,-30611744),a=b(a,n,i,r,t[e+6],15,-1560198380),r=b(r,a,n,i,t[e+13],21,1309151649),i=b(i,r,a,n,t[e+4],6,-145523070),n=b(n,i,r,a,t[e+11],10,-1120210379),a=b(a,n,i,r,t[e+2],15,718787259),r=b(r,a,n,i,t[e+9],21,-343485551),i=E(i,o),r=E(r,s),a=E(a,c),n=E(n,l)}return[i,r,a,n]}(function(t){if(0===t.length)return[];const e=8*t.length,i=new Uint32Array(m(e));for(let r=0;r<e;r+=8)i[r>>5]|=(255&t[r/8])<<r%32;return i}(t),8*t.length))}));var v={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function D(t,e,i){if(v.randomUUID&&!t)return v.randomUUID();const r=(t=t||{}).random||(t.rng||p)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,h(r)}function I(t,e,i,r){switch(t){case 0:return e&i^~e&r;case 1:case 3:return e^i^r;case 2:return e&i^e&r^i&r}}function R(t,e){return t<<e|t>>>32-e}g("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const r=t.length/4+2,a=Math.ceil(r/16),n=new Array(a);for(let e=0;e<a;++e){const i=new Uint32Array(16);for(let r=0;r<16;++r)i[r]=t[64*e+4*r]<<24|t[64*e+4*r+1]<<16|t[64*e+4*r+2]<<8|t[64*e+4*r+3];n[e]=i}n[a-1][14]=8*(t.length-1)/Math.pow(2,32),n[a-1][14]=Math.floor(n[a-1][14]),n[a-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<a;++t){const r=new Uint32Array(80);for(let e=0;e<16;++e)r[e]=n[t][e];for(let t=16;t<80;++t)r[t]=R(r[t-3]^r[t-8]^r[t-14]^r[t-16],1);let a=i[0],o=i[1],s=i[2],c=i[3],l=i[4];for(let t=0;t<80;++t){const i=Math.floor(t/20),n=R(a,5)+I(i,o,s,c)+l+e[i]+r[t]>>>0;l=c,c=s,s=R(o,30)>>>0,o=a,a=n}i[0]=i[0]+a>>>0,i[1]=i[1]+o>>>0,i[2]=i[2]+s>>>0,i[3]=i[3]+c>>>0,i[4]=i[4]+l>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}));const M=t.g(a.s);let L=class extends M{constructor(){super(),this.addEventListener("stripe-payment-request",this.onStripePaymentRequest),this.addEventListener("stripe-payment-success",this.onStripePaymentSuccess),this.addEventListener("stripe-payment-error",this.onStripePaymentError),this.addEventListener(n.C,this.onCaptchaUpdate)}async createListingOrder(){if(null!=this.listingId&&null!=this.captchaToken&&null!=this.pricePackageId&&this.listingId.trim())return o.j({nonce:D(),pricePackageId:this.pricePackageId,paymentProvider:t.c8.Stripe,listingId:this.listingId,captchaInfo:{isCheckboxMode:this.captchaMethod===n.R.Render,recaptchaToken:this.captchaToken}})}async onCaptchaUpdate(e){e.stopPropagation(),this.error=void 0,this.listingId&&e.detail.token&&(this.captchaToken=e.detail.token,this.captchaMethod=e.detail.recaptchaMethod,this.trackEvent(t.b({source:s.b.Marketplace,action:s.a.Click,noun:s.M.PdpCaptcha},{action_info:{page_type:t.w.ProductDetailPage,reason:s.c.CheckCaptcha},marketplace:{listing_id:this.listingId}})))}async onStripePaymentRequest(t){t.stopPropagation(),this.error=void 0,t.detail.orderId||(t.detail.orderId=this.createListingOrder().then((t=>t?.id)))}async onStripePaymentSuccess(e){e.stopPropagation(),this.error=void 0,this.listingId&&(this.dispatchEvent(t.c("listing-purchase",{listingId:this.listingId})),this.trackEvent(t.b({source:s.b.Marketplace,action:s.a.Paid,noun:s.M.ListingFe},{action_info:{page_type:t.w.ProductDetailPage},marketplace:{listing_id:this.listingId}})))}async onStripePaymentError(e){e.stopPropagation(),this.error=e.detail.error,this.listingId&&this.trackEvent(t.b({source:s.b.Marketplace,action:s.a.View,noun:s.M.PaymentError},{payment:{error:e.detail.error},marketplace:{listing_id:this.listingId}}))}render(){return a.x`<slot></slot>${this.error&&a.x`<p class="text-danger-content text-center">${this.error}</p>`}`}};L.styles=[t.t],t._([t.n({type:String,attribute:"listing-id"})],L.prototype,"listingId",void 0),t._([t.n({type:String,attribute:"price-package-id"})],L.prototype,"pricePackageId",void 0),t._([t.d()],L.prototype,"error",void 0),t._([t.d()],L.prototype,"captchaToken",void 0),t._([t.d()],L.prototype,"captchaMethod",void 0),L=t._([t.e("listing-purchase-form")],L);let P=class extends a.s{constructor(){super(...arguments),this.utilities=[],this.isDesktopViewport=!1,this.avatarCardActiveSide="front",this.onListingPurchase=()=>{r.c();const e=t.c("faceplate-alert",{level:t.x.success,message:"Purchase successful! Please check your outfits to view your purchase."});return this.dispatchEvent(e)}}get hasUtilitiesAndShouldDisplayThem(){return(this.utilities||[]).length>0&&this.shouldShowUtilities}render(){return a.x`<div class="font-sans w-full h-full"> <builder-panel-layout ?is-desktop-viewport="${this.isDesktopViewport}" with-close-btn close-btn-aria-label="Close the listing purchase screen" @builder-panel-layout:close-btn-click="${r.c}"> <div slot="primary-panel-content" class="relative overflow-hidden h-100 w-100 grid place-items-center place-content-evenly bg-gradient-to-bl from-berrypurple-900 from-16% to-lightblue-500 to-100%"> <div class="absolute opacity-75 w-100 h-[305px] bottom-0" style="background:radial-gradient(69% 50% at 20% 50%,#942fff 44%,rgba(170,71,255,0) 100%)"></div> ${e.r(a.x,CLIENT_CONFIG.STATIC_BASE_URL,{nftTitle:this.nftTitle||"",nftAvatarImageUrl:this.nftAvatarImageUrl||"",dropRarity:this.dropRarity,dropSize:this.dropSize,withUtilities:this.hasUtilitiesAndShouldDisplayThem,isMinted:!1,serialNumber:"",mintDate:"",series:"",activeSide:"front",onClick:()=>{}})} ${this.hasUtilitiesAndShouldDisplayThem?e.a({utilities:this.utilities,shadowRoot:this.shadowRoot}):a.A} </div> <div slot="secondary-panel-content" class="pt-2xl text-tone-1 flex flex-col w-100 h-100 box-border overflow-hidden"> ${(({currency:t,isSoldOut:e,listingId:r,onListingPurchase:n,price:o,pricePackageId:s,soldQuantity:c,stripePublishableKey:l,totalQuantity:p,recaptchaAction:d,recaptchaSiteKey:u,recaptchaMethod:h,recaptchaRenderString:y})=>a.x`<div class="flex flex-col px-xl h-100"> <h3 class="text-24 font-semibold m-0 mb-md"> Complete your purchase </h3> <p class="text-12 m-0 mb-md"> After purchasing, this Collectible Avatar is all yours and you can make it your Reddit avatar. </p> <div class="overflow-y-scroll overflow-x-hidden px-2xs mb-2xl"> <listing-purchase-form listing-id="${r}" price-package-id="${s}" @listing-purchase="${n}"> <stripe-payment-form class="nd:hidden" publishable-key="${l}" price="${+o}" currency="${t}" captcha-action="${a.l(d)}" captcha-site-key="${a.l(u)}" captcha-method="${a.l(h)}" render-string="${a.l(y)}" with-footer> <span slot="footer"> <div class="flex flex-col"> <span class="font-bold text-18 text-neutral-content-strong ${e?"line-through":""}">$${i.f(i.c(o))}</span> <span class="text-12 text-neutral-content-weak"> ${i.g(c,p)} </span> </div> </span> </stripe-payment-form> </listing-purchase-form> </div> </div>`)({currency:this.currency||t.d0.Usd,isSoldOut:!!this.isSoldOut,listingId:this.listingId||"",onListingPurchase:this.onListingPurchase,price:this.price||"",pricePackageId:this.pricePackageId||"",soldQuantity:this.soldQuantity||0,stripePublishableKey:this.stripePublishableKey||"",totalQuantity:this.totalQuantity||0,recaptchaAction:this.recaptchaAction,recaptchaSiteKey:this.recaptchaSiteKey,recaptchaMethod:this.recaptchaMethod,recaptchaRenderString:this.recaptchaRenderString})} </div></builder-panel-layout> </div>`}};P.styles=[t.t],t._([t.n({type:String,attribute:"nft-title"})],P.prototype,"nftTitle",void 0),t._([t.n({type:String,attribute:"nft-avatar-image-url"})],P.prototype,"nftAvatarImageUrl",void 0),t._([t.n({type:Number,attribute:"drop-size"})],P.prototype,"dropSize",void 0),t._([t.n({type:Number,attribute:"drop-rarity"})],P.prototype,"dropRarity",void 0),t._([t.n({type:Boolean,attribute:"should-show-utilities"})],P.prototype,"shouldShowUtilities",void 0),t._([t.n({type:Array})],P.prototype,"utilities",void 0),t._([t.n({type:String,attribute:"stripe-publishable-key"})],P.prototype,"stripePublishableKey",void 0),t._([t.n({type:String,attribute:"recaptcha-action"})],P.prototype,"recaptchaAction",void 0),t._([t.n({type:String,attribute:"recaptcha-site-key"})],P.prototype,"recaptchaSiteKey",void 0),t._([t.n({type:String,attribute:"recaptcha-method"})],P.prototype,"recaptchaMethod",void 0),t._([t.n({type:String,attribute:"recaptcha-render-string"})],P.prototype,"recaptchaRenderString",void 0),t._([t.n({type:String,attribute:"currency"})],P.prototype,"currency",void 0),t._([t.n({type:String,attribute:"listing-id"})],P.prototype,"listingId",void 0),t._([t.n({type:String,attribute:"price-package-id"})],P.prototype,"pricePackageId",void 0),t._([t.n({type:Boolean,attribute:"is-sold-out"})],P.prototype,"isSoldOut",void 0),t._([t.n({type:Number,attribute:"total-quantity"})],P.prototype,"totalQuantity",void 0),t._([t.n({type:Number,attribute:"sold-quantity"})],P.prototype,"soldQuantity",void 0),t._([t.n({type:String,attribute:"price"})],P.prototype,"price",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],P.prototype,"isDesktopViewport",void 0),t._([t.d()],P.prototype,"avatarCardActiveSide",void 0),P=t._([t.e("listing-purchase-step-view")],P)}));
SML.dm("encryption7038e9c8",[],(async()=>{const t="6.9.0";function e(t,e,n){const r=e.split("|").map((t=>t.trim()));for(let n=0;n<r.length;n++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}function n(t,n,r){for(let s in n){let i=n[s];const o=r?r[s]:null;o&&e(i,o,s),Object.defineProperty(t,s,{enumerable:!0,value:i,writable:!1})}}function r(t){if(null==t)return"null";if(Array.isArray(t))return"[ "+t.map(r).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let r=0;r<t.length;r++)n+=e[t[r]>>4],n+=e[15&t[r]];return n}if("object"==typeof t&&"function"==typeof t.toJSON)return r(t.toJSON());switch(typeof t){case"boolean":case"symbol":case"number":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map((e=>`${r(e)}: ${r(t[e])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function s(e,s,i){let o,a=e;{const n=[];if(i){if("message"in i||"code"in i||"name"in i)throw new Error(`value will overwrite populated values: ${r(i)}`);for(const t in i){if("shortMessage"===t)continue;const e=i[t];n.push(t+"="+r(e))}}n.push(`code=${s}`),n.push(`version=${t}`),n.length&&(e+=" ("+n.join(", ")+")")}switch(s){case"INVALID_ARGUMENT":o=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":o=new RangeError(e);break;default:o=new Error(e)}return n(o,{code:s}),i&&Object.assign(o,i),null==o.shortMessage&&n(o,{shortMessage:a}),o}function i(t,e,n,r){if(!t)throw s(e,n,r)}function o(t,e,n,r){i(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}const a=["NFD","NFC","NFKD","NFKC"].reduce(((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){const t=String.fromCharCode(233).normalize("NFD");if(t!==String.fromCharCode(101,769))throw new Error("broken")}t.push(e)}catch(t){}return t}),[]);function h(t){i(a.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function c(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let n=2;for(let r=0;r<e.length;r++)e[r]=parseInt(t.substring(n,n+2),16),n+=2;return e}o(!1,"invalid BytesLike value",e||"value",t)}function f(t,e){return c(t,e,!1)}function l(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof e||t.length===2+2*e)&&(!0!==e||t.length%2==0))}const u="0123456789abcdef";function d(t){const e=f(t);let n="0x";for(let t=0;t<e.length;t++){const r=e[t];n+=u[(240&r)>>4]+u[15&r]}return n}function b(t){return"0x"+t.map((t=>d(t).substring(2))).join("")}function p(t,e,n,r,s){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let r=e+1;r<n.length&&n[r]>>6==2;r++)t++;return t}return"OVERRUN"===t?n.length-e-1:0}const w=Object.freeze({error:function(t,e,n,r,s){o(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)},ignore:p,replace:function(t,e,n,r,s){return"OVERLONG"===t?(o("number"==typeof s,"invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),p(t,e,n))}});function g(t,e){null!=e&&(h(e),t=t.normalize(e));let n=[];for(let e=0;e<t.length;e++){const r=t.charCodeAt(e);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(63&r|128);else if(55296==(64512&r)){e++;const s=t.charCodeAt(e);o(e<t.length&&56320==(64512&s),"invalid surrogate pair","str",t);const i=65536+((1023&r)<<10)+(1023&s);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)}return new Uint8Array(n)}function y(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function x(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function E(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");y(t.outputLen),y(t.blockLen)}function m(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function A(t,e){x(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const U="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,L=t=>t instanceof Uint8Array,k=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),v=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),I=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const H=async()=>{};function B(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!L(t))throw new Error("expected Uint8Array, got "+typeof t);return t}class O{clone(){return this._cloneInto()}}const S={}.toString;function C(t,e){if(void 0!==e&&"[object Object]"!==S.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)}function N(t){const e=e=>t().update(B(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class T extends O{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,E(t);const n=B(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return m(this),this.iHash.update(t),this}digestInto(t){m(this),x(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return t.finished=r,t.destroyed=s,t.blockLen=i,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const F=(t,e,n)=>new T(t,e).update(n).digest();function R(t,e,n,r){E(t);const s=C({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if(y(i),y(o),y(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const h=B(e),c=B(n),f=new Uint8Array(o),l=F.create(t,h),u=l._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:a,DK:f,PRF:l,PRFSalt:u}}function D(t,e,n,r){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:h}=R(t,e,n,r);let c;const f=new Uint8Array(4),l=v(f),u=new Uint8Array(a.outputLen);for(let t=1,e=0;e<i;t++,e+=a.outputLen){const n=o.subarray(e,e+a.outputLen);l.setInt32(0,t,!1),(c=h._cloneInto(c)).update(f).digestInto(u),n.set(u.subarray(0,n.length));for(let t=1;t<s;t++){a._cloneInto(c).update(u).digestInto(u);for(let t=0;t<n.length;t++)n[t]^=u[t]}}return function(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}(a,h,o,c,u)}F.create=(t,e)=>new T(t,e);class P extends O{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=v(this.buffer)}update(t){m(this);const{view:e,buffer:n,blockLen:r}=this,s=(t=B(t)).length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o!==r)n.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=v(t);for(;r<=s-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){m(this),A(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let t=i;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),h=r?4:0,c=r?0:4;t.setUint32(e+h,o,r),t.setUint32(e+c,a,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=v(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=a/4,c=this.get();if(h>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<h;t++)o.setUint32(4*t,c[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return t.length=r,t.pos=o,t.finished=s,t.destroyed=i,r%e&&t.buffer.set(n),t}}const _=(t,e,n)=>t&e^t&n^e&n,j=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),G=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),M=new Uint32Array(64);class $ extends P{constructor(){super(64,32,8,!1),this.A=0|G[0],this.B=0|G[1],this.C=0|G[2],this.D=0|G[3],this.E=0|G[4],this.F=0|G[5],this.G=0|G[6],this.H=0|G[7]}get(){const{A:t,B:e,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[t,e,n,r,s,i,o,a]}set(t,e,n,r,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)M[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=M[t-15],n=M[t-2],r=I(e,7)^I(e,18)^e>>>3,s=I(n,17)^I(n,19)^n>>>10;M[t]=s+M[t-7]+r+M[t-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:h,H:c}=this;for(let t=0;t<64;t++){const e=c+(I(o,6)^I(o,11)^I(o,25))+((f=o)&a^~f&h)+j[t]+M[t]|0,l=(I(n,2)^I(n,13)^I(n,22))+_(n,r,s)|0;c=h,h=a,a=o,o=i+e|0,i=s,s=r,r=n,n=e+l|0}var f;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(n,r,s,i,o,a,h,c)}roundClean(){M.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const V=N((()=>new $)),z=BigInt(2**32-1),K=BigInt(32);function X(t,e=!1){return e?{h:Number(t&z),l:Number(t>>K&z)}:{h:0|Number(t>>K&z),l:0|Number(t&z)}}function W(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=X(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const J=(t,e,n)=>t<<n|e>>>32-n,q=(t,e,n)=>e<<n|t>>>32-n,Q=(t,e,n)=>e<<n-32|t>>>64-n,Z=(t,e,n)=>t<<n-32|e>>>64-n;const Y={fromBig:X,split:W,toBig:(t,e)=>BigInt(t>>>0)<<K|BigInt(e>>>0),shrSH:(t,e,n)=>t>>>n,shrSL:(t,e,n)=>t<<32-n|e>>>n,rotrSH:(t,e,n)=>t>>>n|e<<32-n,rotrSL:(t,e,n)=>t<<32-n|e>>>n,rotrBH:(t,e,n)=>t<<64-n|e>>>n-32,rotrBL:(t,e,n)=>t>>>n-32|e<<64-n,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:J,rotlSL:q,rotlBH:Q,rotlBL:Z,add:function(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:0|s}},add3L:(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),add3H:(t,e,n,r)=>e+n+r+(t/2**32|0)|0,add4L:(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),add4H:(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,add5H:(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,add5L:(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0)},[tt,et]=(()=>Y.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),nt=new Uint32Array(80),rt=new Uint32Array(80);class st extends P{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:h,El:c,Fh:f,Fl:l,Gh:u,Gl:d,Hh:b,Hl:p}=this;return[t,e,n,r,s,i,o,a,h,c,f,l,u,d,b,p]}set(t,e,n,r,s,i,o,a,h,c,f,l,u,d,b,p){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|h,this.El=0|c,this.Fh=0|f,this.Fl=0|l,this.Gh=0|u,this.Gl=0|d,this.Hh=0|b,this.Hl=0|p}process(t,e){for(let n=0;n<16;n++,e+=4)nt[n]=t.getUint32(e),rt[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|nt[t-15],n=0|rt[t-15],r=Y.rotrSH(e,n,1)^Y.rotrSH(e,n,8)^Y.shrSH(e,n,7),s=Y.rotrSL(e,n,1)^Y.rotrSL(e,n,8)^Y.shrSL(e,n,7),i=0|nt[t-2],o=0|rt[t-2],a=Y.rotrSH(i,o,19)^Y.rotrBH(i,o,61)^Y.shrSH(i,o,6),h=Y.rotrSL(i,o,19)^Y.rotrBL(i,o,61)^Y.shrSL(i,o,6),c=Y.add4L(s,h,rt[t-7],rt[t-16]),f=Y.add4H(c,r,a,nt[t-7],nt[t-16]);nt[t]=0|f,rt[t]=0|c}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:a,Dh:h,Dl:c,Eh:f,El:l,Fh:u,Fl:d,Gh:b,Gl:p,Hh:w,Hl:g}=this;for(let t=0;t<80;t++){const e=Y.rotrSH(f,l,14)^Y.rotrSH(f,l,18)^Y.rotrBH(f,l,41),y=Y.rotrSL(f,l,14)^Y.rotrSL(f,l,18)^Y.rotrBL(f,l,41),x=f&u^~f&b,E=l&d^~l&p,m=Y.add5L(g,y,E,et[t],rt[t]),A=Y.add5H(m,w,e,x,tt[t],nt[t]),U=0|m,L=Y.rotrSH(n,r,28)^Y.rotrBH(n,r,34)^Y.rotrBH(n,r,39),k=Y.rotrSL(n,r,28)^Y.rotrBL(n,r,34)^Y.rotrBL(n,r,39),v=n&s^n&o^s&o,I=r&i^r&a^i&a;w=0|b,g=0|p,b=0|u,p=0|d,u=0|f,d=0|l,({h:f,l}=Y.add(0|h,0|c,0|A,0|U)),h=0|o,c=0|a,o=0|s,a=0|i,s=0|n,i=0|r;const H=Y.add3L(U,k,I);n=Y.add3H(H,A,L,v),r=0|H}({h:n,l:r}=Y.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=Y.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:a}=Y.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h,l:c}=Y.add(0|this.Dh,0|this.Dl,0|h,0|c)),({h:f,l}=Y.add(0|this.Eh,0|this.El,0|f,0|l)),({h:u,l:d}=Y.add(0|this.Fh,0|this.Fl,0|u,0|d)),({h:b,l:p}=Y.add(0|this.Gh,0|this.Gl,0|b,0|p)),({h:w,l:g}=Y.add(0|this.Hh,0|this.Hl,0|w,0|g)),this.set(n,r,s,i,o,a,h,c,f,l,u,d,b,p,w,g)}roundClean(){nt.fill(0),rt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const it=N((()=>new st));const ot=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),at=ot.crypto||ot.msCrypto;const[ht,ct,ft]=[[],[],[]],lt=BigInt(0),ut=BigInt(1),dt=BigInt(2),bt=BigInt(7),pt=BigInt(256),wt=BigInt(113);for(let t=0,e=ut,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ht.push(2*(5*r+n)),ct.push((t+1)*(t+2)/2%64);let s=lt;for(let t=0;t<7;t++)e=(e<<ut^(e>>bt)*wt)%pt,e&dt&&(s^=ut<<(ut<<BigInt(t))-ut);ft.push(s)}const[gt,yt]=W(ft,!0),xt=(t,e,n)=>n>32?Q(t,e,n):J(t,e,n),Et=(t,e,n)=>n>32?Z(t,e,n):q(t,e,n);class mt extends O{constructor(t,e,n,r=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,y(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=k(this.state)}keccak(){!function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,s=(e+2)%10,i=n[s],o=n[s+1],a=xt(i,o,1)^n[r],h=Et(i,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=h}let e=t[2],s=t[3];for(let n=0;n<24;n++){const r=ct[n],i=xt(e,s,r),o=Et(e,s,r),a=ht[n];e=t[a],s=t[a+1],t[a]=i,t[a+1]=o}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=gt[r],t[1]^=yt[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){m(this);const{blockLen:e,state:n}=this,r=(t=B(t)).length;for(let s=0;s<r;){const i=Math.min(e-this.pos,r-s);for(let e=0;e<i;e++)n[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){m(this,!1),x(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,s=t.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);t.set(e.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return y(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(A(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return t||(t=new mt(e,n,r,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=r,t.enableXOF=i,t.destroyed=this.destroyed,t}}const At=((t,e,n)=>N((()=>new mt(e,t,n))))(1,136,32);let Ut=!1;const Lt=function(t){return At(t)};let kt=Lt;function vt(t){const e=f(t,"data");return d(kt(e))}vt._=Lt,vt.lock=function(){Ut=!0},vt.register=function(t){if(Ut)throw new TypeError("keccak256 is locked");kt=t},Object.freeze(vt);let It=!1;const Ht=function(t){return new Uint8Array(function(t){i(null!=at,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),o(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return at.getRandomValues(e),e}(t))};let Bt=Ht;function Ot(t){return Bt(t)}Ot._=Ht,Ot.lock=function(){It=!0},Ot.register=function(t){if(It)throw new Error("randomBytes is locked");Bt=t},Object.freeze(Ot);var St,Ct,Nt,Tt=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},Ft=function(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n};const Rt={16:10,24:12,32:14},Dt=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Pt=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],_t=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],jt=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Gt=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Mt=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],$t=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Vt=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],zt=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Kt=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Xt=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Wt=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Jt=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],qt=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Qt=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Zt(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class Yt{get key(){return Tt(this,St,"f").slice()}constructor(t){if(St.set(this,void 0),Ct.set(this,void 0),Nt.set(this,void 0),!(this instanceof Yt))throw Error("AES must be instanitated with `new`");Ft(this,St,new Uint8Array(t),"f");const e=Rt[this.key.length];if(null==e)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ft(this,Nt,[],"f"),Ft(this,Ct,[],"f");for(let t=0;t<=e;t++)Tt(this,Nt,"f").push([0,0,0,0]),Tt(this,Ct,"f").push([0,0,0,0]);const n=4*(e+1),r=this.key.length/4,s=Zt(this.key);let i;for(let t=0;t<r;t++)i=t>>2,Tt(this,Nt,"f")[i][t%4]=s[t],Tt(this,Ct,"f")[e-i][t%4]=s[t];let o,a=0,h=r;for(;h<n;){if(o=s[r-1],s[0]^=Pt[o>>16&255]<<24^Pt[o>>8&255]<<16^Pt[255&o]<<8^Pt[o>>24&255]^Dt[a]<<24,a+=1,8!=r)for(let t=1;t<r;t++)s[t]^=s[t-1];else{for(let t=1;t<r/2;t++)s[t]^=s[t-1];o=s[r/2-1],s[r/2]^=Pt[255&o]^Pt[o>>8&255]<<8^Pt[o>>16&255]<<16^Pt[o>>24&255]<<24;for(let t=r/2+1;t<r;t++)s[t]^=s[t-1]}let t,i,c=0;for(;c<r&&h<n;)t=h>>2,i=h%4,Tt(this,Nt,"f")[t][i]=s[c],Tt(this,Ct,"f")[e-t][i]=s[c++],h++}for(let t=1;t<e;t++)for(let e=0;e<4;e++)o=Tt(this,Ct,"f")[t][e],Tt(this,Ct,"f")[t][e]=Wt[o>>24&255]^Jt[o>>16&255]^qt[o>>8&255]^Qt[255&o]}encrypt(t){if(16!=t.length)throw new TypeError("invalid plaintext size (must be 16 bytes)");const e=Tt(this,Nt,"f").length-1,n=[0,0,0,0];let r=Zt(t);for(let t=0;t<4;t++)r[t]^=Tt(this,Nt,"f")[0][t];for(let t=1;t<e;t++){for(let e=0;e<4;e++)n[e]=jt[r[e]>>24&255]^Gt[r[(e+1)%4]>>16&255]^Mt[r[(e+2)%4]>>8&255]^$t[255&r[(e+3)%4]]^Tt(this,Nt,"f")[t][e];r=n.slice()}const s=new Uint8Array(16);let i=0;for(let t=0;t<4;t++)i=Tt(this,Nt,"f")[e][t],s[4*t]=255&(Pt[r[t]>>24&255]^i>>24),s[4*t+1]=255&(Pt[r[(t+1)%4]>>16&255]^i>>16),s[4*t+2]=255&(Pt[r[(t+2)%4]>>8&255]^i>>8),s[4*t+3]=255&(Pt[255&r[(t+3)%4]]^i);return s}decrypt(t){if(16!=t.length)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const e=Tt(this,Ct,"f").length-1,n=[0,0,0,0];let r=Zt(t);for(let t=0;t<4;t++)r[t]^=Tt(this,Ct,"f")[0][t];for(let t=1;t<e;t++){for(let e=0;e<4;e++)n[e]=Vt[r[e]>>24&255]^zt[r[(e+3)%4]>>16&255]^Kt[r[(e+2)%4]>>8&255]^Xt[255&r[(e+1)%4]]^Tt(this,Ct,"f")[t][e];r=n.slice()}const s=new Uint8Array(16);let i=0;for(let t=0;t<4;t++)i=Tt(this,Ct,"f")[e][t],s[4*t]=255&(_t[r[t]>>24&255]^i>>24),s[4*t+1]=255&(_t[r[(t+3)%4]>>16&255]^i>>16),s[4*t+2]=255&(_t[r[(t+2)%4]>>8&255]^i>>8),s[4*t+3]=255&(_t[255&r[(t+1)%4]]^i);return s}}St=new WeakMap,Ct=new WeakMap,Nt=new WeakMap;class te{constructor(t,e,n){if(n&&!(this instanceof n))throw new Error(`${t} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Yt(e)},name:{enumerable:!0,value:t}})}}var ee,ne,re,se=function(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n},ie=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class oe extends te{constructor(t,e){super("CTR",t,oe),ee.set(this,void 0),ne.set(this,void 0),re.set(this,void 0),se(this,re,new Uint8Array(16),"f"),ie(this,re,"f").fill(0),se(this,ee,ie(this,re,"f"),"f"),se(this,ne,16,"f"),null==e&&(e=1),"number"==typeof e?this.setCounterValue(e):this.setCounterBytes(e)}get counter(){return new Uint8Array(ie(this,re,"f"))}setCounterValue(t){if(!Number.isInteger(t)||t<0||t>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let e=15;e>=0;--e)ie(this,re,"f")[e]=t%256,t=Math.floor(t/256)}setCounterBytes(t){if(16!==t.length)throw new TypeError("invalid counter initial Uint8Array value length");ie(this,re,"f").set(t)}increment(){for(let t=15;t>=0;t--){if(255!==ie(this,re,"f")[t]){ie(this,re,"f")[t]++;break}ie(this,re,"f")[t]=0}}encrypt(t){var e,n;const r=new Uint8Array(t);for(let t=0;t<r.length;t++)16===ie(this,ne,"f")&&(se(this,ee,this.aes.encrypt(ie(this,re,"f")),"f"),se(this,ne,0,"f"),this.increment()),r[t]^=ie(this,ee,"f")[(se(this,ne,(n=ie(this,ne,"f"),e=n++,n),"f"),e)];return r}decrypt(t){return this.encrypt(t)}}ee=new WeakMap,ne=new WeakMap,re=new WeakMap;const ae=new TextEncoder,he=new TextDecoder("utf-8",{ignoreBOM:!0}),ce=t=>ae.encode(t),fe=t=>he.decode(t),le=(()=>{const t=[..."0123456789abcdef"],e=new Array(256);for(let n=0;n<256;n++)e[n]=`${t[n>>>4&15]}${t[15&n]}`;return e})(),ue=(()=>{const t={};for(let e=0;e<256;e++){const n=le[e],r=n[0],s=r.toUpperCase(),i=n[1],o=i.toUpperCase();t[n]=e,t[`${r}${o}`]=e,t[`${s}${i}`]=e,t[`${s}${o}`]=e}return t})(),de={encode:t=>{let e="";for(let n=0,r=t.length;n<r;n++)e+=le[t[n]];return e},encodeStr:t=>de.encode(ce(t)),decode:t=>{const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=ue[t.slice(2*r,2*r+2)];return n},decodeStr:t=>fe(de.decode(t)),is:t=>!(t.length%2)&&!!/^[a-fA-F0-9]*$/.test(t)},be=crypto,pe=new TextEncoder,we=t=>{const e=async t=>t instanceof Uint8Array?be.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]):"string"==typeof t?e(pe.encode(t.normalize())):t,n=async(n,r,s,i)=>{const o=await e(n),a=await((e,n,r,s)=>(n="string"==typeof n?pe.encode(n):n,be.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:r,hash:{name:t}},e,s)))(o,r,s,8*i);return a},r=async(t,e,r,s)=>new Uint8Array(await n(t,e,r,s)),s=async(t,e,n,s)=>(t=>de.encode(t))(await r(t,e,n,s));return s.buffer=n,s.hex=s,s.uint8=r,s},ge={sha1:we("SHA-1"),sha256:we("SHA-256"),sha384:we("SHA-384"),sha512:we("SHA-512")},ye=1e5;function xe(t,e,n){return new oe(t,e).encrypt(function(t){const e=16-t.length%16,n=new Uint8Array(t.length+e);n.set(t);for(let r=t.length;r<n.length;r++)n[r]=e;return n}(n))}function Ee(t,e){return vt(b([t,e]))}return{A:function(t){return l(t,!0)?(t.length-2)/2:f(t).length},B:function(t,e,n){if(null==n&&(n=""),t!==e){let t=n,e="new";n&&(t+=".",e+=" "+n),i(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}},C:oe,D:l,E:function(t,e){return function(t,e){const n=f(t);i(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),r.set(n,e-n.length),d(r)}(t,e)},F:vt,G:function(t,e,n){null==n&&(n=""),n&&(n=": "+n),i(t>=e,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),i(t<=e,"too many arguemnts"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})},H:function(t,e){return t&&t.code===e},I:ye,J:s,K:32,L:async function(t){const e=Object.keys(t);return(await Promise.all(e.map((e=>Promise.resolve(t[e]))))).reduce(((t,n,r)=>(t[e[r]]=n,t)),{})},M:h,N:te,O:Ot,P:t,Q:function(t,e,n){const r=f(t);return n>r.length&&i(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),d(r.slice(e,n))},R:async function(t,e,n){const r=Ot(16),s=Ot(16),i=vt(g(t)),o=await ge.sha256.uint8(g(n,"NFKC"),s,ye,32),a=xe(function(t){return t.slice(0,16)}(o),r,g(e)),h=d(a),c=Ee(function(t){return t.slice(16,32)}(o),a);return{version:3,id:i,crypto:{ciphertext:h,cipherparams:{iv:d(r)},kdf:"pbkdf2",kdfparams:{c:ye,dklen:32,prf:"hmac-sha256",salt:d(s)},mac:c,cipher:"aes-128-ctr"}}},S:P,a:function(t,e){return n=function(t,e){null==e&&(e=w.error);const n=f(t,"bytes"),r=[];let s=0;for(;s<n.length;){const t=n[s++];if(!(t>>7)){r.push(t);continue}let i=null,o=null;if(192==(224&t))i=1,o=127;else if(224==(240&t))i=2,o=2047;else{if(240!=(248&t)){s+=e(128==(192&t)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,n,r);continue}i=3,o=65535}if(s-1+i>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let a=t&(1<<8-i-1)-1;for(let t=0;t<i;t++){let t=n[s];if(128!=(192&t)){s+=e("MISSING_CONTINUE",s,n,r),a=null;break}a=a<<6|63&t,s++}null!==a&&(a>1114111?s+=e("OUT_OF_RANGE",s-1-i,n,r,a):a>=55296&&a<=57343?s+=e("UTF16_SURROGATE",s-1-i,n,r,a):a<=o?s+=e("OVERLONG",s-1-i,n,r,a):r.push(a))}return r}(t,e),n.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("");var n},b:ge,c:Ee,d:o,e:i,f:n,g:f,h:d,i:function(t){return l(t,!0)||t instanceof Uint8Array},j:function(t,e){return c(t,e,!0)},k:b,l:function(t,e){const n={sha256:V,sha512:it}[t];return o(null!=n,"invalid hmac algorithm","algorithm",t),F.create(n,e)},m:function(t,e,n,r,s){const i={sha256:V,sha512:it}[s];return o(null!=i,"invalid pbkdf2 algorithm","algorithm",s),D(i,t,e,{c:n,dkLen:r})},n:async function(t,e,n){let r=Date.now();for(let s=0;s<t;s++){n(s);const t=Date.now()-r;t>=0&&t<e||(await H(),r+=t)}},o:C,p:function(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))},q:y,r:D,s:V,t:g,u:k,v:function(t){switch(t){case"sha256":return V.create();case"sha512":return it.create()}o(!1,"invalid hashing algorithm name","algorithm",t)},w:N,x:F,y:function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!L(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e},z:function(t=32){if(U&&"function"==typeof U.getRandomValues)return U.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}}}));
SML.dm("vaultcreationscreenclientjs50041fe3",["shelle48e5956","iconc33661e6","closebuttone83fb375","encryption7038e9c8","modelsdcd99059","agegatestandaloneclientjsb13e879d","galleryc769794f","builderpanellayout3f0c2ce9","utils57a7018c","cardnaming4107601d","routing1f7880ca","sharebuttond9f84027","index192b5d82","textinput9c3f45be","communitypickerf331f77f","constants9e09f052"],(async(t,e,n,r,i,s)=>{const a=Object.prototype.toString;function o(t){if(!function(t){return!!t&&(t.constructor===Uint8Array||"[object Uint8Array]"===a.call(t))}(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function c(t){if("string"!=typeof t)throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}new globalThis.TextDecoder;const l=new globalThis.TextEncoder;function u(t){return c(t),l.encode(t)}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));const d={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function h(t){if(c(t),t.length%2!=0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const e=d[t[2*r]],i=d[t[2*r+1]];if(void 0===e||void 0===i)throw new Error("Invalid Hex character encountered at position "+2*r);n[r]=e<<4|i}return n}const f=BigInt(0),p=BigInt(1),g=9007199254740991;function y(t,e){let n=w(t,"value");const i=BigInt(I(e,"width")),s=p<<i-p;if(n<f){n=-n,r.e(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return(~n&(p<<i)-p)+p}return r.e(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),n}function m(t,e){const n=E(t,"value"),r=BigInt(I(e,"bits"));return n&(p<<r)-p}function w(t,e){switch(typeof t){case"bigint":return t;case"number":return r.d(Number.isInteger(t),"underflow",e||"value",t),r.d(t>=-9007199254740991&&t<=g,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(n){r.d(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}r.d(!1,"invalid BigNumberish value",e||"value",t)}function E(t,e){const n=w(t,e);return r.e(n>=f,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const b="0123456789abcdef";function v(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=b[n>>4],e+=b[15&n];return BigInt(e)}return w(t)}function I(t,e){switch(typeof t){case"bigint":return r.d(t>=-9007199254740991&&t<=g,"overflow",e||"value",t),Number(t);case"number":return r.d(Number.isInteger(t),"underflow",e||"value",t),r.d(t>=-9007199254740991&&t<=g,"overflow",e||"value",t),t;case"string":try{if(""===t)throw new Error("empty string");return I(BigInt(t),e)}catch(n){r.d(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}r.d(!1,"invalid numeric value",e||"value",t)}function A(t,e){let n=E(t,"value").toString(16);if(null==e)n.length%2&&(n="0"+n);else{const i=I(e,"width");for(r.e(2*i>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<2*i;)n="0"+n}return"0x"+n}function x(t){const e=E(t,"value");if(e===f)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let t=0;t<r.length;t++){const e=2*t;r[t]=parseInt(n.substring(e,e+2),16)}return r}const T="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let N=null;function R(t){if(null==N){N={};for(let t=0;t<58;t++)N[T[t]]=BigInt(t)}const e=N[t];return r.d(null!=e,"invalid base58 value","letter",t),e}const P=BigInt(0),S=BigInt(58);function O(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function k(t,e,n){let r=0;for(let i=0;i<n;i++)r=256*r+t[e+i];return r}function C(t,e,n,i){const s=[];for(;n<e+1+i;){const a=L(t,n);s.push(a.result),n+=a.consumed,r.e(n<=e+1+i,"child data too short","BUFFER_OVERRUN",{buffer:t,length:i,offset:e})}return{consumed:1+i,result:s}}function L(t,e){r.e(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=e=>{r.e(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=k(t,e+1,r);return n(e+1+r+i),C(t,e,e+1+r,r+i)}if(t[e]>=192){const r=t[e]-192;return n(e+1+r),C(t,e,e+1,r)}if(t[e]>=184){const i=t[e]-183;n(e+1+i);const s=k(t,e+1,i);n(e+1+i+s);return{consumed:1+i+s,result:r.h(t.slice(e+1+i,e+1+i+s))}}if(t[e]>=128){const i=t[e]-128;n(e+1+i);return{consumed:1+i,result:r.h(t.slice(e+1,e+1+i))}}return{consumed:1,result:O(t[e])}}function B(t){const e=r.g(t,"data"),n=L(e,0);return r.d(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function U(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function D(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(D(t))})),e.length<=55)return e.unshift(192+e.length),e;const n=U(e.length);return n.unshift(247+n.length),n.concat(e)}const e=Array.prototype.slice.call(r.g(t,"object"));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=U(e.length);return n.unshift(183+n.length),n.concat(e)}const _="0123456789abcdef";function $(t){let e="0x";for(const n of D(t))e+=_[n>>4],e+=_[15&n];return e}function F(t){const e=r.g(t,"randomBytes");e[6]=15&e[6]|64,e[8]=63&e[8]|128;const n=r.h(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const M=32,V=new Uint8Array(M),G=["then"],K={};function j(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}class z extends Array{#t;constructor(...t){const e=t[0];let n=t[1],r=(t[2]||[]).slice(),i=!0;e!==K&&(n=t,r=[],i=!1),super(n.length),n.forEach(((t,e)=>{this[e]=t}));const s=r.reduce(((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t)),new Map);if(this.#t=Object.freeze(n.map(((t,e)=>{const n=r[e];return null!=n&&1===s.get(n)?n:null}))),i)return Object.freeze(this),new Proxy(this,{get:(t,e,n)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const n=I(e,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const r=t[n];return r instanceof Error&&j(`index ${n}`,r),r}if(G.indexOf(e)>=0)return Reflect.get(t,e,n);const r=t[e];if(r instanceof Function)return function(...e){return r.apply(this===n?t:this,e)};if(!(e in t))return t.getValue.apply(this===n?t:this,[e])}return Reflect.get(t,e,n)}})}toArray(){const t=[];return this.forEach(((e,n)=>{e instanceof Error&&j(`index ${n}`,e),t.push(e)})),t}toObject(){return this.#t.reduce(((t,e,n)=>(r.e(null!=e,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),e in t||(t[e]=this.getValue(e)),t)),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);const n=[],r=[];for(let i=t;i<e;i++)n.push(this[i]),r.push(this.#t[i]);return new z(K,n,r)}filter(t,e){const n=[],r=[];for(let i=0;i<this.length;i++){const s=this[i];s instanceof Error&&j(`index ${i}`,s),t.call(e,s,i,this)&&(n.push(s),r.push(this.#t[i]))}return new z(K,n,r)}map(t,e){const n=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&j(`index ${r}`,i),n.push(t.call(e,i,r,this))}return n}getValue(t){const e=this.#t.indexOf(t);if(-1===e)return;const n=this[e];return n instanceof Error&&j(`property ${JSON.stringify(t)}`,n.error),n}static fromItems(t,e){return new z(K,t,e)}}function q(t){let e=x(t);return r.e(e.length<=M,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:M,offset:e.length}),e.length!==M&&(e=r.j(r.k([V.slice(e.length%M),e]))),e}class H{name;type;localName;dynamic;constructor(t,e,n,i){r.f(this,{name:t,type:e,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){r.d(!1,t,this.localName,e)}}class W{#e;#n;constructor(){this.#e=[],this.#n=0}get data(){return r.k(this.#e)}get length(){return this.#n}#r(t){return this.#e.push(t),this.#n+=t.length,t.length}appendWriter(t){return this.#r(r.j(t.data))}writeBytes(t){let e=r.j(t);const n=e.length%M;return n&&(e=r.j(r.k([e,V.slice(n)]))),this.#r(e)}writeValue(t){return this.#r(q(t))}writeUpdatableValue(){const t=this.#e.length;return this.#e.push(V),this.#n+=M,e=>{this.#e[t]=q(e)}}}class Y{allowLoose;#e;#i;constructor(t,e){r.f(this,{allowLoose:!!e}),this.#e=r.j(t),this.#i=0}get data(){return r.h(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#i}get bytes(){return new Uint8Array(this.#e)}#s(t,e,n){let i=Math.ceil(e/M)*M;return this.#i+i>this.#e.length&&(this.allowLoose&&n&&this.#i+e<=this.#e.length?i=e:r.e(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:r.j(this.#e),length:this.#e.length,offset:this.#i+i})),this.#e.slice(this.#i,this.#i+i)}subReader(t){return new Y(this.#e.slice(this.#i+t),this.allowLoose)}readBytes(t,e){let n=this.#s(0,t,!!e);return this.#i+=n.length,n.slice(0,t)}readValue(){return v(this.readBytes(M))}readIndex(){return I(v(this.readBytes(M)))}}let Z=!1;const J=function(t,e,n){return r.l(t,e).update(n).digest()};let X=J;function Q(t,e,n){const i=r.g(e,"key"),s=r.g(n,"data");return r.h(X(t,i,s))}Q._=J,Q.lock=function(){Z=!0},Q.register=function(t){if(Z)throw new Error("computeHmac is locked");X=t},Object.freeze(Q);const tt=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),et=Uint8Array.from({length:16},((t,e)=>e));let nt=[et],rt=[et.map((t=>(9*t+5)%16))];for(let t=0;t<4;t++)for(let e of[nt,rt])e.push(e[t].map((t=>tt[t])));const it=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),st=nt.map(((t,e)=>t.map((t=>it[e][t])))),at=rt.map(((t,e)=>t.map((t=>it[e][t])))),ot=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),ct=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),lt=(t,e)=>t<<e|t>>>32-e;function ut(t,e,n,r){return 0===t?e^n^r:1===t?e&n|~e&r:2===t?(e|~n)^r:3===t?e&r|n&~r:e^(n|~r)}const dt=new Uint32Array(16);class ht extends r.S{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:n,h3:r,h4:i}=this;return[t,e,n,r,i]}set(t,e,n,r,i){this.h0=0|t,this.h1=0|e,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(t,e){for(let n=0;n<16;n++,e+=4)dt[n]=t.getUint32(e,!0);let n=0|this.h0,r=n,i=0|this.h1,s=i,a=0|this.h2,o=a,c=0|this.h3,l=c,u=0|this.h4,d=u;for(let t=0;t<5;t++){const e=4-t,h=ot[t],f=ct[t],p=nt[t],g=rt[t],y=st[t],m=at[t];for(let e=0;e<16;e++){const r=lt(n+ut(t,i,a,c)+dt[p[e]]+h,y[e])+u|0;n=u,u=c,c=0|lt(a,10),a=i,i=r}for(let t=0;t<16;t++){const n=lt(r+ut(e,s,o,l)+dt[g[t]]+f,m[t])+d|0;r=d,d=l,l=0|lt(o,10),o=s,s=n}}this.set(this.h1+a+l|0,this.h2+c+d|0,this.h3+u+r|0,this.h4+n+s|0,this.h0+i+o|0)}roundClean(){dt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const ft=r.w((()=>new ht));let pt=!1;const gt=function(t){return ft(t)};let yt=gt;function mt(t){const e=r.g(t,"data");return r.h(yt(e))}mt._=gt,mt.lock=function(){pt=!0},mt.register=function(t){if(pt)throw new TypeError("ripemd160 is locked");yt=t},Object.freeze(mt);let wt=!1;const Et=function(t,e,n,i,s){return r.m(t,e,n,i,s)};let bt=Et;function vt(t,e,n,i,s){const a=r.g(t,"password"),o=r.g(e,"salt");return r.h(bt(a,o,n,i,s))}vt._=Et,vt.lock=function(){wt=!0},vt.register=function(t){if(wt)throw new Error("pbkdf2 is locked");bt=t},Object.freeze(vt);const It=(t,e)=>t<<e|t>>>32-e;function At(t,e,n,r,i,s){let a=t[e++]^n[r++],o=t[e++]^n[r++],c=t[e++]^n[r++],l=t[e++]^n[r++],u=t[e++]^n[r++],d=t[e++]^n[r++],h=t[e++]^n[r++],f=t[e++]^n[r++],p=t[e++]^n[r++],g=t[e++]^n[r++],y=t[e++]^n[r++],m=t[e++]^n[r++],w=t[e++]^n[r++],E=t[e++]^n[r++],b=t[e++]^n[r++],v=t[e++]^n[r++],I=a,A=o,x=c,T=l,N=u,R=d,P=h,S=f,O=p,k=g,C=y,L=m,B=w,U=E,D=b,_=v;for(let t=0;t<8;t+=2)N^=It(I+B|0,7),O^=It(N+I|0,9),B^=It(O+N|0,13),I^=It(B+O|0,18),k^=It(R+A|0,7),U^=It(k+R|0,9),A^=It(U+k|0,13),R^=It(A+U|0,18),D^=It(C+P|0,7),x^=It(D+C|0,9),P^=It(x+D|0,13),C^=It(P+x|0,18),T^=It(_+L|0,7),S^=It(T+_|0,9),L^=It(S+T|0,13),_^=It(L+S|0,18),A^=It(I+T|0,7),x^=It(A+I|0,9),T^=It(x+A|0,13),I^=It(T+x|0,18),P^=It(R+N|0,7),S^=It(P+R|0,9),N^=It(S+P|0,13),R^=It(N+S|0,18),L^=It(C+k|0,7),O^=It(L+C|0,9),k^=It(O+L|0,13),C^=It(k+O|0,18),B^=It(_+D|0,7),U^=It(B+_|0,9),D^=It(U+B|0,13),_^=It(D+U|0,18);i[s++]=a+I|0,i[s++]=o+A|0,i[s++]=c+x|0,i[s++]=l+T|0,i[s++]=u+N|0,i[s++]=d+R|0,i[s++]=h+P|0,i[s++]=f+S|0,i[s++]=p+O|0,i[s++]=g+k|0,i[s++]=y+C|0,i[s++]=m+L|0,i[s++]=w+B|0,i[s++]=E+U|0,i[s++]=b+D|0,i[s++]=v+_|0}function xt(t,e,n,r,i){let s=r+0,a=r+16*i;for(let r=0;r<16;r++)n[a+r]=t[e+16*(2*i-1)+r];for(let r=0;r<i;r++,s+=16,e+=16)At(n,a,t,e,n,s),r>0&&(a+=16),At(n,s,t,e+=16,n,a)}function Tt(t,e,n){const i=r.o({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:s,r:a,p:o,dkLen:c,asyncTick:l,maxmem:u,onProgress:d}=i;if(r.q(s),r.q(a),r.q(o),r.q(c),r.q(l),r.q(u),void 0!==d&&"function"!=typeof d)throw new Error("progressCb should be function");const h=128*a,f=h/4;if(s<=1||s&s-1||s>=2**(h/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>137438953440/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(c<0||c>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=h*(s+o);if(p>u)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${u} (maxmem)`);const g=r.r(r.s,t,e,{c:1,dkLen:h*o}),y=r.u(g),m=r.u(new Uint8Array(h*s)),w=r.u(new Uint8Array(h));let E=()=>{};if(d){const t=2*s*o,e=Math.max(Math.floor(t/1e4),1);let n=0;E=()=>{n++,!d||n%e&&n!==t||d(n/t)}}return{N:s,r:a,p:o,dkLen:c,blockSize32:f,V:m,B32:y,B:g,tmp:w,blockMixCb:E,asyncTick:l}}function Nt(t,e,n,i,s){const a=r.r(r.s,t,n,{c:1,dkLen:e});return n.fill(0),i.fill(0),s.fill(0),a}let Rt=!1,Pt=!1;const St=async function(t,e,n,i,s,a,o){return await async function(t,e,n){const{N:i,r:s,p:a,dkLen:o,blockSize32:c,V:l,B32:u,B:d,tmp:h,blockMixCb:f,asyncTick:p}=Tt(t,e,n);for(let t=0;t<a;t++){const e=c*t;for(let t=0;t<c;t++)l[t]=u[e+t];let n=0;await r.n(i-1,p,(()=>{xt(l,n,l,n+=c,s),f()})),xt(l,(i-1)*c,u,e,s),f(),await r.n(i,p,(()=>{const t=u[e+c-16]%i;for(let n=0;n<c;n++)h[n]=u[e+n]^l[t*c+n];xt(h,0,u,e,s),f()}))}return Nt(t,o,d,l,h)}(t,e,{N:n,r:i,p:s,dkLen:a,onProgress:o})},Ot=function(t,e,n,r,i,s){return function(t,e,n){const{N:r,r:i,p:s,dkLen:a,blockSize32:o,V:c,B32:l,B:u,tmp:d,blockMixCb:h}=Tt(t,e,n);for(let t=0;t<s;t++){const e=o*t;for(let t=0;t<o;t++)c[t]=l[e+t];for(let t=0,e=0;t<r-1;t++)xt(c,e,c,e+=o,i),h();xt(c,(r-1)*o,l,e,i),h();for(let t=0;t<r;t++){const t=l[e+o-16]%r;for(let n=0;n<o;n++)d[n]=l[e+n]^c[t*o+n];xt(d,0,l,e,i),h()}}return Nt(t,a,u,c,d)}(t,e,{N:n,r,p:i,dkLen:s})};let kt=St,Ct=Ot;async function Lt(t,e,n,i,s,a,o){const c=r.g(t,"passwd"),l=r.g(e,"salt");return r.h(await kt(c,l,n,i,s,a,o))}function Bt(t,e,n,i,s,a){const o=r.g(t,"passwd"),c=r.g(e,"salt");return r.h(Ct(o,c,n,i,s,a))}Lt._=St,Lt.lock=function(){Pt=!0},Lt.register=function(t){if(Pt)throw new Error("scrypt is locked");kt=t},Object.freeze(Lt),Bt._=Ot,Bt.lock=function(){Rt=!0},Bt.register=function(t){if(Rt)throw new Error("scryptSync is locked");Ct=t},Object.freeze(Bt);const Ut=function(t){return r.v("sha256").update(t).digest()};let Dt=Ut,_t=!1;function $t(t){const e=r.g(t,"data");return r.h(Dt(e))}$t._=Ut,$t.lock=function(){_t=!0},$t.register=function(t){if(_t)throw new Error("sha256 is locked");Dt=t},Object.freeze($t),Object.freeze($t);const Ft=BigInt(0),Mt=BigInt(1),Vt=BigInt(2),Gt=t=>t instanceof Uint8Array,Kt=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function jt(t){if(!Gt(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=Kt[t[n]];return e}function zt(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function qt(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function Ht(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[e]=s}return n}function Wt(t){return qt(jt(t))}function Yt(t){if(!Gt(t))throw new Error("Uint8Array expected");return qt(jt(Uint8Array.from(t).reverse()))}function Zt(t,e){return Ht(t.toString(16).padStart(2*e,"0"))}function Jt(t,e){return Zt(t,e).reverse()}function Xt(t,e,n){let r;if("string"==typeof e)try{r=Ht(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!Gt(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Qt(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!Gt(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const te=t=>(Vt<<BigInt(t-1))-Mt,ee=t=>new Uint8Array(t),ne=t=>Uint8Array.from(t);function re(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=ee(t),i=ee(t),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=(...t)=>n(i,r,...t),c=(t=ee())=>{i=o(ne([0]),t),r=o(),0!==t.length&&(i=o(ne([1]),t),r=o())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=o();const e=r.slice();n.push(e),t+=r.length}return Qt(...n)};return(t,e)=>{let n;for(a(),c(t);!(n=e(l()));)c();return a(),n}}const ie={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function se(t,e,n={}){const r=(e,n,r)=>{const i=ie[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}var ae=Object.freeze({__proto__:null,bitGet:function(t,e){return t>>BigInt(e)&Mt},bitLen:function(t){let e;for(e=0;t>Ft;t>>=Mt,e+=1);return e},bitMask:te,bitSet:(t,e,n)=>t|(n?Mt:Ft)<<BigInt(e),bytesToHex:jt,bytesToNumberBE:Wt,bytesToNumberLE:Yt,concatBytes:Qt,createHmacDrbg:re,ensureBytes:Xt,equalBytes:function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},hexToBytes:Ht,hexToNumber:qt,numberToBytesBE:Zt,numberToBytesLE:Jt,numberToHexUnpadded:zt,numberToVarBytesBE:function(t){return Ht(zt(t))},utf8ToBytes:function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))},validateObject:se});const oe=BigInt(0),ce=BigInt(1),le=BigInt(2),ue=BigInt(3),de=BigInt(4),he=BigInt(5),fe=BigInt(8);function pe(t,e){const n=t%e;return n>=oe?n:e+n}function ge(t,e,n){if(n<=oe||e<oe)throw new Error("Expected power/modulo > 0");if(n===ce)return oe;let r=ce;for(;e>oe;)e&ce&&(r=r*t%n),t=t*t%n,e>>=ce;return r}function ye(t,e,n){let r=t;for(;e-- >oe;)r*=r,r%=n;return r}function me(t,e){if(t===oe||e<=oe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=pe(t,e),r=e,i=oe,s=ce;for(;n!==oe;){const t=r%n,e=i-s*(r/n);r=n,n=t,i=s,s=e}if(r!==ce)throw new Error("invert: does not exist");return pe(i,e)}function we(t){if(t%de===ue){const e=(t+ce)/de;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%fe===he){const e=(t-he)/fe;return function(t,n){const r=t.mul(n,le),i=t.pow(r,e),s=t.mul(n,i),a=t.mul(t.mul(s,le),i),o=t.mul(s,t.sub(a,t.ONE));if(!t.eql(t.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(t){const e=(t-ce)/le;let n,r,i;for(n=t-ce,r=0;n%le===oe;n/=le,r++);for(i=le;i<t&&ge(i,e,t)!==t-ce;i++);if(1===r){const e=(t+ce)/de;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+ce)/le;return function(t,a){if(t.pow(a,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let o=r,c=t.pow(t.mul(t.ONE,i),n),l=t.pow(a,s),u=t.pow(a,n);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(u);e<o&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,ce<<BigInt(o-e-1));c=t.sqr(n),l=t.mul(l,n),u=t.mul(u,c),o=e}return l}}(t)}BigInt(9),BigInt(16);const Ee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function be(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ve(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ie(t){const e=ve(t);return e+Math.ceil(e/2)}const Ae=BigInt(0),xe=BigInt(1);function Te(t){return se(t.Fp,Ee.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),se(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...be(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:Ne,hexToBytes:Re}=ae,Pe={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=Pe;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Ne(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Pe,n="string"==typeof t?Re(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Pe._parseInt(n.subarray(2)),{d:a,l:o}=Pe._parseInt(s);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,a=i.length/2,o=n(s),c=n(a);return`30${n(a+s+4)}02${c}${i}02${o}${r}`}},Se=BigInt(0),Oe=BigInt(1);BigInt(2);const ke=BigInt(3);function Ce(t){const e=function(t){const e=Te(t);se(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return Qt(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function s(t){const{a:r,b:i}=e,s=n.sqr(t),a=n.mul(s,t);return n.add(n.add(a,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function a(t){return"bigint"==typeof t&&Se<t&&t<e.n}function o(t){if(!a(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=jt(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let a;try{a="bigint"==typeof t?t:Wt(Xt("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(a=pe(a,s)),o(a),a}const l=new Map;function u(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?d.ZERO:new d(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(i(Xt("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),a=s(t);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:r,pz:i}=this,{px:s,py:a,pz:o}=t,c=n.eql(n.mul(e,o),n.mul(s,i)),l=n.eql(n.mul(r,o),n.mul(a,i));return c&&l}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,ke),{px:s,py:a,pz:o}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,h=n.mul(s,s),f=n.mul(a,a),p=n.mul(o,o),g=n.mul(s,a);return g=n.add(g,g),u=n.mul(s,o),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(f,l),l=n.add(f,l),l=n.mul(c,l),c=n.mul(g,c),u=n.mul(i,u),p=n.mul(t,p),g=n.sub(h,p),g=n.mul(t,g),g=n.add(g,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,g),l=n.add(l,h),p=n.mul(a,o),p=n.add(p,p),h=n.mul(p,g),c=n.sub(c,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new d(c,l,u)}add(t){u(t);const{px:r,py:i,pz:s}=this,{px:a,py:o,pz:c}=t;let l=n.ZERO,h=n.ZERO,f=n.ZERO;const p=e.a,g=n.mul(e.b,ke);let y=n.mul(r,a),m=n.mul(i,o),w=n.mul(s,c),E=n.add(r,i),b=n.add(a,o);E=n.mul(E,b),b=n.add(y,m),E=n.sub(E,b),b=n.add(r,s);let v=n.add(a,c);return b=n.mul(b,v),v=n.add(y,w),b=n.sub(b,v),v=n.add(i,s),l=n.add(o,c),v=n.mul(v,l),l=n.add(m,w),v=n.sub(v,l),f=n.mul(p,b),l=n.mul(g,w),f=n.add(l,f),l=n.sub(m,f),f=n.add(m,f),h=n.mul(l,f),m=n.add(y,y),m=n.add(m,y),w=n.mul(p,w),b=n.mul(g,b),m=n.add(m,w),w=n.sub(y,w),w=n.mul(p,w),b=n.add(b,w),y=n.mul(m,b),h=n.add(h,y),y=n.mul(v,b),l=n.mul(E,l),l=n.sub(l,y),y=n.mul(E,m),f=n.mul(v,f),f=n.add(f,y),new d(l,h,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return f.wNAFCached(this,l,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(d.fromAffine)}))}multiplyUnsafe(t){const r=d.ZERO;if(t===Se)return r;if(o(t),t===Oe)return this;const{endo:i}=e;if(!i)return f.unsafeLadder(this,t);let{k1neg:s,k1:a,k2neg:c,k2:l}=i.splitScalar(t),u=r,h=r,p=this;for(;a>Se||l>Se;)a&Oe&&(u=u.add(p)),l&Oe&&(h=h.add(p)),p=p.double(),a>>=Oe,l>>=Oe;return s&&(u=u.negate()),c&&(h=h.negate()),h=new d(n.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(t){o(t);let r,i,s=t;const{endo:a}=e;if(a){const{k1neg:t,k1:e,k2neg:o,k2:c}=a.splitScalar(s);let{p:l,f:u}=this.wNAF(e),{p:h,f:p}=this.wNAF(c);l=f.constTimeNegate(t,l),h=f.constTimeNegate(o,h),h=new d(n.mul(h.px,a.beta),h.py,h.pz),r=l.add(h),i=u.add(p)}else{const{p:t,f:e}=this.wNAF(s);r=t,i=e}return d.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=d.BASE,i=(t,e)=>e!==Se&&e!==Oe&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){const{px:e,py:r,pz:i}=this,s=this.is0();null==t&&(t=s?n.ONE:n.inv(i));const a=n.mul(e,t),o=n.mul(r,t),c=n.mul(i,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===Oe)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===Oe?this:n?n(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(d,this,t)}toHex(t=!0){return jt(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>Ae;)n&xe&&(r=r.add(i)),i=i.double(),n>>=xe;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),s=[];let a=t,o=a;for(let t=0;t<n;t++){o=a,s.push(o);for(let t=1;t<i;t++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(e,i,s){const{windows:a,windowSize:o}=r(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),d=2**e,h=BigInt(e);for(let t=0;t<a;t++){const e=t*o;let r=Number(s&u);s>>=h,r>o&&(r-=d,s+=xe);const a=e,f=e+Math.abs(r)-1,p=t%2!=0,g=r<0;0===r?l=l.add(n(p,i[a])):c=c.add(n(g,i[f]))}return{p:c,f:l}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let s=e.get(t);return s||(s=this.precomputeWindow(t,i),1!==i&&e.set(t,r(s))),this.wNAF(i,s,n)}}}(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function Le(t){const e=function(t){const e=Te(t);return se(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function a(t){return pe(t,r)}function o(t){return me(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=Ce({...e,toBytes(t,e,r){const i=e.toAffine(),s=n.toBytes(i.x),a=Qt;return r?a(Uint8Array.from([e.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],a=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===s&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const t=Wt(a);if(!(Se<(o=t)&&o<n.ORDER))throw new Error("Point is not on curve");const e=u(t);let i=n.sqrt(e);return!(1&~r)!==((i&Oe)===Oe)&&(i=n.neg(i)),{x:t,y:i}}var o}}),h=t=>jt(Zt(t,e.nByteLength));function f(t){return t>r>>Oe}const p=(t,e,n)=>Wt(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=Xt("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=Pe.toSig(Xt("DER",t));return new g(e,n)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:s}=this,l=E(Xt("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const u=2===s||3===s?r+e.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&s?"03":"02",f=c.fromHex(d+h(u)),p=o(u),g=a(-l*p),y=a(i*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ht(this.toDERHex())}toDERHex(){return Pe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ht(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=Ie(e.n);return function(t,e,n=!1){const r=t.length,i=ve(e),s=Ie(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const a=pe(n?Wt(t):Yt(t),e-ce)+ce;return n?Jt(a,i):Zt(a,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===s:n?r===2*i||r===2*s:t instanceof c}const w=e.bits2int||function(t){const n=Wt(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},E=e.bits2int_modN||function(t){return a(w(t))},b=te(e.nBitLength);function v(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(Se<=t&&t<b))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Zt(t,e.nByteLength)}function I(t,r,i=A){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:u}=e;let{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),t=Xt("msgHash",t),p&&(t=Xt("prehashed msgHash",s(t)));const m=E(t),b=l(r),I=[v(b),v(m)];if(null!=y){const t=!0===y?u(n.BYTES):y;I.push(Xt("extraEntropy",t))}const x=Qt(...I),T=m;return{seed:x,k2sig:function(t){const e=w(t);if(!d(e))return;const n=o(e),r=c.BASE.multiply(e).toAffine(),i=a(r.x);if(i===Se)return;const s=a(n*a(T+i*b));if(s===Se)return;let l=(r.x===i?0:2)|Number(r.y&Oe),u=s;return h&&f(s)&&(u=function(t){return f(t)?a(-t):t}(s),l^=1),new g(i,u,l)}}}const A={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(n)},sign:function(t,n,r=A){const{seed:i,k2sig:s}=I(t,n,r),a=e;return re(a.hash.outputLen,a.nByteLength,a.hmac)(i,s)},verify:function(t,n,r,i=x){const s=t;if(n=Xt("msgHash",n),r=Xt("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let d,h;try{if("string"==typeof s||s instanceof Uint8Array)try{d=g.fromDER(s)}catch(t){if(!(t instanceof Pe.Err))throw t;d=g.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:t,s:e}=s;d=new g(t,e)}}h=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&d.hasHighS())return!1;u&&(n=e.hash(n));const{r:f,s:p}=d,y=E(n),m=o(p),w=a(y*m),b=a(f*m),v=c.BASE.multiplyAndAddUnsafe(h,w,b)?.toAffine();return!!v&&a(v.x)===f},ProjectivePoint:c,Signature:g,utils:y}}function Be(t){return{hash:t,hmac:(e,...n)=>r.x(t,e,r.y(...n)),randomBytes:r.z}}BigInt(4);const Ue=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),De=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_e=BigInt(1),$e=BigInt(2),Fe=(t,e)=>(t+e/$e)/e;const Me=function(t,e,n=!1,r={}){if(t<=oe)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=be(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=we(t),o=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:te(i),ZERO:oe,ONE:ce,create:e=>pe(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return oe<=e&&e<t},is0:t=>t===oe,isOdd:t=>(t&ce)===ce,neg:e=>pe(-e,t),eql:(t,e)=>t===e,sqr:e=>pe(e*e,t),add:(e,n)=>pe(e+n,t),sub:(e,n)=>pe(e-n,t),mul:(e,n)=>pe(e*n,t),pow:(t,e)=>function(t,e,n){if(n<oe)throw new Error("Expected power > 0");if(n===oe)return t.ONE;if(n===ce)return e;let r=t.ONE,i=e;for(;n>oe;)n&ce&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ce;return r}(o,t,e),div:(e,n)=>pe(e*me(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>me(e,t),sqrt:r.sqrt||(t=>a(o,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(o,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?Jt(t,s):Zt(t,s),fromBytes:t=>{if(t.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${t.length}`);return n?Yt(t):Wt(t)}});return Object.freeze(o)}(Ue,void 0,void 0,{sqrt:function(t){const e=Ue,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ye(u,n,e)*u%e,h=ye(d,n,e)*u%e,f=ye(h,$e,e)*l%e,p=ye(f,i,e)*f%e,g=ye(p,s,e)*p%e,y=ye(g,o,e)*g%e,m=ye(y,c,e)*y%e,w=ye(m,o,e)*g%e,E=ye(w,n,e)*u%e,b=ye(E,a,e)*p%e,v=ye(b,r,e)*l%e,I=ye(v,$e,e);if(!Me.eql(Me.sqr(I),t))throw new Error("Cannot find square root");return I}}),Ve=function(t,e){const n=e=>Le({...t,...Be(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Me,n:De,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=De,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-_e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),o=Fe(s*t,e),c=Fe(-r*t,e);let l=pe(t-o*n-c*i,e),u=pe(-o*r-c*s,e);const d=l>a,h=u>a;if(d&&(l=e-l),h&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},r.s);BigInt(0),Ve.ProjectivePoint;const Ge="0x0000000000000000000000000000000000000000000000000000000000000000",Ke=BigInt(0),je=BigInt(1),ze=BigInt(2),qe=BigInt(27),He=BigInt(28),We=BigInt(35),Ye={};function Ze(t){return r.E(x(t),32)}class Je{#a;#o;#c;#l;get r(){return this.#a}set r(t){r.d(32===r.A(t),"invalid r","value",t),this.#a=r.h(t)}get s(){return this.#o}set s(t){r.d(32===r.A(t),"invalid s","value",t);const e=r.h(t);r.d(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),this.#o=e}get v(){return this.#c}set v(t){const e=I(t,"value");r.d(27===e||28===e,"invalid v","v",t),this.#c=e}get networkV(){return this.#l}get legacyChainId(){const t=this.networkV;return null==t?null:Je.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const t=r.g(this.s);return this.yParity&&(t[0]|=128),r.h(t)}get compactSerialized(){return r.k([this.r,this.yParityAndS])}get serialized(){return r.k([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,n,i){r.B(t,Ye,"Signature"),this.#a=e,this.#o=n,this.#c=i,this.#l=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Je(Ye,this.r,this.s,this.v);return this.networkV&&(t.#l=this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=w(t,"v");return e==qe||e==He?Ke:(r.d(e>=We,"invalid EIP-155 v","v",t),(e-We)/ze)}static getChainIdV(t,e){return w(t)*ze+BigInt(35+e-27)}static getNormalizedV(t){const e=w(t);return e===Ke||e===qe?27:e===je||e===He?28:(r.d(e>=We,"invalid v","v",t),e&je?27:28)}static from(t){function e(e,n){r.d(e,n,"signature",t)}if(null==t)return new Je(Ye,Ge,Ge,27);if("string"==typeof t){const n=r.g(t,"signature");if(64===n.length){const t=r.h(n.slice(0,32)),e=n.slice(32,64),i=128&e[0]?28:27;return e[0]&=127,new Je(Ye,t,r.h(e),i)}if(65===n.length){const t=r.h(n.slice(0,32)),i=n.slice(32,64);e(!(128&i[0]),"non-canonical s");const s=Je.getNormalizedV(n[64]);return new Je(Ye,t,r.h(i),s)}e(!1,"invalid raw signature length")}if(t instanceof Je)return t.clone();const n=t.r;e(null!=n,"missing r");const i=Ze(n),s=function(t,n){if(null!=t)return Ze(t);if(null!=n){e(r.D(n,32),"invalid yParityAndS");const t=r.g(n);return t[0]&=127,r.h(t)}e(!1,"missing s")}(t.s,t.yParityAndS);e(!(128&r.g(s)[0]),"non-canonical s");const{networkV:a,v:o}=function(t,n,i){if(null!=t){const e=w(t);return{networkV:e>=We?e:void 0,v:Je.getNormalizedV(e)}}if(null!=n)return e(r.D(n,32),"invalid yParityAndS"),{v:128&r.g(n)[0]?28:27};if(null!=i){switch(I(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new Je(Ye,i,s,o);return a&&(c.#l=a),e(null==t.yParity||I(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(null==t.yParityAndS||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class Xe{#u;constructor(t){r.d(32===r.A(t),"invalid private key","privateKey","[REDACTED]"),this.#u=r.h(t)}get privateKey(){return this.#u}get publicKey(){return Xe.computePublicKey(this.#u)}get compressedPublicKey(){return Xe.computePublicKey(this.#u,!0)}sign(t){r.d(32===r.A(t),"invalid digest length","digest",t);const e=Ve.sign(r.j(t),r.j(this.#u),{lowS:!0});return Je.from({r:A(e.r,32),s:A(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Xe.computePublicKey(t);return r.h(Ve.getSharedSecret(r.j(this.#u),r.g(e),!1))}static computePublicKey(t,e){let n=r.g(t,"key");if(32===n.length){const t=Ve.getPublicKey(n,!!e);return r.h(t)}if(64===n.length){const t=new Uint8Array(65);t[0]=4,t.set(n,1),n=t}const i=Ve.ProjectivePoint.fromHex(n);return r.h(i.toRawBytes(e))}static recoverPublicKey(t,e){r.d(32===r.A(t),"invalid digest length","digest",t);const n=Je.from(e);let i=Ve.Signature.fromCompact(r.j(r.k([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const s=i.recoverPublicKey(r.j(t));return r.d(null!=s,"invalid signautre for digest","signature",e),"0x"+s.toHex(!1)}static addPoints(t,e,n){const r=Ve.ProjectivePoint.fromHex(Xe.computePublicKey(t).substring(2)),i=Ve.ProjectivePoint.fromHex(Xe.computePublicKey(e).substring(2));return"0x"+r.add(i).toHex(!!n)}}const Qe=BigInt(0),tn=BigInt(36);function en(t){const e=(t=t.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let t=0;t<40;t++)n[t]=e[t].charCodeAt(0);const i=r.g(r.F(n));for(let t=0;t<40;t+=2)i[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&i[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const nn={};for(let t=0;t<10;t++)nn[String(t)]=String(t);for(let t=0;t<26;t++)nn[String.fromCharCode(65+t)]=String(10+t);const rn=function(){const t={};for(let e=0;e<36;e++){t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e)}return t}();function sn(t){if(r.d("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=en(t);return r.d(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){r.d(t.substring(2,4)===function(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>nn[t])).join("");for(;e.length>=15;){let t=e.substring(0,15);e=parseInt(t,10)%97+e.substring(t.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}(t),"bad icap checksum","address",t);let e=function(t){t=t.toLowerCase();let e=Qe;for(let n=0;n<t.length;n++)e=e*tn+rn[t[n]];return e}(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return en("0x"+e)}r.d(!1,"invalid address","address",t)}async function an(t,e){const n=await e;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(r.e("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),r.d(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),sn(n)}function on(t,e){return"string"==typeof t?t.match(/^0x[0-9a-f]{40}$/i)?sn(t):(r.e(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),an(t,e.resolveName(t))):(n=t)&&"function"==typeof n.getAddress?an(t,t.getAddress()):t&&"function"==typeof t.then?an(t,t):void r.d(!1,"unsupported addressable value","target",t);var n}const cn={};function ln(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new hn(cn,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function un(t,e){return new hn(cn,`bytes${e||""}`,t,{size:e})}const dn=Symbol.for("_ethers_typed");class hn{type;value;#d;_typedSymbol;constructor(t,e,n,i){null==i&&(i=null),r.B(cn,t,"Typed"),r.f(this,{_typedSymbol:dn,type:e,value:n}),this.#d=i,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((t=>t.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#d}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#d?-1:!1===this.#d?this.value.length:null}static from(t,e){return new hn(cn,t,e)}static uint8(t){return ln(t,8)}static uint16(t){return ln(t,16)}static uint24(t){return ln(t,24)}static uint32(t){return ln(t,32)}static uint40(t){return ln(t,40)}static uint48(t){return ln(t,48)}static uint56(t){return ln(t,56)}static uint64(t){return ln(t,64)}static uint72(t){return ln(t,72)}static uint80(t){return ln(t,80)}static uint88(t){return ln(t,88)}static uint96(t){return ln(t,96)}static uint104(t){return ln(t,104)}static uint112(t){return ln(t,112)}static uint120(t){return ln(t,120)}static uint128(t){return ln(t,128)}static uint136(t){return ln(t,136)}static uint144(t){return ln(t,144)}static uint152(t){return ln(t,152)}static uint160(t){return ln(t,160)}static uint168(t){return ln(t,168)}static uint176(t){return ln(t,176)}static uint184(t){return ln(t,184)}static uint192(t){return ln(t,192)}static uint200(t){return ln(t,200)}static uint208(t){return ln(t,208)}static uint216(t){return ln(t,216)}static uint224(t){return ln(t,224)}static uint232(t){return ln(t,232)}static uint240(t){return ln(t,240)}static uint248(t){return ln(t,248)}static uint256(t){return ln(t,256)}static uint(t){return ln(t,256)}static int8(t){return ln(t,-8)}static int16(t){return ln(t,-16)}static int24(t){return ln(t,-24)}static int32(t){return ln(t,-32)}static int40(t){return ln(t,-40)}static int48(t){return ln(t,-48)}static int56(t){return ln(t,-56)}static int64(t){return ln(t,-64)}static int72(t){return ln(t,-72)}static int80(t){return ln(t,-80)}static int88(t){return ln(t,-88)}static int96(t){return ln(t,-96)}static int104(t){return ln(t,-104)}static int112(t){return ln(t,-112)}static int120(t){return ln(t,-120)}static int128(t){return ln(t,-128)}static int136(t){return ln(t,-136)}static int144(t){return ln(t,-144)}static int152(t){return ln(t,-152)}static int160(t){return ln(t,-160)}static int168(t){return ln(t,-168)}static int176(t){return ln(t,-176)}static int184(t){return ln(t,-184)}static int192(t){return ln(t,-192)}static int200(t){return ln(t,-200)}static int208(t){return ln(t,-208)}static int216(t){return ln(t,-216)}static int224(t){return ln(t,-224)}static int232(t){return ln(t,-232)}static int240(t){return ln(t,-240)}static int248(t){return ln(t,-248)}static int256(t){return ln(t,-256)}static int(t){return ln(t,-256)}static bytes1(t){return un(t,1)}static bytes2(t){return un(t,2)}static bytes3(t){return un(t,3)}static bytes4(t){return un(t,4)}static bytes5(t){return un(t,5)}static bytes6(t){return un(t,6)}static bytes7(t){return un(t,7)}static bytes8(t){return un(t,8)}static bytes9(t){return un(t,9)}static bytes10(t){return un(t,10)}static bytes11(t){return un(t,11)}static bytes12(t){return un(t,12)}static bytes13(t){return un(t,13)}static bytes14(t){return un(t,14)}static bytes15(t){return un(t,15)}static bytes16(t){return un(t,16)}static bytes17(t){return un(t,17)}static bytes18(t){return un(t,18)}static bytes19(t){return un(t,19)}static bytes20(t){return un(t,20)}static bytes21(t){return un(t,21)}static bytes22(t){return un(t,22)}static bytes23(t){return un(t,23)}static bytes24(t){return un(t,24)}static bytes25(t){return un(t,25)}static bytes26(t){return un(t,26)}static bytes27(t){return un(t,27)}static bytes28(t){return un(t,28)}static bytes29(t){return un(t,29)}static bytes30(t){return un(t,30)}static bytes31(t){return un(t,31)}static bytes32(t){return un(t,32)}static address(t){return new hn(cn,"address",t)}static bool(t){return new hn(cn,"bool",!!t)}static bytes(t){return new hn(cn,"bytes",t)}static string(t){return new hn(cn,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new hn(cn,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===dn}static dereference(t,e){if(hn.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class fn extends H{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=hn.dereference(e,"string");try{n=sn(n)}catch(t){return this._throwError(t.message,e)}return t.writeValue(n)}decode(t){return sn(A(t.readValue(),20))}}class pn extends H{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function gn(t,e,n){let i=[];if(Array.isArray(n))i=n;else if(n&&"object"==typeof n){let t={};i=e.map((e=>{const i=e.localName;return r.e(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:n}),r.e(!t[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:n}),t[i]=!0,n[i]}))}else r.d(!1,"invalid tuple value","tuple",n);r.d(e.length===i.length,"types/value length mismatch","tuple",n);let s=new W,a=new W,o=[];e.forEach(((t,e)=>{let n=i[e];if(t.dynamic){let e=a.length;t.encode(a,n);let r=s.writeUpdatableValue();o.push((t=>{r(t+e)}))}else t.encode(s,n)})),o.forEach((t=>{t(s.length)}));let c=t.appendWriter(s);return c+=t.appendWriter(a),c}function yn(t,e){let n=[],i=[],s=t.subReader(0);return e.forEach((e=>{let a=null;if(e.dynamic){let n=t.readIndex(),i=s.subReader(n);try{a=e.decode(i)}catch(t){if(r.H(t,"BUFFER_OVERRUN"))throw t;a=t,a.baseType=e.name,a.name=e.localName,a.type=e.type}}else try{a=e.decode(t)}catch(t){if(r.H(t,"BUFFER_OVERRUN"))throw t;a=t,a.baseType=e.name,a.name=e.localName,a.type=e.type}if(null==a)throw new Error("investigate");n.push(a),i.push(e.localName||null)})),z.fromItems(n,i)}class mn extends H{coder;length;constructor(t,e,n){super("array",t.type+"["+(e>=0?e:"")+"]",n,-1===e||t.dynamic),r.f(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let n=0;n<this.length;n++)e.push(t);return e}encode(t,e){const n=hn.dereference(e,"array");Array.isArray(n)||this._throwError("expected array value",n);let i=this.length;-1===i&&(i=n.length,t.writeValue(n.length)),r.G(n.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let t=0;t<n.length;t++)s.push(this.coder);return gn(t,s,n)}decode(t){let e=this.length;-1===e&&(e=t.readIndex(),r.e(e*M<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*M,length:t.dataLength}));let n=[];for(let t=0;t<e;t++)n.push(new pn(this.coder));return yn(t,n)}}class wn extends H{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=hn.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class En extends H{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=r.j(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class bn extends En{constructor(t){super("bytes",t)}decode(t){return r.h(super.decode(t))}}class vn extends H{size;constructor(t,e){let n="bytes"+String(t);super(n,n,e,!1),r.f(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let n=r.j(hn.dereference(e,this.type));return n.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(n)}decode(t){return r.h(t.readBytes(this.size))}}const In=new Uint8Array([]);class An extends H{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes(In)}decode(t){return t.readBytes(0),null}}const xn=BigInt(0),Tn=BigInt(1),Nn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Rn extends H{size;signed;constructor(t,e,n){const i=(e?"int":"uint")+8*t;super(i,i,n,!1),r.f(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let n=w(hn.dereference(e,this.type)),r=m(Nn,256);if(this.signed){let t=m(r,8*this.size-1);(n>t||n<-(t+Tn))&&this._throwError("value out-of-bounds",e),n=y(n,256)}else(n<xn||n>m(r,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(n)}decode(t){let e=m(t.readValue(),8*this.size);return this.signed&&(e=function(t,e){const n=E(t,"value"),i=BigInt(I(e,"width"));if(r.e(n>>i===f,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>i-p)return-((~n&(p<<i)-p)+p);return n}(e,8*this.size)),e}}class Pn extends En{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,r.t(hn.dereference(e,"string")))}decode(t){return r.a(super.decode(t))}}class Sn extends H{coders;constructor(t,e){let n=!1;const i=[];t.forEach((t=>{t.dynamic&&(n=!0),i.push(t.type)}));super("tuple","tuple("+i.join(",")+")",e,n),r.f(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const n=e.localName;return n&&(t[n]||(t[n]=0),t[n]++),t}),{});return this.coders.forEach(((n,r)=>{let i=n.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[r]))})),Object.freeze(t)}encode(t,e){const n=hn.dereference(e,"tuple");return gn(t,this.coders,n)}decode(t){return yn(t,this.coders)}}function On(t){return r.F(r.t(t))}function kn(t,e){return{address:sn(t),storageKeys:e.map(((t,e)=>(r.d(r.D(t,32),"invalid slot",`storageKeys[${e}]`,t),t.toLowerCase())))}}function Cn(t){if(Array.isArray(t))return t.map(((e,n)=>Array.isArray(e)?(r.d(2===e.length,"invalid slot set",`value[${n}]`,e),kn(e[0],e[1])):(r.d(null!=e&&"object"==typeof e,"invalid address-slot set","value",t),kn(e.address,e.storageKeys))));r.d(null!=t&&"object"==typeof t,"invalid access list","value",t);const e=Object.keys(t).map((e=>{const n=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return kn(e,Object.keys(n).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function Ln(t){let e;return e="string"==typeof t?Xe.computePublicKey(t,!1):t.publicKey,sn(r.F("0x"+e.substring(4)).substring(26))}const Bn=BigInt(0),Un=BigInt(2),Dn=BigInt(27),_n=BigInt(28),$n=BigInt(35),Fn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Mn(t){return"0x"===t?null:sn(t)}function Vn(t,e){try{return Cn(t)}catch(n){r.d(!1,n.message,e,t)}}function Gn(t,e){return"0x"===t?0:I(t,e)}function Kn(t,e){if("0x"===t)return Bn;const n=w(t,e);return r.d(n<=Fn,"value exceeds uint size",e,n),n}function jn(t,e){const n=w(t,"value"),i=x(n);return r.d(i.length<=32,"value too large",`tx.${e}`,n),i}function zn(t){return Cn(t).map((t=>[t.address,t.storageKeys]))}function qn(t,e){const n=[jn(t.nonce||0,"nonce"),jn(t.gasPrice||0,"gasPrice"),jn(t.gasLimit||0,"gasLimit"),null!=t.to?sn(t.to):"0x",jn(t.value||0,"value"),t.data||"0x"];let i=Bn;if(t.chainId!=Bn)i=w(t.chainId,"tx.chainId"),r.d(!e||null==e.networkV||e.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const e=t.signature.legacyChainId;null!=e&&(i=e)}if(!e)return i!==Bn&&(n.push(x(i)),n.push("0x"),n.push("0x")),$(n);let s=BigInt(27+e.yParity);return i!==Bn?s=Je.getChainIdV(i,e.v):BigInt(e.v)!==s&&r.d(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(x(s)),n.push(x(e.r)),n.push(x(e.s)),$(n)}function Hn(t,e){let n;try{if(n=Gn(e[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(t){r.d(!1,"invalid yParity","yParity",e[0])}const i=r.E(e[1],32),s=r.E(e[2],32),a=Je.from({r:i,s,yParity:n});t.signature=a}function Wn(t,e){const n=[jn(t.chainId||0,"chainId"),jn(t.nonce||0,"nonce"),jn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),jn(t.maxFeePerGas||0,"maxFeePerGas"),jn(t.gasLimit||0,"gasLimit"),null!=t.to?sn(t.to):"0x",jn(t.value||0,"value"),t.data||"0x",zn(t.accessList||[])];return e&&(n.push(jn(e.yParity,"yParity")),n.push(x(e.r)),n.push(x(e.s))),r.k(["0x02",$(n)])}function Yn(t,e){const n=[jn(t.chainId||0,"chainId"),jn(t.nonce||0,"nonce"),jn(t.gasPrice||0,"gasPrice"),jn(t.gasLimit||0,"gasLimit"),null!=t.to?sn(t.to):"0x",jn(t.value||0,"value"),t.data||"0x",zn(t.accessList||[])];return e&&(n.push(jn(e.yParity,"recoveryParam")),n.push(x(e.r)),n.push(x(e.s))),r.k(["0x01",$(n)])}class Zn{#h;#f;#e;#p;#g;#y;#m;#w;#E;#b;#v;#I;get type(){return this.#h}set type(t){switch(t){case null:this.#h=null;break;case 0:case"legacy":this.#h=0;break;case 1:case"berlin":case"eip-2930":this.#h=1;break;case 2:case"london":case"eip-1559":this.#h=2;break;default:r.d(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#f}set to(t){this.#f=null==t?null:sn(t)}get nonce(){return this.#p}set nonce(t){this.#p=I(t,"value")}get gasLimit(){return this.#g}set gasLimit(t){this.#g=w(t)}get gasPrice(){const t=this.#y;return null!=t||0!==this.type&&1!==this.type?t:Bn}set gasPrice(t){this.#y=null==t?null:w(t,"gasPrice")}get maxPriorityFeePerGas(){const t=this.#m;return null==t?2===this.type?Bn:null:t}set maxPriorityFeePerGas(t){this.#m=null==t?null:w(t,"maxPriorityFeePerGas")}get maxFeePerGas(){const t=this.#w;return null==t?2===this.type?Bn:null:t}set maxFeePerGas(t){this.#w=null==t?null:w(t,"maxFeePerGas")}get data(){return this.#e}set data(t){this.#e=r.h(t)}get value(){return this.#E}set value(t){this.#E=w(t,"value")}get chainId(){return this.#b}set chainId(t){this.#b=w(t)}get signature(){return this.#v||null}set signature(t){this.#v=null==t?null:Je.from(t)}get accessList(){const t=this.#I||null;return null==t?1===this.type||2===this.type?[]:null:t}set accessList(t){this.#I=null==t?null:Cn(t)}constructor(){this.#h=null,this.#f=null,this.#p=0,this.#g=BigInt(0),this.#y=null,this.#m=null,this.#w=null,this.#e="0x",this.#E=BigInt(0),this.#b=BigInt(0),this.#v=null,this.#I=null}get hash(){return null==this.signature?null:r.F(this.serialized)}get unsignedHash(){return r.F(this.unsignedSerialized)}get from(){return null==this.signature?null:(t=this.unsignedHash,e=this.signature,Ln(Xe.recoverPublicKey(t,e)));var t,e}get fromPublicKey(){return null==this.signature?null:Xe.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(r.e(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return qn(this,this.signature);case 1:return Yn(this,this.signature);case 2:return Wn(this,this.signature)}r.e(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return qn(this);case 1:return Yn(this);case 2:return Wn(this)}r.e(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const t=null!=this.gasPrice,e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&r.e(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),r.e(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),r.e(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return null!=this.type?i.push(this.type):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(i.push(0),i.push(1),i.push(2)),i.sort(),i}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return Zn.from(this)}toJSON(){const t=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new Zn;if("string"==typeof t){const e=r.g(t);if(e[0]>=127)return Zn.from(function(t){const e=B(t);r.d(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Gn(e[0],"nonce"),gasPrice:Kn(e[1],"gasPrice"),gasLimit:Kn(e[2],"gasLimit"),to:Mn(e[3]),value:Kn(e[4],"value"),data:r.h(e[5]),chainId:Bn};if(6===e.length)return n;const i=Kn(e[6],"v"),s=Kn(e[7],"r"),a=Kn(e[8],"s");if(s===Bn&&a===Bn)n.chainId=i;else{let s=(i-$n)/Un;s<Bn&&(s=Bn),n.chainId=s,r.d(s!==Bn||i===Dn||i===_n,"non-canonical legacy v","v",e[6]),n.signature=Je.from({r:r.E(e[7],32),s:r.E(e[8],32),v:i}),n.hash=r.F(t)}return n}(e));switch(e[0]){case 1:return Zn.from(function(t){const e=B(r.g(t).slice(1));r.d(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",r.h(t));const n={type:1,chainId:Kn(e[0],"chainId"),nonce:Gn(e[1],"nonce"),gasPrice:Kn(e[2],"gasPrice"),gasLimit:Kn(e[3],"gasLimit"),to:Mn(e[4]),value:Kn(e[5],"value"),data:r.h(e[6]),accessList:Vn(e[7],"accessList")};return 8===e.length||(n.hash=r.F(t),Hn(n,e.slice(8))),n}(e));case 2:return Zn.from(function(t){const e=B(r.g(t).slice(1));r.d(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",r.h(t));const n=Kn(e[2],"maxPriorityFeePerGas"),i=Kn(e[3],"maxFeePerGas"),s={type:2,chainId:Kn(e[0],"chainId"),nonce:Gn(e[1],"nonce"),maxPriorityFeePerGas:n,maxFeePerGas:i,gasPrice:null,gasLimit:Kn(e[4],"gasLimit"),to:Mn(e[5]),value:Kn(e[6],"value"),data:r.h(e[7]),accessList:Vn(e[8],"accessList")};return 9===e.length||(s.hash=r.F(t),Hn(s,e.slice(9))),s}(e))}r.e(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new Zn;return null!=t.type&&(e.type=t.type),null!=t.to&&(e.to=t.to),null!=t.nonce&&(e.nonce=t.nonce),null!=t.gasLimit&&(e.gasLimit=t.gasLimit),null!=t.gasPrice&&(e.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null!=t.data&&(e.data=t.data),null!=t.value&&(e.value=t.value),null!=t.chainId&&(e.chainId=t.chainId),null!=t.signature&&(e.signature=Je.from(t.signature)),null!=t.accessList&&(e.accessList=t.accessList),null!=t.hash&&(r.d(e.isSigned(),"unsigned transaction cannot define hash","tx",t),r.d(e.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(r.d(e.isSigned(),"unsigned transaction cannot define from","tx",t),r.d(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}const Jn=new Uint8Array(32);Jn.fill(0);const Xn=BigInt(-1),Qn=BigInt(0),tr=BigInt(1),er=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const nr=A(tr,32),rr=A(Qn,32),ir={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},sr=["name","version","chainId","verifyingContract","salt"];function ar(t){return function(e){return r.d("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const or={name:ar("name"),version:ar("version"),chainId:function(t){const e=w(t,"domain.chainId");return r.d(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):function(t){let e=r.h(r.i(t)?t:x(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return""===e&&(e="0"),"0x"+e}(e)},verifyingContract:function(t){try{return sn(t).toLowerCase()}catch(t){}r.d(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=r.g(t,"domain.salt");return r.d(32===e.length,'invalid domain value "salt"',"domain.salt",t),r.h(e)}};function cr(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=""===e[1],i=parseInt(e[2]||"256");r.d(i%8==0&&0!==i&&i<=256&&(null==e[2]||e[2]===String(i)),"invalid numeric width","type",t);const s=m(er,n?i-1:i),a=n?(s+tr)*Xn:Qn;return function(e){const i=w(e,"value");return r.d(i>=a&&i<=s,`value out-of-bounds for ${t}`,"value",i),A(n?y(i,256):i,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return r.d(0!==n&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(e){const i=r.g(e);return r.d(i.length===n,`invalid length for ${t}`,"value",e),function(t){const e=r.g(t),n=e.length%32;return n?r.k([e,Jn.slice(n)]):r.h(e)}(e)}}}switch(t){case"address":return function(t){return r.E(sn(t),32)};case"bool":return function(t){return t?nr:rr};case"bytes":return function(t){return r.F(t)};case"string":return function(t){return On(t)}}return null}function lr(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class ur{primaryType;#A;get types(){return JSON.parse(this.#A)}#x;#T;constructor(t){this.#A=JSON.stringify(t),this.#x=new Map,this.#T=new Map;const e=new Map,n=new Map,i=new Map;Object.keys(t).forEach((t=>{e.set(t,new Set),n.set(t,[]),i.set(t,new Set)}));for(const i in t){const s=new Set;for(const a of t[i]){r.d(!s.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(i)}`,"types",t),s.add(a.name);const o=a.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;r.d(o!==i,`circular type reference to ${JSON.stringify(o)}`,"types",t);cr(o)||(r.d(n.has(o),`unknown type ${JSON.stringify(o)}`,"types",t),n.get(o).push(i),e.get(i).add(o))}}const s=Array.from(n.keys()).filter((t=>0===n.get(t).length));r.d(0!==s.length,"missing primary type","types",t),r.d(1===s.length,`ambiguous primary types or unused types: ${s.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),r.f(this,{primaryType:s[0]}),function s(a,o){r.d(!o.has(a),`circular type reference to ${JSON.stringify(a)}`,"types",t),o.add(a);for(const t of e.get(a))if(n.has(t)){s(t,o);for(const e of o)i.get(e).add(t)}o.delete(a)}(this.primaryType,new Set);for(const[e,n]of i){const r=Array.from(n);r.sort(),this.#x.set(e,lr(e,t[e])+r.map((e=>lr(e,t[e]))).join(""))}}getEncoder(t){let e=this.#T.get(t);return e||(e=this.#N(t),this.#T.set(t,e)),e}#N(t){{const e=cr(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],n=this.getEncoder(t);return i=>{r.d(!e[3]||parseInt(e[3])===i.length,`array length mismatch; expected length ${parseInt(e[3])}`,"value",i);let s=i.map(n);return this.#x.has(t)&&(s=s.map(r.F)),r.F(r.k(s))}}const n=this.types[t];if(n){const e=On(this.#x.get(t));return t=>{const i=n.map((({name:e,type:n})=>{const i=this.getEncoder(n)(t[e]);return this.#x.has(n)?r.F(i):i}));return i.unshift(e),r.k(i)}}r.d(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const e=this.#x.get(t);return r.d(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return r.F(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(cr(t))return n(t,e);const i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i)return r.d(!i[3]||parseInt(i[3])===e.length,`array length mismatch; expected length ${parseInt(i[3])}`,"value",e),e.map((t=>this._visit(i[1],t,n)));const s=this.types[t];if(s)return s.reduce(((t,{name:r,type:i})=>(t[r]=this._visit(i,e[r],n),t)),{});r.d(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new ur(t)}static getPrimaryType(t){return ur.from(t).primaryType}static hashStruct(t,e,n){return ur.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(null==t[n])continue;const i=ir[n];r.d(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:i})}return e.sort(((t,e)=>sr.indexOf(t.name)-sr.indexOf(e.name))),ur.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return r.k(["0x1901",ur.hashDomain(t),ur.from(e).hash(n)])}static hash(t,e,n){return r.F(ur.encode(t,e,n))}static async resolveNames(t,e,n,i){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const s={};t.verifyingContract&&!r.D(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const a=ur.from(e);a.visit(n,((t,e)=>("address"!==t||r.D(e,20)||(s[e]="0x"),e)));for(const t in s)s[t]=await i(t);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),{domain:t,value:n=a.visit(n,((t,e)=>"address"===t&&s[e]?s[e]:e))}}static getPayload(t,e,n){ur.hashDomain(t);const i={},s=[];sr.forEach((e=>{const n=t[e];null!=n&&(i[e]=or[e](n),s.push({name:e,type:ir[e]}))}));const a=ur.from(e),o=Object.assign({},e);return r.d(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,((t,e)=>{if(t.match(/^bytes(\d*)/))return r.h(r.g(e));if(t.match(/^u?int/))return w(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return r.d("string"==typeof e,"invalid string","value",e),e}r.d(!1,"unsupported type","type",t)}))}}}function dr(t){const e=new Set;return t.forEach((t=>e.add(t))),Object.freeze(e)}dr("external public payable".split(" "));const hr="constant external internal payable private public pure view";dr(hr.split(" "));const fr="constructor error event fallback function receive struct";dr(fr.split(" "));const pr="calldata memory storage payable indexed",gr=dr(pr.split(" ")),yr=dr([fr,pr,"tuple returns",hr].join(" ").split(" ")),mr={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},wr=new RegExp("^(\\s*)"),Er=new RegExp("^([0-9]+)"),br=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),vr=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Ir=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Ar{#i;#R;get offset(){return this.#i}get length(){return this.#R.length-this.#i}constructor(t){this.#i=0,this.#R=t.slice()}clone(){return new Ar(this.#R)}reset(){this.#i=0}#P(t=0,e=0){return new Ar(this.#R.slice(t,e).map((e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t})))))}popKeyword(t){const e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t)throw new Error(`expected ${t}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=this.#P(this.#i+1,t.match+1);return this.#i=t.match+1,e}popParams(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=[];for(;this.#i<t.match-1;){const t=this.peek().linkNext;e.push(this.#P(this.#i+1,t)),this.#i=t}return this.#i=t.match+1,e}peek(){if(this.#i>=this.#R.length)throw new Error("out-of-bounds");return this.#R[this.#i]}peekKeyword(t){const e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return this.#i++,t}toString(){const t=[];for(let e=this.#i;e<this.#R.length;e++){const n=this.#R[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}}function xr(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(null==r||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}const Tr=new RegExp(/^(.*)\[([0-9]*)\]$/);function Nr(t){const e=t.match(Ir);if(r.d(e,"invalid type","type",t),"uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){const n=parseInt(e[2]);r.d(0!==n&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);r.d(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",t)}return t}const Rr={},Pr=Symbol.for("_ethers_internal"),Sr="_ParamTypeInternal";class Or{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,n,i,s,a,o,c){if(r.B(t,Rr,"ParamType"),Object.defineProperty(this,Pr,{value:Sr}),a&&(a=Object.freeze(a.slice())),"array"===i){if(null==o||null==c)throw new Error("")}else if(null!=o||null!=c)throw new Error("");if("tuple"===i){if(null==a)throw new Error("")}else if(null!=a)throw new Error("");r.f(this,{name:e,type:n,baseType:i,indexed:s,components:a,arrayLength:o,arrayChildren:c})}format(t){if(null==t&&(t="sighash"),"json"===t){const e=this.name||"";if(this.isArray()){const t=JSON.parse(this.arrayChildren.format("json"));return t.name=e,t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(t)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:e};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(n)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map((e=>e.format(t))).join("full"===t?", ":",")+")":e+=this.type,"sighash"!==t&&(!0===this.indexed&&(e+=" indexed"),"full"===t&&this.name&&(e+=" "+this.name)),e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map((t=>n.arrayChildren.walk(t,e)))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map(((t,r)=>n.components[r].walk(t,e)))}return e(this.type,t)}#S(t,e,n,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const i=this.arrayChildren,s=e.slice();return s.forEach(((e,r)=>{i.#S(t,e,n,(t=>{s[r]=t}))})),void r(s)}if(this.isTuple()){const i=this.components;let s;if(Array.isArray(e))s=e.slice();else{if(null==e||"object"!=typeof e)throw new Error("invalid tuple value");s=i.map((t=>{if(!t.name)throw new Error("cannot use object value with unnamed components");if(!(t.name in e))throw new Error(`missing value for component ${t.name}`);return e[t.name]}))}if(s.length!==this.components.length)throw new Error("array is wrong length");return s.forEach(((e,r)=>{i[r].#S(t,e,n,(t=>{s[r]=t}))})),void r(s)}const i=n(this.type,e);i.then?t.push(async function(){r(await i)}()):r(i)}async walkAsync(t,e){const n=[],r=[t];return this.#S(n,t,e,(t=>{r[0]=t})),n.length&&await Promise.all(n),r[0]}static from(t,e){if(Or.isParamType(t))return t;if("string"==typeof t)try{return Or.from(function(t){const e=[],n=e=>{const n=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${n} at ${s}: ${e}`)};let r=[],i=[],s=0;for(;s<t.length;){let a=t.substring(s),o=a.match(wr);o&&(s+=o[1].length,a=t.substring(s));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=mr[a[0]]||"";if(l){if(c.type=l,c.text=a[0],s++,"OPEN_PAREN"===l)r.push(e.length-1),i.push(e.length-1);else if("CLOSE_PAREN"==l)0===r.length&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if("COMMA"===l)c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){const n=e.pop().text;t=n+t,e[e.length-1].value=I(n)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw new Error("missing opening bracket");e[e.length-1].text+=t}}else if(o=a.match(br),o){if(c.text=o[1],s+=c.text.length,yr.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Ir)){c.type="TYPE";continue}c.type="ID"}else{if(o=a.match(Er),!o)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`);c.text=o[1],c.type="NUMBER",s+=c.text.length}}return new Ar(e.map((t=>Object.freeze(t))))}(t),e)}catch(e){r.d(!1,"invalid param type","obj",t)}else if(t instanceof Ar){let n="",r="",i=null;xr(t,dr(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(r="tuple",i=t.popParams().map((t=>Or.from(t))),n=`tuple(${i.map((t=>t.format())).join(",")})`):(n=Nr(t.popType("TYPE")),r=n);let s=null,a=null;for(;t.length&&t.peekType("BRACKET");){const e=t.pop();s=new Or(Rr,"",n,r,null,i,a,s),a=e.value,n+=e.text,r="array",i=null}let o=null;if(xr(t,gr).has("indexed")){if(!e)throw new Error("");o=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Or(Rr,c,n,r,o,i,a,s)}const n=t.name;r.d(!n||"string"==typeof n&&n.match(vr),"invalid name","obj.name",n);let i=t.indexed;null!=i&&(r.d(e,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let s=t.type,a=s.match(Tr);if(a){const e=parseInt(a[2]||"-1"),r=Or.from({type:a[1],components:t.components});return new Or(Rr,n||"",s,"array",i,null,e,r)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){const e=null!=t.components?t.components.map((t=>Or.from(t))):null;return new Or(Rr,n||"",s,"tuple",i,e,null,null)}return s=Nr(t.type),new Or(Rr,n||"",s,s,i,null,null,null)}static isParamType(t){return t&&t[Pr]===Sr}}const kr=new Map;kr.set(0,"GENERIC_PANIC"),kr.set(1,"ASSERT_FALSE"),kr.set(17,"OVERFLOW"),kr.set(18,"DIVIDE_BY_ZERO"),kr.set(33,"ENUM_RANGE_ERROR"),kr.set(34,"BAD_STORAGE_DATA"),kr.set(49,"STACK_UNDERFLOW"),kr.set(50,"ARRAY_RANGE_ERROR"),kr.set(65,"OUT_OF_MEMORY"),kr.set(81,"UNINITIALIZED_FUNCTION_CALL");const Cr=new RegExp(/^bytes([0-9]*)$/),Lr=new RegExp(/^(u?int)([0-9]*)$/);let Br=null;class Ur{#O(t){if(t.isArray())return new mn(this.#O(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Sn(t.components.map((t=>this.#O(t))),t.name);switch(t.baseType){case"address":return new fn(t.name);case"bool":return new wn(t.name);case"string":return new Pn(t.name);case"bytes":return new bn(t.name);case"":return new An(t.name)}let e=t.type.match(Lr);if(e){let n=parseInt(e[2]||"256");return r.d(0!==n&&n<=256&&n%8==0,"invalid "+e[1]+" bit length","param",t),new Rn(n/8,"int"===e[1],t.name)}if(e=t.type.match(Cr),e){let n=parseInt(e[1]);return r.d(0!==n&&n<=32,"invalid bytes length","param",t),new vn(n,t.name)}r.d(!1,"invalid type","type",t.type)}getDefaultValue(t){const e=t.map((t=>this.#O(Or.from(t))));return new Sn(e,"_").defaultValue()}encode(t,e){r.G(e.length,t.length,"types/values length mismatch");const n=t.map((t=>this.#O(Or.from(t)))),i=new Sn(n,"_"),s=new W;return i.encode(s,e),s.data}decode(t,e,n){const r=t.map((t=>this.#O(Or.from(t))));return new Sn(r,"_").decode(new Y(e,n))}static defaultAbiCoder(){return null==Br&&(Br=new Ur),Br}static getBuiltinCallException(t,e,n){return function(t,e,n,i){let s="missing revert data",a=null,o=null;if(n){s="execution reverted";const t=r.g(n);if(n=r.h(n),0===t.length)s+=" (no data present; likely require(false) occurred",a="require(false)";else if(t.length%32!=4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===r.h(t.slice(0,4)))try{a=i.decode(["string"],t.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[a]},s+=`: ${JSON.stringify(a)}`}catch(t){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===r.h(t.slice(0,4)))try{const e=Number(i.decode(["uint256"],t.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[e]},a=`Panic due to ${kr.get(e)||"UNKNOWN"}(${e})`,s+=`: ${a}`}catch(t){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?sn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=sn(e.from)),r.J(s,"CALL_EXCEPTION",{action:t,data:n,reason:a,transaction:c,invocation:null,revert:o})}(t,e,n,Ur.defaultAbiCoder())}}function Dr(t,e){if(t.provider)return t.provider;r.e(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function _r(t,e){let n=function(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=r.h(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)r in t&&null!=t[r]&&(e[r]=w(t[r],`request.${r}`));const i="type,nonce".split(/,/);for(const n of i)n in t&&null!=t[n]&&(e[n]=I(t[n],`request.${n}`));return t.accessList&&(e.accessList=Cn(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),e}(e);if(null!=n.to&&(n.to=on(n.to,t)),null!=n.from){const e=n.from;n.from=Promise.all([t.getAddress(),on(e,t)]).then((([t,e])=>(r.d(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e),t)))}else n.from=t.getAddress();return await r.L(n)}BigInt(0);class $r{provider;constructor(t){r.f(this,{provider:t||null})}async getNonce(t){return Dr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await _r(this,t)}async populateTransaction(t){const e=Dr(this,"populateTransaction"),n=await _r(this,t);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(null!=n.chainId){const e=w(n.chainId);r.d(e===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=i.chainId;const s=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!s?0!==n.type&&1!==n.type||!s||r.d(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):r.d(!1,"eip-1559 transaction do not support gasPrice","tx",t),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const t=await e.getFeeData();r.e(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=t.gasPrice)}else{const t=await e.getFeeData();if(null==n.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const t=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=t,n.maxPriorityFeePerGas=t}else null==n.maxFeePerGas&&(n.maxFeePerGas=t.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r.e(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=t.gasPrice),n.type=0):r.e(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=t.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else n.type=2;return await r.L(n)}async estimateGas(t){return Dr(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Dr(this,"call").call(await this.populateCall(t))}async resolveName(t){const e=Dr(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){const e=Dr(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const r=Zn.from(n);return await e.broadcastTransaction(await this.signTransaction(r))}}class Fr extends $r{address;constructor(t,e){super(e),r.f(this,{address:t})}async getAddress(){return this.address}connect(t){return new Fr(this.address,t)}#k(t,e){r.e(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:e})}async signTransaction(t){this.#k("transactions","signTransaction")}async signMessage(t){this.#k("messages","signMessage")}async signTypedData(t,e,n){this.#k("typed-data","signTypedData")}}class Mr extends $r{address;#C;constructor(t,e){super(e),r.d(t&&"function"==typeof t.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#C=t;const n=Ln(this.signingKey.publicKey);r.f(this,{address:n})}get signingKey(){return this.#C}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new Mr(this.#C,t)}async signTransaction(t){const{to:e,from:n}=await r.L({to:t.to?on(t.to,this.provider):void 0,from:t.from?on(t.from,this.provider):void 0});null!=e&&(t.to=e),null!=n&&(t.from=n),null!=t.from&&(r.d(sn(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const i=Zn.from(t);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(function(t){return"string"==typeof t&&(t=r.t(t)),r.F(r.k([r.t("Ethereum Signed Message:\n"),r.t(String(t.length)),t]))}(t)).serialized}async signTypedData(t,e,n){const i=await ur.resolveNames(t,e,n,(async t=>{r.e(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:t}});const e=await this.provider.resolveName(t);return r.e(null!=e,"unconfigured ENS name","UNCONFIGURED_NAME",{value:t}),e}));return this.signingKey.sign(ur.hash(i.domain,e,i.value)).serialized}}const Vr=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Gr=/^[a-z]*$/i;function Kr(t,e){let n=97;return t.reduce(((t,r)=>(r===e?n++:r.match(Gr)?t.push(String.fromCharCode(n)+r):(n=97,t.push(r)),t)),[])}function jr(t){return r.d("0"===t[0],"unsupported auwl data","data",t),function(t,e){for(let n=28;n>=0;n--)t=t.split(Vr[n]).join(e.substring(2*n,2*n+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((t,e,r,i)=>{if(r)for(let t=parseInt(r);t>=0;t--)n.push(";");else n.push(e.toLowerCase());return""}));if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return Kr(Kr(n,";"),":")}(t.substring(59),t.substring(1,59))}class zr{locale;constructor(t){r.f(this,{locale:t})}split(t){return t.toLowerCase().split(/\s+/g)}join(t){return t.join(" ")}}class qr extends zr{#e;#L;constructor(t,e,n){super(t),this.#e=e,this.#L=n,this.#B=null}get _data(){return this.#e}_decodeWords(){return jr(this.#e)}#B;#U(){if(null==this.#B){const t=this._decodeWords();if(On(t.join("\n")+"\n")!==this.#L)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#B=t}return this.#B}getWord(t){const e=this.#U();return r.d(t>=0&&t<e.length,`invalid word index: ${t}`,"index",t),e[t]}getWordIndex(t){return this.#U().indexOf(t)}}let Hr=null;class Wr extends qr{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==Hr&&(Hr=new Wr),Hr}}function Yr(t){return(1<<t)-1<<8-t&255}function Zr(t,e){r.M("NFKD"),null==e&&(e=Wr.wordlist());const n=e.split(t);r.d(n.length%3==0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const i=new Uint8Array(Math.ceil(11*n.length/8));let s=0;for(let t=0;t<n.length;t++){let a=e.getWordIndex(n[t].normalize("NFKD"));r.d(a>=0,`invalid mnemonic word at index ${t}`,"mnemonic","[ REDACTED ]");for(let t=0;t<11;t++)a&1<<10-t&&(i[s>>3]|=1<<7-s%8),s++}const a=32*n.length/3,o=Yr(n.length/3),c=r.g($t(i.slice(0,a/8)))[0]&o;return r.d(c===(i[i.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),r.h(i.slice(0,a/8))}function Jr(t,e){r.d(t.length%4==0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==e&&(e=Wr.wordlist());const n=[0];let i=11;for(let e=0;e<t.length;e++)i>8?(n[n.length-1]<<=8,n[n.length-1]|=t[e],i-=8):(n[n.length-1]<<=i,n[n.length-1]|=t[e]>>8-i,n.push(t[e]&((1<<8-i)-1&255)),i+=3);const s=t.length/4,a=parseInt($t(t).substring(2,4),16)&Yr(s);return n[n.length-1]<<=s,n[n.length-1]|=a>>8-s,e.join(n.map((t=>e.getWord(t))))}const Xr={};class Qr{phrase;password;wordlist;entropy;constructor(t,e,n,i,s){null==i&&(i=""),null==s&&(s=Wr.wordlist()),r.B(t,Xr,"Mnemonic"),r.f(this,{phrase:n,password:i,wordlist:s,entropy:e})}computeSeed(){const t=r.t("mnemonic"+this.password,"NFKD");return vt(r.t(this.phrase,"NFKD"),t,2048,64,"sha512")}static fromPhrase(t,e,n){const i=Zr(t,n);return t=Jr(r.g(i),n),new Qr(Xr,i,t,e,n)}static fromEntropy(t,e,n){const i=r.g(t,"entropy"),s=Jr(i,n);return new Qr(Xr,r.h(i),s,e,n)}static entropyToPhrase(t,e){return Jr(r.g(t,"entropy"),e)}static phraseToEntropy(t,e){return Zr(t,e)}static isValidMnemonic(t,e){try{return Zr(t,e),!0}catch(t){}return!1}}var ti,ei,ni=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},ri=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};class ii extends r.N{constructor(t,e){if(super("ECC",t,ii),ti.set(this,void 0),ei.set(this,void 0),e){if(e.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");ni(this,ti,new Uint8Array(e),"f")}else ni(this,ti,new Uint8Array(16),"f");ni(this,ei,this.iv,"f")}get iv(){return new Uint8Array(ri(this,ti,"f"))}encrypt(t){if(t.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const e=new Uint8Array(t.length);for(let n=0;n<t.length;n+=16){for(let e=0;e<16;e++)ri(this,ei,"f")[e]^=t[n+e];ni(this,ei,this.aes.encrypt(ri(this,ei,"f")),"f"),e.set(ri(this,ei,"f"),n)}return e}decrypt(t){if(t.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const e=new Uint8Array(t.length);for(let n=0;n<t.length;n+=16){const r=this.aes.decrypt(t.subarray(n,n+16));for(let i=0;i<16;i++)e[n+i]=r[i]^ri(this,ei,"f")[i],ri(this,ei,"f")[i]=t[n+i]}return e}}function si(t){return"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),r.j(t)}function ai(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function oi(t){return"string"==typeof t?r.t(t,"NFKC"):r.j(t)}function ci(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);r.d(null!=n,"invalid path","path",e);const i=n[1],s=n[3],a="!"===n[4];let o=t;for(const t of i.toLowerCase().split(".")){if(Array.isArray(o)){if(!t.match(/^[0-9]+$/))break;o=o[parseInt(t)]}else if("object"==typeof o){let e=null;for(const n in o)if(n.toLowerCase()===t){e=o[n];break}o=e}else o=null;if(null==o)break}if(r.d(!a||null!=o,"missing required value","path",i),s&&null!=o){if("int"===s){if("string"==typeof o&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if("number"===s&&"string"==typeof o&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if("data"===s&&"string"==typeof o)return si(o);if("array"===s&&Array.isArray(o))return o;if(s===typeof o)return o;r.d(!1,`wrong type found for ${s} `,"path",i)}return o}ti=new WeakMap,ei=new WeakMap;const li="m/44'/60'/0'/0/0";function ui(t){try{const e=JSON.parse(t);if(3===(null!=e.version?parseInt(e.version):0))return!0}catch(t){}return!1}function di(t,e){const n=r.g(e),i=ci(t,"crypto.ciphertext:data!"),s=r.h(r.F(r.k([n.slice(16,32),i]))).substring(2);r.d(s===ci(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const a=function(t,e,n){if("aes-128-ctr"===ci(t,"crypto.cipher:string")){const i=ci(t,"crypto.cipherparams.iv:data!"),s=new r.C(e,i);return r.h(s.decrypt(n))}r.e(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(t,n.slice(0,16),i),o=Ln(a);if(t.address){let e=t.address.toLowerCase();e.startsWith("0x")||(e="0x"+e),r.d(sn(e)===o,"keystore address/privateKey mismatch","address",t.address)}const c={address:o,privateKey:a};if("0.1"===ci(t,"x-ethers.version:string")){const e=n.slice(32,64),i=ci(t,"x-ethers.mnemonicCiphertext:data!"),s=ci(t,"x-ethers.mnemonicCounter:data!"),a=new r.C(e,s);c.mnemonic={path:ci(t,"x-ethers.path:string")||li,locale:ci(t,"x-ethers.locale:string")||"en",entropy:r.h(r.g(a.decrypt(i)))}}return c}function hi(t){const e=ci(t,"crypto.kdf:string");if(e&&"string"==typeof e){if("scrypt"===e.toLowerCase()){const n=ci(t,"crypto.kdfparams.salt:data!"),i=ci(t,"crypto.kdfparams.n:int!"),s=ci(t,"crypto.kdfparams.r:int!"),a=ci(t,"crypto.kdfparams.p:int!");r.d(i>0&&!(i&i-1),"invalid kdf.N","kdf.N",i),r.d(s>0&&a>0,"invalid kdf","kdf",e);const o=ci(t,"crypto.kdfparams.dklen:int!");return r.d(32===o,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:i,r:s,p:a,dkLen:64}}if("pbkdf2"===e.toLowerCase()){const e=ci(t,"crypto.kdfparams.salt:data!"),n=ci(t,"crypto.kdfparams.prf:string!"),i=n.split("-").pop();r.d("sha256"===i||"sha512"===i,"invalid kdf.pdf","kdf.pdf",n);const s=ci(t,"crypto.kdfparams.c:int!"),a=ci(t,"crypto.kdfparams.dklen:int!");return r.d(32===a,"invalid kdf.dklen","kdf.dklen",a),{name:"pbkdf2",salt:e,count:s,dkLen:a,algorithm:i}}}r.d(!1,"unsupported key-derivation function","kdf",e)}function fi(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}function pi(t){const e=null!=t.salt?r.g(t.salt,"options.salt"):r.O(32);let n=1<<17,i=8,s=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(i=t.scrypt.r),t.scrypt.p&&(s=t.scrypt.p)),r.d("number"==typeof n&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),r.d("number"==typeof i&&i>0&&Number.isSafeInteger(i),"invalid scrypt r parameter","options.r",i),r.d("number"==typeof s&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:n,r:i,p:s}}function gi(t,e,n,i){const s=r.g(n.privateKey,"privateKey"),a=null!=i.iv?r.g(i.iv,"options.iv"):r.O(16);r.d(16===a.length,"invalid options.iv length","options.iv",i.iv);const o=null!=i.uuid?r.g(i.uuid,"options.uuid"):r.O(16);r.d(16===o.length,"invalid options.uuid length","options.uuid",i.iv);const c=t.slice(0,16),l=t.slice(16,32),u=new r.C(c,a),d=r.g(u.encrypt(s)),h=r.F(r.k([l,d])),f={address:n.address.substring(2).toLowerCase(),id:F(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:r.h(a).substring(2)},ciphertext:r.h(d).substring(2),kdf:"scrypt",kdfparams:{salt:r.h(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(n.mnemonic){const e=null!=i.client?i.client:`ethers/${r.P}`,s=n.mnemonic.path||li,a=n.mnemonic.locale||"en",o=t.slice(32,64),c=r.g(n.mnemonic.entropy,"account.mnemonic.entropy"),l=r.O(16),u=new r.C(o,l),d=r.g(u.encrypt(c)),h=new Date,p="UTC--"+(h.getUTCFullYear()+"-"+ai(h.getUTCMonth()+1,2)+"-"+ai(h.getUTCDate(),2)+"T"+ai(h.getUTCHours(),2)+"-"+ai(h.getUTCMinutes(),2)+"-"+ai(h.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:e,gethFilename:p,path:s,locale:a,mnemonicCounter:r.h(l).substring(2),mnemonicCiphertext:r.h(d).substring(2),version:"0.1"}}return JSON.stringify(f)}function yi(t,e,n){null==n&&(n={});const i=oi(e),s=pi(n),a=Bt(i,s.salt,s.N,s.r,s.p,64);return gi(r.g(a),s,t,n)}async function mi(t,e,n){null==n&&(n={});const i=oi(e),s=pi(n),a=await Lt(i,s.salt,s.N,s.r,s.p,64,n.progressCallback);return gi(r.g(a),s,t,n)}const wi="m/44'/60'/0'/0/0",Ei=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),bi=2147483648,vi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Ii(t,e){let n="";for(;t;)n="0123456789abcdef"[t%16]+n,t=Math.trunc(t/16);for(;n.length<2*e;)n="0"+n;return"0x"+n}function Ai(t){const e=r.g(t),n=r.Q($t($t(e)),0,4);return function(t){let e=v(r.g(t)),n="";for(;e;)n=T[Number(e%S)]+n,e/=S;return n}(r.k([e,n]))}const xi={};function Ti(t,e,n,i){const s=new Uint8Array(37);t&bi?(r.e(null!=i,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(r.g(i),1)):s.set(r.g(n));for(let e=24;e>=0;e-=8)s[33+(e>>3)]=t>>24-e&255;const a=r.g(Q("sha512",e,s));return{IL:a.slice(0,32),IR:a.slice(32)}}function Ni(t,e){const n=e.split("/");r.d(n.length>0&&("m"===n[0]||t.depth>0),"invalid path","path",e),"m"===n[0]&&n.shift();let i=t;for(let t=0;t<n.length;t++){const e=n[t];if(e.match(/^[0-9]+'$/)){const n=parseInt(e.substring(0,e.length-1));r.d(n<bi,"invalid path index",`path[${t}]`,e),i=i.deriveChild(bi+n)}else if(e.match(/^[0-9]+$/)){const n=parseInt(e);r.d(n<bi,"invalid path index",`path[${t}]`,e),i=i.deriveChild(n)}else r.d(!1,"invalid path component",`path[${t}]`,e)}return i}class Ri extends Mr{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(t,e,n,i,s,a,o,c,l){super(e,l),r.B(t,xi,"HDNodeWallet"),r.f(this,{publicKey:e.compressedPublicKey});const u=r.Q(mt($t(this.publicKey)),0,4);r.f(this,{parentFingerprint:n,fingerprint:u,chainCode:i,path:s,index:a,depth:o}),r.f(this,{mnemonic:c})}connect(t){return new Ri(xi,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}#D(){const t={address:this.address,privateKey:this.privateKey},e=this.mnemonic;return this.path&&e&&"en"===e.wordlist.locale&&""===e.password&&(t.mnemonic={path:this.path,locale:"en",entropy:e.entropy}),t}async encrypt(t,e){return await mi(this.#D(),t,{progressCallback:e})}encryptSync(t){return yi(this.#D(),t)}get extendedKey(){return r.e(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Ai(r.k(["0x0488ADE4",Ii(this.depth,1),this.parentFingerprint,Ii(this.index,4),this.chainCode,r.k(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new Pi(xi,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const e=I(t,"index");r.d(e<=4294967295,"invalid index","index",e);let n=this.path;n&&(n+="/"+(2147483647&e),e&bi&&(n+="'"));const{IR:i,IL:s}=Ti(e,this.chainCode,this.publicKey,this.privateKey),a=new Xe(A((v(s)+BigInt(this.privateKey))%vi,32));return new Ri(xi,a,this.fingerprint,r.h(i),n,e,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return Ni(this,t)}static#_(t,e){r.d(r.i(t),"invalid seed","seed","[REDACTED]");const n=r.g(t,"seed");r.d(n.length>=16&&n.length<=64,"invalid seed","seed","[REDACTED]");const i=r.g(Q("sha512",Ei,n)),s=new Xe(r.h(i.slice(0,32)));return new Ri(xi,s,"0x00000000",r.h(i.slice(32)),"m",0,0,e,null)}static fromExtendedKey(t){const e=x(function(t){let e=P;for(let n=0;n<t.length;n++)e*=S,e+=R(t[n]);return e}(t));r.d(82===e.length||Ai(e.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const n=e[4],i=r.h(e.slice(5,9)),s=parseInt(r.h(e.slice(9,13)).substring(2),16),a=r.h(e.slice(13,45)),o=e.slice(45,78);switch(r.h(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const t=r.h(o);return new Pi(xi,Ln(t),t,i,a,null,s,n,null)}case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new Ri(xi,new Xe(o.slice(1)),i,a,null,s,n,null,null)}r.d(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,e,n){null==t&&(t=""),null==e&&(e=wi),null==n&&(n=Wr.wordlist());const i=Qr.fromEntropy(r.O(16),t,n);return Ri.#_(i.computeSeed(),i).derivePath(e)}static fromMnemonic(t,e){return e||(e=wi),Ri.#_(t.computeSeed(),t).derivePath(e)}static fromPhrase(t,e,n,r){null==e&&(e=""),null==n&&(n=wi),null==r&&(r=Wr.wordlist());const i=Qr.fromPhrase(t,e,r);return Ri.#_(i.computeSeed(),i).derivePath(n)}static fromSeed(t){return Ri.#_(t,null)}}class Pi extends Fr{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(t,e,n,i,s,a,o,c,l){super(e,l),r.B(t,xi,"HDNodeVoidWallet"),r.f(this,{publicKey:n});const u=r.Q(mt($t(n)),0,4);r.f(this,{publicKey:n,fingerprint:u,parentFingerprint:i,chainCode:s,path:a,index:o,depth:c})}connect(t){return new Pi(xi,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return r.e(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Ai(r.k(["0x0488B21E",Ii(this.depth,1),this.parentFingerprint,Ii(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(t){const e=I(t,"index");r.d(e<=4294967295,"invalid index","index",e);let n=this.path;n&&(n+="/"+(2147483647&e),e&bi&&(n+="'"));const{IR:i,IL:s}=Ti(e,this.chainCode,this.publicKey,null),a=Xe.addPoints(s,this.publicKey,!0),o=Ln(a);return new Pi(xi,o,a,this.fingerprint,r.h(i),n,e,this.depth+1,this.provider)}derivePath(t){return Ni(this,t)}}function Si(t){try{if(JSON.parse(t).encseed)return!0}catch(t){}return!1}function Oi(t,e){const n=JSON.parse(t),i=oi(e),s=sn(ci(n,"ethaddr:string!")),a=si(ci(n,"encseed:string!"));r.d(a&&a.length%16==0,"invalid encseed","json",t);const o=r.g(vt(i,i,2e3,32,"sha256")).slice(0,16),c=a.slice(0,16),l=a.slice(16),u=new ii(o,c),d=r.p(r.g(u.decrypt(l)));let h="";for(let t=0;t<d.length;t++)h+=String.fromCharCode(d[t]);return{address:s,privateKey:On(h)}}function ki(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}class Ci extends Mr{constructor(t,e){"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),super("string"==typeof t?new Xe(t):t,e)}connect(t){return new Ci(this.signingKey,t)}async encrypt(t,e){const n={address:this.address,privateKey:this.privateKey};return await mi(n,t,{progressCallback:e})}encryptSync(t){return yi({address:this.address,privateKey:this.privateKey},t)}static#$(t){if(r.d(t,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in t&&t.mnemonic&&"en"===t.mnemonic.locale){const e=Qr.fromEntropy(t.mnemonic.entropy),n=Ri.fromMnemonic(e,t.mnemonic.path);if(n.address===t.address&&n.privateKey===t.privateKey)return n;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const e=new Ci(t.privateKey);return r.d(e.address===t.address,"address/privateKey mismatch","json","[ REDACTED ]"),e}static async fromEncryptedJson(t,e,n){let i=null;return ui(t)?i=await async function(t,e,n){const i=JSON.parse(t),s=oi(e),a=hi(i);if("pbkdf2"===a.name){n&&(n(0),await fi(0));const{salt:t,count:e,dkLen:r,algorithm:o}=a,c=vt(s,t,e,r,o);return n&&(n(1),await fi(0)),di(i,c)}r.e("scrypt"===a.name,"cannot be reached","UNKNOWN_ERROR",{params:a});const{salt:o,N:c,r:l,p:u,dkLen:d}=a;return di(i,await Lt(s,o,c,l,u,d,n))}(t,e,n):Si(t)&&(n&&(n(0),await ki(0)),i=Oi(t,e),n&&(n(1),await ki(0))),Ci.#$(i)}static fromEncryptedJsonSync(t,e){let n=null;return ui(t)?n=function(t,e){const n=JSON.parse(t),i=oi(e),s=hi(n);if("pbkdf2"===s.name){const{salt:t,count:e,dkLen:r,algorithm:a}=s;return di(n,vt(i,t,e,r,a))}r.e("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:a,N:o,r:c,p:l,dkLen:u}=s;return di(n,Bt(i,a,o,c,l,u))}(t,e):Si(t)?n=Oi(t,e):r.d(!1,"invalid JSON wallet","json","[ REDACTED ]"),Ci.#$(n)}static createRandom(t){const e=Ri.createRandom();return t?e.connect(t):e}static fromPhrase(t,e){const n=Ri.fromPhrase(t);return e?n.connect(e):n}}function Li(t,e=[],n={}){if(e.includes(t))return e;if(void 0===n[t])return e;e.push(t);for(const r of n[t])for(const t of Li(r.type,e))e.includes(t)||e.push(t);return e}function Bi(t,e={}){let n=Li(t);n=n.filter((e=>e!==t)),n=[t].concat(n.sort());let r="";for(const t of n){if(!e[t])throw new Error(`Type '${t}' not defined in types (${JSON.stringify(e)})`);r+=`${t}(${e[t].map((({name:t,type:e})=>`${e} ${t}`)).join(",")})`}return r}function Ui(t,e,n={}){const r=[],i=[];r.push("bytes32"),i.push(function(t,e={}){return Fi(u(Bi(t,e)))}(t,n));for(const s of n[t]){let t=e[s.name];if("string"===s.type||"bytes"===s.type)r.push("bytes32"),t=Fi(u(t)),i.push(t);else if(void 0!==n[s.type])r.push("bytes32"),t=Fi(Ui(s.type,t,n)),i.push(t);else{if(s.type.lastIndexOf("]")===s.type.length-1)throw new Error("Cannot handle Array types");r.push(s.type),i.push(t)}}return function(t,e){const n=Ur.defaultAbiCoder().encode(t,e);return h(n.slice(2,n.length))}(r,i)}function Di(t,e={}){return Fi(Ui("EIP712Domain",t,{EIP712Domain:e.EIP712Domain}))}function _i(t,e,n={}){return Fi(Ui(t,e,n))}function $i(t,e,n,r){return Fi(function(t,e){if(0===t.length)return new Uint8Array(0);e??=t.reduce(((t,e)=>t+e.length),0);const n=new Uint8Array(e);let r=0;for(const e of t)o(e),n.set(e,r),r+=e.length;return n}([h("1901"),Di(t,r),_i(e,n,r)]))}function Fi(t){const e=r.F(t);return h(e.slice(2,e.length))}const Mi=t=>t?.map((t=>({...t,type:t.type.toLowerCase()})))||[],Vi="ethereum",Gi=async({userId:t,password:e})=>{try{const n=await(async()=>await Ci.createRandom())(),i=await n.getAddress(),s=await r.R(t,n.mnemonic.phrase,e),a=await async function(t,e){const n=new Date,i=Math.floor(+n/1e3),s=JSON.stringify(e),a=new ArrayBuffer(8);new DataView(a).setBigInt64(0,BigInt(i),!0);const o=r.F(r.k([r.t(s),new Uint8Array(a)])),c=await t.signMessage(r.g(o));return{wallet:s,createdAt:n.toISOString(),signature:c,provider:Vi,address:await t.getAddress()}}(n,s);await Ki(a);const o=await ji(Vi,i);if(o){const t=await(async(t,e)=>{const{domain:n,primaryType:r,message:i,types:s}=t,a={EIP712Domain:Mi(s.eip712Domain),Challenge:Mi(s.challenge)},o=$i(JSON.parse(n),r,JSON.parse(i),a);return e.signingKey.sign(o).serialized})(o,n);return await zi({provider:Vi,address:i,signature:t}),i}return null}catch(t){return null}},Ki=async e=>{const n=await t.B({operation:t.O.BackupVault,variables:{input:e}});if(n.errors.length>0)throw new Error(n.errors[0].message)},ji=async(e,n)=>{const r=await t.B({operation:t.O.GetVaultRegistrationChallenge,variables:{provider:e,address:n}});if(r.errors.length>0)throw new Error(r.errors[0].message);return r.data.vault?.registrationChallenge?.payload},zi=async e=>{const n=await t.B({operation:t.O.RegisterVaultAddress,variables:{input:e}});if(n.errors.length>0)throw new Error(n.errors[0].message)};function qi(t,e){const n=t.length>=12,r=/[^A-Za-z 0-9]/g.test(t),i=/^(.*[A-Z]).*$/g.test(t),s=/^(.*[0-9]).*$/g.test(t);return{hasMinimumCharacters:n,hasSymbol:r,hasCapital:i,hasDigit:s,allRequirementsMet:Boolean(t&&n&&r&&i&&s&&e&&t===e)}}var Hi;!function(t){t[t.Enter=0]="Enter",t[t.Creating=1]="Creating",t[t.Complete=2]="Complete"}(Hi||(Hi={}));const Wi={page_type:i.d.ProductDetailPage,reason:i.c.Purchase},Yi=t.g(e.s);let Zi=class extends Yi{constructor(){super(...arguments),this.hasActiveVault=!1,this.extraParams={},this.currentStep=Hi.Enter,this.password="",this.confirmPassword="",this.goToNextStep=()=>{const t=n.g();t?.next()},this.handleSubmit=async()=>{this.trackEvent(t.b({source:i.b.Marketplace,action:i.a.Click,noun:i.M.SecureVault},{action_info:Wi,marketplace:{item_id:this.telemetryItemId}})),this.currentStep=Hi.Creating;await Gi({userId:this.userId,password:this.password})?(this.trackEvent(t.b({source:i.b.Marketplace,action:i.a.View,noun:i.M.VaultConfirmation},{action_info:Wi,marketplace:{item_id:this.telemetryItemId}})),this.currentStep=Hi.Complete,await s.Y(5e3),this.goToNextStep()):(this.dispatchEvent(t.c("faceplate-alert",{level:t.x.error,cause:"uncategorized",message:"Something went wrong, please try again"})),this.currentStep=Hi.Enter,this.password="",this.confirmPassword="",this.passwordRequirements=void 0)},this.onPasswordChange=t=>{this.password=t.target.value,this.passwordRequirements=qi(this.password,this.confirmPassword)},this.onConfirmPasswordChange=t=>{this.confirmPassword=t.target.value,this.passwordRequirements=qi(this.password,this.confirmPassword)},this.classIfRequirementMet=t=>t?"text-tone-1":"text-puregray-500 dark:text-puregray-400",this.renderSecondaryPanel=()=>this.currentStep!==Hi.Enter?e.A:e.x` <div slot="secondary-panel-content" class="pt-2xl text-tone-1 flex flex-col w-100 h-100 box-border overflow-hidden"> <div class="flex flex-col h-full text-tone-1"> <div class="px-xl pb-xl flex-1 overflow-auto"> <p class="text-24 font-semibold m-0 mb-xl"> Your Avatar needs a Vault! </p> <div class="text-12 mb-md"> Collectible Avatars are on the blockchain and your Vault is used to store them. </div> <div class="text-12 mb-xl"> Secure your Vault with a new password. <span class="text-global-brand-orangered"> If you lose this, Reddit cannot help you recover your Vault. </span> </div> <faceplate-text-input name="password" type="password" class="w-full mb-sm" @input="${this.onPasswordChange}"> <span slot="label" class="text-10 font-bold uppercase"> Vault Password </span> </faceplate-text-input> <div class="text-12 mb-sm ml-xs"> <div class="uppercase font-semibold text-10 text-puregray-500 dark:text-puregray-400"> Password Requirements </div> <div class="flex items-center gap-2xs ${this.classIfRequirementMet(this.passwordRequirements?.hasMinimumCharacters)}"> ${e.E({size:e.I.ExtraSmall})} 12 characters </div> <div class="flex items-center gap-2xs ${this.classIfRequirementMet(this.passwordRequirements?.hasSymbol)}"> ${e.E({size:e.I.ExtraSmall})} 1 special symbol </div> <div class="flex items-center gap-2xs ${this.classIfRequirementMet(this.passwordRequirements?.hasCapital)}"> ${e.E({size:e.I.ExtraSmall})} 1 capital letter </div> <div class="flex items-center gap-2xs ${this.classIfRequirementMet(this.passwordRequirements?.hasDigit)}"> ${e.E({size:e.I.ExtraSmall})} 1 digit </div> </div> <faceplate-text-input name="confirm-password" type="password" class="w-full mb-md" @input="${this.onConfirmPasswordChange}"> <span slot="label" class="text-10 font-bold uppercase"> Confirm Vault Password </span> </faceplate-text-input> </div> <div class="px-xl"> ${t.r({appearance:"brand",attributes:{type:"button",onclick:this.handleSubmit,className:"w-full",disabled:!this.passwordRequirements?.allRequirementsMet},children:"Secure Your Vault"})} <p class="text-center my-md text-12 font-normal text-puregray-500 dark:text-puregray-400"> Vault is public so anyone can look up your address.<br> <a href="https://reddithelp.com/hc/articles/6213791102484" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary-hover">Learn more about privacy on the blockchain</a>. </p> </div> </div> </div> `,this.renderVideo=({video:t,webp:n,img:r,className:i})=>e.x` <picture class="block"> <source srcset="${t}" type="video/mp4"> <source srcset="${n}" type="image/webp"> <img src="${r}" alt="" class="${i}"> </picture> `,this.renderStepImage=()=>{switch(this.currentStep){case Hi.Enter:return e.x`<img src="https://www.redditstatic.com/crypto-assets/v2/marketplace/common/collectible_vault.png" class="w-[320px] z-1" alt="">`;case Hi.Creating:return e.x` <div class="z-1"> ${this.renderVideo({video:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/wallet-creation-in-progress.mov`,webp:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/wallet-creation-in-progress.webp`,img:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/vault.svg`,className:"w-[320px] aspect-square"})} <p class="text-global-white text-18 text-center m-0"> Creating your Vault... </p> </div> `;case Hi.Complete:return e.x` <div class="z-1"> ${this.renderVideo({video:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/wallet-creation-complete.mov`,webp:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/wallet-creation-complete.webp`,img:`${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/vault.svg`,className:"w-[320px] aspect-square"})} <p class="text-global-white text-18 text-center m-0"> Your Vault was created and secured </p> </div> `}},this.preloadImages=()=>e.x` <img src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/wallet-creation-complete.webp" alt="" class="absolute w-0 h-0"> <img src="${CLIENT_CONFIG.STATIC_BASE_URL}assets/marketplace/wallet-creation-in-progress.webp" alt="" class="absolute w-0 h-0"> `}connectedCallback(){super.connectedCallback(),this.trackEvent(t.b({source:i.b.Marketplace,action:i.a.View,noun:i.M.SecureVault},{action_info:{...Wi,pane_name:i.e.Password},marketplace:{item_id:this.telemetryItemId}})),this.hasActiveVault&&this.goToNextStep()}render(){return this.hasActiveVault?e.A:e.x` <div class="font-sans w-full h-full"> ${this.preloadImages()} <builder-panel-layout ?with-close-btn="${!0}" close-btn-aria-label="Close the vault creation screen" @builder-panel-layout:close-btn-click="${n.c}"> <div slot="primary-panel-content" class="relative overflow-hidden h-100 w-100 grid place-items-center place-content-evenly bg-gradient-to-bl from-berrypurple-900 from-16% to-lightblue-500 to-100%"> <div class="absolute opacity-75 w-100 h-[305px] bottom-0" style="background:radial-gradient(69% 50% at 20% 50%,#942fff 44%,rgba(170,71,255,0) 100%)"></div> ${this.renderStepImage()} </div> ${this.renderSecondaryPanel()} </builder-panel-layout> </div> `}};Zi.styles=[t.t],t._([t.n({type:String,attribute:"user-id"})],Zi.prototype,"userId",void 0),t._([t.n({type:Boolean,attribute:"has-active-vault"})],Zi.prototype,"hasActiveVault",void 0),t._([t.n({type:Object,attribute:"extra-params"})],Zi.prototype,"extraParams",void 0),t._([t.n({type:String,attribute:"telemetry-item-id"})],Zi.prototype,"telemetryItemId",void 0),t._([t.d()],Zi.prototype,"currentStep",void 0),t._([t.d()],Zi.prototype,"passwordRequirements",void 0),t._([t.d()],Zi.prototype,"password",void 0),t._([t.d()],Zi.prototype,"confirmPassword",void 0),Zi=t._([t.e("vault-creation-screen")],Zi)}));
SML.dm("vaultimportcontainer8f37d838",["shelle48e5956","closebuttone83fb375","iconc33661e6","builderpanellayout3f0c2ce9"],(async(l,t,e)=>{let a=class extends e.s{render(){return e.x`<builder-panel-layout with-close-btn close-btn-aria-label="Close the import to vault modal" @builder-panel-layout:close-btn-click="${t.c}"> <slot slot="primary-panel-content" name="primary-panel-content"></slot> <slot slot="secondary-panel-content" name="secondary-panel-content"></slot> </builder-panel-layout>`}};a.styles=[l.t],a=l._([l.e("vault-import-container")],a)}));
SML.dm("shopflowmanagerb42ef590",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d","claimselectionviewdatafetcherclientjsb1ef2c8c","cardnaming4107601d","scrollblockerc1378d81","shredditinteractableelemented3b7c75","rendersavedresponsetemplatebysubredditidb78cebab","listingpurchasestepclientjs2fa1555b","vaultcreationscreenclientjs50041fe3","vaultimportcontainer8f37d838"],(async(t,e,a,n,r,i)=>{var s;!function(t){t.Backgrounds="Backgrounds",t.Bottoms="Bottoms",t.Colors="Colors",t.Eyes="Eyes",t.Face="Face",t.Hair="Hair",t.Hats="Hats",t.LeftHand="Left Hand",t.Outfits="Outfits",t.RightHand="Right Hand",t.Tops="Tops"}(s||(s={})),s.Bottoms,s.Eyes,s.Face,s.Hair,s.Hats,s.LeftHand,s.RightHand,s.Tops;const l=[{getLabel:()=>"Outfits",name:s.Outfits},{getLabel:()=>"Tops",name:s.Tops},{getLabel:()=>"Bottoms",name:s.Bottoms},{getLabel:()=>"Hair",name:s.Hair},{getLabel:()=>"Face",name:s.Face},{getLabel:()=>"Eyes",name:s.Eyes},{getLabel:()=>"Hats",name:s.Hats},{getLabel:()=>"Right Hand",name:s.RightHand},{getLabel:()=>"Left Hand",name:s.LeftHand},{getLabel:()=>"Backgrounds",name:s.Backgrounds},{getLabel:()=>"Colors",name:s.Colors}];var o;!function(t){t.Pdp="pdp",t.DisplayCollectibles="display-collectibles",t.ListingPurchase="listing-purchase",t.VaultCreation="vault-creation",t.ClaimSelection="claim-selection",t.Claiming="claiming",t.ImportVault="import-vault"}(o||(o={}));const c=()=>e.x`<div class="flex align-middle justify-center items-center h-[var(--marketplace-modal-height)]"> ${n.r(e.x)} </div>`,d={[o.Pdp]:({entityId:a,pdpType:n})=>a&&n?e.x` <faceplate-partial src="/svc/shreddit/product-detail-card-view-data-fetcher/${n}/${a}" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `:e.A,[o.DisplayCollectibles]:({displayName:n,snoovatarIconUrl:r})=>e.x` <faceplate-partial src="/svc/shreddit/display-collectible-view-data-fetcher/${n}/${(t=>{const e=t.match(a.aW),n=e?.[1];if(!n)return null;const r=decodeURI(n);return window.atob(r)})(r||"")}" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `,[o.ListingPurchase]:({entityId:a})=>a?e.x` <faceplate-partial src="/svc/shreddit/listing-purchase-step/${a}" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `:e.A,[o.VaultCreation]:()=>e.x` <faceplate-partial src="/svc/shreddit/vault-creation-screen" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `,[o.ImportVault]:({entityId:a,pdpType:n})=>a&&n===r.P.Import?e.x` <faceplate-partial src="/svc/shreddit/vault-import-screen" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `:e.A,[o.ClaimSelection]:({claimChoiceId:a})=>a?e.x` <faceplate-partial src="/svc/shreddit/claim-selection-view-data-fetcher/${a}" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `:e.A,[o.Claiming]:({claimChoiceId:a,claimId:n})=>a&&n?e.x` <faceplate-partial src="/svc/shreddit/claim-selection-view-data-fetcher/${a}/${n}" loading="${t.I.Eager}"> ${c()} </faceplate-partial> `:e.A},p=t.W(e.s);t.e("marketplace-centered-modal")(function(a){class n extends p{constructor(){super(...arguments),this.isClosed=!1,this.noAnimation=!1,this.noScrollBlocking=!1,this.transparentOverlay=!1,this.scrollBlocker=new i.S(this)}static get styles(){return t.z(a)}connectedCallback(){super.connectedCallback(),this.enableObserver()}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver()}dismissOverlay(){this.dispatchEvent(t.c("dismiss-overlay")),this.noScrollBlocking||this.scrollBlocker.unblockPageScrolling()}observerIsIntersectingCallback(){this.noScrollBlocking||this.scrollBlocker.blockPageScrolling({targetNode:this.overlayNode})}observerIsNotIntersectingCallback(){this.noScrollBlocking||this.scrollBlocker.unblockPageScrolling()}render(){if(this.isClosed)return"";const a={overlay:!0,"transparent-overlay":this.transparentOverlay,"reduced-animation-duration":t.d3(),"no-animation":this.noAnimation};return e.x` <shreddit-interactable-element @interactionEvent="${this.dismissOverlay}"> <div class="${t.U(a)}"></div> </shreddit-interactable-element> <div class="${t.U({content:!0,"reduced-animation-duration":t.d3(),"no-animation":this.noAnimation})}"> <slot></slot> </div> `}}return t._([t.n({type:Boolean,attribute:"is-closed"})],n.prototype,"isClosed",void 0),t._([t.n({type:Boolean,attribute:"no-animation"})],n.prototype,"noAnimation",void 0),t._([t.n({type:Boolean,attribute:"no-scroll-blocking"})],n.prototype,"noScrollBlocking",void 0),t._([t.n({type:Boolean,attribute:"transparent-overlay"})],n.prototype,"transparentOverlay",void 0),t._([t.y(".overlay",!0)],n.prototype,"overlayNode",void 0),n}("@keyframes liftUp {\n  0% {\n    transform: translateY(130%);\n  }\n  100% {\n    transform: translateY(0%);\n  }\n}\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0.5;\n  }\n}\n:host {\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  left: 0;\n  position: fixed;\n  top: 0px;\n  width: 100wv;\n  z-index: 100;\n  --marketplace-modal-width: 800px;\n  --marketplace-modal-height: 600px;\n}\n@media (max-width: 850px) {\n  :host {\n    --marketplace-modal-width: 90vw;\n    --marketplace-modal-height: min(80vh, 600px);\n  }\n}\n.overlay {\n  animation: fadeIn 0.5s 0s both;\n  background-color: #1a1a1b;\n  bottom: 0;\n  height: 100vh;\n  left: 0;\n  position: absolute;\n  width: 100vw;\n}\n.content {\n  animation: liftUp 0.3s 0.3s both;\n  background-color: var(--color-tone-7);\n  position: fixed;\n  width: var(--marketplace-modal-width);\n  height: var(--marketplace-modal-height);\n  border-radius: 24px;\n  left: 0;\n  right: 0;\n  margin: auto;\n  top: calc((100% - var(--marketplace-modal-height)) / 2);\n  overflow: hidden;\n}\n.reduced-animation-duration {\n  animation-duration: 250ms;\n  animation-delay: 0s;\n}\n"));let m=class extends e.s{constructor(){super(...arguments),this.flowSteps=[],this.autoStart=!1,this.params={},this.start=(t=this.params)=>{if(this.currentStep=this.startStep||this.flowSteps[0],this.params=t,!this.canRenderCurrentStep)return this.next()},this.reset=()=>{this.currentStep=void 0,this.params={}},this.next=(t=this.params)=>{if(!this.currentStep)return;const e=this.flowSteps.indexOf(this.currentStep)+1;if(e<this.flowSteps.length){const a=this.flowSteps[e];if(this.currentStep=a,this.params=t,!this.canRenderCurrentStep)return this.next()}else this.reset()},this.previous=(t=this.params)=>{if(!this.currentStep)return;const e=this.flowSteps.indexOf(this.currentStep)-1;if(e>-1){const a=this.flowSteps[e];if(this.currentStep=a,this.params=t,!this.canRenderCurrentStep)return this.previous()}else this.reset()}}get currentStepHandler(){return this.currentStep&&d[this.currentStep]}get canRenderCurrentStep(){const t=this.renderCurrentStep();return t&&t!==e.A}connectedCallback(){super.connectedCallback(),this.autoStart&&this.start(this.defaultFlowParams)}disconnectedCallback(){super.disconnectedCallback(),this.reset()}renderCurrentStep(){return this.currentStepHandler?.(this.params)}render(){const t=this.renderCurrentStep();return t?e.x` <marketplace-centered-modal class="nd:hidden"> ${t} </marketplace-centered-modal> `:e.A}};return m.styles=[t.t],t._([t.n({type:Array,attribute:"flow-steps"})],m.prototype,"flowSteps",void 0),t._([t.n({type:Object,attribute:"default-flow-params"})],m.prototype,"defaultFlowParams",void 0),t._([t.n({type:String,attribute:"start-step"})],m.prototype,"startStep",void 0),t._([t.n({type:Boolean,attribute:"auto-start"})],m.prototype,"autoStart",void 0),t._([t.d()],m.prototype,"currentStep",void 0),t._([t.d()],m.prototype,"params",void 0),m=t._([t.e("shop-flow-manager")],m),{get E(){return s},e:l,s:"tab",t:"edit-avatar-section-tabs"}}));
SML.dm("marketplaceroutehandler603ec073",["shelle48e5956","shopflowmanagerb42ef590","cardnaming4107601d","routing1f7880ca","iconc33661e6","closebuttone83fb375"],(async(t,e,a,n,i,o)=>{let s=class extends i.s{constructor(){super(...arguments),this.isLoggedIn=!1,this.closePdp=t=>{t.detail.from===n.M.AvatarShop?o.c():t.detail.from===n.M.DisplayCollectibles&&o.a()},this.backPdp=t=>{t.detail.from===n.M.DisplayCollectibles&&o.a()},this.handleOutfitTileClick=(e,a)=>{e.preventDefault();const{clickTarget:i,outfitId:s}=a.dataset;if(s)switch(i){case n.a.OutfitImage:return o.b(s);case n.a.BuyCta:return this.isLoggedIn?o.o({start:!0,entityId:s}):this.dispatchEvent(t.c(t.aD.vaultLogin));default:return}},this.handleClick=t=>{const e=t.target?.closest("a");e instanceof HTMLAnchorElement&&e.dataset.component===n.b.OutfitTile&&this.handleOutfitTileClick(t,e);const a=t.target?.closest("button");if(a instanceof HTMLButtonElement){const{description:t,label:e}=a.dataset;t===n.b.DisplayCollection&&e&&o.d(e)}},this.handleEquipAvatar=t=>{const{outfitId:a}=t.detail,n=new URL(window.location.href);n.pathname="/avatar/edit",n.searchParams.set(e.s,e.E.Outfits),a&&n.searchParams.set("outfitId",a),window.history.pushState({},"",n)}}connectedCallback(){super.connectedCallback(),document.addEventListener("click",this.handleClick),document.addEventListener(a.p.closeButtonClick,this.closePdp),document.addEventListener(a.p.backButtonClick,this.backPdp),document.addEventListener(a.p.equipAvatar,this.handleEquipAvatar)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this.handleClick),document.removeEventListener(a.p.closeButtonClick,this.closePdp),document.removeEventListener(a.p.backButtonClick,this.backPdp),document.removeEventListener(a.p.equipAvatar,this.handleEquipAvatar)}render(){return i.A}};t._([t.n({type:Boolean,attribute:"is-logged-in"})],s.prototype,"isLoggedIn",void 0),s=t._([t.e("marketplace-route-handler")],s)}));

SML.dm("flexnavcf006431",[],(async()=>{var n;!function(n){n.Collapsed="0",n.Expanded="1"}(n||(n={}));const e={[n.Collapsed]:"flex-nav-collapsed",[n.Expanded]:"flex-nav-expanded"},a=Object.values(n);return{F:{LeftSidebarContainer:"left-sidebar-container",ContainerDiv:"flex-left-nav-container",ContentsDiv:"flex-left-nav-contents",ButtonsContainer:"flex-nav-buttons",ExpandButton:"flex-nav-expand-button",CollapseButton:"flex-nav-collapse-button",SubgridContainer:"subgrid-container"},a:"hui_flex_nav_expanded_state",get b(){return n},c:e,i:n=>!!n&&a.includes(n)}}));
SML.dm("flexleftnavcontainer8d5b755d",["shelle48e5956","agegatestandaloneclientjsb13e879d","flexnavcf006431","iconc33661e6"],(async(t,e,n,i)=>{let s=class extends t.Q{constructor(){super(...arguments),this.isHovered=!1,this.hoverDelayStart=150,this.hoverDelayEnd=150,this.preventNextAnimations=!1,this.containerElement=null,this.contentsElement=null,this.expandButton=null,this.collapseButton=null,this.gridTransitionPromise=null,this.gridTransitioning=!1,this.trigger="hover",this.interactionController=new e.aS(this,{hoverDelayStart:()=>this.hoverDelayStart,hoverDelayEnd:()=>this.hoverDelayEnd,isInteractedWith:t=>t.isHovered}),this.noAnimate=!1,this.parentGridSelector=".grid-container",this.hotkeysController=new t.dx(this),this.handleSlotChange=t=>{const e=document.getElementById(n.F.ContainerDiv),i=document.getElementById(n.F.ContentsDiv),s=document.getElementById(n.F.ExpandButton),a=document.getElementById(n.F.CollapseButton);i&&this.contentsElement!==i&&(this.contentsElement?.removeEventListener("mouseenter",this.interactionController.handleMouseEnter),i.addEventListener("mouseenter",this.interactionController.handleMouseEnter),this.contentsElement=i,this.isExpanded||(this.contentsVisibility=!1)),e&&this.containerElement!==e&&(this.containerElement=e),a&&a!==this.collapseButton&&(this.collapseButton?.removeEventListener("click",this.toggleState),this.collapseButton=a,a.addEventListener("click",this.toggleState)),s&&s!==this.expandButton&&(this.expandButton?.removeEventListener("click",this.toggleState),this.expandButton?.removeEventListener("keydown",this.handleExpandKeydown),this.expandButton=s,s.addEventListener("click",this.toggleState),s.addEventListener("mouseover",this.handleExpandButtonMouseOver),s.addEventListener("keydown",this.handleExpandKeydown))},this.handleExpandKeydown=async t=>{if("Tab"!==t.key)return;t.preventDefault();const e=document.querySelector("reddit-skip-to-sidebar")?.shadowRoot?.querySelector("a");if(e)return this.emitter.dispatch("focus-delegate",{detail:{el:e}}),e.focus();const n=document.getElementById("shreddit-skip-link");n instanceof HTMLElement&&(this.emitter.dispatch("focus-delegate",{detail:{el:n}}),n.focus())},this.handleExpandButtonMouseOver=t=>{this.isHovered?this.interactionController.handleMouseEnter(t):t.stopImmediatePropagation()},this.toggleStateViaHotkey=()=>{this.toggleState(void 0,{viaHotkey:!0})},this.toggleState=(e,i)=>{const s=document.querySelector(this.parentGridSelector);var a,l;void 0!==this.country&&void 0!==this.expanded&&s&&(this.emitTrackingEvent(this.isExpanded?"collapse":"expand",i),this.expanded=this.isExpanded?n.b.Collapsed:n.b.Expanded,s instanceof HTMLElement&&(this.gridTransitioning=!0,this.gridTransitionPromise=this.preventNextAnimations?r():o(s).then((()=>{this.gridTransitioning=!1})),s.classList.remove(...Object.values(n.c)),s.classList.add(n.c[this.expanded])),a=this.expanded,l=this.country,t.$({name:n.a,value:a,country:l}))}}get isExpanded(){return this.expanded===n.b.Expanded}set contentsVisibility(t){this.contentsElement&&(this.contentsElement.hidden=!t)}emitTrackingEvent(e,n){let i;n?.viaHotkey&&(i={action_info:{trigger_type:t.d_.HOTKEY}});const[s,a,o]={expand:["nav","click","open_community_nav"],collapse:["nav","click","close_community_nav"],hover:["nav","hover","open_community_nav"],unhover:["nav","hover","close_community_nav"]}[e];return t.a(this,{source:s,action:a,noun:o,...i})}async stopAnimations(){const e=[];this.containerElement&&e.push(t.cE(this.containerElement)),this.contentsElement&&e.push(t.cE(this.contentsElement)),await Promise.all(e)}async runAnimations(e,n){if(this.preventNextAnimations)return;const i=[],s=t.cF(this,`flex-left-nav-container.${e}-${n}`),a=t.cF(this,`flex-left-nav-contents.${e}-${n}`);this.containerElement&&i.push(t.cG(this.containerElement,s.keyframes,s.options)),this.contentsElement&&i.push(t.cG(this.contentsElement,a.keyframes,a.options)),await Promise.all(i)}async connectedCallback(){super.connectedCallback(),await this.syncFlexNavStateNoAnimate(),this.isExpanded||this.updateComplete.then((()=>this.contentsVisibility=!1)),this.addEventListener("mouseleave",this.interactionController.handleMouseLeave),"enabled"===t.dw("shreddit_hotkeys_m1")&&this.hotkeysController.subscribe(t.dy.OPEN_NAVIGATION,this.toggleStateViaHotkey)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseleave",this.interactionController.handleMouseLeave),"enabled"===t.dw("shreddit_hotkeys_m1")&&this.hotkeysController.unsubscribe(t.dy.OPEN_NAVIGATION,this.toggleStateViaHotkey)}willUpdate(t){t.has("expanded")&&this.hasUpdated&&this.handleExpandedStateChanged(),super.willUpdate(t)}updated(){}focusContents(){this.isExpanded?this.collapseButton?.focus():this.expandButton?.focus()}async syncFlexNavStateNoAnimate(){const e=(()=>{const e=t.v.get(n.a);return n.i(e)?e:null})();null!==e&&this.expanded!==e&&(this.preventAnimationsForUpdate(),this.toggleState(),await this.updateComplete)}async preventAnimationsForUpdate(){this.preventNextAnimations=!0;const t=document.querySelector(this.parentGridSelector);t instanceof HTMLElement&&(t.style.transition="none"),this.setAttribute("skip-animation",""),await Promise.all([this.updateComplete,r()]),this.removeAttribute("skip-animation"),t instanceof HTMLElement&&(t.style.transition=""),this.preventNextAnimations=!1}async handleExpandedStateChanged(){this.emitter.dispatch(this.isExpanded?"expand":"collapse");const t=this.updateComplete,e=(this.isExpanded?this.collapseButton:this.expandButton)?.parentElement,n=(this.isExpanded?this.expandButton:this.collapseButton)?.parentElement;if(a(e)&&(e.disabled=!0),a(n)&&n.hide?.(),t.then((async()=>{this.focusContents()})),await this.stopAnimations(),this.isExpanded&&(this.contentsVisibility=!0),!this.isHovered&&this.containerElement){const t=this.isExpanded?"show":"hide";await this.runAnimations("expand",t)}else this.gridTransitioning&&this.gridTransitionPromise?.then((()=>{this.emitter.dispatch("after-grid-transition"),this.isHovered=!1,this.classList.remove("hovered")}));this.isExpanded||(this.contentsVisibility=!1),a(e)&&(e.disabled=!1),this.emitter.dispatch(this.isExpanded?"after-expand":"after-collapse")}async startInteraction(){this.isExpanded||this.isHovered||this.gridTransitioning||(this.emitTrackingEvent("hover"),this.emitter.dispatch("hover"),await this.stopAnimations(),this.classList.add("hover-started"),this.contentsVisibility=!0,this.isHovered=!0,await this.runAnimations("hover","show"),this.classList.remove("hover-started"),this.classList.add("hovered"),this.emitter.dispatch("after-hover"))}async finishInteraction(){!this.isExpanded&&this.isHovered&&(this.emitTrackingEvent("unhover"),this.emitter.dispatch("unhover"),await this.stopAnimations(),await this.runAnimations("hover","hide"),this.classList.remove("hovered"),this.isHovered=!1,this.contentsVisibility=!1,this.emitter.dispatch("after-unhover"))}render(){return i.x` <slot @slotchange="${this.handleSlotChange}"></slot> ${this.isExpanded?i.A:i.x`<div class="hoverable-target ${this.isHovered?"hovered":""}" @mouseenter="${this.interactionController.handleMouseEnter}"></div>`} `}};s.styles=i.a`:host(.hover-started),:host(.hovered){z-index:10!important;border-top:1px solid var(--color-neutral-border)!important}.hoverable-target{position:fixed;top:calc(var(--shreddit-header-height) + 72px);width:calc(var(--flex-nav-closed-size) + 16px);bottom:0;z-index:calc(var(--flex-nav-z-index) + 1)}.hoverable-target.hovered{z-index:calc(var(--flex-nav-z-index) - 1);top:var(--shreddit-header-height);width:calc(var(--flex-nav-expanded-size) + 16px)}`,t._([t.d()],s.prototype,"isHovered",void 0),t._([t.n({type:String,reflect:!0})],s.prototype,"expanded",void 0),t._([t.n({type:String})],s.prototype,"country",void 0),t._([t.n({type:Boolean})],s.prototype,"noAnimate",void 0),t._([t.n({type:String})],s.prototype,"parentGridSelector",void 0),s=t._([t.e("flex-left-nav-container")],s);const a=t=>"rpl-tooltip"===t?.tagName.toLowerCase(),o=(t,e=1200)=>{const n=t=>new Promise((n=>{t.addEventListener("transitionend",n),setTimeout(n,e)}));return Array.isArray(t)?Promise.all(t.map(n)):n(t)},r=()=>new Promise((t=>requestAnimationFrame(t)));return t.cC("flex-left-nav-container.expand-show",{keyframes:[{transform:"translateX(var(--closed-floating-translation))"},{transform:"translateX(var(--open-floating-translation))"}],options:{duration:250,easing:"cubic-bezier(0.65, 0, 0.35, 1)"}}),t.cC("flex-left-nav-container.expand-hide",{keyframes:[{transform:"translateX(var(--open-floating-translation))"},{transform:"translateX(var(--closed-floating-translation))"}],options:{duration:300,easing:"cubic-bezier(0.87, 0, 0.13, 1)"}}),t.cC("flex-left-nav-container.hover-show",{keyframes:[{boxShadow:"var(--left-nav-box-shadow-none)",transform:"translateX(var(--closed-floating-translation))"},{boxShadow:"var(--left-nav-box-shadow-hover)",transform:"translateX(var(--open-floating-translation))"}],options:{duration:250,easing:"cubic-bezier(0.65, 0, 0.35, 1)"}}),t.cC("flex-left-nav-container.hover-hide",{keyframes:[{boxShadow:"var(--left-nav-box-shadow-hover)",transform:"translateX(var(--open-floating-translation))"},{boxShadow:"var(--left-nav-box-shadow-none)",transform:"translateX(var(--closed-floating-translation))"}],options:{duration:300,easing:"cubic-bezier(0.87, 0, 0.13, 1)"}}),t.cC("flex-left-nav-contents.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250,easing:"linear"}}),t.cC("flex-left-nav-contents.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:300,easing:"linear"}}),{get F(){return s}}}));