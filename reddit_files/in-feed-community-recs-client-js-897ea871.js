SML.di("./show-more-grid-f097d878.js",import.meta.url,"showmoregridf097d878");SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");
SML.dm("infeedcommunityrecsclientjs897ea871",["shelle48e5956","agegatestandaloneclientjsb13e879d","iconc33661e6","showmoregridf097d878"],(async(e,s,t)=>{let i=class extends t.s{constructor(){super(),this._handleCommunityJoin=this.handleCommunityJoin.bind(this),this._subscribed=!1,this.handleView=()=>{e.a(this,s.x())},this.handleConsume=()=>{e.a(this,s.y())},new s.V(this,{consumeThreshold:2e3,onView:this.handleView,onConsume:this.handleConsume})}get joinButton(){return this.querySelector("shreddit-join-button")}connectedCallback(){super.connectedCallback(),this.joinButton?.addEventListener("click",this._handleCommunityJoin)}disconnectedCallback(){super.disconnectedCallback(),this.joinButton?.removeEventListener("click",this._handleCommunityJoin)}handleCommunityJoin(){e.a(this,s.A(this._subscribed)),this._subscribed=!this._subscribed}render(){return t.x`<slot></slot>`}};i.styles=[e.t],i=e._([e.e("community-recommendation")],i);const n=e.W(t.s);let o=class extends n{constructor(){super(...arguments),this.isHidden=!1,this._onDismiss=async t=>{t.stopPropagation();try{if(!await e.a6(e.a8.Dismiss,e.a7.PersonalizedCommunityRecommendationsInHomeFeed))return void this.dispatchError();this.isHidden=!0,this.onSuccessfulDismissAlert()}catch(e){this.dispatchError()}e.a(this,s.B())}}static get styles(){return[e.t,t.a`:host{display:contents}`]}connectedCallback(){super.connectedCallback(),this.enableObserver({rootMargin:"0px",threshold:[1]});const e=this.querySelector(".hide-feed-item-icon");e?.addEventListener("click",this._onDismiss)}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver();const e=this.querySelector(".hide-feed-item-icon");e?.removeEventListener("click",this._onDismiss)}observerIsIntersectingCallback(){e.a(this,s.C()),this.disableObserver()}dispatchError(){const s=e.c("faceplate-alert",{level:e.x.error,cause:"uncategorized",message:"Something went wrong. Try again later."});this.dispatchEvent(s)}onSuccessfulDismissAlert(){const s=e.c("faceplate-alert",{level:e.x.notice,message:"Youâ€™ll see fewer recommendations like this"});this.dispatchEvent(s)}render(){return t.x` ${this.isHidden?t.x`<slot name="hidden-recommendation-unit"></slot>`:t.x` <div class="flex justify-between"> <slot name="title"></slot> <slot name="menu"></slot> </div> <slot name="recommendations"></slot> `} `}};e._([e.d()],o.prototype,"isHidden",void 0),o=e._([e.e("in-feed-community-recommendations")],o)}));