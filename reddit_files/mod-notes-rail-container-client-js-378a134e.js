SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./mod-notes-f373dea5.js",import.meta.url,"modnotesf373dea5");
SML.dm("modnotesrailcontainerclientjs378a134e",["shelle48e5956","iconc33661e6","agegatestandaloneclientjsb13e879d","modnotesf373dea5"],(async(e,t,s,o)=>{const i=e.C(t.s);let l=class extends i{constructor(){super(...arguments),this.isModNotesRailClientSourceLoaded=!1,this.isPDP=!1,this.isModRecruitingPage=!1,this.openModNoteRail=async e=>{const t=document.getElementById(o.M);try{const s=this.querySelector(`faceplate-partial[name="${o.a}"]`),i=this.querySelector(`shreddit-async-loader[name="${o.a}"]`);if(!s||!i)return;this.classList.remove("hidden"),s.classList.add("hidden"),t?.classList.remove("hidden");let l=o.b;for(const t in e){const s=e[t];l=l.replace(`/:${t}`,s?`/${s}`:"")}s.src=l;const a=document.querySelector(".right-sidebar");this.isModRecruitingPage&&a&&a.classList.add("s:block"),this.isModNotesRailClientSourceLoaded?await s.load():(await Promise.allSettled([i.load(),s.load()]),this.isModNotesRailClientSourceLoaded=!0),t?.classList.add("hidden"),s.classList.remove("hidden")}catch(e){}this.onScrollHandlerThrottled()},this.onScrollHandler=()=>{const e=this.getBoundingClientRect();this.style.height=`calc(100vh - ${e.top}px - ${this.isPDP?"16px":"0"}16px - 1px)`},this.onScrollHandlerThrottled=s.M(this.onScrollHandler,200,!0),this.handleCloseClick=()=>{this.classList.add("hidden"),this.publish(e.T.ModNotesRailClose);const t=document.querySelector(".right-sidebar");this.isModRecruitingPage&&t&&t.classList.remove("s:block")}}connectedCallback(){super.connectedCallback(),this.subscribe(e.T.ModNotesRailOpen,this.openModNoteRail,!1),this.subscribe(e.T.ModNotesRailForceClose,this.handleCloseClick,!1),document.addEventListener("scroll",this.onScrollHandlerThrottled)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(e.T.ModNotesRailOpen,this.openModNoteRail),this.unsubscribe(e.T.ModNotesRailForceClose,this.handleCloseClick),document.removeEventListener("scroll",this.onScrollHandlerThrottled)}handleCloseKeyboardEnter(e){"Enter"===e.key&&this.handleCloseClick()}render(){return t.x` <slot></slot> <div class="absolute top-md right-md z-10" @click="${this.handleCloseClick}" @keyup="${this.handleCloseKeyboardEnter}"> ${e.r({leadingIcon:t.C({size:t.I.Small}),size:e.s.Small,attributes:{className:"opacity-80 button-media"}})} </div> `}};l.styles=[e.t,t.a`:host{display:block}`],e._([e.d()],l.prototype,"isModNotesRailClientSourceLoaded",void 0),e._([e.n({type:Boolean,attribute:"is-pdp"})],l.prototype,"isPDP",void 0),e._([e.n({type:Boolean,attribute:"mod-recruiting-page"})],l.prototype,"isModRecruitingPage",void 0),l=e._([e.e("mod-notes-rail-closer")],l)}));