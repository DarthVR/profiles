SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./report-flow-client-js-a1f4122e.js",import.meta.url,"reportflowclientjsa1f4122e");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./community-onboarding-completed-modal-client-js-f4f5192c.js",import.meta.url,"communityonboardingcompletedmodalclientjsf4f5192c");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./submit-report-helper-29e0cff8.js",import.meta.url,"submitreporthelper29e0cff8");SML.di("./types-bd501f81.js",import.meta.url,"typesbd501f81");SML.di("./chat-mobile-xpromo-client-js-5e1c145c.js",import.meta.url,"chatmobilexpromoclientjs5e1c145c");SML.di("./app-selector-client-js-9964d0b0.js",import.meta.url,"appselectorclientjs9964d0b0");SML.di("./helpers-4792ac4d.js",import.meta.url,"helpers4792ac4d");SML.di("./constants-9e09f052.js",import.meta.url,"constants9e09f052");SML.di("./community-picker-f331f77f.js",import.meta.url,"communitypickerf331f77f");SML.di("./a-e18b1320.js",import.meta.url,"ae18b1320");SML.di("./faceplate-radio-input-3de18d3b.js",import.meta.url,"faceplateradioinput3de18d3b");SML.di("./utils-57a7018c.js",import.meta.url,"utils57a7018c");SML.di("./text-input-9c3f45be.js",import.meta.url,"textinput9c3f45be");SML.di("./shreddit-slotter-a644cf2e.js",import.meta.url,"shredditslottera644cf2e");SML.di("./zendesk-step-helper-dc8aba38.js",import.meta.url,"zendeskstephelperdc8aba38");SML.di("./render-saved-response-template-by-subreddit-id-b78cebab.js",import.meta.url,"rendersavedresponsetemplatebysubredditidb78cebab");SML.di("./faceplate-textarea-input-29f541e5.js",import.meta.url,"faceplatetextareainput29f541e5");SML.di("./index-970155ae.js",import.meta.url,"index970155ae");SML.di("./index-eb1de04e.js",import.meta.url,"indexeb1de04e");SML.di("./hui-user-drawer-client-js-91e856a7.js",import.meta.url,"huiuserdrawerclientjs91e856a7");SML.di("./TinyGesture-26737d23.js",import.meta.url,"TinyGesture26737d23");
SML.dm("reportflowproviderclientjs6a34ef06",["shelle48e5956","agegatestandaloneclientjsb13e879d","iconc33661e6","submitreporthelper29e0cff8","typesbd501f81","reportflowclientjsa1f4122e","communityonboardingcompletedmodalclientjsf4f5192c","chatmobilexpromoclientjs5e1c145c","appselectorclientjs9964d0b0","helpers4792ac4d","constants9e09f052","communitypickerf331f77f","ae18b1320","faceplateradioinput3de18d3b","utils57a7018c","textinput9c3f45be","shredditslottera644cf2e","zendeskstephelperdc8aba38","rendersavedresponsetemplatebysubredditidb78cebab","faceplatetextareainput29f541e5","index970155ae","indexeb1de04e","huiuserdrawerclientjs91e856a7","TinyGesture26737d23"],(async(t,e,r,o,s)=>{let i=class extends r.s{get rplDialogSheet(){return this.querySelector("rpl-dialog-sheet")}get featureRoot(){return document.querySelector("#report-flow-content-modal rpl-modal-card")}constructor(){super(),this.pubsub=new t.P(this),this.isModmailEnabled=!1,this._activateFeature=async e=>t.k(e),this.initReportFlow=async({thingId:r,authorName:o,authorId:s,flowType:i,conversationId:a,triggerElement:l,permalink:n,onCloseCallback:p})=>{this.triggerElement=l,this.onCloseCallback=p;const c=r.startsWith("ad_"),d=i===t.R.UserDetails,u=i===t.R.Modmail&&!this.isModmailEnabled;c||d||u?await this._activateFeature({name:t.cn,routeParams:{thing_id:r,author_name:o||e.ao(),is_desktop:this.isDesktop?"is-desktop":"is-not-desktop",author_id:s,flow_type:i??t.R.InlineContent},queryParams:{permalink:n??""},renderMode:t.o.Contents}):(await(this.rplDialogSheet?.showModal()),await this._activateFeature({name:t.cm,renderMode:t.o.Contents,root:this.featureRoot,queryParams:{is_desktop:!!this.isDesktop,thing_id:r,flow_type:i??t.R.InlineContent,permalink:n??"",...a?{conversation_id:a}:{}}}))},this.closeFlexibleReportFlow=async()=>{await(this.rplDialogSheet?.hide()),this.triggerElement&&this.triggerElement.focus()},this.closeReportFlow=async()=>{await(this.reportFlow?.updateComplete),this.triggerElement&&this.triggerElement.focus()},this.hideReportedAd=async()=>{await(this.reportFlow?.updateComplete),this.onCloseCallback?.()},this.addEventListener("report-flow-close",this.closeReportFlow),this.addEventListener("submit-report-modal",this.hideReportedAd)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.ReportFlowInit,this.initReportFlow,!1),this.pubsub.subscribe(t.T.ReportFlowClose,this.closeFlexibleReportFlow,!1)}disconnectedCallback(){this.pubsub.unsubscribe(t.T.ReportFlowInit,this.initReportFlow),this.pubsub.unsubscribe(t.T.ReportFlowClose,this.closeFlexibleReportFlow),super.disconnectedCallback()}render(){return r.x`<slot></slot>`}};t._([t.n({type:Boolean,attribute:"is-desktop"})],i.prototype,"isDesktop",void 0),t._([t.n({type:Boolean,attribute:"modmail-enabled"})],i.prototype,"isModmailEnabled",void 0),t._([t.y("report-flow")],i.prototype,"reportFlow",void 0),i=t._([t.e("report-flow-provider")],i);let a=class extends r.s{constructor(){super(...arguments),this.pubsub=new t.P(this),this._activateFeature=async e=>t.k(e),this.openCTL=async({authorName:e,thingId:r,userDetailType:o})=>{const s=o?{userDetailType:o}:void 0;await this._activateFeature({name:t.co,renderMode:t.o.Contents,routeParams:{authorName:e,thingId:r},queryParams:{...s}})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CTLReportInit,this.openCTL,!1)}disconnectedCallback(){this.pubsub.unsubscribe(t.T.CTLReportInit,this.openCTL),super.disconnectedCallback()}render(){return r.x`<slot></slot>`}};a=t._([t.e("ctl-reporting-provider")],a);let l=class extends r.s{constructor(){super(...arguments),this.closeCTLModal=()=>{this.ctlModal?.hide(),this.dispatchEvent(t.c("report-flow-close"))}}get ctlModal(){return document.querySelector("rpl-dialog#ctl-report-content-modal")}get ctlModalContents(){return document.querySelector("#ctl-report-content-modal rpl-modal-card")}};l=t._([t.e("base-ctl-component")],l);let n=class extends l{constructor(){super(...arguments),this.requestClientGQL=t.B,this.showThankYou=()=>{const e=t.c("shreddit-slotter-set-slot-name",{slotName:"thankyou"});this.ctlModalContents?.querySelector("shreddit-slotter")?.dispatchEvent(e)},this.reportRequest=async(t,e)=>{const r=o.g[t];if(!r)throw new Error("No corresponding gql operation for the item type provided");try{const t=await this.requestClientGQL({operation:r,variables:{input:e}});return o.c(t)?t:void 0}catch(t){throw new Error("Error calling the gql report operation")}},this.submitCTLReport=async()=>{if(!this.thingId)return;const e=o.a(this.thingId);try{const r=o.b({itemType:e,formValues:{REPORT_REASONS:"SELF_HARM",...this.userDetailType?{USER_DETAILS:this.userDetailType}:{}},thingId:this.thingId});if(!await this.reportRequest(e,r))throw new Error;this.showThankYou(),this.dispatchEvent(t.c("report-tracking",{reportFlow:{flowOptionSelected:s.F.REDDITCARES_BUTTON}}))}catch(e){this.dispatchEvent(t.c("faceplate-alert",{level:t.x.error,cause:"uncategorized",message:"An error occurred while submitting your report. Wait a bit, and try again."}))}},this.firstUpdated=()=>{const t=this.querySelector("#ctl-yes-button");t?.addEventListener("click",this.submitCTLReport)}}render(){return r.x`<slot></slot>`}};t._([t.n({type:String,attribute:"author-name"})],n.prototype,"authorName",void 0),t._([t.n({type:String,attribute:"thing-id"})],n.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"user-detail-type"})],n.prototype,"userDetailType",void 0),n=t._([t.e("ctl-step-one")],n);let p=class extends l{constructor(){super(...arguments),this.firstUpdated=()=>{this.okButton?.addEventListener("click",this.closeCTLModal)}}get okButton(){return this.querySelector("#ctl-ok-button")}render(){return r.x`<slot></slot>`}};p=t._([t.e("ctl-step-two")],p)}));