SML.di("./faceplate-expandable-section-helper-4260ec3a.js",import.meta.url,"faceplateexpandablesectionhelper4260ec3a");SML.di("./faceplate-shimmer-9894306d.js",import.meta.url,"faceplateshimmer9894306d");SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./expandable-section-header-41e0cfd1.js",import.meta.url,"expandablesectionheader41e0cfd1");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./custom-feed-edit-button-368bbd45.js",import.meta.url,"customfeededitbutton368bbd45");
SML.dm("leftnavmultiredditssectionclientjsd5cdb179",["shelle48e5956","iconc33661e6","expandablesectionheader41e0cfd1","agegatestandaloneclientjsb13e879d","faceplateexpandablesectionhelper4260ec3a","faceplateshimmer9894306d","customfeededitbutton368bbd45"],(async(t,e,i,a)=>{const s="community_nav";let r=class extends(t.C(e.s)){constructor(){super(...arguments),this.multiredditPath="",this.displayName="",this.iconSrc="",this.isFavorited=!1,this.sanNoun="",this.getTrackingContext=()=>({customFeed:{id:this.multiredditPath}}),this.onFavoriteClick=async()=>{t.a(this,t.b({source:s,action:"click",noun:this.isFavorited?"unfavorite":"favorite"},this.getTrackingContext()));try{const e={input:{label:this.multiredditPath,favoriteState:this.isFavorited?t.bk.None:t.bk.Favorited}},{data:i}=await t.B({operation:t.O.UpdateMultiredditFavoriteState,variables:e});if(i.updateMultiredditFavoriteState?.ok){const e={path:this.multiredditPath,isFavorited:!this.isFavorited};return void this.publish(t.T.MultiredditFavoriteStatusChange,e)}throw new Error("error updating custom feed favorite status")}catch(e){const i=this.isFavorited?`Failed to remove ${this.displayName} from favorites`:`Failed to add ${this.displayName} to favorites`;this.dispatchEvent(t.c("faceplate-alert",{level:t.x.error,cause:"uncategorized",message:i}))}}}static get styles(){return[t.t]}updated(t){}render(){const a=e.x`<span class="mr-[2px]">${this.iconSrc?e.x`<img class="rounded-full" loading="lazy" src="${this.iconSrc}" width="32" height="32" aria-hidden="true" alt="custom feed icon">`:e.F({size:e.I.Large})}</span>`;return e.x`<faceplate-tracker source="${s}" action="click" noun="custom_feed" data-faceplate-tracking-context="${JSON.stringify(this.getTrackingContext())}">${i.l({href:this.multiredditPath,innerClassName_DO_NOT_USE:"s:rounded-2 bg-transparent",label:e.x`<div class="truncate">${this.displayName}</div>`,leadingAvatar:a,size:i.L.Small,trailingSlot:e.x` ${t.r({appearance:"plain",leadingIcon:(this.isFavorited?e._:e.a0)({size:e.I.Small}),size:t.s.Small,attributes:{"aria-label":this.isFavorited?"Remove custom feed from favorites":"Add custom feed to favorites",onclick:t=>{t.preventDefault(),t.stopPropagation(),this.onFavoriteClick()}}})}`})}</faceplate-tracker>`}};t._([t.n({type:String})],r.prototype,"multiredditPath",void 0),t._([t.n({type:String})],r.prototype,"displayName",void 0),t._([t.n({type:String})],r.prototype,"iconSrc",void 0),t._([t.n({type:Boolean})],r.prototype,"isFavorited",void 0),t._([t.n({type:String})],r.prototype,"sanNoun",void 0),r=t._([t.e("left-nav-multireddit-item")],r);class o extends(t.C(e.s)){constructor(){super(),this.initialStateJSON="[]",this.items=[],this.triggerReload=()=>{this.dispatchEvent(new CustomEvent(a.a7))},this.updateFavoritedState=({path:t,isFavorited:e})=>{const i=[...this.items],a=i.findIndex((e=>e.path===t));-1!==a&&i[a].isFavorited!==e&&(i[a].isFavorited=e,this.items=d(i))},this.reloadController=new a.a8(this,{reloadUrl:"/svc/shreddit/left-nav-multireddits-section",containerSelector:"left-nav-multireddits-controller",mode:t.o.Replace})}connectedCallback(){super.connectedCallback(),this.items=d(JSON.parse(this.initialStateJSON)),this.subscribe(t.T.MultiredditFavoriteStatusChange,this.updateFavoritedState),this.subscribe(t.T.CustomFeedUpdated,this.triggerReload,!1),this.subscribe(t.T.CustomFeedCreated,this.triggerReload,!1),this.subscribe(t.T.CustomFeedDeleted,this.triggerReload,!1)}render(){return e.x`<div> ${this.reloadController?.isLoading?e.x`<shreddit-loading></shreddit-loading>`:e.x`${e.R(this.items,(t=>e.x`<left-nav-multireddit-item sanNoun="${this.sanNoun}" multiredditPath="${t.path}" displayName="${t.displayName}" iconSrc="${t.icon}" ?isFavorited="${t.isFavorited}"></left-nav-multireddit-item>`))}`} </div>`}}function d(t){return[...t.sort(((t,e)=>t.isFavorited===e.isFavorited?t.displayName.toLowerCase()>e.displayName.toLowerCase()?1:-1:t.isFavorited?-1:1))]}t._([t.n({type:String})],o.prototype,"initialStateJSON",void 0),t._([t.d()],o.prototype,"items",void 0);let n=class extends o{constructor(){super(...arguments),this.sanNoun="multireddits_menu"}};n=t._([t.e("left-nav-multireddits-controller")],n)}));