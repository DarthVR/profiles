SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./faceplate-tabgroup-a59ee035.js",import.meta.url,"faceplatetabgroupa59ee035");SML.di("./types-bd501f81.js",import.meta.url,"typesbd501f81");SML.di("./helpers-4792ac4d.js",import.meta.url,"helpers4792ac4d");SML.di("./links-22118b0c.js",import.meta.url,"links22118b0c");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./settings-controller-1c1482ce.js",import.meta.url,"settingscontroller1c1482ce");SML.di("./faceplate-tabpanel-b6d69013.js",import.meta.url,"faceplatetabpanelb6d69013");SML.di("./faceplate-tablist-b81db8b2.js",import.meta.url,"faceplatetablistb81db8b2");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./constants-9e09f052.js",import.meta.url,"constants9e09f052");SML.di("./community-picker-f331f77f.js",import.meta.url,"communitypickerf331f77f");
SML.dm("multicontentreportingclientjs6601f81d",["shelle48e5956","faceplatetabgroupa59ee035","typesbd501f81","helpers4792ac4d","links22118b0c","iconc33661e6","settingscontroller1c1482ce","faceplatetabpanelb6d69013","faceplatetablistb81db8b2","agegatestandaloneclientjsb13e879d","constants9e09f052","communitypickerf331f77f"],(async(t,e,s,i,a,n)=>{const l="additionalContent";var o;!function(t){t.ADDITION="addition",t.REMOVAL="removal"}(o||(o={}));let r=class extends n.s{get uncheckedInputs(){return this.querySelectorAll("faceplate-checkbox-input:not([checked])")}get allInputs(){return this.querySelectorAll("faceplate-checkbox-input")}get tabpanel(){return this.querySelector("faceplate-tabpanel")}get badges(){return this.querySelectorAll("temporary-tabgroup span[rpl] span")}get additionalContentInput(){return document.querySelector("#additional-content")}connectedCallback(){super.connectedCallback(),this.initEventListeners();const t=this.getRootNode().host?.closest("report-form");t&&(this.helpers=new i.R(t)),this.badges&&this.badges.forEach((t=>{const e=t.closest("span.gap-xs");e?.classList.remove("gap-xs"),t.classList.add("hidden")})),this.populateValues()}disconnectedCallback(){super.disconnectedCallback()}firstUpdated(){this.updateComplete.then((()=>{(this.isFlexibleReporting||this.isSmartEscalations)&&this.updateFormState()}))}constructor(){super(),this.selectLimit=2,this.isFlexibleReporting=!1,this.isSmartEscalations=!1,this.initEventListeners=()=>{const t=this.allInputs;t?.forEach((t=>{t.addEventListener("input",this.handleClick)}));const e=this.querySelectorAll("temporary-tabgroup button");e?.forEach((t=>{t.addEventListener("click",this.resetPanelScroll)}));const s=this.querySelectorAll(".empty-state-button");s?.forEach((t=>{t.addEventListener("click",this.toggleEmptyState)}))},this.resetPanelScroll=async()=>{await this.updateComplete,this.tabpanel?.scrollTo(0,0)},this.normalizeValueArray=t=>{const e=Array.from(this.allInputs,(t=>t.getAttribute("data-value"))),s=t?.split(",");return s?.filter((t=>e.includes(t)))},this.populateValues=()=>{const t=this.isFlexibleReporting||this.isSmartEscalations?this.additionalContentInput?.getAttribute("value"):this.helpers?.getHiddenInputValue(l);if(!t)return;const e=this.isSmartEscalations?this.normalizeValueArray(t).slice(0,this.selectLimit):t?.split(",");this.isSmartEscalations&&this.additionalContentInput?.setAttribute("value",e.slice(0,this.selectLimit).toString()),this.populateCheckboxSelections(e),this.populateBadgeCounts(e)},this.populateCheckboxSelections=t=>{const e=t.length===this.selectLimit;this.allInputs.forEach((s=>{const i=s.getAttribute("data-value")??"";t?.includes(i)?s.checked=!0:e&&(s.disabled=!0)}))},this.populateBadgeCounts=t=>{const e=t.reduce(((t,e)=>a.l(e)?{...t,posts:t.posts+1}:e.startsWith("t1_")?{...t,comments:t.comments+1}:t),{posts:0,comments:0}),s=this.badges[0],i=this.badges[1];e.posts>0&&(s.parentElement?.parentElement?.parentElement?.classList.add("gap-xs"),s.classList.remove("hidden"),s.textContent=e.posts.toString()),e.comments>0&&(i.parentElement?.parentElement?.parentElement?.classList.add("gap-xs"),i.classList.remove("hidden"),i.textContent=e.comments.toString())},this.toggleEmptyState=t=>{const e=this.tabpanel,s=t.currentTarget,i=s.getAttribute("slot")?.split("-")[1];e?.setAttribute("pageindex",`${i}`)},this.disableAllUnchecked=()=>{this.uncheckedInputs.forEach((t=>{t.disabled=!0}))},this.enableAllUnchecked=()=>{this.uncheckedInputs.forEach((t=>{t.removeAttribute("disabled")}))},this.modifyList=(t,e)=>{if(!t)return{modificationType:o.ADDITION,newList:[e]};const s=t.split(",");return s.includes(e)?{modificationType:o.REMOVAL,newList:s.filter((t=>t!==e))}:{modificationType:o.ADDITION,newList:[...s,e]}},this.updateBadgeCounts=t=>{const e=this.querySelector("temporary-tabgroup [faceplate-tab-selected]"),s=e?.querySelector("span[rpl] span");if(!s)return;const i=Number(s.textContent),a=s.parentElement?.parentElement?.parentElement;t===o.ADDITION&&(a?.classList.add("gap-xs"),s.classList.remove("hidden"),s.textContent=`${i+1}`),t===o.REMOVAL&&(i-1==0&&(a?.classList.remove("gap-xs"),s.classList.add("hidden")),s.textContent=""+(i-1))},this.handleClick=async t=>{t.preventDefault(),t.stopPropagation();const e=t.currentTarget,s=e?.getAttribute("data-value")??"",i=this.isFlexibleReporting||this.isSmartEscalations,a=i?this.additionalContentInput?.getAttribute("value")??"":this.helpers?.getHiddenInputValue(l)??"";if(!s)return;const{modificationType:n,newList:o}=this.modifyList(a,s);this.updateBadgeCounts(n),i?this.additionalContentInput?.setAttribute("value",o.toString()):this.helpers?.setHiddenInputValue(l,o.toString()),await this.updateComplete,i&&this.updateFormState(),o.length===this.selectLimit?this.disableAllUnchecked():a.split(",").length===this.selectLimit&&this.enableAllUnchecked()},this.updateFormState=()=>{if(this.isSmartEscalations)this.dispatchEvent(t.c("update-smart-escalations-form-state",{stepName:s.S.ADDITIONAL_CONTENT,value:this.additionalContentInput?.getAttribute("value")??"",nextStep:s.S.FREE_TEXT}));else{const e=Array.from(this.uncheckedInputs,(t=>t.getAttribute("data-value")));this.dispatchEvent(t.c("report-tracking",{reportFlow:{flowOptionSelected:s.F.ADD_CONTENT,flowContent:this.additionalContentInput?.getAttribute("value")??"",flowOptionAvailable:e.toString()}})),this.dispatchEvent(t.c("update-report-form",{fieldName:s.S.ADDITIONAL_CONTENT,value:this.additionalContentInput?.getAttribute("value")??"",nextAction:{type:this.nextActionType,step:this.nextStep},button:{isDisabled:!1}}))}}}render(){return n.x`<slot></slot>`}};t._([t.n({type:Number,attribute:"select-limit"})],r.prototype,"selectLimit",void 0),t._([t.n({type:Boolean,attribute:"is-flexible-reporting"})],r.prototype,"isFlexibleReporting",void 0),t._([t.n({type:String,attribute:"data-nextaction"})],r.prototype,"nextActionType",void 0),t._([t.n({type:String,attribute:"data-next-step"})],r.prototype,"nextStep",void 0),t._([t.n({type:Boolean,attribute:"is-smart-escalations"})],r.prototype,"isSmartEscalations",void 0),r=t._([t.e("multi-content-wrapper")],r);let c=class extends e.F{connectedCallback(){super.connectedCallback(),this._events._events.delete("click"),this._events.define("click",(t=>{const e=t.composedPath();for(let t=0;t<e.length;t++){const s=e[t];if(s instanceof HTMLSpanElement){const t=this.getPageIndexFromSpanWrapper(s);if(0!==t){this.pageIndex=t;break}}}}))}};c=t._([t.e("temporary-tabgroup")],c)}));