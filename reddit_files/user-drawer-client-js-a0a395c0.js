SML.di("./index-970155ae.js",import.meta.url,"index970155ae");SML.di("./shell-e48e5956.js",import.meta.url,"shelle48e5956");SML.di("./icon-c33661e6.js",import.meta.url,"iconc33661e6");SML.di("./community-colors-e93d2571.js",import.meta.url,"communitycolorse93d2571");SML.di("./utils-ef853725.js",import.meta.url,"utilsef853725");SML.di("./translations-a30aa3ad.js",import.meta.url,"translationsa30aa3ad");SML.di("./password-recovery-fc50288b.js",import.meta.url,"passwordrecoveryfc50288b");SML.di("./index-d49d30fd.js",import.meta.url,"indexd49d30fd");SML.di("./rpl-coachmark-card-5c5498b1.js",import.meta.url,"rplcoachmarkcard5c5498b1");SML.di("./rpl-coachmark-4e17786a.js",import.meta.url,"rplcoachmark4e17786a");SML.di("./should-cont-truncate-d81ee171.js",import.meta.url,"shouldconttruncated81ee171");SML.di("./helpers-4792ac4d.js",import.meta.url,"helpers4792ac4d");SML.di("./constants-9e09f052.js",import.meta.url,"constants9e09f052");SML.di("./community-picker-f331f77f.js",import.meta.url,"communitypickerf331f77f");SML.di("./age-gate-standalone-client-js-b13e879d.js",import.meta.url,"agegatestandaloneclientjsb13e879d");SML.di("./tooltip.base-aa9651a3.js",import.meta.url,"tooltipbaseaa9651a3");SML.di("./utils-93db03dd.js",import.meta.url,"utils93db03dd");
SML.dm("userdrawerclientjsa0a395c0",["shelle48e5956","iconc33661e6","communitycolorse93d2571","utilsef853725","translationsa30aa3ad","passwordrecoveryfc50288b","indexd49d30fd","shouldconttruncated81ee171","index970155ae","rplcoachmarkcard5c5498b1","rplcoachmark4e17786a","helpers4792ac4d","constants9e09f052","communitypickerf331f77f","agegatestandaloneclientjsb13e879d","tooltipbaseaa9651a3","utils93db03dd"],(async(e,t,s,a,r,i,n,o)=>{let c=class extends t.s{constructor(){super(...arguments),this.enabled=!1,this.country=""}handler(e){e.preventDefault(),this.setModeCookie({value:this.enabled?"false":"true"});(document.cookie.match(/mod_mode_enabled=/g)||[]).length>1&&this.clearModeCookieDuplicates(),this.windowReload()}setModeCookie({value:t,options:s}){e.$({country:this.country,name:e.cZ,value:t,options:s})}clearModeCookieDuplicates(){this.setModeCookie({value:"",options:{expires:0,path:"/"}})}windowReload(){window.location.reload()}render(){return t.x`<div @click="${this.handler}" @keypress="${this.handler}"> <slot></slot> </div>`}};e._([e.n({type:Boolean})],c.prototype,"enabled",void 0),e._([e.n({type:String})],c.prototype,"country",void 0),c=e._([e.e("shreddit-modmode-setter")],c);let l=class extends t.s{constructor(){super(...arguments),this.country="",this.cookieDomain="",this.pubsub=new e.P(this),this.prefersDarkMediaMatcher=matchMedia("(prefers-color-scheme: dark)"),this.onDarkMediaMathcherChange=e=>{this.faceplateSwitch&&void 0===a.g()&&(this.faceplateSwitch.checked=e.matches)},this.onThemeCookieSynced=()=>{null!=this.faceplateSwitch&&this.faceplateSwitch.checked!==e.i()&&(this.faceplateSwitch.checked=e.i())},this.setUserPreference=async t=>{await e.B({operation:e.O.UpdateAccountPreferences,variables:{input:{isNightModeEnabled:t}}})},this.updateClientStyles=e=>{s.u({isDarkMode:e});const t=this.querySelector("faceplate-switch-input");t&&(t.checked=e)},this.handler=async t=>{this.pubsub.publish(e.T.ThemeCookieSetByUser),t.preventDefault();const s=!e.i();this.canSetThemeCookie()?a.s(this.country,this.cookieDomain,s):e.c_({name:a.D.Darkmode,options:{domain:this.cookieDomain}}),this.updateClientStyles(s),await this.setUserPreference(s)},this.handleKeypress=e=>{"Enter"===e.key&&this.handler(e)}}async connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.ThemeCookieSyncedFromUserPreference,this.onThemeCookieSynced),this.faceplateSwitch&&void 0===a.g()&&this.prefersDarkMediaMatcher.matches&&(this.faceplateSwitch.checked=!0),this.prefersDarkMediaMatcher.addEventListener("change",this.onDarkMediaMathcherChange)}disconnectedCallback(){super.disconnectedCallback(),this.prefersDarkMediaMatcher.removeEventListener("change",this.onDarkMediaMathcherChange)}get faceplateSwitch(){return this.querySelector("faceplate-switch-input")}canSetThemeCookie(){return e.c$({country:this.country,name:a.D.Darkmode})}render(){return t.x`<div @click="${this.handler}" @keypress="${this.handleKeypress}"> <slot></slot> </div>`}};e._([e.n({type:String})],l.prototype,"country",void 0),e._([e.n({type:String,attribute:"cookie-domain"})],l.prototype,"cookieDomain",void 0),l=e._([e.e("shreddit-darkmode-setter")],l);let h=class extends t.s{constructor(){super(...arguments),this.translationContextValue=e.aw,this.pubsub=new e.P(this)}updateTranslationSetting(t){const s=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,isTranslationActive:t}});this.dispatchEvent(s),this.pubsub.publish(e.T.I18nPostTranslationOverride,{isContextUpdateEvent:!0,isTranslationActive:t,id:""})}async handleEvent(t){t.preventDefault(),e.a(this,r.i({isImmersiveTranslationsActive:!this.translationContextValue.isTranslationActive})),this.updateTranslationSetting(!this.translationContextValue.isTranslationActive)}handleKeypress(e){"Enter"!==e.key&&"Space"!==e.key||this.handleEvent(e)}render(){return t.x`<div data-testid="translation-setting-click-setter-button" @click="${this.handleEvent}" @keypress="${this.handleKeypress}" class="flex justify-between items-center pr-md cursor-pointer hover:bg-neutral-background-hover" tabindex="0" role="button" arial-label="Translation setting"> <slot></slot> <faceplate-switch-input data-testid="translation-setting-click-setter-switch-input" class="m-0 [&_label]:hidden" ?checked="${!!this.translationContextValue.isTranslationActive}" name="translation-settings-list-input"></faceplate-switch-input> </div>`}};h.styles=[e.t],e._([e.av({context:e.ax,subscribe:!0}),e.d()],h.prototype,"translationContextValue",void 0),h=e._([e.e("translation-setting-click-setter")],h);let d=class extends t.s{logout(){i.l()}_handleKeypress(e){"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),e.stopPropagation(),this.logout())}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.logout),this.addEventListener("keypress",this._handleKeypress)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.logout),this.removeEventListener("keypress",this._handleKeypress)}createRenderRoot(){return this}};d=e._([e.e("user-drawer-logout")],d);let p=class extends t.s{constructor(){super(...arguments),this._rplCoachMarkRef=e.aq(),this.events=new e.E(this),this._enter=this.events.define("faceplate-enter",this.inView)}get counterValue(){return parseInt(e.l.getItem(e.L.DraftsCoachMarkSeen)??"0")}shouldShow(){return void 0!==this.userId&&n.h(this.userId)&&this.counterValue<2}inView(){this.shouldShow()?(this._rplCoachMarkRef.value?.show(),this.incrementCoachmarkCounter()):this._rplCoachMarkRef.value?.hide()}incrementCoachmarkCounter(){e.l.setItem(e.L.DraftsCoachMarkSeen,(this.counterValue+1).toString())}firstUpdated(t){new e.ar(this,this)}render(){return t.x`<rpl-coachmark placement="bottom" appearance="inverted" ${e.as(this._rplCoachMarkRef)} .anchor="${this.querySelector(`#${this.anchor}`)}"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="inverted" class="mx-xs"> <span class="text-14" slot="title">Save your progress</span> <span class="text-12">Now you can find your unfinished post and comment drafts here</span> ${e.r({attributes:{"aria-label":"Close",slot:"close-button",onclick:()=>{this._rplCoachMarkRef.value?.hide()}},appearance:"plainInverted",leadingIcon:t.C({size:t.I.Small}),size:e.s.Small})} </rpl-coachmark-card> </rpl-coachmark>`}};p.styles=[e.t],e._([e.n({type:String})],p.prototype,"anchor",void 0),e._([e.n({type:String,attribute:"user-id"})],p.prototype,"userId",void 0),p=e._([e.e("drafts-page-coachmark")],p);let u=class extends t.s{constructor(){super(...arguments),this.draftsCount=0,this.events=new e.E(this),this._enter=this.events.define("faceplate-enter",this.updateBadge)}connectedCallback(){super.connectedCallback(),this.updateBadge()}firstUpdated(){new e.ar(this,this)}updateBadge(){if(!this.userId)return;const e=n.g(this.userId);this.draftsCount=e.length}render(){return this.userId?0===this.draftsCount?t.A:o.b({appearance:o.B.INVERTED,content:this.draftsCount.toString()}):t.A}};u.styles=[e.t],e._([e.n({type:String,attribute:"user-id"})],u.prototype,"userId",void 0),e._([e.d()],u.prototype,"draftsCount",void 0),u=e._([e.e("comment-drafts-count")],u)}));